"use strict";var zz=Object.defineProperty,Wz=Object.defineProperties,Kz=Object.getOwnPropertyDescriptors,dU=Object.getOwnPropertySymbols,Yz=Object.prototype.hasOwnProperty,Qz=Object.prototype.propertyIsEnumerable,hU=(ot,Te,F)=>Te in ot?zz(ot,Te,{enumerable:!0,configurable:!0,writable:!0,value:F}):ot[Te]=F,fU=(ot,Te)=>{for(var F in Te||(Te={}))Yz.call(Te,F)&&hU(ot,F,Te[F]);if(dU)for(var F of dU(Te))Qz.call(Te,F)&&hU(ot,F,Te[F]);return ot},pU=(ot,Te)=>Wz(ot,Kz(Te));(self.webpackChunknova_app=self.webpackChunknova_app||[]).push([[179],{2011:(ot,Te,F)=>{F.d(Te,{Dh:()=>ue,GT:()=>ye,cc:()=>Ne,hO:()=>We,on:()=>Z,pX:()=>le,xv:()=>ve});var u=F(5e3),j=F(127),k=F(5813);ot=F.hmd(ot);const ae=["ngOnDestroy"],le=(Ae,ze,Ze,ke={})=>new Proxy(Ae,{get:(Re,Ie)=>Ze.runOutsideAngular(()=>{var Ke;if(Ae[Ie])return(null===(Ke=null==ke?void 0:ke.spy)||void 0===Ke?void 0:Ke.get)&&ke.spy.get(Ie,Ae[Ie]),Ae[Ie];if(ae.indexOf(Ie)>-1)return()=>{};const re=ze.toPromise().then(pe=>{const Se=pe&&pe[Ie];return"function"==typeof Se?Se.bind(pe):Se&&Se.then?Se.then(Q=>Ze.run(()=>Q)):Ze.run(()=>Se)});return new Proxy(()=>{},{get:(pe,Se)=>re[Se],apply:(pe,Se,Q)=>re.then(ie=>{var oe;const Ee=ie&&ie(...Q);return(null===(oe=null==ke?void 0:ke.spy)||void 0===oe?void 0:oe.apply)&&ke.spy.apply(Ie,Q,Ee),Ee})})})}),ye=(Ae,ze)=>{ze.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(ke=>{Object.defineProperty(Ae.prototype,ke,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,ke))})})};class fe{constructor(ze){return ze}}const ue=new u.OlP("angularfire2.app.options"),ve=new u.OlP("angularfire2.app.name");function Z(Ae,ze,Ze){const Re="object"==typeof Ze&&Ze||{};Re.name=Re.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const Ke=j.Z.apps.filter(re=>re&&re.name===Re.name)[0]||ze.runOutsideAngular(()=>j.Z.initializeApp(Ae,Re));try{JSON.stringify(Ae)!==JSON.stringify(Ke.options)&&$("error",`${Ke.name} Firebase App already initialized with different options${ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(re){}return new fe(Ke)}const $=(Ae,...ze)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[Ae](...ze)},se={provide:fe,useFactory:Z,deps:[ue,u.R0b,[new u.FiY,ve]]};let We=(()=>{class Ae{constructor(Ze){j.Z.registerVersion("angularfire",k.q4.full,"core"),j.Z.registerVersion("angularfire",k.q4.full,"app-compat"),j.Z.registerVersion("angular",u.q4F.full,Ze.toString())}static initializeApp(Ze,ke){return{ngModule:Ae,providers:[{provide:ue,useValue:Ze},{provide:ve,useValue:ke}]}}}return Ae.\u0275fac=function(Ze){return new(Ze||Ae)(u.LFG(u.Lbi))},Ae.\u0275mod=u.oAB({type:Ae}),Ae.\u0275inj=u.cJS({providers:[se]}),Ae})();function Ne(Ae,ze,Ze,ke,Re){const[,Ie,Ke]=globalThis.\u0275AngularfireInstanceCache.find(re=>re[0]===Ae)||[];if(Ie)return function Ue(Ae,ze){try{return Ae.toString()===ze.toString()}catch(Ze){return Ae===ze}}(Re,Ke)||(_e("error",`${ze} was already initialized on the ${Ze} Firebase App with different settings.${qe?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:Re,was:Ke})),Ie;{const re=ke();return globalThis.\u0275AngularfireInstanceCache.push([Ae,re,Re]),re}}const qe=!!ot.hot,_e=(Ae,...ze)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[Ae](...ze)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ot,Te,F)=>{F.d(Te,{q4:()=>$o,iC:()=>ps,fc:()=>zo,HU:()=>vc,vb:()=>uu,JM:()=>jy});var u=F(5e3),j=F(5867),k=F(5861),ae=F(9681),le=F(2090),ye=F(4859),fe=F(1877),ue=F(8766);const ve="@firebase/installations",Z="0.5.9",se=`w:${Z}`,We="FIS_v2",ze=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ze(I){return I instanceof le.ZR&&I.code.includes("request-failed")}function ke({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Re(I){return{token:I.token,requestStatus:2,expiresIn:ie(I.expiresIn),creationTime:Date.now()}}function Ie(I,D){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,k.Z)(function*(I,D){const B=(yield D.json()).error;return ze.create("request-failed",{requestName:I,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function re({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function pe(I,{refreshToken:D}){const N=re(I);return N.append("Authorization",function oe(I){return`${We} ${I}`}(D)),N}function Se(I){return Q.apply(this,arguments)}function Q(){return(Q=(0,k.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function ie(I){return Number(I.replace("s","000"))}function Ee(I,D){return he.apply(this,arguments)}function he(){return(he=(0,k.Z)(function*({appConfig:I,heartbeatServiceProvider:D},{fid:N}){const B=ke(I),X=re(I),de=D.getImmediate({optional:!0});if(de){const Mt=yield de.getHeartbeatsHeader();Mt&&X.append("x-firebase-client",Mt)}const Ye={method:"POST",headers:X,body:JSON.stringify({fid:N,authVersion:We,appId:I.appId,sdkVersion:se})},Ct=yield Se(()=>fetch(B,Ye));if(Ct.ok){const Mt=yield Ct.json();return{fid:Mt.fid||N,registrationStatus:2,refreshToken:Mt.refreshToken,authToken:Re(Mt.authToken)}}throw yield Ie("Create Installation",Ct)})).apply(this,arguments)}function Ve(I){return new Promise(D=>{setTimeout(D,I)})}const tn=/^[cdef][\w-]{21}$/;function et(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const N=function _n(I){return function mt(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return tn.test(N)?N:""}catch(I){return""}}function $n(I){return`${I.appName}!${I.appId}`}const yn=new Map;function an(I,D){const N=$n(I);Nn(N,D),function qi(I,D){const N=function Rn(){return!Br&&"BroadcastChannel"in self&&(Br=new BroadcastChannel("[Firebase] FID Change"),Br.onmessage=I=>{Nn(I.data.key,I.data.fid)}),Br}();N&&N.postMessage({key:I,fid:D}),function rs(){0===yn.size&&Br&&(Br.close(),Br=null)}()}(N,D)}function Nn(I,D){const N=yn.get(I);if(N)for(const B of N)B(D)}let Br=null;const qn="firebase-installations-store";let is=null;function wt(){return is||(is=(0,ue.X3)("firebase-installations-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(qn)}})),is}function Yr(I,D){return xn.apply(this,arguments)}function xn(){return(xn=(0,k.Z)(function*(I,D){const N=$n(I),X=(yield wt()).transaction(qn,"readwrite"),de=X.objectStore(qn),Be=yield de.get(N);return yield de.put(D,N),yield X.done,(!Be||Be.fid!==D.fid)&&an(I,D.fid),D})).apply(this,arguments)}function ln(I){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,k.Z)(function*(I){const D=$n(I),B=(yield wt()).transaction(qn,"readwrite");yield B.objectStore(qn).delete(D),yield B.done})).apply(this,arguments)}function cr(I,D){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,k.Z)(function*(I,D){const N=$n(I),X=(yield wt()).transaction(qn,"readwrite"),de=X.objectStore(qn),Be=yield de.get(N),Ye=D(Be);return void 0===Ye?yield de.delete(N):yield de.put(Ye,N),yield X.done,Ye&&(!Be||Be.fid!==Ye.fid)&&an(I,Ye.fid),Ye})).apply(this,arguments)}function Mn(I){return dr.apply(this,arguments)}function dr(){return(dr=(0,k.Z)(function*(I){let D;const N=yield cr(I.appConfig,B=>{const X=Cs(B),de=Gt(I,X);return D=de.registrationPromise,de.installationEntry});return""===N.fid?{installationEntry:yield D}:{installationEntry:N,registrationPromise:D}})).apply(this,arguments)}function Cs(I){return ss(I||{fid:et(),registrationStatus:0})}function Gt(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(ze.create("app-offline"))};const N={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},B=function pt(I,D){return lt.apply(this,arguments)}(I,N);return{installationEntry:N,registrationPromise:B}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Si(I)}:{installationEntry:D}}function lt(){return(lt=(0,k.Z)(function*(I,D){try{const N=yield Ee(I,D);return Yr(I.appConfig,N)}catch(N){throw Ze(N)&&409===N.customData.serverCode?yield ln(I.appConfig):yield Yr(I.appConfig,{fid:D.fid,registrationStatus:0}),N}})).apply(this,arguments)}function Si(I){return Di.apply(this,arguments)}function Di(){return(Di=(0,k.Z)(function*(I){let D=yield Zt(I.appConfig);for(;1===D.registrationStatus;)yield Ve(100),D=yield Zt(I.appConfig);if(0===D.registrationStatus){const{installationEntry:N,registrationPromise:B}=yield Mn(I);return B||N}return D})).apply(this,arguments)}function Zt(I){return cr(I,D=>{if(!D)throw ze.create("installation-not-found");return ss(D)})}function ss(I){return function Gn(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function vn(I,D){return H.apply(this,arguments)}function H(){return(H=(0,k.Z)(function*({appConfig:I,heartbeatServiceProvider:D},N){const B=z(I,N),X=pe(I,N),de=D.getImmediate({optional:!0});if(de){const Mt=yield de.getHeartbeatsHeader();Mt&&X.append("x-firebase-client",Mt)}const Ye={method:"POST",headers:X,body:JSON.stringify({installation:{sdkVersion:se,appId:I.appId}})},Ct=yield Se(()=>fetch(B,Ye));if(Ct.ok)return Re(yield Ct.json());throw yield Ie("Generate Auth Token",Ct)})).apply(this,arguments)}function z(I,{fid:D}){return`${ke(I)}/${D}/authTokens:generate`}function K(I){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,k.Z)(function*(I,D=!1){let N;const B=yield cr(I.appConfig,de=>{if(!Lt(de))throw ze.create("not-registered");const Be=de.authToken;if(!D&&pn(Be))return de;if(1===Be.requestStatus)return N=G(I,D),de;{if(!navigator.onLine)throw ze.create("app-offline");const Ye=ir(de);return N=it(I,Ye),Ye}});return N?yield N:B.authToken})).apply(this,arguments)}function G(I,D){return ee.apply(this,arguments)}function ee(){return(ee=(0,k.Z)(function*(I,D){let N=yield Fe(I.appConfig);for(;1===N.authToken.requestStatus;)yield Ve(100),N=yield Fe(I.appConfig);const B=N.authToken;return 0===B.requestStatus?K(I,D):B})).apply(this,arguments)}function Fe(I){return cr(I,D=>{if(!Lt(D))throw ze.create("not-registered");return function ce(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function it(I,D){return _t.apply(this,arguments)}function _t(){return(_t=(0,k.Z)(function*(I,D){try{const N=yield vn(I,D),B=Object.assign(Object.assign({},D),{authToken:N});return yield Yr(I.appConfig,B),N}catch(N){if(!Ze(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const B=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Yr(I.appConfig,B)}else yield ln(I.appConfig);throw N}})).apply(this,arguments)}function Lt(I){return void 0!==I&&2===I.registrationStatus}function pn(I){return 2===I.requestStatus&&!function St(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function ir(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function W(){return(W=(0,k.Z)(function*(I){const D=I,{installationEntry:N,registrationPromise:B}=yield Mn(D);return B?B.catch(console.error):K(D).catch(console.error),N.fid})).apply(this,arguments)}function Qe(){return(Qe=(0,k.Z)(function*(I,D=!1){const N=I;return yield ft(N),(yield K(N,D)).token})).apply(this,arguments)}function ft(I){return kt.apply(this,arguments)}function kt(){return(kt=(0,k.Z)(function*(I){const{registrationPromise:D}=yield Mn(I);D&&(yield D)})).apply(this,arguments)}function tl(I){return ze.create("missing-app-config-values",{valueName:I})}const pi="installations",Bt=I=>{const D=I.getProvider("app").getImmediate(),N=function vr(I){if(!I||!I.options)throw tl("App Configuration");if(!I.name)throw tl("App Name");const D=["projectId","apiKey","appId"];for(const N of D)if(!I.options[N])throw tl(N);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D);return{app:D,appConfig:N,heartbeatServiceProvider:(0,ae._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},Dn=I=>{const D=I.getProvider("app").getImmediate(),N=(0,ae._getProvider)(D,pi).getImmediate();return{getId:()=>function Y(I){return W.apply(this,arguments)}(N),getToken:X=>function xe(I){return Qe.apply(this,arguments)}(N,X)}};(function Jr(){(0,ae._registerComponent)(new ye.wA(pi,Bt,"PUBLIC")),(0,ae._registerComponent)(new ye.wA("installations-internal",Dn,"PRIVATE"))})(),(0,ae.registerVersion)(ve,Z),(0,ae.registerVersion)(ve,Z,"esm2017");const Ts="@firebase/remote-config",Zn=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Pd{constructor(D,N,B,X){this.client=D,this.storage=N,this.storageCache=B,this.logger=X}isCachedDataFresh(D,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-N,X=B<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${X}.`),X}fetch(D){var N=this;return(0,k.Z)(function*(){const[B,X]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(X&&N.isCachedDataFresh(D.cacheMaxAgeMillis,B))return X;D.eTag=X&&X.eTag;const de=yield N.client.fetch(D),Be=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===de.status&&Be.push(N.storage.setLastSuccessfulFetchResponse(de)),yield Promise.all(Be),de})()}}function Wl(I=navigator){return I.languages&&I.languages[0]||I.language}class sr{constructor(D,N,B,X,de,Be){this.firebaseInstallations=D,this.sdkVersion=N,this.namespace=B,this.projectId=X,this.apiKey=de,this.appId=Be}fetch(D){var N=this;return(0,k.Z)(function*(){const[B,X]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),Be=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,Ye={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},Ct={sdk_version:N.sdkVersion,app_instance_id:B,app_instance_id_token:X,app_id:N.appId,language_code:Wl()},Mt={method:"POST",headers:Ye,body:JSON.stringify(Ct)},Xt=fetch(Be,Mt),Tt=new Promise((Gr,ti)=>{D.signal.addEventListener(()=>{const wc=new Error("The operation was aborted.");wc.name="AbortError",ti(wc)})});let ei;try{yield Promise.race([Xt,Tt]),ei=yield Xt}catch(Gr){let ti="fetch-client-network";throw"AbortError"===Gr.name&&(ti="fetch-timeout"),Zn.create(ti,{originalErrorMessage:Gr.message})}let pr=ei.status;const go=ei.headers.get("ETag")||void 0;let Ri,Ei;if(200===ei.status){let Gr;try{Gr=yield ei.json()}catch(ti){throw Zn.create("fetch-client-parse",{originalErrorMessage:ti.message})}Ri=Gr.entries,Ei=Gr.state}if("INSTANCE_STATE_UNSPECIFIED"===Ei?pr=500:"NO_CHANGE"===Ei?pr=304:("NO_TEMPLATE"===Ei||"EMPTY_CONFIG"===Ei)&&(Ri={}),304!==pr&&200!==pr)throw Zn.create("fetch-status",{httpStatus:pr});return{status:pr,eTag:go,config:Ri}})()}}class Ss{constructor(D,N){this.client=D,this.storage=N}fetch(D){var N=this;return(0,k.Z)(function*(){const B=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(D,B)})()}attemptFetch(D,{throttleEndTimeMillis:N,backoffCount:B}){var X=this;return(0,k.Z)(function*(){yield function Nd(I,D){return new Promise((N,B)=>{const X=Math.max(D-Date.now(),0),de=setTimeout(N,X);I.addEventListener(()=>{clearTimeout(de),B(Zn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,N);try{const de=yield X.client.fetch(D);return yield X.storage.deleteThrottleMetadata(),de}catch(de){if(!function zg(I){if(!(I instanceof le.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(de))throw de;const Be={throttleEndTimeMillis:Date.now()+(0,le.$s)(B),backoffCount:B+1};return yield X.storage.setThrottleMetadata(Be),X.attemptFetch(D,Be)}})()}}class Kg{constructor(D,N,B,X,de){this.app=D,this._client=N,this._storageCache=B,this._storage=X,this._logger=de,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function nl(I,D){const N=I.target.error||void 0;return Zn.create(D,{originalErrorMessage:N&&N.message})}const ga="app_namespace_store";class Od{constructor(D,N,B,X=function Qg(){return new Promise((I,D)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=B=>{D(nl(B,"storage-open"))},N.onsuccess=B=>{I(B.target.result)},N.onupgradeneeded=B=>{0===B.oldVersion&&B.target.result.createObjectStore(ga,{keyPath:"compositeKey"})}}catch(N){D(Zn.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=D,this.appName=N,this.namespace=B,this.openDbPromise=X}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var N=this;return(0,k.Z)(function*(){const B=yield N.openDbPromise;return new Promise((X,de)=>{const Ye=B.transaction([ga],"readonly").objectStore(ga),Ct=N.createCompositeKey(D);try{const Mt=Ye.get(Ct);Mt.onerror=Xt=>{de(nl(Xt,"storage-get"))},Mt.onsuccess=Xt=>{const Tt=Xt.target.result;X(Tt?Tt.value:void 0)}}catch(Mt){de(Zn.create("storage-get",{originalErrorMessage:Mt&&Mt.message}))}})})()}set(D,N){var B=this;return(0,k.Z)(function*(){const X=yield B.openDbPromise;return new Promise((de,Be)=>{const Ct=X.transaction([ga],"readwrite").objectStore(ga),Mt=B.createCompositeKey(D);try{const Xt=Ct.put({compositeKey:Mt,value:N});Xt.onerror=Tt=>{Be(nl(Tt,"storage-set"))},Xt.onsuccess=()=>{de()}}catch(Xt){Be(Zn.create("storage-set",{originalErrorMessage:Xt&&Xt.message}))}})})()}delete(D){var N=this;return(0,k.Z)(function*(){const B=yield N.openDbPromise;return new Promise((X,de)=>{const Ye=B.transaction([ga],"readwrite").objectStore(ga),Ct=N.createCompositeKey(D);try{const Mt=Ye.delete(Ct);Mt.onerror=Xt=>{de(nl(Xt,"storage-delete"))},Mt.onsuccess=()=>{X()}}catch(Mt){de(Zn.create("storage-delete",{originalErrorMessage:Mt&&Mt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class ma{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,k.Z)(function*(){const N=D.storage.getLastFetchStatus(),B=D.storage.getLastSuccessfulFetchTimestampMillis(),X=D.storage.getActiveConfig(),de=yield N;de&&(D.lastFetchStatus=de);const Be=yield B;Be&&(D.lastSuccessfulFetchTimestampMillis=Be);const Ye=yield X;Ye&&(D.activeConfig=Ye)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Vy(){return rl.apply(this,arguments)}function rl(){return(rl=(0,k.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(I){return!1}})).apply(this,arguments)}!function Jg(){(0,ae._registerComponent)(new ye.wA("remote-config",function I(D,{instanceIdentifier:N}){const B=D.getProvider("app").getImmediate(),X=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Zn.create("registration-window");if(!(0,le.hl)())throw Zn.create("indexed-db-unavailable");const{projectId:de,apiKey:Be,appId:Ye}=B.options;if(!de)throw Zn.create("registration-project-id");if(!Be)throw Zn.create("registration-api-key");if(!Ye)throw Zn.create("registration-app-id");const Ct=new Od(Ye,B.name,N=N||"firebase"),Mt=new ma(Ct),Xt=new fe.Yd(Ts);Xt.logLevel=fe.in.ERROR;const Tt=new sr(X,ae.SDK_VERSION,N,de,Be,Ye),ei=new Ss(Tt,Ct),pr=new Pd(ei,Ct,Mt,Xt),go=new Kg(B,pr,Mt,Ct,Xt);return function wn(I){const D=(0,le.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(go),go},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Ts,"0.3.8"),(0,ae.registerVersion)(Ts,"0.3.8","esm2017")}();const As="/firebase-messaging-sw.js",Mi="/firebase-cloud-messaging-push-scope",Mo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",sl="google.c.a.c_id",zf="google.c.a.c_l",Xg="google.c.a.ts",Po="google.c.a.e";var xs=(()=>{return(I=xs||(xs={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",xs;var I})();function zi(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ld(I){const N=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(N),X=new Uint8Array(B.length);for(let de=0;de<B.length;++de)X[de]=B.charCodeAt(de);return X}const Hr="fcm_token_details_db",Ud="fcm_token_object_Store";function Vd(I){return Kl.apply(this,arguments)}function Kl(){return Kl=(0,k.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(de=>de.name).includes(Hr))return null;let D=null;return(yield(0,ue.X3)(Hr,5,{upgrade:(B=(0,k.Z)(function*(X,de,Be,Ye){var Ct;if(de<2||!X.objectStoreNames.contains(Ud))return;const Mt=Ye.objectStore(Ud),Xt=yield Mt.index("fcmSenderId").get(I);if(yield Mt.clear(),Xt)if(2===de){const Tt=Xt;if(!Tt.auth||!Tt.p256dh||!Tt.endpoint)return;D={token:Tt.fcmToken,createTime:null!==(Ct=Tt.createTime)&&void 0!==Ct?Ct:Date.now(),subscriptionOptions:{auth:Tt.auth,p256dh:Tt.p256dh,endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:"string"==typeof Tt.vapidKey?Tt.vapidKey:zi(Tt.vapidKey)}}}else if(3===de){const Tt=Xt;D={token:Tt.fcmToken,createTime:Tt.createTime,subscriptionOptions:{auth:zi(Tt.auth),p256dh:zi(Tt.p256dh),endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:zi(Tt.vapidKey)}}}else if(4===de){const Tt=Xt;D={token:Tt.fcmToken,createTime:Tt.createTime,subscriptionOptions:{auth:zi(Tt.auth),p256dh:zi(Tt.p256dh),endpoint:Tt.endpoint,swScope:Tt.swScope,vapidKey:zi(Tt.vapidKey)}}}}),function(de,Be,Ye,Ct){return B.apply(this,arguments)})})).close(),yield(0,ue.Lj)(Hr),yield(0,ue.Lj)("fcm_vapid_details_db"),yield(0,ue.Lj)("undefined"),Yl(D)?D:null;var B}),Kl.apply(this,arguments)}function Yl(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const Ms="firebase-messaging-store";let nc=null;function Cn(){return nc||(nc=(0,ue.X3)("firebase-messaging-database",1,{upgrade:(I,D)=>{0===D&&I.createObjectStore(Ms)}})),nc}function ol(I){return io.apply(this,arguments)}function io(){return(io=(0,k.Z)(function*(I){const D=wr(I),B=yield(yield Cn()).transaction(Ms).objectStore(Ms).get(D);if(B)return B;{const X=yield Vd(I.appConfig.senderId);if(X)return yield En(I,X),X}})).apply(this,arguments)}function En(I,D){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,k.Z)(function*(I,D){const N=wr(I),X=(yield Cn()).transaction(Ms,"readwrite");return yield X.objectStore(Ms).put(D,N),yield X.done,D})).apply(this,arguments)}function al(I){return No.apply(this,arguments)}function No(){return(No=(0,k.Z)(function*(I){const D=wr(I),B=(yield Cn()).transaction(Ms,"readwrite");yield B.objectStore(Ms).delete(D),yield B.done})).apply(this,arguments)}function wr({appConfig:I}){return I.appId}const zn=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ps(I,D){return Er.apply(this,arguments)}function Er(){return(Er=(0,k.Z)(function*(I,D){const N=yield oo(I),B=ll(D),X={method:"POST",headers:N,body:JSON.stringify(B)};let de;try{de=yield(yield fetch(so(I.appConfig),X)).json()}catch(Be){throw zn.create("token-subscribe-failed",{errorInfo:Be})}if(de.error)throw zn.create("token-subscribe-failed",{errorInfo:de.error.message});if(!de.token)throw zn.create("token-subscribe-no-token");return de.token})).apply(this,arguments)}function _a(I,D){return as.apply(this,arguments)}function as(){return(as=(0,k.Z)(function*(I,D){const N=yield oo(I),B=ll(D.subscriptionOptions),X={method:"PATCH",headers:N,body:JSON.stringify(B)};let de;try{de=yield(yield fetch(`${so(I.appConfig)}/${D.token}`,X)).json()}catch(Be){throw zn.create("token-update-failed",{errorInfo:Be})}if(de.error)throw zn.create("token-update-failed",{errorInfo:de.error.message});if(!de.token)throw zn.create("token-update-no-token");return de.token})).apply(this,arguments)}function rc(I,D){return gi.apply(this,arguments)}function gi(){return(gi=(0,k.Z)(function*(I,D){const B={method:"DELETE",headers:yield oo(I)};try{const de=yield(yield fetch(`${so(I.appConfig)}/${D}`,B)).json();if(de.error)throw zn.create("token-unsubscribe-failed",{errorInfo:de.error.message})}catch(X){throw zn.create("token-unsubscribe-failed",{errorInfo:X})}})).apply(this,arguments)}function so({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function oo(I){return bt.apply(this,arguments)}function bt(){return(bt=(0,k.Z)(function*({appConfig:I,installations:D}){const N=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function ll({p256dh:I,auth:D,endpoint:N,vapidKey:B}){const X={web:{endpoint:N,auth:D,p256dh:I}};return B!==Mo&&(X.web.applicationPubKey=B),X}const ul=6048e5;function Bd(I){return cl.apply(this,arguments)}function cl(){return(cl=(0,k.Z)(function*(I){const D=yield jn(I.swRegistration,I.vapidKey),N={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:zi(D.getKey("auth")),p256dh:zi(D.getKey("p256dh"))},B=yield ol(I.firebaseDependencies);if(B){if(fl(B.subscriptionOptions,N))return Date.now()>=B.createTime+ul?Wf(I,{token:B.token,createTime:Date.now(),subscriptionOptions:N}):B.token;try{yield rc(I.firebaseDependencies,B.token)}catch(X){console.warn(X)}return zt(I.firebaseDependencies,N)}return zt(I.firebaseDependencies,N)})).apply(this,arguments)}function ic(I){return dl.apply(this,arguments)}function dl(){return(dl=(0,k.Z)(function*(I){const D=yield ol(I.firebaseDependencies);D&&(yield rc(I.firebaseDependencies,D.token),yield al(I.firebaseDependencies));const N=yield I.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function Wf(I,D){return Me.apply(this,arguments)}function Me(){return(Me=(0,k.Z)(function*(I,D){try{const N=yield _a(I.firebaseDependencies,D),B=Object.assign(Object.assign({},D),{token:N,createTime:Date.now()});return yield En(I.firebaseDependencies,B),N}catch(N){throw yield ic(I),N}})).apply(this,arguments)}function zt(I,D){return hl.apply(this,arguments)}function hl(){return(hl=(0,k.Z)(function*(I,D){const B={token:yield Ps(I,D),createTime:Date.now(),subscriptionOptions:D};return yield En(I,B),B.token})).apply(this,arguments)}function jn(I,D){return ao.apply(this,arguments)}function ao(){return(ao=(0,k.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ld(D)})})).apply(this,arguments)}function fl(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function Xr(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function sc(I,D){if(!D.notification)return;I.notification={};const N=D.notification.title;N&&(I.notification.title=N);const B=D.notification.body;B&&(I.notification.body=B);const X=D.notification.image;X&&(I.notification.image=X)}(D,I),function oc(I,D){!D.data||(I.data=D.data)}(D,I),function jd(I,D){if(!D.fcmOptions)return;I.fcmOptions={};const N=D.fcmOptions.link;N&&(I.fcmOptions.link=N);const B=D.fcmOptions.analytics_label;B&&(I.fcmOptions.analyticsLabel=B)}(D,I),D}function Hd(I){return"object"==typeof I&&!!I&&sl in I}function pl(I,D){const N=[];for(let B=0;B<I.length;B++)N.push(I.charAt(B)),B<D.length&&N.push(D.charAt(B));return N.join("")}function fr(I){return zn.create("missing-app-config-values",{valueName:I})}pl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),pl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Wi{constructor(D,N,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const X=function ya(I){if(!I||!I.options)throw fr("App Configuration Object");if(!I.name)throw fr("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:N}=I;for(const B of D)if(!N[B])throw fr(B);return{appName:I.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:X,installations:N,analyticsProvider:B}}_delete(){return Promise.resolve()}}function ac(I){return ls.apply(this,arguments)}function ls(){return(ls=(0,k.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(As,{scope:Mi}),I.swRegistration.update().catch(()=>{})}catch(D){throw zn.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function Ns(I,D){return gl.apply(this,arguments)}function gl(){return(gl=(0,k.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield ac(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw zn.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function $d(I,D){return ml.apply(this,arguments)}function ml(){return(ml=(0,k.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=Mo)})).apply(this,arguments)}function ko(){return(ko=(0,k.Z)(function*(I,D){if(!navigator)throw zn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw zn.create("permission-blocked");return yield $d(I,null==D?void 0:D.vapidKey),yield Ns(I,null==D?void 0:D.serviceWorkerRegistration),Bd(I)})).apply(this,arguments)}function va(I,D,N){return _l.apply(this,arguments)}function _l(){return(_l=(0,k.Z)(function*(I,D,N){const B=lc(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:N[sl],message_name:N[zf],message_time:N[Xg],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function lc(I){switch(I){case xs.NOTIFICATION_CLICKED:return"notification_open";case xs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function eu(){return(eu=(0,k.Z)(function*(I,D){const N=D.data;if(!N.isFirebaseMessaging)return;I.onMessageHandler&&N.messageType===xs.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Xr(N)):I.onMessageHandler.next(Xr(N)));const B=N.data;Hd(B)&&"1"===B[Po]&&(yield va(I,N.messageType,B))})).apply(this,arguments)}const Ro="@firebase/messaging",Oo=I=>{const D=new Wi(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function em(I,D){return eu.apply(this,arguments)}(D,N)),D},Gd=I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:B=>function qd(I,D){return ko.apply(this,arguments)}(D,B)}};function wa(){return us.apply(this,arguments)}function us(){return(us=(0,k.Z)(function*(){try{yield(0,le.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Kf(){(0,ae._registerComponent)(new ye.wA("messaging",Oo,"PUBLIC")),(0,ae._registerComponent)(new ye.wA("messaging-internal",Gd,"PRIVATE")),(0,ae.registerVersion)(Ro,"0.9.13"),(0,ae.registerVersion)(Ro,"0.9.13","esm2017")}();const Zd="analytics",tm="firebase_id",vl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",tu="https://www.googletagmanager.com/gtag/js",Cr=new fe.Yd("@firebase/analytics");function Jf(I){return Promise.all(I.map(D=>D.catch(N=>N)))}function Fo(I,D){const N=document.createElement("script");N.src=`${tu}?l=${I}&id=${D}`,N.async=!0,document.head.appendChild(N)}function zd(I,D,N,B,X,de){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,k.Z)(function*(I,D,N,B,X,de){const Be=B[X];try{if(Be)yield D[Be];else{const Ct=(yield Jf(N)).find(Mt=>Mt.measurementId===X);Ct&&(yield D[Ct.appId])}}catch(Ye){Cr.error(Ye)}I("config",X,de)})).apply(this,arguments)}function Lo(I,D,N,B,X){return wl.apply(this,arguments)}function wl(){return(wl=(0,k.Z)(function*(I,D,N,B,X){try{let de=[];if(X&&X.send_to){let Be=X.send_to;Array.isArray(Be)||(Be=[Be]);const Ye=yield Jf(N);for(const Ct of Be){const Mt=Ye.find(Tt=>Tt.measurementId===Ct),Xt=Mt&&D[Mt.appId];if(!Xt){de=[];break}de.push(Xt)}}0===de.length&&(de=Object.values(D)),yield Promise.all(de),I("event",B,X||{})}catch(de){Cr.error(de)}})).apply(this,arguments)}function Pn(){const I=window.document.getElementsByTagName("script");for(const D of Object.values(I))if(D.src&&D.src.includes(tu))return D;return null}const Tr=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ru=new class nu{constructor(D={},N=1e3){this.throttleMetadata=D,this.intervalMillis=N}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,N){this.throttleMetadata[D]=N}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function ba(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function ds(I){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,k.Z)(function*(I){var D;const{appId:N,apiKey:B}=I,X={method:"GET",headers:ba(B)},de=vl.replace("{app-id}",N),Be=yield fetch(de,X);if(200!==Be.status&&304!==Be.status){let Ye="";try{const Ct=yield Be.json();(null===(D=Ct.error)||void 0===D?void 0:D.message)&&(Ye=Ct.error.message)}catch(Ct){}throw Tr.create("config-fetch-failed",{httpStatus:Be.status,responseMessage:Ye})}return Be.json()})).apply(this,arguments)}function On(I){return yt.apply(this,arguments)}function yt(){return(yt=(0,k.Z)(function*(I,D=ru,N){const{appId:B,apiKey:X,measurementId:de}=I.options;if(!B)throw Tr.create("no-app-id");if(!X){if(de)return{measurementId:de,appId:B};throw Tr.create("no-api-key")}const Be=D.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new Kd;return setTimeout((0,k.Z)(function*(){Ye.abort()}),void 0!==N?N:6e4),bl({appId:B,apiKey:X,measurementId:de},Be,Ye,D)})).apply(this,arguments)}function bl(I,D,N){return iu.apply(this,arguments)}function iu(){return(iu=(0,k.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:N},B,X=ru){const{appId:de,measurementId:Be}=I;try{yield cc(B,D)}catch(Ye){if(Be)return Cr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Be} provided in the "measurementId" field in the local Firebase config. [${Ye.message}]`),{appId:de,measurementId:Be};throw Ye}try{const Ye=yield ds(I);return X.deleteThrottleMetadata(de),Ye}catch(Ye){if(!dc(Ye)){if(X.deleteThrottleMetadata(de),Be)return Cr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Be} provided in the "measurementId" field in the local Firebase config. [${Ye.message}]`),{appId:de,measurementId:Be};throw Ye}const Ct=503===Number(Ye.customData.httpStatus)?(0,le.$s)(N,X.intervalMillis,30):(0,le.$s)(N,X.intervalMillis),Mt={throttleEndTimeMillis:Date.now()+Ct,backoffCount:N+1};return X.setThrottleMetadata(de,Mt),Cr.debug(`Calling attemptFetch again in ${Ct} millis`),bl(I,Mt,B,X)}})).apply(this,arguments)}function cc(I,D){return new Promise((N,B)=>{const X=Math.max(D-Date.now(),0),de=setTimeout(N,X);I.addEventListener(()=>{clearTimeout(de),B(Tr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function dc(I){if(!(I instanceof le.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Kd{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function Yd(){return kr.apply(this,arguments)}function kr(){return(kr=(0,k.Z)(function*(){if(!(0,le.hl)())return Cr.warn(Tr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(I){return Cr.warn(Tr.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Os(){return(Os=(0,k.Z)(function*(I,D,N,B,X,de,Be){var Ye;const Ct=On(I);Ct.then(pr=>{N[pr.measurementId]=pr.appId,I.options.measurementId&&pr.measurementId!==I.options.measurementId&&Cr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${pr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(pr=>Cr.error(pr)),D.push(Ct);const Mt=Yd().then(pr=>{if(pr)return B.getId()}),[Xt,Tt]=yield Promise.all([Ct,Mt]);Pn()||Fo(de,Xt.measurementId),X("js",new Date);const ei=null!==(Ye=null==Be?void 0:Be.config)&&void 0!==Ye?Ye:{};return ei.origin="firebase",ei.update=!0,null!=Tt&&(ei[tm]=Tt),X("config",Xt.measurementId,ei),Xt.measurementId})).apply(this,arguments)}class lo{constructor(D){this.app=D}_delete(){return delete Pi[this.app.options.appId],Promise.resolve()}}let Pi={},su=[];const ou={};let Ca,Kn,_i="dataLayer",fs=!1;function fc(I,D,N){!function or(){const I=[];if((0,le.ru)()&&I.push("This is a browser extension environment."),(0,le.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((B,X)=>`(${X+1}) ${B}`).join(" "),N=Tr.create("invalid-analytics-context",{errorInfo:D});Cr.warn(N.message)}}();const B=I.options.appId;if(!B)throw Tr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw Tr.create("no-api-key");Cr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Pi[B])throw Tr.create("already-exists",{id:B});if(!fs){!function Ea(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(_i);const{wrappedGtag:de,gtagCore:Be}=function nm(I,D,N,B,X){let de=function(...Be){window[B].push(arguments)};return window[X]&&"function"==typeof window[X]&&(de=window[X]),window[X]=function Xf(I,D,N,B){function de(){return(de=(0,k.Z)(function*(Be,Ye,Ct){try{"event"===Be?yield Lo(I,D,N,Ye,Ct):"config"===Be?yield zd(I,D,N,B,Ye,Ct):I("set",Ye)}catch(Mt){Cr.error(Mt)}})).apply(this,arguments)}return function X(Be,Ye,Ct){return de.apply(this,arguments)}}(de,I,D,N),{gtagCore:de,wrappedGtag:window[X]}}(Pi,su,ou,_i,"gtag");Kn=de,Ca=Be,fs=!0}return Pi[B]=function mi(I,D,N,B,X,de,Be){return Os.apply(this,arguments)}(I,su,ou,D,Ca,_i,N),new lo(I)}function Cl(){return(Cl=(0,k.Z)(function*(I,D,N,B,X){if(X&&X.global)I("event",N,B);else{const de=yield D;I("event",N,Object.assign(Object.assign({},B),{send_to:de}))}})).apply(this,arguments)}function rm(){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,k.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(I){return!1}})).apply(this,arguments)}const mc="@firebase/analytics";!function Xd(){(0,ae._registerComponent)(new ye.wA(Zd,(D,{options:N})=>fc(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,ae._registerComponent)(new ye.wA("analytics-internal",function I(D){try{const N=D.getProvider(Zd).getImmediate();return{logEvent:(B,X,de)=>function np(I,D,N,B){I=(0,le.m9)(I),function pc(I,D,N,B,X){return Cl.apply(this,arguments)}(Kn,Pi[I.app.options.appId],D,N,B).catch(X=>Cr.error(X))}(N,B,X,de)}}catch(N){throw Tr.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,ae.registerVersion)(mc,"0.7.9"),(0,ae.registerVersion)(mc,"0.7.9","esm2017")}();var ho=F(4408),Xn=F(7565);const Ni=new class Ia extends Xn.v{}(class _c extends ho.o{constructor(D,N){super(D,N),this.scheduler=D,this.work=N}schedule(D,N=0){return N>0?super.schedule(D,N):(this.delay=N,this.state=D,this.scheduler.flush(this),this)}execute(D,N){return N>0||this.closed?super.execute(D,N):this._execute(D,N)}requestAsyncId(D,N,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(D,N,B):D.flush(this)}});var eh=F(4986),yi=F(8505),vi=F(5363),fo=F(9468);const $o=new u.GfV("7.3.0"),Yi="__angularfire_symbol__analyticsIsSupportedValue",qo="__angularfire_symbol__analyticsIsSupported",Fs="__angularfire_symbol__remoteConfigIsSupportedValue",Go="__angularfire_symbol__remoteConfigIsSupported",th="__angularfire_symbol__messagingIsSupportedValue",rp="__angularfire_symbol__messagingIsSupported";function jy(I,D,N){if(D){if(1===D.length)return D[0];const de=D.filter(Be=>Be.app===N);if(1===de.length)return de[0]}return N.container.getProvider(I).getImmediate({optional:!0})}globalThis[qo]||(globalThis[qo]=rm().then(I=>globalThis[Yi]=I).catch(()=>globalThis[Yi]=!1)),globalThis[rp]||(globalThis[rp]=wa().then(I=>globalThis[th]=I).catch(()=>globalThis[th]=!1)),globalThis[Go]||(globalThis[Go]=Vy().then(I=>globalThis[Fs]=I).catch(()=>globalThis[Fs]=!1));const uu=(I,D)=>{const N=D?[D]:(0,j.C6)(),B=[];return N.forEach(X=>{X.container.getProvider(I).instances.forEach(Be=>{B.includes(Be)||B.push(Be)})}),B};function Zo(){}class cu{constructor(D,N=Ni){this.zone=D,this.delegate=N}now(){return this.delegate.now()}schedule(D,N,B){const X=this.zone;return this.delegate.schedule(function(Be){X.runGuarded(()=>{D.apply(this,[Be])})},N,B)}}class ip{constructor(D){this.zone=D,this.task=null}call(D,N){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zo,{},Zo,Zo)),N.pipe((0,yi.b)({next:B,complete:B,error:B})).subscribe(D).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let vc=(()=>{class I{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new cu(Zone.current)),this.insideAngular=N.run(()=>new cu(Zone.current,eh.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(N){return new(N||I)(u.LFG(u.R0b))},I.\u0275prov=u.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ki(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function zo(I){return I.pipe((0,vi.Q)(ki().outsideAngular))}function ps(I){return ki(),function po(I){return function(N){return(N=N.lift(new ip(I.ngZone))).pipe((0,fo.R)(I.outsideAngular),(0,vi.Q)(I.insideAngular))}}(ki())(I)}},2587:(ot,Te,F)=>{F.d(Te,{$:()=>so,A:()=>$,B:()=>Ne,G:()=>Dn,H:()=>gn,J:()=>Ss,L:()=>pn,M:()=>rl,N:()=>il,P:()=>qo,Q:()=>sl,R:()=>Xd,T:()=>zf,U:()=>Mo,V:()=>xs,W:()=>zi,X:()=>Vd,Y:()=>Xl,Z:()=>Ps,_:()=>_a,a:()=>El,a0:()=>Bd,a1:()=>ic,a2:()=>Wf,a3:()=>zt,a4:()=>jn,a5:()=>fl,a6:()=>sc,a7:()=>oc,a8:()=>Hd,a9:()=>pl,aA:()=>wc,aB:()=>go,aC:()=>I,aD:()=>sm,aE:()=>He,aI:()=>ba,aL:()=>Po,aa:()=>ac,ab:()=>Ns,ac:()=>$d,af:()=>va,ag:()=>lc,ah:()=>em,ak:()=>Ms,al:()=>br,an:()=>tu,ao:()=>Wd,ap:()=>Qn,aq:()=>Se,ar:()=>$t,as:()=>ft,at:()=>Ze,au:()=>Ls,av:()=>rh,aw:()=>ke,ax:()=>re,ay:()=>ie,az:()=>St,b:()=>Tr,c:()=>jy,d:()=>ip,e:()=>Zo,f:()=>B,g:()=>Mt,h:()=>Be,i:()=>fc,j:()=>ei,k:()=>cm,l:()=>Ni,m:()=>zy,o:()=>ue,r:()=>eh,s:()=>Xn,u:()=>$o});var u=F(5861),j=F(2090),k=F(9681),ae=F(1230),le=F(1877),ye=F(4859);const ue={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},$={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ne=function se(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ue=function We(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},qe=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ae=new le.Yd("@firebase/auth");function ze(w,...m){Ae.logLevel<=le.in.ERROR&&Ae.error(`Auth (${k.SDK_VERSION}): ${w}`,...m)}function Ze(w,...m){throw Ke(w,...m)}function ke(w,...m){return Ke(w,...m)}function Re(w,m,_){const b=Object.assign(Object.assign({},Ue()),{[m]:_});return new j.LL("auth","Firebase",b).create(m,{appName:w.name})}function Ie(w,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&Ze(w,"argument-error"),Re(w,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ke(w,...m){if("string"!=typeof w){const _=m[0],b=[...m.slice(1)];return b[0]&&(b[0].appName=w.name),w._errorFactory.create(_,...b)}return qe.create(w,...m)}function re(w,m,..._){if(!w)throw Ke(m,..._)}function pe(w){const m="INTERNAL ASSERTION FAILED: "+w;throw ze(m),new Error(m)}function Se(w,m){w||pe(m)}const Q=new Map;function ie(w){Se(w instanceof Function,"Expected a class definition");let m=Q.get(w);return m?(Se(m instanceof w,"Instance stored in cache mismatched with class"),m):(m=new w,Q.set(w,m),m)}function he(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Ve(){return"http:"===mt()||"https:"===mt()}function mt(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class et{constructor(m,_){this.shortDelay=m,this.longDelay=_,Se(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function tn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ve()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _n(w,m){Se(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class $n{static initialize(m,_,b){this.fetchImpl=m,_&&(this.headersImpl=_),b&&(this.responseImpl=b)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void pe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void pe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void pe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},an=new et(3e4,6e4);function Ht(w,m){return w.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:w.tenantId}):m}function nn(w,m,_,b){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,u.Z)(function*(w,m,_,b,M={}){return qi(w,M,(0,u.Z)(function*(){let L={},ne={};b&&("GET"===m?ne=b:L={body:JSON.stringify(b)});const Oe=(0,j.xO)(Object.assign({key:w.config.apiKey},ne)).slice(1),at=yield w._getAdditionalHeaders();return at["Content-Type"]="application/json",w.languageCode&&(at["X-Firebase-Locale"]=w.languageCode),$n.fetch()(Ii(w,w.config.apiHost,_,Oe),Object.assign({method:m,headers:at,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function qi(w,m,_){return Br.apply(this,arguments)}function Br(){return(Br=(0,u.Z)(function*(w,m,_){w._canInitEmulator=!1;const b=Object.assign(Object.assign({},yn),m);try{const M=new Gi(w),L=yield Promise.race([_(),M.promise]);M.clearNetworkTimeout();const ne=yield L.json();if("needConfirmation"in ne)throw qn(w,"account-exists-with-different-credential",ne);if(L.ok&&!("errorMessage"in ne))return ne;{const Oe=L.ok?ne.errorMessage:ne.error.message,[at,Et]=Oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===at)throw qn(w,"credential-already-in-use",ne);if("EMAIL_EXISTS"===at)throw qn(w,"email-already-in-use",ne);if("USER_DISABLED"===at)throw qn(w,"user-disabled",ne);const Wt=b[at]||at.toLowerCase().replace(/[_\s]+/g,"-");if(Et)throw Re(w,Wt,Et);Ze(w,Wt)}}catch(M){if(M instanceof j.ZR)throw M;Ze(w,"network-request-failed")}})).apply(this,arguments)}function Rn(w,m,_,b){return rs.apply(this,arguments)}function rs(){return(rs=(0,u.Z)(function*(w,m,_,b,M={}){const L=yield nn(w,m,_,b,M);return"mfaPendingCredential"in L&&Ze(w,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function Ii(w,m,_,b){const M=`${m}${_}?${b}`;return w.config.emulator?_n(w.config,M):`${w.config.apiScheme}://${M}`}class Gi{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,b)=>{this.timer=setTimeout(()=>b(ke(this.auth,"network-request-failed")),an.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qn(w,m,_){const b={appName:w.name};_.email&&(b.email=_.email),_.phoneNumber&&(b.phoneNumber=_.phoneNumber);const M=ke(w,m,b);return M.customData._tokenResponse=_,M}function wt(){return(wt=(0,u.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Yr(w,m){return xn.apply(this,arguments)}function xn(){return(xn=(0,u.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function ln(w,m){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,u.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function cr(w){if(w)try{const m=new Date(Number(w));if(!isNaN(m.getTime()))return m.toUTCString()}catch(m){}}function dr(){return(dr=(0,u.Z)(function*(w,m=!1){const _=(0,j.m9)(w),b=yield _.getIdToken(m),M=Gt(b);re(M&&M.exp&&M.auth_time&&M.iat,_.auth,"internal-error");const L="object"==typeof M.firebase?M.firebase:void 0,ne=null==L?void 0:L.sign_in_provider;return{claims:M,token:b,authTime:cr(Cs(M.auth_time)),issuedAtTime:cr(Cs(M.iat)),expirationTime:cr(Cs(M.exp)),signInProvider:ne||null,signInSecondFactor:(null==L?void 0:L.sign_in_second_factor)||null}})).apply(this,arguments)}function Cs(w){return 1e3*Number(w)}function Gt(w){const[m,_,b]=w.split(".");if(void 0===m||void 0===_||void 0===b)return ze("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,j.tV)(_);return M?JSON.parse(M):(ze("Failed to decode base64 JWT payload"),null)}catch(M){return ze("Caught error parsing JWT payload as JSON",M),null}}function lt(w,m){return Si.apply(this,arguments)}function Si(){return(Si=(0,u.Z)(function*(w,m,_=!1){if(_)return m;try{return yield m}catch(b){throw b instanceof j.ZR&&Di(b)&&w.auth.currentUser===w&&(yield w.auth.signOut()),b}})).apply(this,arguments)}function Di({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Zt{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const b=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),b}{this.errorBackoff=3e4;const M=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const b=this.getInterval(m);this.timerId=setTimeout((0,u.Z)(function*(){yield _.iteration()}),b)}iteration(){var m=this;return(0,u.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&m.schedule(!0))}m.schedule()})()}}class ss{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=cr(this.lastLoginAt),this.creationTime=cr(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Gn(w){return vn.apply(this,arguments)}function vn(){return(vn=(0,u.Z)(function*(w){var m;const _=w.auth,b=yield w.getIdToken(),M=yield lt(w,ln(_,{idToken:b}));re(null==M?void 0:M.users.length,_,"internal-error");const L=M.users[0];w._notifyReloadListener(L);const ne=(null===(m=L.providerUserInfo)||void 0===m?void 0:m.length)?Ce(L.providerUserInfo):[],Oe=K(w.providerData,ne),Wt=!!w.isAnonymous&&!(w.email&&L.passwordHash||(null==Oe?void 0:Oe.length)),Fn={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:Oe,metadata:new ss(L.createdAt,L.lastLoginAt),isAnonymous:Wt};Object.assign(w,Fn)})).apply(this,arguments)}function z(){return(z=(0,u.Z)(function*(w){const m=(0,j.m9)(w);yield Gn(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function K(w,m){return[...w.filter(b=>!m.some(M=>M.providerId===b.providerId)),...m]}function Ce(w){return w.map(m=>{var{providerId:_}=m,b=(0,ae._T)(m,["providerId"]);return{providerId:_,uid:b.rawId||"",displayName:b.displayName||null,email:b.email||null,phoneNumber:b.phoneNumber||null,photoURL:b.photoUrl||null}})}function ee(){return(ee=(0,u.Z)(function*(w,m){const _=yield qi(w,{},(0,u.Z)(function*(){const b=(0,j.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:M,apiKey:L}=w.config,ne=Ii(w,M,"/v1/token",`key=${L}`),Oe=yield w._getAdditionalHeaders();return Oe["Content-Type"]="application/x-www-form-urlencoded",$n.fetch()(ne,{method:"POST",headers:Oe,body:b})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Fe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){re(m.idToken,"internal-error"),re(void 0!==m.idToken,"internal-error"),re(void 0!==m.refreshToken,"internal-error");const _="expiresIn"in m&&void 0!==m.expiresIn?Number(m.expiresIn):function pt(w){const m=Gt(w);return re(m,"internal-error"),re(void 0!==m.exp,"internal-error"),re(void 0!==m.iat,"internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var b=this;return(0,u.Z)(function*(){return re(!b.accessToken||b.refreshToken,m,"user-token-expired"),_||!b.accessToken||b.isExpired?b.refreshToken?(yield b.refresh(m,b.refreshToken),b.accessToken):null:b.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var b=this;return(0,u.Z)(function*(){const{accessToken:M,refreshToken:L,expiresIn:ne}=yield function G(w,m){return ee.apply(this,arguments)}(m,_);b.updateTokensAndExpiration(M,L,Number(ne))})()}updateTokensAndExpiration(m,_,b){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*b}static fromJSON(m,_){const{refreshToken:b,accessToken:M,expirationTime:L}=_,ne=new Fe;return b&&(re("string"==typeof b,"internal-error",{appName:m}),ne.refreshToken=b),M&&(re("string"==typeof M,"internal-error",{appName:m}),ne.accessToken=M),L&&(re("number"==typeof L,"internal-error",{appName:m}),ne.expirationTime=L),ne}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Fe,this.toJSON())}_performRefresh(){return pe("not implemented")}}function it(w,m){re("string"==typeof w||void 0===w,"internal-error",{appName:m})}class _t{constructor(m){var{uid:_,auth:b,stsTokenManager:M}=m,L=(0,ae._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=b,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new ss(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,u.Z)(function*(){const b=yield lt(_,_.stsTokenManager.getToken(_.auth,m));return re(b,_.auth,"internal-error"),_.accessToken!==b&&(_.accessToken=b,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),b})()}getIdTokenResult(m){return function Mn(w){return dr.apply(this,arguments)}(this,m)}reload(){return function H(w){return z.apply(this,arguments)}(this)}_assign(m){this!==m&&(re(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new _t(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var b=this;return(0,u.Z)(function*(){let M=!1;m.idToken&&m.idToken!==b.stsTokenManager.accessToken&&(b.stsTokenManager.updateFromServerResponse(m),M=!0),_&&(yield Gn(b)),yield b.auth._persistUserIfCurrent(b),M&&b.auth._notifyListenersIfCurrent(b)})()}delete(){var m=this;return(0,u.Z)(function*(){const _=yield m.getIdToken();return yield lt(m,function is(w,m){return wt.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var b,M,L,ne,Oe,at,Et,Wt;const Fn=null!==(b=_.displayName)&&void 0!==b?b:void 0,bi=null!==(M=_.email)&&void 0!==M?M:void 0,gs=null!==(L=_.phoneNumber)&&void 0!==L?L:void 0,ah=null!==(ne=_.photoURL)&&void 0!==ne?ne:void 0,Qy=null!==(Oe=_.tenantId)&&void 0!==Oe?Oe:void 0,Dc=null!==(at=_._redirectEventId)&&void 0!==at?at:void 0,Ma=null!==(Et=_.createdAt)&&void 0!==Et?Et:void 0,fm=null!==(Wt=_.lastLoginAt)&&void 0!==Wt?Wt:void 0,{uid:lh,emailVerified:pm,isAnonymous:uh,providerData:gu,stsTokenManager:gm}=_;re(lh&&gm,m,"internal-error");const Ac=Fe.fromJSON(this.name,gm);re("string"==typeof lh,m,"internal-error"),it(Fn,m.name),it(bi,m.name),re("boolean"==typeof pm,m,"internal-error"),re("boolean"==typeof uh,m,"internal-error"),it(gs,m.name),it(ah,m.name),it(Qy,m.name),it(Dc,m.name),it(Ma,m.name),it(fm,m.name);const ch=new _t({uid:lh,auth:m,email:bi,emailVerified:pm,displayName:Fn,isAnonymous:uh,photoURL:ah,phoneNumber:gs,tenantId:Qy,stsTokenManager:Ac,createdAt:Ma,lastLoginAt:fm});return gu&&Array.isArray(gu)&&(ch.providerData=gu.map(gr=>Object.assign({},gr))),Dc&&(ch._redirectEventId=Dc),ch}static _fromIdTokenResponse(m,_,b=!1){return(0,u.Z)(function*(){const M=new Fe;M.updateFromServerResponse(_);const L=new _t({uid:_.localId,auth:m,stsTokenManager:M,isAnonymous:b});return yield Gn(L),L})()}}const pn=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(_,b){var M=this;return(0,u.Z)(function*(){M.storage[_]=b})()}_get(_){var b=this;return(0,u.Z)(function*(){const M=b.storage[_];return void 0===M?null:M})()}_remove(_){var b=this;return(0,u.Z)(function*(){delete b.storage[_]})()}_addListener(_,b){}_removeListener(_,b){}}return w.type="NONE",w})();function St(w,m,_){return`firebase:${w}:${m}:${_}`}class ir{constructor(m,_,b){this.persistence=m,this.auth=_,this.userKey=b;const{config:M,name:L}=this.auth;this.fullUserKey=St(this.userKey,M.apiKey,L),this.fullPersistenceKey=St("persistence",M.apiKey,L),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,u.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?_t._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,u.Z)(function*(){if(_.persistence===m)return;const b=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,b?_.setCurrentUser(b):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,b="authUser"){return(0,u.Z)(function*(){if(!_.length)return new ir(ie(pn),m,b);const M=(yield Promise.all(_.map(function(){var Et=(0,u.Z)(function*(Wt){if(yield Wt._isAvailable())return Wt});return function(Wt){return Et.apply(this,arguments)}}()))).filter(Et=>Et);let L=M[0]||ie(pn);const ne=St(b,m.config.apiKey,m.name);let Oe=null;for(const Et of _)try{const Wt=yield Et._get(ne);if(Wt){const Fn=_t._fromJSON(m,Wt);Et!==L&&(Oe=Fn),L=Et;break}}catch(Wt){}const at=M.filter(Et=>Et._shouldAllowMigration);return L._shouldAllowMigration&&at.length?(L=at[0],Oe&&(yield L._set(ne,Oe.toJSON())),yield Promise.all(_.map(function(){var Et=(0,u.Z)(function*(Wt){if(Wt!==L)try{yield Wt._remove(ne)}catch(Fn){}});return function(Wt){return Et.apply(this,arguments)}}())),new ir(L,m,b)):new ir(L,m,b)})()}}function ce(w){const m=w.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Qe(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(Y(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(kt(m))return"Blackberry";if(Yt(m))return"Webos";if(W(m))return"Safari";if((m.includes("chrome/")||xe(m))&&!m.includes("edge/"))return"Chrome";if(ft(m))return"Android";{const b=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==b?void 0:b.length))return b[1]}return"Other"}function Y(w=(0,j.z$)()){return/firefox\//i.test(w)}function W(w=(0,j.z$)()){const m=w.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function xe(w=(0,j.z$)()){return/crios\//i.test(w)}function Qe(w=(0,j.z$)()){return/iemobile/i.test(w)}function ft(w=(0,j.z$)()){return/android/i.test(w)}function kt(w=(0,j.z$)()){return/blackberry/i.test(w)}function Yt(w=(0,j.z$)()){return/webos/i.test(w)}function $t(w=(0,j.z$)()){return/iphone|ipad|ipod/i.test(w)}function Qn(w=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function jr(w=(0,j.z$)()){return $t(w)||ft(w)||Yt(w)||kt(w)||/windows phone/i.test(w)||Qe(w)}function vr(w,m=[]){let _;switch(w){case"Browser":_=ce((0,j.z$)());break;case"Worker":_=`${ce((0,j.z$)())}-${w}`;break;default:_=w}const b=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${k.SDK_VERSION}/${b}`}class tl{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const b=L=>new Promise((ne,Oe)=>{try{ne(m(L))}catch(at){Oe(at)}});b.onAbort=_,this.queue.push(b);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,u.Z)(function*(){if(_.auth.currentUser===m)return;const b=[];try{for(const M of _.queue)yield M(m),M.onAbort&&b.push(M.onAbort)}catch(M){b.reverse();for(const L of b)try{L()}catch(ne){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:M.message})}})()}}class pi{constructor(m,_,b){this.app=m,this.heartbeatServiceProvider=_,this.config=b,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bt(this),this.idTokenSubscription=new Bt(this),this.beforeStateQueue=new tl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=b.sdkClientVersion}_initializeWithPersistence(m,_){var b=this;return _&&(this._popupRedirectResolver=ie(_)),this._initializationPromise=this.queue((0,u.Z)(function*(){var M,L;if(!b._deleted&&(b.persistenceManager=yield ir.create(b,m),!b._deleted)){if(null===(M=b._popupRedirectResolver)||void 0===M?void 0:M._shouldInitProactively)try{yield b._popupRedirectResolver._initialize(b)}catch(ne){}yield b.initializeCurrentUser(_),b.lastNotifiedUid=(null===(L=b.currentUser)||void 0===L?void 0:L.uid)||null,!b._deleted&&(b._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,u.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,u.Z)(function*(){var b;const M=yield _.assertedPersistence.getCurrentUser();let L=M,ne=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Oe=null===(b=_.redirectUser)||void 0===b?void 0:b._redirectEventId,at=null==L?void 0:L._redirectEventId,Et=yield _.tryRedirectSignIn(m);(!Oe||Oe===at)&&(null==Et?void 0:Et.user)&&(L=Et.user,ne=!0)}if(!L)return _.directlySetCurrentUser(null);if(!L._redirectEventId){if(ne)try{yield _.beforeStateQueue.runMiddleware(L)}catch(Oe){L=M,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Oe))}return L?_.reloadAndSetCurrentUserOrClear(L):_.directlySetCurrentUser(null)}return re(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===L._redirectEventId?_.directlySetCurrentUser(L):_.reloadAndSetCurrentUserOrClear(L)})()}tryRedirectSignIn(m){var _=this;return(0,u.Z)(function*(){let b=null;try{b=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch(M){yield _._setRedirectUser(null)}return b})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,u.Z)(function*(){try{yield Gn(m)}catch(b){if("auth/network-request-failed"!==b.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function jt(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var m=this;return(0,u.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,u.Z)(function*(){const b=m?(0,j.m9)(m):null;return b&&re(b.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(b&&b._clone(_))})()}_updateCurrentUser(m,_=!1){var b=this;return(0,u.Z)(function*(){if(!b._deleted)return m&&re(b.tenantId===m.tenantId,b,"tenant-id-mismatch"),_||(yield b.beforeStateQueue.runMiddleware(m)),b.queue((0,u.Z)(function*(){yield b.directlySetCurrentUser(m),b.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,u.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,u.Z)(function*(){yield _.assertedPersistence.setPersistence(ie(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new j.LL("auth","Firebase",m())}onAuthStateChanged(m,_,b){return this.registerStateListener(this.authStateSubscription,m,_,b)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,b){return this.registerStateListener(this.idTokenSubscription,m,_,b)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var b=this;return(0,u.Z)(function*(){const M=yield b.getOrInitRedirectPersistenceManager(_);return null===m?M.removeCurrentUser():M.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,u.Z)(function*(){if(!_.redirectPersistenceManager){const b=m&&ie(m)||_._popupRedirectResolver;re(b,_,"argument-error"),_.redirectPersistenceManager=yield ir.create(_,[ie(b._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,u.Z)(function*(){var b,M;return _._isInitialized&&(yield _.queue((0,u.Z)(function*(){}))),(null===(b=_._currentUser)||void 0===b?void 0:b._redirectEventId)===m?_._currentUser:(null===(M=_.redirectUser)||void 0===M?void 0:M._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,u.Z)(function*(){if(m===_.currentUser)return _.queue((0,u.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const b=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==b&&(this.lastNotifiedUid=b,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,b,M){if(this._deleted)return()=>{};const L="function"==typeof _?_:_.next.bind(_),ne=this._isInitialized?Promise.resolve():this._initializationPromise;return re(ne,this,"internal-error"),ne.then(()=>L(this.currentUser)),"function"==typeof _?m.addObserver(_,b,M):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,u.Z)(function*(){_.currentUser&&_.currentUser!==m&&(_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh()),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=vr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,u.Z)(function*(){var _;const b={"X-Client-Version":m.clientVersion};m.app.options.appId&&(b["X-Firebase-gmpid"]=m.app.options.appId);const M=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return M&&(b["X-Firebase-Client"]=M),b})()}}function He(w){return(0,j.m9)(w)}class Bt{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,j.ne)(_=>this.observer=_)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Dn(w,m,_){const b=He(w);re(b._canInitEmulator,b,"emulator-config-failed"),re(/^https?:\/\//.test(m),b,"invalid-emulator-scheme");const M=!!(null==_?void 0:_.disableWarnings),L=Jr(m),{host:ne,port:Oe}=function Ts(w){const m=Jr(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(m.length));if(!_)return{host:"",port:null};const b=_[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(b);if(M){const L=M[1];return{host:L,port:Jn(b.substr(L.length+1))}}{const[L,ne]=b.split(":");return{host:L,port:Jn(ne)}}}(m);b.config.emulator={url:`${L}//${ne}${null===Oe?"":`:${Oe}`}/`},b.settings.appVerificationDisabledForTesting=!0,b.emulatorConfig=Object.freeze({host:ne,port:Oe,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function Is(){function w(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Jr(w){const m=w.indexOf(":");return m<0?"":w.substr(0,m+1)}function Jn(w){if(!w)return null;const m=Number(w);return isNaN(m)?null:m}class gn{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return pe("not implemented")}_getIdTokenResponse(m){return pe("not implemented")}_linkToIdToken(m,_){return pe("not implemented")}_getReauthenticationResolver(m){return pe("not implemented")}}function So(w,m){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,u.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:resetPassword",Ht(w,m))})).apply(this,arguments)}function Rt(w,m){return Do.apply(this,arguments)}function Do(){return(Do=(0,u.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function ha(w,m){return fa.apply(this,arguments)}function fa(){return(fa=(0,u.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:update",Ht(w,m))})).apply(this,arguments)}function Bn(){return(Bn=(0,u.Z)(function*(w,m){return Rn(w,"POST","/v1/accounts:signInWithPassword",Ht(w,m))})).apply(this,arguments)}function no(w,m){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,u.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:sendOobCode",Ht(w,m))})).apply(this,arguments)}function hr(w,m){return wn.apply(this,arguments)}function wn(){return(wn=(0,u.Z)(function*(w,m){return no(w,m)})).apply(this,arguments)}function xd(w,m){return xo.apply(this,arguments)}function xo(){return(xo=(0,u.Z)(function*(w,m){return no(w,m)})).apply(this,arguments)}function Zi(w,m){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,u.Z)(function*(w,m){return no(w,m)})).apply(this,arguments)}function Md(w,m){return zl.apply(this,arguments)}function zl(){return(zl=(0,u.Z)(function*(w,m){return no(w,m)})).apply(this,arguments)}function xi(){return(xi=(0,u.Z)(function*(w,m){return Rn(w,"POST","/v1/accounts:signInWithEmailLink",Ht(w,m))})).apply(this,arguments)}function Pd(){return(Pd=(0,u.Z)(function*(w,m){return Rn(w,"POST","/v1/accounts:signInWithEmailLink",Ht(w,m))})).apply(this,arguments)}class Wl extends gn{constructor(m,_,b,M=null){super("password",b),this._email=m,this._password=_,this._tenantId=M}static _fromEmailAndPassword(m,_){return new Wl(m,_,"password")}static _fromEmailAndCode(m,_,b=null){return new Wl(m,_,"emailLink",b)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,u.Z)(function*(){switch(_.signInMethod){case"password":return function pa(w,m){return Bn.apply(this,arguments)}(m,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function ro(w,m){return xi.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:Ze(m,"internal-error")}})()}_linkToIdToken(m,_){var b=this;return(0,u.Z)(function*(){switch(b.signInMethod){case"password":return Rt(m,{idToken:_,returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function Gf(w,m){return Pd.apply(this,arguments)}(m,{idToken:_,email:b._email,oobCode:b._password});default:Ze(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function sr(w,m){return Nd.apply(this,arguments)}function Nd(){return(Nd=(0,u.Z)(function*(w,m){return Rn(w,"POST","/v1/accounts:signInWithIdp",Ht(w,m))})).apply(this,arguments)}class Ss extends gn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new Ss(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):Ze("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:b,signInMethod:M}=_,L=(0,ae._T)(_,["providerId","signInMethod"]);if(!b||!M)return null;const ne=new Ss(b,M);return ne.idToken=L.idToken||void 0,ne.accessToken=L.accessToken||void 0,ne.secret=L.secret,ne.nonce=L.nonce,ne.pendingToken=L.pendingToken||null,ne}_getIdTokenResponse(m){return sr(m,this.buildRequest())}_linkToIdToken(m,_){const b=this.buildRequest();return b.idToken=_,sr(m,b)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,sr(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,j.xO)(_)}return m}}function Wg(w,m){return kd.apply(this,arguments)}function kd(){return(kd=(0,u.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:sendVerificationCode",Ht(w,m))})).apply(this,arguments)}function nl(){return(nl=(0,u.Z)(function*(w,m){return Rn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ht(w,m))})).apply(this,arguments)}function Rd(){return(Rd=(0,u.Z)(function*(w,m){const _=yield Rn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ht(w,m));if(_.temporaryProof)throw qn(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Yg={USER_NOT_FOUND:"user-not-found"};function Od(){return(Od=(0,u.Z)(function*(w,m){return Rn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ht(w,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Yg)})).apply(this,arguments)}class ma extends gn{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new ma({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new ma({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function Kg(w,m){return nl.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function ga(w,m){return Rd.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Qg(w,m){return Od.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:b,verificationCode:M}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:b,code:M}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:b,phoneNumber:M,temporaryProof:L}=m;return b||_||M||L?new ma({verificationId:_,verificationCode:b,phoneNumber:M,temporaryProof:L}):null}}class Ds{constructor(m){var _,b,M,L,ne,Oe;const at=(0,j.zd)((0,j.pd)(m)),Et=null!==(_=at.apiKey)&&void 0!==_?_:null,Wt=null!==(b=at.oobCode)&&void 0!==b?b:null,Fn=function Jg(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=at.mode)&&void 0!==M?M:null);re(Et&&Wt&&Fn,"argument-error"),this.apiKey=Et,this.operation=Fn,this.code=Wt,this.continueUrl=null!==(L=at.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(ne=at.languageCode)&&void 0!==ne?ne:null,this.tenantId=null!==(Oe=at.tenantId)&&void 0!==Oe?Oe:null}static parseLink(m){const _=function Zf(w){const m=(0,j.zd)((0,j.pd)(w)).link,_=m?(0,j.zd)((0,j.pd)(m)).deep_link_id:null,b=(0,j.zd)((0,j.pd)(w)).deep_link_id;return(b?(0,j.zd)((0,j.pd)(b)).link:null)||b||_||m||w}(m);try{return new Ds(_)}catch(b){return null}}}let rl=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,b){return Wl._fromEmailAndPassword(_,b)}static credentialWithLink(_,b){const M=Ds.parseLink(b);return re(M,"argument-error"),Wl._fromEmailAndCode(_,M.code,M.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class As{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class Mi extends As{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Mo extends Mi{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return re("providerId"in _&&"signInMethod"in _,"argument-error"),Ss._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return re(m.idToken||m.accessToken,"argument-error"),Ss._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Mo.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Mo.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:b,oauthTokenSecret:M,pendingToken:L,nonce:ne,providerId:Oe}=m;if(!b&&!M&&!_&&!L||!Oe)return null;try{return new Mo(Oe)._credential({idToken:_,accessToken:b,nonce:ne,pendingToken:L})}catch(at){return null}}}let il=(()=>{class w extends Mi{constructor(){super("facebook.com")}static credential(_){return Ss._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch(b){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),sl=(()=>{class w extends Mi{constructor(){super("google.com"),this.addScope("profile")}static credential(_,b){return Ss._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:b})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:b,oauthAccessToken:M}=_;if(!b&&!M)return null;try{return w.credential(b,M)}catch(L){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),zf=(()=>{class w extends Mi{constructor(){super("github.com")}static credential(_){return Ss._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch(b){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Po extends gn{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return sr(m,this.buildRequest())}_linkToIdToken(m,_){const b=this.buildRequest();return b.idToken=_,sr(m,b)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,sr(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:b,signInMethod:M,pendingToken:L}=_;return b&&M&&L&&b===M?new Po(b,L):null}static _create(m,_){return new Po(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xs extends As{constructor(m){re(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return xs.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return xs.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=Po.fromJSON(m);return re(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:b}=m;if(!_||!b)return null;try{return Po._create(b,_)}catch(M){return null}}}let zi=(()=>{class w extends Mi{constructor(){super("twitter.com")}static credential(_,b){return Ss._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:b})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:b,oauthTokenSecret:M}=_;if(!b||!M)return null;try{return w.credential(b,M)}catch(L){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Ld(w,m){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,u.Z)(function*(w,m){return Rn(w,"POST","/v1/accounts:signUp",Ht(w,m))})).apply(this,arguments)}class $r{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,b,M=!1){return(0,u.Z)(function*(){const L=yield _t._fromIdTokenResponse(m,b,M),ne=Ud(b);return new $r({user:L,providerId:ne,_tokenResponse:b,operationType:_})})()}static _forOperation(m,_,b){return(0,u.Z)(function*(){yield m._updateTokensIfNecessary(b,!0);const M=Ud(b);return new $r({user:m,providerId:M,_tokenResponse:b,operationType:_})})()}}function Ud(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Vd(w){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,u.Z)(function*(w){var m;const _=He(w);if(yield _._initializationPromise,null===(m=_.currentUser)||void 0===m?void 0:m.isAnonymous)return new $r({user:_.currentUser,providerId:null,operationType:"signIn"});const b=yield Ld(_,{returnSecureToken:!0}),M=yield $r._fromIdTokenResponse(_,"signIn",b,!0);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class Yl extends j.ZR{constructor(m,_,b,M){var L;super(_.code,_.message),this.operationType=b,this.user=M,Object.setPrototypeOf(this,Yl.prototype),this.customData={appName:m.name,tenantId:null!==(L=m.tenantId)&&void 0!==L?L:void 0,_serverResponse:_.customData._serverResponse,operationType:b}}static _fromErrorAndOperation(m,_,b,M){return new Yl(m,_,b,M)}}function Ql(w,m,_,b){return("reauthenticate"===m?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?Yl._fromErrorAndOperation(w,L,m,b):L})}function tc(w){return new Set(w.map(({providerId:m})=>m).filter(m=>!!m))}function Ms(w,m){return nc.apply(this,arguments)}function nc(){return(nc=(0,u.Z)(function*(w,m){const _=(0,j.m9)(w);yield io(!0,_,m);const{providerUserInfo:b}=yield Yr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),M=tc(b||[]);return _.providerData=_.providerData.filter(L=>M.has(L.providerId)),M.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Cn(w,m){return ol.apply(this,arguments)}function ol(){return(ol=(0,u.Z)(function*(w,m,_=!1){const b=yield lt(w,m._linkToIdToken(w.auth,yield w.getIdToken()),_);return $r._forOperation(w,"link",b)})).apply(this,arguments)}function io(w,m,_){return En.apply(this,arguments)}function En(){return(En=(0,u.Z)(function*(w,m,_){yield Gn(m);const M=!1===w?"provider-already-linked":"no-such-provider";re(tc(m.providerData).has(_)===w,m.auth,M)})).apply(this,arguments)}function Jl(w,m){return al.apply(this,arguments)}function al(){return(al=(0,u.Z)(function*(w,m,_=!1){const{auth:b}=w,M="reauthenticate";try{const L=yield lt(w,Ql(b,M,m,w),_);re(L.idToken,b,"internal-error");const ne=Gt(L.idToken);re(ne,b,"internal-error");const{sub:Oe}=ne;return re(w.uid===Oe,b,"user-mismatch"),$r._forOperation(w,M,L)}catch(L){throw"auth/user-not-found"===(null==L?void 0:L.code)&&Ze(b,"user-mismatch"),L}})).apply(this,arguments)}function No(w,m){return wr.apply(this,arguments)}function wr(){return(wr=(0,u.Z)(function*(w,m,_=!1){const b="signIn",M=yield Ql(w,b,m),L=yield $r._fromIdTokenResponse(w,b,M);return _||(yield w._updateCurrentUser(L.user)),L})).apply(this,arguments)}function Xl(w,m){return zn.apply(this,arguments)}function zn(){return(zn=(0,u.Z)(function*(w,m){return No(He(w),m)})).apply(this,arguments)}function Ps(w,m){return Er.apply(this,arguments)}function Er(){return(Er=(0,u.Z)(function*(w,m){const _=(0,j.m9)(w);return yield io(!1,_,m.providerId),Cn(_,m)})).apply(this,arguments)}function _a(w,m){return as.apply(this,arguments)}function as(){return(as=(0,u.Z)(function*(w,m){return Jl((0,j.m9)(w),m)})).apply(this,arguments)}function rc(w,m){return gi.apply(this,arguments)}function gi(){return(gi=(0,u.Z)(function*(w,m){return Rn(w,"POST","/v1/accounts:signInWithCustomToken",Ht(w,m))})).apply(this,arguments)}function so(w,m){return oo.apply(this,arguments)}function oo(){return(oo=(0,u.Z)(function*(w,m){const _=He(w),b=yield rc(_,{token:m,returnSecureToken:!0}),M=yield $r._fromIdTokenResponse(_,"signIn",b);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}class bt{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?ll._fromServerResponse(m,_):Ze(m,"internal-error")}}class ll extends bt{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new ll(_)}}function ul(w,m,_){var b;re((null===(b=_.url)||void 0===b?void 0:b.length)>0,w,"invalid-continue-uri"),re(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(re(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(re(_.android.packageName.length>0,w,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function Bd(w,m,_){return cl.apply(this,arguments)}function cl(){return(cl=(0,u.Z)(function*(w,m,_){const b=(0,j.m9)(w),M={requestType:"PASSWORD_RESET",email:m};_&&ul(b,M,_),yield xd(b,M)})).apply(this,arguments)}function ic(w,m,_){return dl.apply(this,arguments)}function dl(){return(dl=(0,u.Z)(function*(w,m,_){yield So((0,j.m9)(w),{oobCode:m,newPassword:_})})).apply(this,arguments)}function Wf(w,m){return Me.apply(this,arguments)}function Me(){return(Me=(0,u.Z)(function*(w,m){yield ha((0,j.m9)(w),{oobCode:m})})).apply(this,arguments)}function zt(w,m){return hl.apply(this,arguments)}function hl(){return(hl=(0,u.Z)(function*(w,m){const _=(0,j.m9)(w),b=yield So(_,{oobCode:m}),M=b.requestType;switch(re(M,_,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(b.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(b.mfaInfo,_,"internal-error");default:re(b.email,_,"internal-error")}let L=null;return b.mfaInfo&&(L=bt._fromServerResponse(He(_),b.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.newEmail:b.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===b.requestType?b.email:b.newEmail)||null,multiFactorInfo:L},operation:M}})).apply(this,arguments)}function jn(w,m){return ao.apply(this,arguments)}function ao(){return(ao=(0,u.Z)(function*(w,m){const{data:_}=yield zt((0,j.m9)(w),m);return _.email})).apply(this,arguments)}function fl(w,m,_){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,u.Z)(function*(w,m,_){const b=He(w),M=yield Ld(b,{returnSecureToken:!0,email:m,password:_}),L=yield $r._fromIdTokenResponse(b,"signIn",M);return yield b._updateCurrentUser(L.user),L})).apply(this,arguments)}function sc(w,m,_){return Xl((0,j.m9)(w),rl.credential(m,_))}function oc(w,m,_){return jd.apply(this,arguments)}function jd(){return(jd=(0,u.Z)(function*(w,m,_){const b=(0,j.m9)(w),M={requestType:"EMAIL_SIGNIN",email:m};re(_.handleCodeInApp,b,"argument-error"),_&&ul(b,M,_),yield Zi(b,M)})).apply(this,arguments)}function Hd(w,m){const _=Ds.parseLink(m);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function pl(w,m,_){return ya.apply(this,arguments)}function ya(){return(ya=(0,u.Z)(function*(w,m,_){const b=(0,j.m9)(w),M=rl.credentialWithLink(m,_||he());return re(M._tenantId===(b.tenantId||null),b,"tenant-id-mismatch"),Xl(b,M)})).apply(this,arguments)}function fr(w,m){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,u.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:createAuthUri",Ht(w,m))})).apply(this,arguments)}function ac(w,m){return ls.apply(this,arguments)}function ls(){return(ls=(0,u.Z)(function*(w,m){const b={identifier:m,continueUri:Ve()?he():"http://localhost"},{signinMethods:M}=yield fr((0,j.m9)(w),b);return M||[]})).apply(this,arguments)}function Ns(w,m){return gl.apply(this,arguments)}function gl(){return(gl=(0,u.Z)(function*(w,m){const _=(0,j.m9)(w),M={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};m&&ul(_.auth,M,m);const{email:L}=yield hr(_.auth,M);L!==w.email&&(yield w.reload())})).apply(this,arguments)}function $d(w,m,_){return ml.apply(this,arguments)}function ml(){return(ml=(0,u.Z)(function*(w,m,_){const b=(0,j.m9)(w),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:m};_&&ul(b.auth,L,_);const{email:ne}=yield Md(b.auth,L);ne!==w.email&&(yield w.reload())})).apply(this,arguments)}function qd(w,m){return ko.apply(this,arguments)}function ko(){return(ko=(0,u.Z)(function*(w,m){return nn(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function va(w,m){return _l.apply(this,arguments)}function _l(){return(_l=(0,u.Z)(function*(w,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const b=(0,j.m9)(w),L={idToken:yield b.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},ne=yield lt(b,qd(b.auth,L));b.displayName=ne.displayName||null,b.photoURL=ne.photoUrl||null;const Oe=b.providerData.find(({providerId:at})=>"password"===at);Oe&&(Oe.displayName=b.displayName,Oe.photoURL=b.photoURL),yield b._updateTokensIfNecessary(ne)})).apply(this,arguments)}function lc(w,m){return eu((0,j.m9)(w),m,null)}function em(w,m){return eu((0,j.m9)(w),null,m)}function eu(w,m,_){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,u.Z)(function*(w,m,_){const{auth:b}=w,L={idToken:yield w.getIdToken(),returnSecureToken:!0};m&&(L.email=m),_&&(L.password=_);const ne=yield lt(w,Rt(b,L));yield w._updateTokensIfNecessary(ne,!0)})).apply(this,arguments)}class Oo{constructor(m,_,b={}){this.isNewUser=m,this.providerId=_,this.profile=b}}class Gd extends Oo{constructor(m,_,b,M){super(m,_,b),this.username=M}}class Kf extends Oo{constructor(m,_){super(m,"facebook.com",_)}}class wa extends Gd{constructor(m,_){super(m,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class us extends Oo{constructor(m,_){super(m,"google.com",_)}}class Yf extends Gd{constructor(m,_,b){super(m,"twitter.com",_,b)}}function br(w){const{user:m,_tokenResponse:_}=w;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function uc(w){var m,_;if(!w)return null;const{providerId:b}=w,M=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},L=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!b&&(null==w?void 0:w.idToken)){const ne=null===(_=null===(m=Gt(w.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(ne)return new Oo(L,"anonymous"!==ne&&"custom"!==ne?ne:null)}if(!b)return null;switch(b){case"facebook.com":return new Kf(L,M);case"github.com":return new wa(L,M);case"google.com":return new us(L,M);case"twitter.com":return new Yf(L,M,w.screenName||null);case"custom":case"anonymous":return new Oo(L,null);default:return new Oo(L,b,M)}}(_)}class Rs{constructor(m,_){this.type=m,this.credential=_}static _fromIdtoken(m){return new Rs("enroll",m)}static _fromMfaPendingCredential(m){return new Rs("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,b;if(null==m?void 0:m.multiFactorSession){if(null===(_=m.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Rs._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null===(b=m.multiFactorSession)||void 0===b?void 0:b.idToken)return Rs._fromIdtoken(m.multiFactorSession.idToken)}return null}}class vl{constructor(m,_,b){this.session=m,this.hints=_,this.signInResolver=b}static _fromError(m,_){const b=He(m),M=_.customData._serverResponse,L=(M.mfaInfo||[]).map(Oe=>bt._fromServerResponse(b,Oe));re(M.mfaPendingCredential,b,"internal-error");const ne=Rs._fromMfaPendingCredential(M.mfaPendingCredential);return new vl(ne,L,function(){var Oe=(0,u.Z)(function*(at){const Et=yield at._process(b,ne);delete M.mfaInfo,delete M.mfaPendingCredential;const Wt=Object.assign(Object.assign({},M),{idToken:Et.idToken,refreshToken:Et.refreshToken});switch(_.operationType){case"signIn":const Fn=yield $r._fromIdTokenResponse(b,_.operationType,Wt);return yield b._updateCurrentUser(Fn.user),Fn;case"reauthenticate":return re(_.user,b,"internal-error"),$r._forOperation(_.user,_.operationType,Wt);default:Ze(b,"internal-error")}});return function(at){return Oe.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,u.Z)(function*(){return _.signInResolver(m)})()}}function tu(w,m){var _;const b=(0,j.m9)(w),M=m;return re(m.customData.operationType,b,"argument-error"),re(null===(_=M.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,b,"argument-error"),vl._fromError(b,M)}function Cr(w,m){return nn(w,"POST","/v2/accounts/mfaEnrollment:start",Ht(w,m))}class Ea{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(b=>bt._fromServerResponse(m.auth,b)))})}static _fromUser(m){return new Ea(m)}getSession(){var m=this;return(0,u.Z)(function*(){return Rs._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,_){var b=this;return(0,u.Z)(function*(){const M=m,L=yield b.getSession(),ne=yield lt(b.user,M._process(b.user.auth,L,_));return yield b.user._updateTokensIfNecessary(ne),b.user.reload()})()}unenroll(m){var _=this;return(0,u.Z)(function*(){const b="string"==typeof m?m:m.uid,M=yield _.user.getIdToken(),L=yield lt(_.user,function Fo(w,m){return nn(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Ht(w,m))}(_.user.auth,{idToken:M,mfaEnrollmentId:b}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ne})=>ne!==b),yield _.user._updateTokensIfNecessary(L);try{yield _.user.reload()}catch(ne){if("auth/user-token-expired"!==ne.code)throw ne}})()}}const zd=new WeakMap;function Wd(w){const m=(0,j.m9)(w);return zd.has(m)||zd.set(m,Ea._fromUser(m)),zd.get(m)}const Lo="__sak";class wl{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Lo,"1"),this.storage.removeItem(Lo),Promise.resolve(!0)):Promise.resolve(!1)}catch(m){return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Tr=(()=>{class w extends wl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,b)=>this.onStorageEvent(_,b),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Xf(){const w=(0,j.z$)();return W(w)||$t(w)}()&&function os(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=jr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const b of Object.keys(this.listeners)){const M=this.storage.getItem(b),L=this.localCache[b];M!==L&&_(b,L,M)}}onStorageEvent(_,b=!1){if(!_.key)return void this.forAllChangedKeys((Oe,at,Et)=>{this.notifyListeners(Oe,Et)});const M=_.key;if(b?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Oe=this.storage.getItem(M);if(_.newValue!==Oe)null!==_.newValue?this.storage.setItem(M,_.newValue):this.storage.removeItem(M);else if(this.localCache[M]===_.newValue&&!b)return}const L=()=>{const Oe=this.storage.getItem(M);!b&&this.localCache[M]===Oe||this.notifyListeners(M,Oe)},ne=this.storage.getItem(M);!function qt(){return(0,j.w1)()&&10===document.documentMode}()||ne===_.newValue||_.newValue===_.oldValue?L():setTimeout(L,10)}notifyListeners(_,b){this.localCache[_]=b;const M=this.listeners[_];if(M)for(const L of Array.from(M))L(b&&JSON.parse(b))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,b,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:b,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,b){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,b){var M=()=>super._set,L=this;return(0,u.Z)(function*(){yield M().call(L,_,b),L.localCache[_]=JSON.stringify(b)})()}_get(_){var b=()=>super._get,M=this;return(0,u.Z)(function*(){const L=yield b().call(M,_);return M.localCache[_]=JSON.stringify(L),L})()}_remove(_){var b=()=>super._remove,M=this;return(0,u.Z)(function*(){yield b().call(M,_),delete M.localCache[_]})()}}return w.type="LOCAL",w})(),El=(()=>{class w extends wl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,b){}_removeListener(_,b){}}return w.type="SESSION",w})();let ru=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const b=this.receivers.find(L=>L.isListeningto(_));if(b)return b;const M=new w(_);return this.receivers.push(M),M}isListeningto(_){return this.eventTarget===_}handleEvent(_){var b=this;return(0,u.Z)(function*(){const M=_,{eventId:L,eventType:ne,data:Oe}=M.data,at=b.handlersMap[ne];if(!(null==at?void 0:at.size))return;M.ports[0].postMessage({status:"ack",eventId:L,eventType:ne});const Et=Array.from(at).map(function(){var Fn=(0,u.Z)(function*(bi){return bi(M.origin,Oe)});return function(bi){return Fn.apply(this,arguments)}}()),Wt=yield function nu(w){return Promise.all(w.map(function(){var m=(0,u.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(b){return{fulfilled:!1,reason:b}}});return function(_){return m.apply(this,arguments)}}()))}(Et);M.ports[0].postMessage({status:"done",eventId:L,eventType:ne,response:Wt})})()}_subscribe(_,b){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(b)}_unsubscribe(_,b){this.handlersMap[_]&&b&&this.handlersMap[_].delete(b),(!b||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function ba(w="",m=10){let _="";for(let b=0;b<m;b++)_+=Math.floor(10*Math.random());return w+_}class ds{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,b=50){var M=this;return(0,u.Z)(function*(){const L="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let ne,Oe;return new Promise((at,Et)=>{const Wt=ba("",20);L.port1.start();const Fn=setTimeout(()=>{Et(new Error("unsupported_event"))},b);Oe={messageChannel:L,onMessage(bi){const gs=bi;if(gs.data.eventId===Wt)switch(gs.data.status){case"ack":clearTimeout(Fn),ne=setTimeout(()=>{Et(new Error("timeout"))},3e3);break;case"done":clearTimeout(ne),at(gs.data.response);break;default:clearTimeout(Fn),clearTimeout(ne),Et(new Error("invalid_response"))}}},M.handlers.add(Oe),L.port1.addEventListener("message",Oe.onMessage),M.target.postMessage({eventType:m,eventId:Wt,data:_},[L.port2])}).finally(()=>{Oe&&M.removeMessageHandler(Oe)})})()}}function Tn(){return window}function yt(){return void 0!==Tn().WorkerGlobalScope&&"function"==typeof Tn().importScripts}function iu(){return(iu=(0,u.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const Kd="firebaseLocalStorageDb",kr="firebaseLocalStorage",mi="fbase_key";class Os{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function lo(w,m){return w.transaction([kr],m?"readwrite":"readonly").objectStore(kr)}function su(){const w=indexedDB.open(Kd,1);return new Promise((m,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const b=w.result;try{b.createObjectStore(kr,{keyPath:mi})}catch(M){_(M)}}),w.addEventListener("success",(0,u.Z)(function*(){const b=w.result;b.objectStoreNames.contains(kr)?m(b):(b.close(),yield function Pi(){const w=indexedDB.deleteDatabase(Kd);return new Os(w).toPromise()}(),m(yield su()))}))})}function ou(w,m,_){return _i.apply(this,arguments)}function _i(){return(_i=(0,u.Z)(function*(w,m,_){const b=lo(w,!0).put({[mi]:m,value:_});return new Os(b).toPromise()})).apply(this,arguments)}function Ca(){return(Ca=(0,u.Z)(function*(w,m){const _=lo(w,!1).get(m),b=yield new Os(_).toPromise();return void 0===b?null:b.value})).apply(this,arguments)}function Kn(w,m){const _=lo(w,!0).delete(m);return new Os(_).toPromise()}const fc=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,u.Z)(function*(){return _.db||(_.db=yield su()),_.db})()}_withRetries(_){var b=this;return(0,u.Z)(function*(){let M=0;for(;;)try{const L=yield b._openDb();return yield _(L)}catch(L){if(M++>3)throw L;b.db&&(b.db.close(),b.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,u.Z)(function*(){return yt()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,u.Z)(function*(){_.receiver=ru._getInstance(function dc(){return yt()?self:null}()),_.receiver._subscribe("keyChanged",function(){var b=(0,u.Z)(function*(M,L){return{keyProcessed:(yield _._poll()).includes(L.key)}});return function(M,L){return b.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var b=(0,u.Z)(function*(M,L){return["keyChanged"]});return function(M,L){return b.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,u.Z)(function*(){var b,M;if(_.activeServiceWorker=yield function bl(){return iu.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new ds(_.activeServiceWorker);const L=yield _.sender._send("ping",{},800);!L||(null===(b=L[0])||void 0===b?void 0:b.fulfilled)&&(null===(M=L[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var b=this;return(0,u.Z)(function*(){if(b.sender&&b.activeServiceWorker&&function cc(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===b.activeServiceWorker)try{yield b.sender._send("keyChanged",{key:_},b.serviceWorkerReceiverAvailable?800:50)}catch(M){}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const _=yield su();return yield ou(_,Lo,"1"),yield Kn(_,Lo),!0}catch(_){}return!1})()}_withPendingWrite(_){var b=this;return(0,u.Z)(function*(){b.pendingWrites++;try{yield _()}finally{b.pendingWrites--}})()}_set(_,b){var M=this;return(0,u.Z)(function*(){return M._withPendingWrite((0,u.Z)(function*(){return yield M._withRetries(L=>ou(L,_,b)),M.localCache[_]=b,M.notifyServiceWorker(_)}))})()}_get(_){var b=this;return(0,u.Z)(function*(){const M=yield b._withRetries(L=>function hs(w,m){return Ca.apply(this,arguments)}(L,_));return b.localCache[_]=M,M})()}_remove(_){var b=this;return(0,u.Z)(function*(){return b._withPendingWrite((0,u.Z)(function*(){return yield b._withRetries(M=>Kn(M,_)),delete b.localCache[_],b.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,u.Z)(function*(){const b=yield _._withRetries(ne=>{const Oe=lo(ne,!1).getAll();return new Os(Oe).toPromise()});if(!b)return[];if(0!==_.pendingWrites)return[];const M=[],L=new Set;for(const{fbase_key:ne,value:Oe}of b)L.add(ne),JSON.stringify(_.localCache[ne])!==JSON.stringify(Oe)&&(_.notifyListeners(ne,Oe),M.push(ne));for(const ne of Object.keys(_.localCache))_.localCache[ne]&&!L.has(ne)&&(_.notifyListeners(ne,null),M.push(ne));return M})()}notifyListeners(_,b){this.localCache[_]=b;const M=this.listeners[_];if(M)for(const L of Array.from(M))L(b)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,b){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(b)}_removeListener(_,b){this.listeners[_]&&(this.listeners[_].delete(b),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function pc(w,m){return nn(w,"POST","/v2/accounts/mfaSignIn:start",Ht(w,m))}function Vo(){return(Vo=(0,u.Z)(function*(w){return(yield nn(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Bo(w){return new Promise((m,_)=>{const b=document.createElement("script");b.setAttribute("src",w),b.onload=m,b.onerror=M=>{const L=ke("internal-error");L.customData=M,_(L)},b.type="text/javascript",b.charset="UTF-8",function au(){var w,m;return null!==(m=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==m?m:document}().appendChild(b)})}function uo(w){return`__${w}${Math.floor(1e6*Math.random())}`}const co=1e12;class gc{constructor(m){this.auth=m,this.counter=co,this._widgets=new Map}render(m,_){const b=this.counter;return this._widgets.set(b,new Ho(m,this.auth.name,_||{})),this.counter++,b}reset(m){var _;const b=m||co;null===(_=this._widgets.get(b))||void 0===_||_.delete(),this._widgets.delete(b)}getResponse(m){var _;return(null===(_=this._widgets.get(m||co))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,u.Z)(function*(){var b;return null===(b=_._widgets.get(m||co))||void 0===b||b.execute(),""})()}}class Ho{constructor(m,_,b){this.params=b,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof m?document.getElementById(m):m;re(M,"argument-error",{appName:_}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function rm(w){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let b=0;b<w;b++)m.push(_.charAt(Math.floor(Math.random()*_.length)));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch(b){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(b){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ta=uo("rcb"),Hn=new et(3e4,6e4);class im{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Tn().grecaptcha}load(m,_=""){return re(function tp(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),m,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Tn().grecaptcha):new Promise((b,M)=>{const L=Tn().setTimeout(()=>{M(ke(m,"network-request-failed"))},Hn.get());Tn()[Ta]=()=>{Tn().clearTimeout(L),delete Tn()[Ta];const Oe=Tn().grecaptcha;if(!Oe)return void M(ke(m,"internal-error"));const at=Oe.render;Oe.render=(Et,Wt)=>{const Fn=at(Et,Wt);return this.counter++,Fn},this.hostLanguage=_,b(Oe)},Bo(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:Ta,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(L),M(ke(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){return!!Tn().grecaptcha&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class np{load(m){return(0,u.Z)(function*(){return new gc(m)})()}clearedOneInstance(){}}const mc="recaptcha",Jd={theme:"light",type:"image"};class Xd{constructor(m,_=Object.assign({},Jd),b){this.parameters=_,this.type=mc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=He(b),this.isInvisible="invisible"===this.parameters.size,re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof m?document.getElementById(m):m;re(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new np:new im,this.validateStartingState()}verify(){var m=this;return(0,u.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),b=m.getAssertedRecaptcha();return b.getResponse(_)||new Promise(L=>{const ne=Oe=>{!Oe||(m.tokenChangeListeners.delete(ne),L(Oe))};m.tokenChangeListeners.add(ne),m.isInvisible&&b.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(b=>b(_)),"function"==typeof m)m(_);else if("string"==typeof m){const b=Tn()[m];"function"==typeof b&&b(_)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,u.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const b=document.createElement("div");_.appendChild(b),_=b}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,u.Z)(function*(){re(Ve()&&!yt(),m.auth,"internal-error"),yield function ho(){let w=null;return new Promise(m=>{"complete"!==document.readyState?(w=()=>m(),window.addEventListener("load",w)):m()}).catch(m=>{throw w&&window.removeEventListener("load",w),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function Uo(w){return Vo.apply(this,arguments)}(m.auth);re(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class _c{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=ma._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function Xn(w,m,_){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,u.Z)(function*(w,m,_){const b=He(w),M=yield vi(b,m,(0,j.m9)(_));return new _c(M,L=>Xl(b,L))})).apply(this,arguments)}function Ni(w,m,_){return qr.apply(this,arguments)}function qr(){return(qr=(0,u.Z)(function*(w,m,_){const b=(0,j.m9)(w);yield io(!1,b,"phone");const M=yield vi(b.auth,m,(0,j.m9)(_));return new _c(M,L=>Ps(b,L))})).apply(this,arguments)}function eh(w,m,_){return yi.apply(this,arguments)}function yi(){return(yi=(0,u.Z)(function*(w,m,_){const b=(0,j.m9)(w),M=yield vi(b.auth,m,(0,j.m9)(_));return new _c(M,L=>_a(b,L))})).apply(this,arguments)}function vi(w,m,_){return fo.apply(this,arguments)}function fo(){return(fo=(0,u.Z)(function*(w,m,_){var b;const M=yield _.verify();try{let L;if(re("string"==typeof M,w,"argument-error"),re(_.type===mc,w,"argument-error"),L="string"==typeof m?{phoneNumber:m}:m,"session"in L){const ne=L.session;if("phoneNumber"in L)return re("enroll"===ne.type,w,"internal-error"),(yield Cr(w,{idToken:ne.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{re("signin"===ne.type,w,"internal-error");const Oe=(null===(b=L.multiFactorHint)||void 0===b?void 0:b.uid)||L.multiFactorUid;return re(Oe,w,"missing-multi-factor-info"),(yield pc(w,{mfaPendingCredential:ne.credential,mfaEnrollmentId:Oe,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ne}=yield Wg(w,{phoneNumber:L.phoneNumber,recaptchaToken:M});return ne}}finally{_._reset()}})).apply(this,arguments)}function $o(w,m){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,u.Z)(function*(w,m){yield Cn((0,j.m9)(w),m)})).apply(this,arguments)}let qo=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=He(_)}verifyPhoneNumber(_,b){return vi(this.auth,_,(0,j.m9)(b))}static credential(_,b){return ma._fromVerification(_,b)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:b,temporaryProof:M}=_;return b&&M?ma._fromTokenResponse(b,M):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Fs(w,m){return m?ie(m):(re(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Go extends gn{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return sr(m,this._buildIdpRequest())}_linkToIdToken(m,_){return sr(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return sr(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function th(w){return No(w.auth,new Go(w),w.bypassAuthState)}function rp(w){const{auth:m,user:_}=w;return re(_,m,"internal-error"),Jl(_,new Go(w),w.bypassAuthState)}function yc(w){return wi.apply(this,arguments)}function wi(){return(wi=(0,u.Z)(function*(w){const{auth:m,user:_}=w;return re(_,m,"internal-error"),Cn(_,new Go(w),w.bypassAuthState)})).apply(this,arguments)}class nh{constructor(m,_,b,M,L=!1){this.auth=m,this.resolver=b,this.user=M,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,u.Z)(function*(b,M){m.pendingPromise={resolve:b,reject:M};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(L){m.reject(L)}});return function(b,M){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,u.Z)(function*(){const{urlResponse:b,sessionId:M,postBody:L,tenantId:ne,error:Oe,type:at}=m;if(Oe)return void _.reject(Oe);const Et={auth:_.auth,requestUri:b,sessionId:M,tenantId:ne||void 0,postBody:L||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(at)(Et))}catch(Wt){_.reject(Wt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return th;case"linkViaPopup":case"linkViaRedirect":return yc;case"reauthViaPopup":case"reauthViaRedirect":return rp;default:Ze(this.auth,"internal-error")}}resolve(m){Se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Se(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const lu=new et(2e3,1e4);function jy(w,m,_){return uu.apply(this,arguments)}function uu(){return(uu=(0,u.Z)(function*(w,m,_){const b=He(w);Ie(w,m,As);const M=Fs(b,_);return new ki(b,"signInViaPopup",m,M).executeNotNull()})).apply(this,arguments)}function Zo(w,m,_){return cu.apply(this,arguments)}function cu(){return(cu=(0,u.Z)(function*(w,m,_){const b=(0,j.m9)(w);Ie(b.auth,m,As);const M=Fs(b.auth,_);return new ki(b.auth,"reauthViaPopup",m,M,b).executeNotNull()})).apply(this,arguments)}function ip(w,m,_){return vc.apply(this,arguments)}function vc(){return(vc=(0,u.Z)(function*(w,m,_){const b=(0,j.m9)(w);Ie(b.auth,m,As);const M=Fs(b.auth,_);return new ki(b.auth,"linkViaPopup",m,M,b).executeNotNull()})).apply(this,arguments)}let ki=(()=>{class w extends nh{constructor(_,b,M,L,ne){super(_,b,L,ne),this.provider=M,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,u.Z)(function*(){const b=yield _.execute();return re(b,_.auth,"internal-error"),b})()}onExecution(){var _=this;return(0,u.Z)(function*(){Se(1===_.filter.length,"Popup operations only handle one event");const b=ba();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],b),_.authWindow.associatedEvent=b,_.resolver._originValidation(_.auth).catch(M=>{_.reject(M)}),_.resolver._isIframeWebStorageSupported(_.auth,M=>{M||_.reject(ke(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(ke(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var b,M;this.pollId=(null===(M=null===(b=this.authWindow)||void 0===b?void 0:b.window)||void 0===M?void 0:M.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ke(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,lu.get())};_()}}return w.currentPopupAction=null,w})();const Rr=new Map;class zo extends nh{constructor(m,_,b=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,b),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,u.Z)(function*(){let b=Rr.get(_.auth._key());if(!b){try{const L=(yield function Hy(w,m){return ps.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;b=()=>Promise.resolve(L)}catch(M){b=()=>Promise.reject(M)}Rr.set(_.auth._key(),b)}return _.bypassAuthState||Rr.set(_.auth._key(),()=>Promise.resolve(null)),b()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,b=this;return(0,u.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(b,m);if("unknown"!==m.type){if(m.eventId){const M=yield b.auth._redirectUserForId(m.eventId);if(M)return b.user=M,_().call(b,m);b.resolve(null)}}else b.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function ps(){return(ps=(0,u.Z)(function*(w,m){const _=N(m),b=D(w);if(!(yield b._isAvailable()))return!1;const M="true"===(yield b._get(_));return yield b._remove(_),M})).apply(this,arguments)}function po(w,m){return Da.apply(this,arguments)}function Da(){return(Da=(0,u.Z)(function*(w,m){return D(w)._set(N(m),"true")})).apply(this,arguments)}function sm(){Rr.clear()}function I(w,m){Rr.set(w._key(),m)}function D(w){return ie(w._redirectPersistence)}function N(w){return St("pendingRedirect",w.config.apiKey,w.name)}function B(w,m,_){return function X(w,m,_){return de.apply(this,arguments)}(w,m,_)}function de(){return(de=(0,u.Z)(function*(w,m,_){const b=He(w);Ie(w,m,As);const M=Fs(b,_);return yield po(M,b),M._openRedirect(b,m,"signInViaRedirect")})).apply(this,arguments)}function Be(w,m,_){return function Ye(w,m,_){return Ct.apply(this,arguments)}(w,m,_)}function Ct(){return(Ct=(0,u.Z)(function*(w,m,_){const b=(0,j.m9)(w);Ie(b.auth,m,As);const M=Fs(b.auth,_);yield po(M,b.auth);const L=yield Ei(b);return M._openRedirect(b.auth,m,"reauthViaRedirect",L)})).apply(this,arguments)}function Mt(w,m,_){return function Xt(w,m,_){return Tt.apply(this,arguments)}(w,m,_)}function Tt(){return(Tt=(0,u.Z)(function*(w,m,_){const b=(0,j.m9)(w);Ie(b.auth,m,As);const M=Fs(b.auth,_);yield io(!1,b,m.providerId),yield po(M,b.auth);const L=yield Ei(b);return M._openRedirect(b.auth,m,"linkViaRedirect",L)})).apply(this,arguments)}function ei(w,m){return pr.apply(this,arguments)}function pr(){return(pr=(0,u.Z)(function*(w,m){return yield He(w)._initializationPromise,go(w,m,!1)})).apply(this,arguments)}function go(w,m){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,u.Z)(function*(w,m,_=!1){const b=He(w),M=Fs(b,m),ne=yield new zo(b,M,_).execute();return ne&&!_&&(delete ne.user._redirectEventId,yield b._persistUserIfCurrent(ne.user),yield b._setRedirectUser(null,m)),ne})).apply(this,arguments)}function Ei(w){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,u.Z)(function*(w){const m=ba(`${w.uid}:::`);return w._redirectEventId=m,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),m})).apply(this,arguments)}class wc{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(b=>{this.isEventForConsumer(m,b)&&(_=!0,this.sendToConsumer(m,b),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function du(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bc(w);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var b;if(m.error&&!bc(m)){const M=(null===(b=m.error.code)||void 0===b?void 0:b.split("auth/")[1])||"internal-error";_.onError(ke(this.auth,M))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const b=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&b}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ec(m))}saveEventToCache(m){this.cachedEventUids.add(Ec(m)),this.lastProcessedEventTime=Date.now()}}function Ec(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(m=>m).join("-")}function bc({type:w,error:m}){return"unknown"===w&&"auth/no-auth-event"===(null==m?void 0:m.code)}function rh(w){return hu.apply(this,arguments)}function hu(){return(hu=(0,u.Z)(function*(w,m={}){return nn(w,"GET","/v1/projects",m)})).apply(this,arguments)}const sp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Wo=/^https?/;function ih(){return(ih=(0,u.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:m}=yield rh(w);for(const _ of m)try{if($y(_))return}catch(b){}Ze(w,"unauthorized-domain")})).apply(this,arguments)}function $y(w){const m=he(),{protocol:_,hostname:b}=new URL(m);if(w.startsWith("chrome-extension://")){const ne=new URL(w);return""===ne.hostname&&""===b?"chrome-extension:"===_&&w.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&ne.hostname===b}if(!Wo.test(_))return!1;if(sp.test(w))return b===w;const M=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(b)}const op=new et(3e4,6e4);function sh(){const w=Tn().___jsl;if(null==w?void 0:w.H)for(const m of Object.keys(w.H))if(w.H[m].r=w.H[m].r||[],w.H[m].L=w.H[m].L||[],w.H[m].r=[...w.H[m].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let Aa=null;function am(w){return Aa=Aa||function om(w){return new Promise((m,_)=>{var b,M,L;function ne(){sh(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{sh(),_(ke(w,"network-request-failed"))},timeout:op.get()})}if(null===(M=null===(b=Tn().gapi)||void 0===b?void 0:b.iframes)||void 0===M?void 0:M.Iframe)m(gapi.iframes.getContext());else{if(!(null===(L=Tn().gapi)||void 0===L?void 0:L.load)){const Oe=uo("iframefcb");return Tn()[Oe]=()=>{gapi.load?ne():_(ke(w,"network-request-failed"))},Bo(`https://apis.google.com/js/api.js?onload=${Oe}`).catch(at=>_(at))}ne()}}).catch(m=>{throw Aa=null,m})}(w),Aa}const qy=new et(5e3,15e3),Il={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xE(w){const m=w.config;re(m.authDomain,w,"auth-domain-config-required");const _=m.emulator?_n(m,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,b={apiKey:m.apiKey,appName:w.name,v:k.SDK_VERSION},M=AE.get(w.config.apiHost);M&&(b.eid=M);const L=w._getFrameworks();return L.length&&(b.fw=L.join(",")),`${_}?${(0,j.xO)(b).slice(1)}`}function Cc(){return Cc=(0,u.Z)(function*(w){const m=yield am(w),_=Tn().gapi;return re(_,w,"internal-error"),m.open({where:document.body,url:xE(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Il,dontclear:!0},b=>new Promise(function(){var M=(0,u.Z)(function*(L,ne){yield b.restyle({setHideOnLeave:!1});const Oe=ke(w,"network-request-failed"),at=Tn().setTimeout(()=>{ne(Oe)},qy.get());function Et(){Tn().clearTimeout(at),L(b)}b.ping(Et).then(Et,()=>{ne(Oe)})});return function(L,ne){return M.apply(this,arguments)}}()))}),Cc.apply(this,arguments)}const ap={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Tc{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(m){}}}function Ls(w,m,_,b,M,L){re(w.config.authDomain,w,"auth-domain-config-required"),re(w.config.apiKey,w,"invalid-api-key");const ne={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:b,v:k.SDK_VERSION,eventId:M};if(m instanceof As){m.setDefaultLanguage(w.languageCode),ne.providerId=m.providerId||"",(0,j.xb)(m.getCustomParameters())||(ne.customParameters=JSON.stringify(m.getCustomParameters()));for(const[at,Et]of Object.entries(L||{}))ne[at]=Et}if(m instanceof Mi){const at=m.getScopes().filter(Et=>""!==Et);at.length>0&&(ne.scopes=at.join(","))}w.tenantId&&(ne.tid=w.tenantId);const Oe=ne;for(const at of Object.keys(Oe))void 0===Oe[at]&&delete Oe[at];return`${function Ic({config:w}){return w.emulator?_n(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,j.xO)(Oe).slice(1)}`}const oh="webStorageSupport",cm=class PE{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=El,this._completeRedirectFn=go,this._overrideRedirectResult=I}_openPopup(m,_,b,M){var L=this;return(0,u.Z)(function*(){var ne;Se(null===(ne=L.eventManagers[m._key()])||void 0===ne?void 0:ne.manager,"_initialize() not called before _openPopup()");const Oe=Ls(m,_,b,he(),M);return function Gy(w,m,_,b=500,M=600){const L=Math.max((window.screen.availHeight-M)/2,0).toString(),ne=Math.max((window.screen.availWidth-b)/2,0).toString();let Oe="";const at=Object.assign(Object.assign({},ap),{width:b.toString(),height:M.toString(),top:L,left:ne}),Et=(0,j.z$)().toLowerCase();_&&(Oe=xe(Et)?"_blank":_),Y(Et)&&(m=m||"http://localhost",at.scrollbars="yes");const Wt=Object.entries(at).reduce((bi,[gs,ah])=>`${bi}${gs}=${ah},`,"");if(function fi(w=(0,j.z$)()){var m;return $t(w)&&!!(null===(m=window.navigator)||void 0===m?void 0:m.standalone)}(Et)&&"_self"!==Oe)return function um(w,m){const _=document.createElement("a");_.href=w,_.target=m;const b=document.createEvent("MouseEvent");b.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(b)}(m||"",Oe),new Tc(null);const Fn=window.open(m||"",Oe,Wt);re(Fn,w,"popup-blocked");try{Fn.focus()}catch(bi){}return new Tc(Fn)}(m,Oe,ba())})()}_openRedirect(m,_,b,M){var L=this;return(0,u.Z)(function*(){return yield L._originValidation(m),function On(w){Tn().location.href=w}(Ls(m,_,b,he(),M)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:M,promise:L}=this.eventManagers[_];return M?Promise.resolve(M):(Se(L,"If manager is not set, promise should be"),L)}const b=this.initAndGetManager(m);return this.eventManagers[_]={promise:b},b.catch(()=>{delete this.eventManagers[_]}),b}initAndGetManager(m){var _=this;return(0,u.Z)(function*(){const b=yield function IS(w){return Cc.apply(this,arguments)}(m),M=new wc(m);return b.register("authEvent",L=>(re(null==L?void 0:L.authEvent,m,"invalid-auth-event"),{status:M.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:M},_.iframes[m._key()]=b,M})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(oh,{type:oh},M=>{var L;const ne=null===(L=null==M?void 0:M[0])||void 0===L?void 0:L[oh];void 0!==ne&&_(!!ne),Ze(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function fu(w){return ih.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return jr()||W()||$t()}};class hm extends class dm{constructor(m){this.factorId=m}_process(m,_,b){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,b);case"signin":return this._finalizeSignIn(m,_.credential);default:return pe("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new hm(m)}_finalizeEnroll(m,_,b){return function Jf(w,m){return nn(w,"POST","/v2/accounts/mfaEnrollment:finalize",Ht(w,m))}(m,{idToken:_,displayName:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function Cl(w,m){return nn(w,"POST","/v2/accounts/mfaSignIn:finalize",Ht(w,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let zy=(()=>{class w{constructor(){}static assertion(_){return hm._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var cp="@firebase/auth";class Wy{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,u.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(b=>{var M;m((null===(M=b)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);!_||(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function Ky(w){(0,k._registerComponent)(new ye.wA("auth",(m,{options:_})=>{const b=m.getProvider("app").getImmediate(),M=m.getProvider("heartbeat"),{apiKey:L,authDomain:ne}=b.options;return((Oe,at)=>{re(L&&!L.includes(":"),"invalid-api-key",{appName:Oe.name}),re(!(null==ne?void 0:ne.includes(":")),"argument-error",{appName:Oe.name});const Et={apiKey:L,authDomain:ne,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vr(w)},Wt=new pi(Oe,at,Et);return function Ee(w,m){const _=(null==m?void 0:m.persistence)||[],b=(Array.isArray(_)?_:[_]).map(ie);(null==m?void 0:m.errorMap)&&w._updateErrorMap(m.errorMap),w._initializeWithPersistence(b,null==m?void 0:m.popupRedirectResolver)}(Wt,_),Wt})(b,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,b)=>{m.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new ye.wA("auth-internal",m=>{const _=He(m.getProvider("auth").getImmediate());return new Wy(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(cp,"0.20.2",function dp(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,k.registerVersion)(cp,"0.20.2","esm2017")}("Browser")},2090:(ot,Te,F)=>{F.d(Te,{$s:()=>Zt,BH:()=>We,DV:()=>nn,Dv:()=>Nr,G6:()=>re,GJ:()=>an,L:()=>ue,LL:()=>he,Mn:()=>Ie,Pz:()=>jt,Sg:()=>Ne,UG:()=>_e,UI:()=>qi,US:()=>ye,Wj:()=>Mn,Yr:()=>Ke,ZB:()=>$,ZR:()=>Ee,b$:()=>Ze,cI:()=>tn,d:()=>ke,dS:()=>Cs,eu:()=>Se,g5:()=>k,gK:()=>cr,gQ:()=>qn,h$:()=>fe,hl:()=>pe,hu:()=>j,jU:()=>Ae,lb:()=>dr,m9:()=>vn,ne:()=>is,p$:()=>Z,pd:()=>Gi,r3:()=>Ht,ru:()=>ze,tV:()=>ve,uI:()=>qe,ug:()=>Gt,vZ:()=>Br,w1:()=>Re,w9:()=>yn,xO:()=>rs,xb:()=>Nn,z$:()=>Ue,zI:()=>Q,zd:()=>Ii});const j=function(H,z){if(!H)throw k(z)},k=function(H){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+H)},ae=function(H){const z=[];let K=0;for(let Ce=0;Ce<H.length;Ce++){let G=H.charCodeAt(Ce);G<128?z[K++]=G:G<2048?(z[K++]=G>>6|192,z[K++]=63&G|128):55296==(64512&G)&&Ce+1<H.length&&56320==(64512&H.charCodeAt(Ce+1))?(G=65536+((1023&G)<<10)+(1023&H.charCodeAt(++Ce)),z[K++]=G>>18|240,z[K++]=G>>12&63|128,z[K++]=G>>6&63|128,z[K++]=63&G|128):(z[K++]=G>>12|224,z[K++]=G>>6&63|128,z[K++]=63&G|128)}return z},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,z){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ce=[];for(let G=0;G<H.length;G+=3){const ee=H[G],Fe=G+1<H.length,it=Fe?H[G+1]:0,_t=G+2<H.length,Lt=_t?H[G+2]:0;let ir=(15&it)<<2|Lt>>6,ce=63&Lt;_t||(ce=64,Fe||(ir=64)),Ce.push(K[ee>>2],K[(3&ee)<<4|it>>4],K[ir],K[ce])}return Ce.join("")},encodeString(H,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(H):this.encodeByteArray(ae(H),z)},decodeString(H,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(H):function(H){const z=[];let K=0,Ce=0;for(;K<H.length;){const G=H[K++];if(G<128)z[Ce++]=String.fromCharCode(G);else if(G>191&&G<224){const ee=H[K++];z[Ce++]=String.fromCharCode((31&G)<<6|63&ee)}else if(G>239&&G<365){const _t=((7&G)<<18|(63&H[K++])<<12|(63&H[K++])<<6|63&H[K++])-65536;z[Ce++]=String.fromCharCode(55296+(_t>>10)),z[Ce++]=String.fromCharCode(56320+(1023&_t))}else{const ee=H[K++],Fe=H[K++];z[Ce++]=String.fromCharCode((15&G)<<12|(63&ee)<<6|63&Fe)}}return z.join("")}(this.decodeStringToByteArray(H,z))},decodeStringToByteArray(H,z){this.init_();const K=z?this.charToByteMapWebSafe_:this.charToByteMap_,Ce=[];for(let G=0;G<H.length;){const ee=K[H.charAt(G++)],it=G<H.length?K[H.charAt(G)]:0;++G;const Lt=G<H.length?K[H.charAt(G)]:64;++G;const St=G<H.length?K[H.charAt(G)]:64;if(++G,null==ee||null==it||null==Lt||null==St)throw Error();Ce.push(ee<<2|it>>4),64!==Lt&&(Ce.push(it<<4&240|Lt>>2),64!==St&&Ce.push(Lt<<6&192|St))}return Ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},fe=function(H){const z=ae(H);return ye.encodeByteArray(z,!0)},ue=function(H){return fe(H).replace(/\./g,"")},ve=function(H){try{return ye.decodeString(H,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function Z(H){return $(void 0,H)}function $(H,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return z}for(const K in z)!z.hasOwnProperty(K)||!se(K)||(H[K]=$(H[K],z[K]));return H}function se(H){return"__proto__"!==H}class We{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,K)=>{this.resolve=z,this.reject=K})}wrapCallback(z){return(K,Ce)=>{K?this.reject(K):this.resolve(Ce),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(K):z(K,Ce))}}}function Ne(H,z){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ce=z||"demo-project",G=H.iat||0,ee=H.sub||H.user_id;if(!ee)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Fe=Object.assign({iss:`https://securetoken.google.com/${Ce}`,aud:Ce,iat:G,exp:G+3600,auth_time:G,sub:ee,user_id:ee,firebase:{sign_in_provider:"custom",identities:{}}},H);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(Fe)),""].join(".")}function Ue(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function qe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ue())}function _e(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(H){return!1}}function Ae(){return"object"==typeof self&&self.self===self}function ze(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ke(){return Ue().indexOf("Electron/")>=0}function Re(){const H=Ue();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Ie(){return Ue().indexOf("MSAppHost/")>=0}function Ke(){return!1}function re(){return!_e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pe(){return"object"==typeof indexedDB}function Se(){return new Promise((H,z)=>{try{let K=!0;const Ce="validate-browser-context-for-indexeddb-analytics-module",G=self.indexedDB.open(Ce);G.onsuccess=()=>{G.result.close(),K||self.indexedDB.deleteDatabase(Ce),H(!0)},G.onupgradeneeded=()=>{K=!1},G.onerror=()=>{var ee;z((null===(ee=G.error)||void 0===ee?void 0:ee.message)||"")}}catch(K){z(K)}})}function Q(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ee extends Error{constructor(z,K,Ce){super(K),this.code=z,this.customData=Ce,this.name="FirebaseError",Object.setPrototypeOf(this,Ee.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,he.prototype.create)}}class he{constructor(z,K,Ce){this.service=z,this.serviceName=K,this.errors=Ce}create(z,...K){const Ce=K[0]||{},G=`${this.service}/${z}`,ee=this.errors[z],Fe=ee?function Ve(H,z){return H.replace(mt,(K,Ce)=>{const G=z[Ce];return null!=G?String(G):`<${Ce}?>`})}(ee,Ce):"Error";return new Ee(G,`${this.serviceName}: ${Fe} (${G}).`,Ce)}}const mt=/\{\$([^}]+)}/g;function tn(H){return JSON.parse(H)}function jt(H){return JSON.stringify(H)}const et=function(H){let z={},K={},Ce={},G="";try{const ee=H.split(".");z=tn(ve(ee[0])||""),K=tn(ve(ee[1])||""),G=ee[2],Ce=K.d||{},delete K.d}catch(ee){}return{header:z,claims:K,data:Ce,signature:G}},yn=function(H){const K=et(H).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},an=function(H){const z=et(H).claims;return"object"==typeof z&&!0===z.admin};function Ht(H,z){return Object.prototype.hasOwnProperty.call(H,z)}function nn(H,z){if(Object.prototype.hasOwnProperty.call(H,z))return H[z]}function Nn(H){for(const z in H)if(Object.prototype.hasOwnProperty.call(H,z))return!1;return!0}function qi(H,z,K){const Ce={};for(const G in H)Object.prototype.hasOwnProperty.call(H,G)&&(Ce[G]=z.call(K,H[G],G,H));return Ce}function Br(H,z){if(H===z)return!0;const K=Object.keys(H),Ce=Object.keys(z);for(const G of K){if(!Ce.includes(G))return!1;const ee=H[G],Fe=z[G];if(Rn(ee)&&Rn(Fe)){if(!Br(ee,Fe))return!1}else if(ee!==Fe)return!1}for(const G of Ce)if(!K.includes(G))return!1;return!0}function Rn(H){return null!==H&&"object"==typeof H}function rs(H){const z=[];for(const[K,Ce]of Object.entries(H))Array.isArray(Ce)?Ce.forEach(G=>{z.push(encodeURIComponent(K)+"="+encodeURIComponent(G))}):z.push(encodeURIComponent(K)+"="+encodeURIComponent(Ce));return z.length?"&"+z.join("&"):""}function Ii(H){const z={};return H.replace(/^\?/,"").split("&").forEach(Ce=>{if(Ce){const[G,ee]=Ce.split("=");z[decodeURIComponent(G)]=decodeURIComponent(ee)}}),z}function Gi(H){const z=H.indexOf("?");if(!z)return"";const K=H.indexOf("#",z);return H.substring(z,K>0?K:void 0)}class qn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,K){K||(K=0);const Ce=this.W_;if("string"==typeof z)for(let St=0;St<16;St++)Ce[St]=z.charCodeAt(K)<<24|z.charCodeAt(K+1)<<16|z.charCodeAt(K+2)<<8|z.charCodeAt(K+3),K+=4;else for(let St=0;St<16;St++)Ce[St]=z[K]<<24|z[K+1]<<16|z[K+2]<<8|z[K+3],K+=4;for(let St=16;St<80;St++){const ir=Ce[St-3]^Ce[St-8]^Ce[St-14]^Ce[St-16];Ce[St]=4294967295&(ir<<1|ir>>>31)}let Lt,pn,G=this.chain_[0],ee=this.chain_[1],Fe=this.chain_[2],it=this.chain_[3],_t=this.chain_[4];for(let St=0;St<80;St++){St<40?St<20?(Lt=it^ee&(Fe^it),pn=1518500249):(Lt=ee^Fe^it,pn=1859775393):St<60?(Lt=ee&Fe|it&(ee|Fe),pn=2400959708):(Lt=ee^Fe^it,pn=3395469782);const ir=(G<<5|G>>>27)+Lt+_t+pn+Ce[St]&4294967295;_t=it,it=Fe,Fe=4294967295&(ee<<30|ee>>>2),ee=G,G=ir}this.chain_[0]=this.chain_[0]+G&4294967295,this.chain_[1]=this.chain_[1]+ee&4294967295,this.chain_[2]=this.chain_[2]+Fe&4294967295,this.chain_[3]=this.chain_[3]+it&4294967295,this.chain_[4]=this.chain_[4]+_t&4294967295}update(z,K){if(null==z)return;void 0===K&&(K=z.length);const Ce=K-this.blockSize;let G=0;const ee=this.buf_;let Fe=this.inbuf_;for(;G<K;){if(0===Fe)for(;G<=Ce;)this.compress_(z,G),G+=this.blockSize;if("string"==typeof z){for(;G<K;)if(ee[Fe]=z.charCodeAt(G),++Fe,++G,Fe===this.blockSize){this.compress_(ee),Fe=0;break}}else for(;G<K;)if(ee[Fe]=z[G],++Fe,++G,Fe===this.blockSize){this.compress_(ee),Fe=0;break}}this.inbuf_=Fe,this.total_+=K}digest(){const z=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let G=this.blockSize-1;G>=56;G--)this.buf_[G]=255&K,K/=256;this.compress_(this.buf_);let Ce=0;for(let G=0;G<5;G++)for(let ee=24;ee>=0;ee-=8)z[Ce]=this.chain_[G]>>ee&255,++Ce;return z}}function is(H,z){const K=new wt(H,z);return K.subscribe.bind(K)}class wt{constructor(z,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{z(this)}).catch(Ce=>{this.error(Ce)})}next(z){this.forEachObserver(K=>{K.next(z)})}error(z){this.forEachObserver(K=>{K.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,K,Ce){let G;if(void 0===z&&void 0===K&&void 0===Ce)throw new Error("Missing Observer.");G=function xn(H,z){if("object"!=typeof H||null===H)return!1;for(const K of z)if(K in H&&"function"==typeof H[K])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:K,complete:Ce},void 0===G.next&&(G.next=ln),void 0===G.error&&(G.error=ln),void 0===G.complete&&(G.complete=ln);const ee=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?G.error(this.finalError):G.complete()}catch(Fe){}}),this.observers.push(G),ee}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,z)}sendOne(z,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{K(this.observers[z])}catch(Ce){"undefined"!=typeof console&&console.error&&console.error(Ce)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ln(){}const Nr=function(H,z,K,Ce){let G;if(Ce<z?G="at least "+z:Ce>K&&(G=0===K?"none":"no more than "+K),G)throw new Error(H+" failed: Was called with "+Ce+(1===Ce?" argument.":" arguments.")+" Expects "+G+".")};function cr(H,z){return`${H} failed: ${z} argument `}function Mn(H,z,K,Ce){if((!Ce||K)&&"function"!=typeof K)throw new Error(cr(H,z)+"must be a valid function.")}function dr(H,z,K,Ce){if((!Ce||K)&&("object"!=typeof K||null===K))throw new Error(cr(H,z)+"must be a valid context object.")}const Cs=function(H){const z=[];let K=0;for(let Ce=0;Ce<H.length;Ce++){let G=H.charCodeAt(Ce);if(G>=55296&&G<=56319){const ee=G-55296;Ce++,j(Ce<H.length,"Surrogate pair missing trail surrogate."),G=65536+(ee<<10)+(H.charCodeAt(Ce)-56320)}G<128?z[K++]=G:G<2048?(z[K++]=G>>6|192,z[K++]=63&G|128):G<65536?(z[K++]=G>>12|224,z[K++]=G>>6&63|128,z[K++]=63&G|128):(z[K++]=G>>18|240,z[K++]=G>>12&63|128,z[K++]=G>>6&63|128,z[K++]=63&G|128)}return z},Gt=function(H){let z=0;for(let K=0;K<H.length;K++){const Ce=H.charCodeAt(K);Ce<128?z++:Ce<2048?z+=2:Ce>=55296&&Ce<=56319?(z+=4,K++):z+=3}return z};function Zt(H,z=1e3,K=2){const Ce=z*Math.pow(K,H),G=Math.round(.5*Ce*(Math.random()-.5)*2);return Math.min(144e5,Ce+G)}function vn(H){return H&&H._delegate?H._delegate:H}},655:(ot,Te,F)=>{var u=F(5e3);let j=null;function k(){return j}const fe=new u.OlP("DocumentToken");let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function ve(){return(0,u.LFG)($)}()},providedIn:"platform"}),n})();const Z=new u.OlP("Location Initialized");let $=(()=>{class n extends ue{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){se()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){se()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(fe))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function We(){return new $((0,u.LFG)(fe))}()},providedIn:"platform"}),n})();function se(){return!!window.history.pushState}function Ne(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ue(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function qe(n){return n&&"?"!==n[0]?"?"+n:n}let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Ae(n){const e=(0,u.LFG)(fe).location;return new Ze((0,u.LFG)(ue),e&&e.origin||"")}()},providedIn:"root"}),n})();const ze=new u.OlP("appBaseHref");let Ze=(()=>{class n extends _e{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ne(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+qe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const c=this.prepareExternalUrl(i+qe(o));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,o){const c=this.prepareExternalUrl(i+qe(o));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue),u.LFG(ze,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),ke=(()=>{class n extends _e{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ne(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let c=this.prepareExternalUrl(i+qe(o));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,o){let c=this.prepareExternalUrl(i+qe(o));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(ue),u.LFG(ze,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n{constructor(t,r){this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ue(re(i)),this._platformStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+qe(r))}normalize(t){return n.stripTrailingSlash(function Ke(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,re(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+qe(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=qe,n.joinWithSlash=Ne,n.stripTrailingSlash=Ue,n.\u0275fac=function(t){return new(t||n)(u.LFG(_e),u.LFG(ue))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Ie(){return new Re((0,u.LFG)(_e),(0,u.LFG)(ue))}()},providedIn:"root"}),n})();function re(n){return n.replace(/\/index.html$/,"")}const pe={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var Se=(()=>((Se=Se||{})[Se.Decimal=0]="Decimal",Se[Se.Percent=1]="Percent",Se[Se.Currency=2]="Currency",Se[Se.Scientific=3]="Scientific",Se))(),he=(()=>((he=he||{})[he.Decimal=0]="Decimal",he[he.Group=1]="Group",he[he.List=2]="List",he[he.PercentSign=3]="PercentSign",he[he.PlusSign=4]="PlusSign",he[he.MinusSign=5]="MinusSign",he[he.Exponential=6]="Exponential",he[he.SuperscriptingExponent=7]="SuperscriptingExponent",he[he.PerMille=8]="PerMille",he[he.Infinity=9]="Infinity",he[he.NaN=10]="NaN",he[he.TimeSeparator=11]="TimeSeparator",he[he.CurrencyDecimal=12]="CurrencyDecimal",he[he.CurrencyGroup=13]="CurrencyGroup",he))();function Nn(n,e){const t=(0,u.cg1)(n),r=t[u.wAp.NumberSymbols][e];if(void 0===r){if(e===he.CurrencyDecimal)return t[u.wAp.NumberSymbols][he.Decimal];if(e===he.CurrencyGroup)return t[u.wAp.NumberSymbols][he.Group]}return r}function qi(n,e){return(0,u.cg1)(n)[u.wAp.NumberFormats][e]}const kt=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function tl(n,e,t,r,i,o,c=!1){let h="",p=!1;if(isFinite(n)){let y=function Ts(n){let r,i,o,c,h,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;"0"===e.charAt(o);o++);if(o===(h=e.length))r=[0],i=1;else{for(h--;"0"===e.charAt(h);)h--;for(i-=o,r=[],c=0;o<=h;o++,c++)r[c]=Number(e.charAt(o))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);c&&(y=function Jr(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(y));let T=e.minInt,S=e.minFrac,x=e.maxFrac;if(o){const nt=o.match(kt);if(null===nt)throw new Error(`${o} is not a valid digit info`);const rt=nt[1],Xe=nt[3],xt=nt[5];null!=rt&&(T=Is(rt)),null!=Xe&&(S=Is(Xe)),null!=xt?x=Is(xt):null!=Xe&&S>x&&(x=S)}!function Jn(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const o=Math.min(Math.max(e,i),t);let c=o+n.integerLen,h=r[c];if(c>0){r.splice(Math.max(n.integerLen,c));for(let S=c;S<r.length;S++)r[S]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,c=o+1),r[0]=0;for(let S=1;S<c;S++)r[S]=0}if(h>=5)if(c-1<0){for(let S=0;S>c;S--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[c-1]++;for(;i<Math.max(0,o);i++)r.push(0);let p=0!==o;const y=e+n.integerLen,T=r.reduceRight(function(S,x,O,V){return V[O]=(x+=S)<10?x:x-10,p&&(0===V[O]&&O>=y?V.pop():p=!1),x>=10?1:0},0);T&&(r.unshift(T),n.integerLen++)}(y,S,x);let O=y.digits,V=y.integerLen;const J=y.exponent;let we=[];for(p=O.every(nt=>!nt);V<T;V++)O.unshift(0);for(;V<0;V++)O.unshift(0);V>0?we=O.splice(V,O.length):(we=O,O=[0]);const Ge=[];for(O.length>=e.lgSize&&Ge.unshift(O.splice(-e.lgSize,O.length).join(""));O.length>e.gSize;)Ge.unshift(O.splice(-e.gSize,O.length).join(""));O.length&&Ge.unshift(O.join("")),h=Ge.join(Nn(t,r)),we.length&&(h+=Nn(t,i)+we.join("")),J&&(h+=Nn(t,he.Exponential)+"+"+J)}else h=Nn(t,he.Infinity);return h=n<0&&!p?e.negPre+h+e.negSuf:e.posPre+h+e.posSuf,h}function Dn(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],o=r[1],c=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],h=c[0],p=c[1]||"";t.posPre=h.substr(0,h.indexOf("#"));for(let T=0;T<p.length;T++){const S=p.charAt(T);"0"===S?t.minFrac=t.maxFrac=T+1:"#"===S?t.maxFrac=T+1:t.posSuf+=S}const y=h.split(",");if(t.gSize=y[1]?y[1].length:0,t.lgSize=y[2]||y[1]?(y[2]||y[1]).length:0,o){const T=i.length-t.posPre.length-t.posSuf.length,S=o.indexOf("#");t.negPre=o.substr(0,S).replace(/'/g,""),t.negSuf=o.substr(S+T).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function Is(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Do(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}class pa{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Bn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new pa(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===o?void 0:o);else if(null!==o){const h=r.get(o);r.move(h,c),no(h,i)}});for(let i=0,o=r.length;i<o;i++){const h=r.get(i).context;h.index=i,h.count=o,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{no(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function no(n,e){n.context.$implicit=e.item}let hr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new wn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){xd("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){xd("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class wn{constructor(){this.$implicit=null,this.ngIf=null}}function xd(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}function sr(n,e){return new u.vHH(2100,"")}let As=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!il(t))return null;i=i||this._locale;try{return function Bt(n,e,t){return tl(n,Dn(qi(e,Se.Decimal),Nn(e,he.MinusSign)),e,he.Group,he.Decimal,t)}(sl(t),i,r)}catch(o){throw sr()}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.soG,16))},n.\u0275pipe=u.Yjl({name:"number",type:n,pure:!0}),n})(),Mo=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",o,c){if(!il(t))return null;c=c||this._locale,"boolean"==typeof i&&(i=i?"symbol":"code");let h=r||this._defaultCurrencyCode;"code"!==i&&(h="symbol"===i||"symbol-narrow"===i?function Nr(n,e,t="en"){const r=function Ii(n){return(0,u.cg1)(n)[u.wAp.Currencies]}(t)[n]||pe[n]||[],i=r[1];return"narrow"===e&&"string"==typeof i?i:r[0]||n}(h,"symbol"===i?"wide":"narrow",c):i);try{return function pi(n,e,t,r,i){const c=Dn(qi(e,Se.Currency),Nn(e,he.MinusSign));return c.minFrac=function Qr(n){let e;const t=pe[n];return t&&(e=t[2]),"number"==typeof e?e:2}(r),c.maxFrac=c.minFrac,tl(n,c,e,he.CurrencyGroup,he.CurrencyDecimal,i).replace("\xa4",t).replace("\xa4","").trim()}(sl(t),c,h,r,o)}catch(p){throw sr()}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.soG,16),u.Y36(u.EJc,16))},n.\u0275pipe=u.Yjl({name:"currency",type:n,pure:!0}),n})();function il(n){return!(null==n||""===n||n!=n)}function sl(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}let Po=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function $r(n){return"server"===n}let Yl=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new Ql((0,u.LFG)(fe),window)}),n})();class Ql{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ms(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const c=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=tc(this.window.history)||tc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function tc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Cn{}class io extends class ol extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function le(n){j||(j=n)}(new io)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Jl(){return En=En||document.querySelector("base"),En?En.getAttribute("href"):null}();return null==t?null:function No(n){al=al||document.createElement("a"),al.setAttribute("href",n);const e=al.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){En=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Do(document.cookie,e)}}let al,En=null;const wr=new u.OlP("TRANSITION_ID"),zn=[{provide:u.ip1,useFactory:function Xl(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[wr,fe,u.zs3],multi:!0}];class Ps{static init(){(0,u.VLi)(new Ps)}addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let o=i.length,c=!1;const h=function(p){c=c||p,o--,0==o&&r(c)};i.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Er=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const _a=new u.OlP("EventManagerPlugins");let as=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const c=i[o];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(_a),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class rc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let gi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),so=(()=>{class n extends gi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const c=this._doc.createElement("style");c.textContent=o,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(oo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(oo))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(fe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function oo(n){k().remove(n)}const bt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ll=/%COMP%/g;function Me(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Me(n,i,t):(i=i.replace(ll,n),t.push(i))}return t}function zt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let jn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new ao(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case u.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new sc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case u.ifc.ShadowDom:return new oc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Me(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(as),u.LFG(so),u.LFG(u.AFp))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class ao{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(bt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=bt[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=bt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,zt(r)):this.eventManager.addEventListener(e,t,zt(r))}}class sc extends ao{constructor(e,t,r,i){super(e),this.component=r;const o=Me(i+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr=function dl(n){return"_ngcontent-%COMP%".replace(ll,n)}(i+"-"+r.id),this.hostAttr=function Wf(n){return"_nghost-%COMP%".replace(ll,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class oc extends ao{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Me(i.id,i.styles,[]);for(let c=0;c<o.length;c++){const h=document.createElement("style");h.textContent=o[c],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let jd=(()=>{class n extends rc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(fe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Hd=["alt","control","meta","shift"],ya={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Wi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ac=(()=>{class n extends rc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),c=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,o.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let c="";if(Hd.forEach(p=>{const y=r.indexOf(p);y>-1&&(r.splice(y,1),c+=p+".")}),c+=o,0!=r.length||0===o.length)return null;const h={};return h.domEventName=i,h.fullKey=c,h}static getEventFullKey(t){let r="",i=function ls(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&fr.hasOwnProperty(e)&&(e=fr[e]))}return ya[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Hd.forEach(o=>{o!=i&&Wi[o](t)&&(r+=o+".")}),r+=i,r}static eventCallback(t,r,i){return o=>{n.getEventFullKey(o)===t&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(fe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const qd=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function Ns(){io.makeCurrent(),Ps.init()},multi:!0},{provide:fe,useFactory:function $d(){return(0,u.RDi)(document),document},deps:[]}]),ko=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function gl(){return new u.qLn},deps:[]},{provide:_a,useClass:jd,multi:!0,deps:[fe,u.R0b,u.Lbi]},{provide:_a,useClass:ac,multi:!0,deps:[fe]},{provide:jn,useClass:jn,deps:[as,so,u.AFp]},{provide:u.FYo,useExisting:jn},{provide:gi,useExisting:so},{provide:so,useClass:so,deps:[fe]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:as,useClass:as,deps:[_a,u.R0b]},{provide:Cn,useClass:Er,deps:[]}];let va=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:wr,useExisting:u.AFp},zn]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(n,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:ko,imports:[Po,u.hGG]}),n})();"undefined"!=typeof window&&window;var Pn=F(8996),cs=F(8306);const{isArray:Tr}=Array,{getPrototypeOf:ep,prototype:El,keys:nu}=Object;function ru(n){if(1===n.length){const e=n[0];if(Tr(e))return{args:e,keys:null};if(function ba(n){return n&&"object"==typeof n&&ep(n)===El}(e)){const t=nu(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ds=F(8421),Tn=F(7669),On=F(5403),yt=F(4004);const{isArray:bl}=Array;function cc(n){return(0,yt.U)(e=>function iu(n,e){return bl(e)?n(...e):n(e)}(n,e))}function dc(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let Yd=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),kr=(()=>{class n extends Yd{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const mi=new u.OlP("NgValueAccessor"),Pi={provide:mi,useExisting:(0,u.Gpc)(()=>_i),multi:!0},ou=new u.OlP("CompositionEventMode");let _i=(()=>{class n extends Yd{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function su(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(ou,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[u._Bn([Pi]),u.qOj]}),n})();function hs(n){return null==n||0===n.length}function Ca(n){return null!=n&&"number"==typeof n.length}const Kn=new u.OlP("NgValidators"),fs=new u.OlP("NgAsyncValidators"),hc=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class or{static min(e){return function fc(n){return e=>{if(hs(e.value)||hs(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function pc(n){return e=>{if(hs(e.value)||hs(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Cl(n){return hs(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Uo(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Vo(n){return hs(n.value)||hc.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function au(n){return e=>hs(e.value)||!Ca(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Bo(n){return e=>Ca(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function uo(n){if(!n)return Ki;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(hs(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Hn(e)}static composeAsync(e){return im(e)}}function Ki(n){return null}function jo(n){return null!=n}function co(n){const e=(0,u.QGY)(n)?(0,Pn.D)(n):n;return(0,u.CqO)(e),e}function gc(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Ho(n,e){return e.map(t=>t(n))}function Ta(n){return n.map(e=>function rm(n){return!n.validate}(e)?e:t=>e.validate(t))}function Hn(n){if(!n)return null;const e=n.filter(jo);return 0==e.length?null:function(t){return gc(Ho(t,e))}}function Qd(n){return null!=n?Hn(Ta(n)):null}function im(n){if(!n)return null;const e=n.filter(jo);return 0==e.length?null:function(t){return function Kd(...n){const e=(0,Tn.jO)(n),{args:t,keys:r}=ru(n),i=new cs.y(o=>{const{length:c}=t;if(!c)return void o.complete();const h=new Array(c);let p=c,y=c;for(let T=0;T<c;T++){let S=!1;(0,ds.Xf)(t[T]).subscribe((0,On.x)(o,x=>{S||(S=!0,y--),h[T]=x},()=>p--,void 0,()=>{(!p||!S)&&(y||o.next(r?dc(r,h):h),o.complete())}))}});return e?i.pipe(cc(e)):i}(Ho(t,e).map(co)).pipe((0,yt.U)(gc))}}function tp(n){return null!=n?im(Ta(n)):null}function np(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function mc(n){return n._rawValidators}function Jd(n){return n._rawAsyncValidators}function Xd(n){return n?Array.isArray(n)?n:[n]:[]}function ho(n,e){return Array.isArray(n)?n.includes(e):n===e}function _c(n,e){const t=Xd(e);return Xd(n).forEach(i=>{ho(t,i)||t.push(i)}),t}function Xn(n,e){return Xd(e).filter(t=>!ho(n,t))}class Ia{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Qd(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ni extends Ia{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class qr extends Ia{get formDirective(){return null}get path(){return null}}class eh{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let fo=(()=>{class n extends eh{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ni,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[u.qOj]}),n})(),$o=(()=>{class n extends eh{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(qr,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[u.qOj]}),n})();function ki(n,e){return[...e.path,n]}function Sa(n,e){ps(n,e),e.valueAccessor.writeValue(n.value),function Da(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&I(n,e)})}(n,e),function D(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function sm(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&I(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Hy(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Rr(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),po(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function zo(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ps(n,e){const t=mc(n);null!==e.validator?n.setValidators(np(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Jd(n);null!==e.asyncValidator?n.setAsyncValidators(np(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();zo(e._rawValidators,i),zo(e._rawAsyncValidators,i)}function po(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=mc(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(c=>c!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=Jd(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(c=>c!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return zo(e._rawValidators,r),zo(e._rawAsyncValidators,r),t}function I(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function N(n,e){ps(n,e)}function Ct(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function Xt(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Tt(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===_i?t=o:function Mt(n){return Object.getPrototypeOf(n.constructor)===kr}(o)?r=o:i=o}),i||r||t||null}function ei(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Ri="VALID",Ei="INVALID",Gr="PENDING",ti="DISABLED";function Ec(n){return(hu(n)?n.validators:n)||null}function bc(n){return Array.isArray(n)?Qd(n):n||null}function du(n,e){return(hu(e)?e.asyncValidators:n)||null}function rh(n){return Array.isArray(n)?tp(n):n||null}function hu(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const sp=n=>n instanceof om,Wo=n=>n instanceof Aa,fu=n=>n instanceof am;function ih(n){return sp(n)?n.value:n.getRawValue()}function $y(n,e){const t=Wo(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new u.vHH(1e3,"");if(!r[e])throw new u.vHH(1001,"")}function op(n,e){Wo(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new u.vHH(1002,"")})}class sh{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=bc(this._rawValidators),this._composedAsyncValidatorFn=rh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ri}get invalid(){return this.status===Ei}get pending(){return this.status==Gr}get disabled(){return this.status===ti}get enabled(){return this.status!==ti}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=bc(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=rh(e)}addValidators(e){this.setValidators(_c(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(_c(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Xn(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Xn(e,this._rawAsyncValidators))}hasValidator(e){return ho(this._rawValidators,e)}hasAsyncValidator(e){return ho(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Gr,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ti,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ri,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ri||this.status===Gr)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ti:Ri}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Gr,this._hasOwnPendingAsyncValidator=!0;const t=co(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function wc(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Wo(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:fu(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?ti:this.errors?Ei:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Gr)?Gr:this._anyControlsHaveStatus(Ei)?Ei:Ri}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){hu(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class om extends sh{constructor(e=null,t,r){super(Ec(t),du(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hu(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ei(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ei(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Aa extends sh{constructor(e,t,r){super(Ec(t),du(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){op(this,e),Object.keys(e).forEach(r=>{$y(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=ih(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class am extends sh{constructor(e,t,r){super(Ec(t),du(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){op(this,e),e.forEach((r,i)=>{$y(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>ih(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const qy={provide:qr,useExisting:(0,u.Gpc)(()=>Tl)},xa=(()=>Promise.resolve(null))();let Tl=(()=>{class n extends qr{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new Aa({},Qd(t),tp(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){xa.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Sa(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){xa.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){xa.then(()=>{const r=this._findContainer(t.path),i=new Aa({});N(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){xa.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){xa.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Xt(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Kn,10),u.Y36(fs,10))},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([qy]),u.qOj]}),n})();const lm={provide:Ni,useExisting:(0,u.Gpc)(()=>pu)},up=(()=>Promise.resolve(null))();let pu=(()=>{class n extends Ni{constructor(t,r,i,o,c){super(),this._changeDetectorRef=c,this.control=new om,this._registered=!1,this.update=new u.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Tt(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Ct(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Sa(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){up.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;up.then(()=>{var o;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(o=this._changeDetectorRef)||void 0===o||o.markForCheck()})}_getPath(t){return this._parent?ki(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(qr,9),u.Y36(Kn,10),u.Y36(fs,10),u.Y36(mi,10),u.Y36(u.sBO,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([lm]),u.qOj,u.TTD]}),n})(),Tc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Ls=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const dm=new u.OlP("NgModelWithFormControlWarning"),cp={provide:qr,useExisting:(0,u.Gpc)(()=>Sc)};let Sc=(()=>{class n extends qr{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new u.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(po(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Sa(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Rr(t.control||null,t,!1),ei(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Xt(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Rr(r||null,t),sp(i)&&(Sa(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);N(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function B(n,e){return po(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ps(this.form,this),this._oldForm&&po(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Kn,10),u.Y36(fs,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([cp]),u.qOj,u.TTD]}),n})();const m={provide:Ni,useExisting:(0,u.Gpc)(()=>_)};let _=(()=>{class n extends Ni{constructor(t,r,i,o,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new u.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Tt(0,o)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),Ct(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return ki(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(u.Y36(qr,13),u.Y36(Kn,10),u.Y36(fs,10),u.Y36(mi,10),u.Y36(dm,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([m]),u.qOj,u.TTD]}),n})();const b={provide:mi,useExisting:(0,u.Gpc)(()=>ne),multi:!0};function M(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let ne=(()=>{class n extends kr{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=M(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function L(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([b]),u.qOj]}),n})(),Oe=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(M(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(ne,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const at={provide:mi,useExisting:(0,u.Gpc)(()=>bi),multi:!0};function Et(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let bi=(()=>{class n extends kr{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(o=>this._getOptionId(o));r=(o,c)=>{o._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],o=r.selectedOptions;if(void 0!==o){const c=o;for(let h=0;h<c.length;h++){const y=this._getOptionValue(c[h].value);i.push(y)}}else{const c=r.options;for(let h=0;h<c.length;h++){const p=c[h];if(p.selected){const y=this._getOptionValue(p.value);i.push(y)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function Wt(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[u._Bn([at]),u.qOj]}),n})(),gs=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Et(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Et(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(bi,9))},n.\u0275dir=u.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),AS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[Ls]]}),n})(),dh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[AS]}),n})(),Oi=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:dm,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[AS]}),n})(),Xy=(()=>{class n{group(t,r=null){const i=this._reduceControls(t);let h,o=null,c=null;return null!=r&&(function Jy(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(o=null!=r.validators?r.validators:null,c=null!=r.asyncValidators?r.asyncValidators:null,h=null!=r.updateOn?r.updateOn:void 0):(o=null!=r.validator?r.validator:null,c=null!=r.asyncValidator?r.asyncValidator:null)),new Aa(i,{asyncValidators:c,updateOn:h,validators:o})}control(t,r,i){return new om(t,r,i)}array(t,r,i){const o=t.map(c=>this._createControl(c));return new am(o,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return sp(t)||Wo(t)||fu(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:Oi}),n})();function dt(...n){const e=(0,Tn.yG)(n);return(0,Pn.D)(n,e)}var mo=F(7579);class Us extends mo.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var hh=F(4671),MS=F(9672);function ev(n,e,t){n?(0,MS.f)(t,n,e):e()}var tv=F(576);function hp(n,e){const t=(0,tv.m)(n)?n:()=>n,r=i=>i.error(t());return new cs.y(e?i=>e.schedule(r,0,i):r)}const _m=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var fh=F(8189);function nv(...n){return function kS(){return(0,fh.J)(1)}()((0,Pn.D)(n,(0,Tn.yG)(n)))}function ym(n){return new cs.y(e=>{(0,ds.Xf)(n()).subscribe(e)})}var ph=F(515),LE=F(727),Zr=F(4482);function UE(){return(0,Zr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,On.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class RS extends cs.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Zr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new LE.w0;const t=this.getSubject();e.add(this.source.subscribe((0,On.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=LE.w0.EMPTY)}return e}refCount(){return UE()(this)}}function ni(n,e){return(0,Zr.e)((t,r)=>{let i=null,o=0,c=!1;const h=()=>c&&!i&&r.complete();t.subscribe((0,On.x)(r,p=>{null==i||i.unsubscribe();let y=0;const T=o++;(0,ds.Xf)(n(p,T)).subscribe(i=(0,On.x)(r,S=>r.next(e?e(p,S,T,y++):S),()=>{i=null,h()}))},()=>{c=!0,h()}))})}var rv=F(5698);function vm(...n){const e=(0,Tn.yG)(n);return(0,Zr.e)((t,r)=>{(e?nv(n,t,e):nv(n,t)).subscribe(r)})}function VE(n,e,t,r,i){return(o,c)=>{let h=t,p=e,y=0;o.subscribe((0,On.x)(c,T=>{const S=y++;p=h?n(p,T,S):(h=!0,T),r&&c.next(p)},i&&(()=>{h&&c.next(p),c.complete()})))}}function xc(n,e){return(0,Zr.e)(VE(n,e,arguments.length>=2,!0))}function Pa(n,e){return(0,Zr.e)((t,r)=>{let i=0;t.subscribe((0,On.x)(r,o=>n.call(e,o,i++)&&r.next(o)))})}function mu(n){return(0,Zr.e)((e,t)=>{let o,r=null,i=!1;r=e.subscribe((0,On.x)(t,void 0,void 0,c=>{o=(0,ds.Xf)(n(c,mu(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}var Fi=F(5577);function gh(n,e){return(0,tv.m)(e)?(0,Fi.z)(n,e,1):(0,Fi.z)(n,1)}function wm(n){return n<=0?()=>ph.E:(0,Zr.e)((e,t)=>{let r=[];e.subscribe((0,On.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function BE(n=OS){return(0,Zr.e)((e,t)=>{let r=!1;e.subscribe((0,On.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function OS(){return new _m}function Mc(n){return(0,Zr.e)((e,t)=>{let r=!1;e.subscribe((0,On.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function mh(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Pa((i,o)=>n(i,o,r)):hh.y,(0,rv.q)(1),t?Mc(e):BE(()=>new _m))}var _o=F(8505);class _u{constructor(e,t){this.id=e,this.url=t}}class yo extends _u{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pc extends _u{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Em extends _u{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class FS extends _u{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class HE extends _u{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fp extends _u{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $E extends _u{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class qE extends _u{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iv extends _u{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bm{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class sv{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class MN{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _h{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ov{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class GE{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ZE{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Qt="primary";class LS{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function yh(n){return new LS(n)}const zE="ngNavigationCancelingError";function av(n){const e=Error("NavigationCancelingError: "+n);return e[zE]=!0,e}function VS(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const c=r[o],h=n[o];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function vo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!lv(n[i],e[i]))return!1;return!0}function lv(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function Cm(n){return Array.prototype.concat.apply([],n)}function KE(n){return n.length>0?n[n.length-1]:null}function ri(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ko(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,Pn.D)(Promise.resolve(n)):dt(n)}const YE={exact:function JE(n,e,t){if(!Sl(n.segments,e.segments)||!vh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!JE(n.children[r],e.children[r],t))return!1;return!0},subset:cv},uv={exact:function Tm(n,e){return vo(n,e)},subset:function XE(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>lv(n[t],e[t]))},ignored:()=>!0};function QE(n,e,t){return YE[t.paths](n.root,e.root,t.matrixParams)&&uv[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function cv(n,e,t){return dv(n,e,e.segments,t)}function dv(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Sl(i,t)||e.hasChildren()||!vh(i,t,r))}if(n.segments.length===t.length){if(!Sl(n.segments,t)||!vh(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!cv(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(Sl(n.segments,i)&&vh(n.segments,i,r)&&n.children[Qt])&&dv(n.children[Qt],e,o,r)}}function vh(n,e,t){return e.every((r,i)=>uv[t](n[i].parameters,r.parameters))}class yu{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yh(this.queryParams)),this._queryParamMap}toString(){return BS.serialize(this)}}class en{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ri(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pp(this)}}class vu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=yh(this.parameters)),this._parameterMap}toString(){return rb(this)}}function Sl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Im{}class wh{parse(e){const t=new ZS(e);return new yu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${gp(e.root,!0)}`,r=function jS(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${mp(t)}=${mp(i)}`).join("&"):`${mp(t)}=${mp(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function hv(n){return encodeURI(n)}(e.fragment)}`:""}`}}const BS=new wh;function pp(n){return n.segments.map(e=>rb(e)).join("/")}function gp(n,e){if(!n.hasChildren())return pp(n);if(e){const t=n.children[Qt]?gp(n.children[Qt],!1):"",r=[];return ri(n.children,(i,o)=>{o!==Qt&&r.push(`${o}:${gp(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function tb(n,e){let t=[];return ri(n.children,(r,i)=>{i===Qt&&(t=t.concat(e(r,i)))}),ri(n.children,(r,i)=>{i!==Qt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Qt?[gp(n.children[Qt],!1)]:[`${i}:${gp(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Qt]?`${pp(n)}/${t[0]}`:`${pp(n)}/(${t.join("//")})`}}function nb(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mp(n){return nb(n).replace(/%3B/gi,";")}function Sm(n){return nb(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fv(n){return decodeURIComponent(n)}function pv(n){return fv(n.replace(/\+/g,"%20"))}function rb(n){return`${Sm(n.path)}${function ib(n){return Object.keys(n).map(e=>`;${Sm(e)}=${Sm(n[e])}`).join("")}(n.parameters)}`}const HS=/^[^\/()?;=#]+/;function ms(n){const e=n.match(HS);return e?e[0]:""}const $S=/^[^=?&#]+/,qS=/^[^&#]+/;class ZS{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Qt]=new en(e,t)),r}parseSegment(){const e=ms(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new vu(fv(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ms(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=ms(this.remaining);i&&(r=i,this.capture(r))}e[fv(t)]=fv(r)}parseQueryParam(e){const t=function sb(n){const e=n.match($S);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function GS(n){const e=n.match(qS);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=pv(t),o=pv(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ms(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let o;r.indexOf(":")>-1?(o=r.substr(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Qt);const c=this.parseChildren();t[o]=1===Object.keys(c).length?c[Qt]:new en([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ob{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Dm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Dm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=gv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return gv(e,this._root).map(t=>t.value)}}function Dm(n,e){if(n===e.value)return e;for(const t of e.children){const r=Dm(n,t);if(r)return r}return null}function gv(n,e){if(n===e.value)return[e];for(const t of e.children){const r=gv(n,t);if(r.length)return r.unshift(e),r}return[]}class Dl{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Eh(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ut extends ob{constructor(e,t){super(e),this.snapshot=t,vp(this,e)}toString(){return this.snapshot.toString()}}function mv(n,e){const t=function ab(n,e){const c=new yp([],{},{},"",{},Qt,e,null,n.root,-1,{});return new lb("",new Dl(c,[]))}(n,e),r=new Us([new vu("",{})]),i=new Us({}),o=new Us({}),c=new Us({}),h=new Us(""),p=new kc(r,i,c,h,o,Qt,e,t.root);return p.snapshot=t.root,new Ut(new Dl(p,[]),t)}class kc{constructor(e,t,r,i,o,c,h,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=c,this.component=h,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,yt.U)(e=>yh(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,yt.U)(e=>yh(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _p(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function Yo(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class yp{constructor(e,t,r,i,o,c,h,p,y,T,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=c,this.component=h,this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=T,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=yh(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yh(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lb extends ob{constructor(e,t){super(t),this.url=e,vp(this,t)}toString(){return ka(this._root)}}function vp(n,e){e.value._routerState=n,e.children.forEach(t=>vp(n,t))}function ka(n){const e=n.children.length>0?` { ${n.children.map(ka).join(", ")} } `:"";return`${n.value}${e}`}function wp(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,vo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),vo(e.params,t.params)||n.params.next(t.params),function WE(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!vo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),vo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Am(n,e){const t=vo(n.params,e.params)&&function eb(n,e){return Sl(n,e)&&n.every((t,r)=>vo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Am(n.parent,e.parent))}function xm(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function ub(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return xm(n,r,i);return xm(n,r)})}(n,e,t);return new Dl(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const c=o.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>xm(n,h)),c}}const r=function NN(n){return new kc(new Us(n.url),new Us(n.params),new Us(n.queryParams),new Us(n.fragment),new Us(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>xm(n,o));return new Dl(r,i)}}function Rc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Oc(n){return"object"==typeof n&&null!=n&&n.outlets}function Ep(n,e,t,r,i){let o={};if(r&&ri(r,(h,p)=>{o[p]=Array.isArray(h)?h.map(y=>`${y}`):`${h}`}),n===e)return new yu(t,o,i);const c=Pm(n,e,t);return new yu(c,o,i)}function Pm(n,e,t){const r={};return ri(n.children,(i,o)=>{r[o]=i===e?t:Pm(i,e,t)}),new en(n.segments,r)}class zS{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Rc(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Oc);if(i&&i!==KE(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class yv{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function QS(n,e,t){if(n||(n=new en([],{})),0===n.segments.length&&n.hasChildren())return Nm(n,e,t);const r=function kN(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const c=n.segments[i],h=t[r];if(Oc(h))break;const p=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!Rm(p,y,c))return o;r+=2}else{if(!Rm(p,{},c))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new en(n.segments.slice(0,r.pathIndex),{});return o.children[Qt]=new en(n.segments.slice(r.pathIndex),n.children),Nm(o,0,i)}return r.match&&0===i.length?new en(n.segments,{}):r.match&&!n.hasChildren()?km(n,e,t):r.match?Nm(n,0,i):km(n,e,t)}function Nm(n,e,t){if(0===t.length)return new en(n.segments,{});{const r=function cb(n){return Oc(n[0])?n[0].outlets:{[Qt]:n}}(t),i={};return ri(r,(o,c)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[c]=QS(n.children[c],e,o))}),ri(n.children,(o,c)=>{void 0===r[c]&&(i[c]=o)}),new en(n.segments,i)}}function km(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(Oc(o)){const p=db(o.outlets);return new en(r,p)}if(0===i&&Rc(t[0])){r.push(new vu(n.segments[e].path,hb(t[0]))),i++;continue}const c=Oc(o)?o.outlets[Qt]:`${o}`,h=i<t.length-1?t[i+1]:null;c&&h&&Rc(h)?(r.push(new vu(c,hb(h))),i+=2):(r.push(new vu(c,{})),i++)}return new en(r,{})}function db(n){const e={};return ri(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=km(new en([],{}),0,t))}),e}function hb(n){const e={};return ri(n,(t,r)=>e[r]=`${t}`),e}function Rm(n,e,t){return n==t.path&&vo(e,t.parameters)}class ON{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),wp(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Eh(t);e.children.forEach(o=>{const c=o.value.outlet;this.deactivateRoutes(o,i[c],r),delete i[c]}),ri(i,(o,c)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Eh(e);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Eh(e);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Eh(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new GE(o.value.snapshot))}),e.children.length&&this.forwardEvent(new _h(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(wp(i),i===o)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),wp(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=function FN(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),p=h?h.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=p,c.outlet&&c.outlet.activateWith(i,p),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class fb{constructor(e,t){this.routes=e,this.module=t}}function Fc(n){return"function"==typeof n}function bh(n){return n instanceof yu}const Lc=Symbol("INITIAL_VALUE");function bp(){return ni(n=>function FE(...n){const e=(0,Tn.yG)(n),t=(0,Tn.jO)(n),{args:r,keys:i}=ru(n);if(0===r.length)return(0,Pn.D)([],e);const o=new cs.y(function PS(n,e,t=hh.y){return r=>{ev(e,()=>{const{length:i}=n,o=new Array(i);let c=i,h=i;for(let p=0;p<i;p++)ev(e,()=>{const y=(0,Pn.D)(n[p],e);let T=!1;y.subscribe((0,On.x)(r,S=>{o[p]=S,T||(T=!0,h--),h||r.next(t(o.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>dc(i,c):hh.y));return t?o.pipe(cc(t)):o}(n.map(e=>e.pipe((0,rv.q)(1),vm(Lc)))).pipe(xc((e,t)=>{let r=!1;return t.reduce((i,o,c)=>i!==Lc?i:(o===Lc&&(r=!0),r||!1!==o&&c!==t.length-1&&!bh(o)?i:o),e)},Lc),Pa(e=>e!==Lc),(0,yt.U)(e=>bh(e)?e:!0===e),(0,rv.q)(1)))}class pb{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Uc,this.attachRef=null}}class Uc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new pb,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Om=(()=>{class n{constructor(t,r,i,o,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.name=o||Qt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,p=new vv(t,h,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Uc),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class vv{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===kc?this.route:e===Uc?this.childContexts:this.parent.get(e,t)}}let gb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},directives:[Om],encapsulation:2}),n})();function Al(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];mb(r,JS(e,r))}}function mb(n,e){n.children&&Al(n.children,e)}function JS(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Cp(n){const e=n.children&&n.children.map(Cp),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Qt&&(t.component=gb),t}function wo(n){return n.outlet||Qt}function wv(n,e){const t=n.filter(r=>wo(r)===e);return t.push(...n.filter(r=>wo(r)!==e)),t}const _b={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Fm(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},_b):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||VS)(t,n,e);if(!o)return Object.assign({},_b);const c={};ri(o.posParams,(p,y)=>{c[y]=p.path});const h=o.consumed.length>0?Object.assign(Object.assign({},c),o.consumed[o.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:h,positionalParamSegments:null!==(r=o.posParams)&&void 0!==r?r:{}}}function Eu(n,e,t,r,i="corrected"){if(t.length>0&&function Th(n,e,t){return t.some(r=>xl(n,e,r)&&wo(r)!==Qt)}(n,t,r)){const c=new en(e,function Ev(n,e,t,r){const i={};i[Qt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&wo(o)!==Qt){const c=new en([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[wo(o)]=c}return i}(n,e,r,new en(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function Tp(n,e,t){return t.some(r=>xl(n,e,r))}(n,t,r)){const c=new en(n.segments,function Ch(n,e,t,r,i,o){const c={};for(const h of r)if(xl(n,t,h)&&!i[wo(h)]){const p=new en([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===o?n.segments.length:e.length,c[wo(h)]=p}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const o=new en(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function xl(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function yb(n,e,t,r){return!!(wo(n)===r||r!==Qt&&xl(e,t,n))&&("**"===n.path||Fm(e,n,t).matched)}function bv(n,e,t){return 0===e.length&&!n.children[t]}class Ip{constructor(e){this.segmentGroup=e||null}}class Lm{constructor(e){this.urlTree=e}}function Vc(n){return hp(new Ip(n))}function Cv(n){return hp(new Lm(n))}class jN{constructor(e,t,r,i,o){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=e.get(u.h0i)}apply(){const e=Eu(this.urlTree.root,[],[],this.config).segmentGroup,t=new en(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Qt).pipe((0,yt.U)(o=>this.createUrlTree(Vm(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(mu(o=>{if(o instanceof Lm)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof Ip?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Qt).pipe((0,yt.U)(i=>this.createUrlTree(Vm(i),e.queryParams,e.fragment))).pipe(mu(i=>{throw i instanceof Ip?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new en([],{[Qt]:e}):e;return new yu(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,yt.U)(o=>new en([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,Pn.D)(i).pipe(gh(o=>{const c=r.children[o],h=wv(t,o);return this.expandSegmentGroup(e,h,c,o).pipe((0,yt.U)(p=>({segment:p,outlet:o})))}),xc((o,c)=>(o[c.outlet]=c.segment,o),{}),function Na(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Pa((i,o)=>n(i,o,r)):hh.y,wm(1),t?Mc(e):BE(()=>new _m))}())}expandSegment(e,t,r,i,o,c){return(0,Pn.D)(r).pipe(gh(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,o,c).pipe(mu(y=>{if(y instanceof Ip)return dt(null);throw y}))),mh(h=>!!h),mu((h,p)=>{if(h instanceof _m||"EmptyError"===h.name)return bv(t,i,o)?dt(new en([],{})):Vc(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,o,c,h){return yb(i,t,o,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c):Vc(t):Vc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Cv(o):this.lineralizeSegments(r,o).pipe((0,Fi.z)(c=>{const h=new en(c,{});return this.expandSegment(e,h,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c){const{matched:h,consumedSegments:p,remainingSegments:y,positionalParamSegments:T}=Fm(t,i,o);if(!h)return Vc(t);const S=this.applyRedirectCommands(p,i.redirectTo,T);return i.redirectTo.startsWith("/")?Cv(S):this.lineralizeSegments(i,S).pipe((0,Fi.z)(x=>this.expandSegment(e,t,r,x.concat(y),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){if("**"===r.path)return r.loadChildren?(r._loadedConfig?dt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,yt.U)(S=>(r._loadedConfig=S,new en(i,{})))):dt(new en(i,{}));const{matched:c,consumedSegments:h,remainingSegments:p}=Fm(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,Fi.z)(T=>{const S=T.module,x=T.routes,{segmentGroup:O,slicedSegments:V}=Eu(t,h,p,x),J=new en(O.segments,O.children);if(0===V.length&&J.hasChildren())return this.expandChildren(S,x,J).pipe((0,yt.U)(rt=>new en(h,rt)));if(0===x.length&&0===V.length)return dt(new en(h,{}));const we=wo(r)===o;return this.expandSegment(S,J,x,V,we?Qt:o,!0).pipe((0,yt.U)(nt=>new en(h.concat(nt.segments),nt.children)))})):Vc(t)}getChildConfig(e,t,r){return t.children?dt(new fb(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?dt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Fi.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,yt.U)(o=>(t._loadedConfig=o,o))):function XS(n){return hp(av(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):dt(new fb([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?dt(i.map(c=>{const h=e.get(c);let p;if(function UN(n){return n&&Fc(n.canLoad)}(h))p=h.canLoad(t,r);else{if(!Fc(h))throw new Error("Invalid CanLoad guard");p=h(t,r)}return Ko(p)})).pipe(bp(),(0,_o.b)(c=>{if(!bh(c))return;const h=av(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw h.url=c,h}),(0,yt.U)(c=>!0===c)):dt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return dt(r);if(i.numberOfChildren>1||!i.children[Qt])return hp(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new yu(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ri(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[o]=t[h]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let c={};return ri(t.children,(h,p)=>{c[p]=this.createSegmentGroup(e,h,r,i)}),new en(o,c)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Vm(n){const e={};for(const r of Object.keys(n.children)){const o=Vm(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function wb(n){if(1===n.numberOfChildren&&n.children[Qt]){const e=n.children[Qt];return new en(n.segments.concat(e.segments),e.children)}return n}(new en(n.segments,e))}class Tv{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Bm{constructor(e,t){this.component=e,this.route=t}}function tD(n,e,t){const r=n._root;return Hm(r,e?e._root:null,t,[r.value])}function jm(n,e,t){const r=function nD(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Hm(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Eh(e);return n.children.forEach(c=>{(function HN(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&o.routeConfig===c.routeConfig){const p=function Eb(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Sl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Sl(n.url,e.url)||!vo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Am(n,e)||!vo(n.queryParams,e.queryParams);default:return!Am(n,e)}}(c,o,o.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new Tv(r)):(o.data=c.data,o._resolvedData=c._resolvedData),Hm(n,e,o.component?h?h.children:null:t,r,i),p&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Bm(h.outlet.component,c))}else c&&$m(e,h,i),i.canActivateChecks.push(new Tv(r)),Hm(n,null,o.component?h?h.children:null:t,r,i)})(c,o[c.value.outlet],t,r.concat([c.value]),i),delete o[c.value.outlet]}),ri(o,(c,h)=>$m(c,t.getContext(h),i)),i}function $m(n,e,t){const r=Eh(n),i=n.value;ri(r,(o,c)=>{$m(o,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Bm(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Tb{}function Ib(n){return new cs.y(e=>e.error(n))}class Sb{constructor(e,t,r,i,o,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=c}recognize(){const e=Eu(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Qt);if(null===t)return null;const r=new yp([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Qt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Dl(r,t),o=new lb(this.url,i);return this.inheritParamsAndData(o._root),o}inheritParamsAndData(e){const t=e.value,r=_p(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const o of Object.keys(t.children)){const c=t.children[o],h=wv(e,o),p=this.processSegmentGroup(h,c,o);if(null===p)return null;r.push(...p)}const i=qm(r);return function Db(n){n.sort((e,t)=>e.value.outlet===Qt?-1:t.value.outlet===Qt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const o of e){const c=this.processSegmentAgainstRoute(o,t,r,i);if(null!==c)return c}return bv(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!yb(e,t,r,i))return null;let o,c=[],h=[];if("**"===e.path){const O=r.length>0?KE(r).parameters:{};o=new yp(r,O,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Sv(e),wo(e),e.component,e,Ab(t),cD(t)+r.length,xb(e))}else{const O=Fm(t,e,r);if(!O.matched)return null;c=O.consumedSegments,h=O.remainingSegments,o=new yp(c,O.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Sv(e),wo(e),e.component,e,Ab(t),cD(t)+c.length,xb(e))}const p=function uD(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:y,slicedSegments:T}=Eu(t,c,h,p.filter(O=>void 0===O.redirectTo),this.relativeLinkResolution);if(0===T.length&&y.hasChildren()){const O=this.processChildren(p,y);return null===O?null:[new Dl(o,O)]}if(0===p.length&&0===T.length)return[new Dl(o,[])];const S=wo(e)===i,x=this.processSegment(p,y,T,S?Qt:i);return null===x?null:[new Dl(o,x)]}}function Ra(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function qm(n){const e=[],t=new Set;for(const r of n){if(!Ra(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=qm(r.children);e.push(new Dl(r.value,i))}return e.filter(r=>!t.has(r))}function Ab(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function cD(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Sv(n){return n.data||{}}function xb(n){return n.resolve||{}}function Mb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Sp(n){return ni(e=>{const t=n(e);return t?(0,Pn.D)(t).pipe((0,yt.U)(()=>e)):dt(e)})}class xv extends class Av{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Zm=new u.OlP("ROUTES");class Pb{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,yt.U)(o=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=o.create(e);return new fb(Cm(c.injector.get(Zm,void 0,u.XFs.Self|u.XFs.Optional)).map(Cp),c)}),mu(o=>{throw t._loader$=void 0,o}));return t._loader$=new RS(i,()=>new mo.x).pipe(UE()),t._loader$}loadModuleFactory(e){return Ko(e()).pipe((0,Fi.z)(t=>t instanceof u.YKP?dt(t):(0,Pn.D)(this.compiler.compileModuleAsync(t))))}}class Mv{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function qN(n){throw n}function mD(n,e,t){return e.parse("/")}function Pv(n,e){return dt(null)}const Nb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},kb={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Li=(()=>{class n{constructor(t,r,i,o,c,h,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new mo.x,this.errorHandler=qN,this.malformedUriErrorHandler=mD,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Pv,afterPreactivation:Pv},this.urlHandlingStrategy=new Mv,this.routeReuseStrategy=new xv,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(u.h0i),this.console=c.get(u.c2e);const S=c.get(u.R0b);this.isNgZoneEnabled=S instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function Nc(){return new yu(new en([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Pb(c,h,x=>this.triggerEvent(new bm(x)),x=>this.triggerEvent(new sv(x))),this.routerState=mv(this.currentUrlTree,this.rootComponentType),this.transitions=new Us({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Pa(i=>0!==i.id),(0,yt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),ni(i=>{let o=!1,c=!1;return dt(i).pipe((0,_o.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ni(h=>{const p=this.browserUrlTree.toString(),y=!this.navigated||h.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Oa(h.source)&&(this.browserUrlTree=h.extractedUrl),dt(h).pipe(ni(S=>{const x=this.transitions.getValue();return r.next(new yo(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),x!==this.transitions.getValue()?ph.E:Promise.resolve(S)}),function eD(n,e,t,r){return ni(i=>function vb(n,e,t,r,i){return new jN(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,yt.U)(o=>Object.assign(Object.assign({},i),{urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,_o.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function dD(n,e,t,r,i){return(0,Fi.z)(o=>function lD(n,e,t,r,i="emptyOnly",o="legacy"){try{const c=new Sb(n,e,t,r,i,o).recognize();return null===c?Ib(new Tb):dt(c)}catch(c){return Ib(c)}}(n,e,o.urlAfterRedirects,t(o.urlAfterRedirects),r,i).pipe((0,yt.U)(c=>Object.assign(Object.assign({},o),{targetSnapshot:c}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,_o.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const O=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(O,S)}this.browserUrlTree=S.urlAfterRedirects}const x=new HE(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(x)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:O,source:V,restoredState:J,extras:we}=h,Ge=new yo(x,this.serializeUrl(O),V,J);r.next(Ge);const nt=mv(O,this.rootComponentType).snapshot;return dt(Object.assign(Object.assign({},h),{targetSnapshot:nt,urlAfterRedirects:O,extras:Object.assign(Object.assign({},we),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),ph.E}),Sp(h=>{const{targetSnapshot:p,id:y,extractedUrl:T,rawUrl:S,extras:{skipLocationChange:x,replaceUrl:O}}=h;return this.hooks.beforePreactivation(p,{navigationId:y,appliedUrlTree:T,rawUrlTree:S,skipLocationChange:!!x,replaceUrl:!!O})}),(0,_o.b)(h=>{const p=new fp(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(p)}),(0,yt.U)(h=>Object.assign(Object.assign({},h),{guards:tD(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function rD(n,e){return(0,Fi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:c}}=t;return 0===c.length&&0===o.length?dt(Object.assign(Object.assign({},t),{guardsResult:!0})):function Iv(n,e,t,r){return(0,Pn.D)(n).pipe((0,Fi.z)(i=>function aD(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?dt(o.map(h=>{const p=jm(h,e,i);let y;if(function wu(n){return n&&Fc(n.canDeactivate)}(p))y=Ko(p.canDeactivate(n,e,t,r));else{if(!Fc(p))throw new Error("Invalid CanDeactivate guard");y=Ko(p(n,e,t,r))}return y.pipe(mh())})).pipe(bp()):dt(!0)}(i.component,i.route,t,e,r)),mh(i=>!0!==i,!0))}(c,r,i,n).pipe((0,Fi.z)(h=>h&&function LN(n){return"boolean"==typeof n}(h)?function bb(n,e,t,r){return(0,Pn.D)(e).pipe(gh(i=>nv(function sD(n,e){return null!==n&&e&&e(new MN(n)),dt(!0)}(i.route.parent,r),function iD(n,e){return null!==n&&e&&e(new ov(n)),dt(!0)}(i.route,r),function Cb(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(c=>function Vs(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>ym(()=>dt(c.guards.map(p=>{const y=jm(p,c.node,t);let T;if(function BN(n){return n&&Fc(n.canActivateChild)}(y))T=Ko(y.canActivateChild(r,n));else{if(!Fc(y))throw new Error("Invalid CanActivateChild guard");T=Ko(y(r,n))}return T.pipe(mh())})).pipe(bp())));return dt(o).pipe(bp())}(n,i.path,t),function oD(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return dt(!0);const i=r.map(o=>ym(()=>{const c=jm(o,e,t);let h;if(function VN(n){return n&&Fc(n.canActivate)}(c))h=Ko(c.canActivate(e,n));else{if(!Fc(c))throw new Error("Invalid CanActivate guard");h=Ko(c(e,n))}return h.pipe(mh())}));return dt(i).pipe(bp())}(n,i.route,t))),mh(i=>!0!==i,!0))}(r,o,n,e):dt(h)),(0,yt.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,_o.b)(h=>{if(bh(h.guardsResult)){const y=av(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw y.url=h.guardsResult,y}const p=new $E(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(p)}),Pa(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),Sp(h=>{if(h.guards.canActivateChecks.length)return dt(h).pipe((0,_o.b)(p=>{const y=new qE(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),ni(p=>{let y=!1;return dt(p).pipe(function hD(n,e){return(0,Fi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return dt(t);let o=0;return(0,Pn.D)(i).pipe(gh(c=>function Dv(n,e,t,r){return function fD(n,e,t,r){const i=Mb(n);if(0===i.length)return dt({});const o={};return(0,Pn.D)(i).pipe((0,Fi.z)(c=>function Gm(n,e,t,r){const i=jm(n,e,r);return Ko(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,_o.b)(h=>{o[c]=h}))),wm(1),(0,Fi.z)(()=>Mb(o).length===i.length?dt(o):ph.E))}(n._resolve,n,e,r).pipe((0,yt.U)(o=>(n._resolvedData=o,n.data=Object.assign(Object.assign({},n.data),_p(n,t).resolve),null)))}(c.route,r,n,e)),(0,_o.b)(()=>o++),wm(1),(0,Fi.z)(c=>o===i.length?dt(t):ph.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,_o.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,_o.b)(p=>{const y=new iv(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),Sp(h=>{const{targetSnapshot:p,id:y,extractedUrl:T,rawUrl:S,extras:{skipLocationChange:x,replaceUrl:O}}=h;return this.hooks.afterPreactivation(p,{navigationId:y,appliedUrlTree:T,rawUrlTree:S,skipLocationChange:!!x,replaceUrl:!!O})}),(0,yt.U)(h=>{const p=function _v(n,e,t){const r=xm(n,e._root,t?t._root:void 0);return new Ut(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:p})}),(0,_o.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,yt.U)(r=>(new ON(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,_o.b)({next(){o=!0},complete(){o=!0}}),function jE(n){return(0,Zr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var h;o||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),mu(h=>{if(c=!0,function US(n){return n&&n[zE]}(h)){const p=bh(h.url);p||(this.navigated=!0,this.restoreHistory(i,!0));const y=new Em(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(y),p?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Oa(i.source)};this.scheduleNavigation(T,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new FS(i.id,this.serializeUrl(i.extractedUrl),h);r.next(p);try{i.resolve(this.errorHandler(h))}catch(y){i.reject(y)}}return ph.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const o={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const p=Object.assign({},c);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(o.state=p)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,c,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Al(t),this.config=t.map(Cp),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:c,queryParamsHandling:h,preserveFragment:p}=r,y=i||this.routerState.root,T=p?this.currentUrlTree.fragment:c;let S=null;switch(h){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),o);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=o||null}return null!==S&&(S=this.removeEmptyProps(S)),function Mm(n,e,t,r,i){if(0===t.length)return Ep(e.root,e.root,e.root,r,i);const o=function WS(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new zS(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,c)=>{if("object"==typeof o&&null!=o){if(o.outlets){const h={};return ri(o.outlets,(p,y)=>{h[y]="string"==typeof p?p.split("/"):p}),[...i,{outlets:h}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===c?(o.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,o]},[]);return new zS(t,e,r)}(t);if(o.toRoot())return Ep(e.root,e.root,new en([],{}),r,i);const c=function KS(n,e,t){if(n.isAbsolute)return new yv(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const o=t.snapshot._urlSegment;return new yv(o,o===e.root,0)}const r=Rc(n.commands[0])?0:1;return function YS(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new yv(r,!1,i-o)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(o,e,n),h=c.processChildren?Nm(c.segmentGroup,c.index,o.commands):QS(c.segmentGroup,c.index,o.commands);return Ep(e.root,c.segmentGroup,h,r,i)}(y,this.currentUrlTree,t,S,null!=T?T:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=bh(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Rb(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},Nb):!1===r?Object.assign({},kb):r,bh(t))return QE(this.currentUrlTree,t,i);const o=this.parseUrl(t);return QE(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Pc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,o,c){var h,p;if(this.disposed)return Promise.resolve(!1);let y,T,S;c?(y=c.resolve,T=c.reject,S=c.promise):S=new Promise((V,J)=>{y=V,T=J});const x=++this.navigationId;let O;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),O=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(p=this.browserPageId)&&void 0!==p?p:0)+1):O=0,this.setTransition({id:x,targetPageId:O,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:y,reject:T,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(V=>Promise.reject(V))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){var i,o;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Em(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function Oa(n){return"imperative"!==n}let Bs=(()=>{class n{constructor(t,r,i,o,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=c,this.commands=null,this.onChanges=new mo.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Ih(this.skipLocationChange),replaceUrl:Ih(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ih(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Li),u.Y36(kc),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&u.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})(),Ml=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new mo.x,this.subscription=t.events.subscribe(o=>{o instanceof Pc&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,o,c){if(0!==t||r||i||o||c||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:Ih(this.skipLocationChange),replaceUrl:Ih(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ih(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Li),u.Y36(kc),u.Y36(_e))},n.\u0275dir=u.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&u.NdJ("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&u.uIk("target",r.target)("href",r.href,u.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[u.TTD]}),n})();function Ih(n){return""===n||!!n}class kv{}class Sh{preload(e,t){return dt(null)}}let Ob=(()=>{class n{constructor(t,r,i,o){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=new Pb(i,r,p=>t.triggerEvent(new bm(p)),p=>t.triggerEvent(new sv(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(Pa(t=>t instanceof Pc),gh(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(u.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r)if(o.loadChildren&&!o.canLoad&&o._loadedConfig){const c=o._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else o.loadChildren&&!o.canLoad?i.push(this.preloadConfig(t,o)):o.children&&i.push(this.processRoutes(t,o.children));return(0,Pn.D)(i).pipe((0,fh.J)(),(0,yt.U)(o=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?dt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Fi.z)(o=>(r._loadedConfig=o,this.processRoutes(o.module,o.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Li),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(kv))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Dp=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof yo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Pc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ZE&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new ZE(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const bu=new u.OlP("ROUTER_CONFIGURATION"),Ov=new u.OlP("ROUTER_FORROOT_GUARD"),yD=[Re,{provide:Im,useClass:wh},{provide:Li,useFactory:function wD(n,e,t,r,i,o,c={},h,p){const y=new Li(null,n,e,t,r,i,Cm(o));return h&&(y.urlHandlingStrategy=h),p&&(y.routeReuseStrategy=p),function ED(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,y),c.enableTracing&&y.events.subscribe(T=>{var S,x;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${T.constructor.name}`),console.log(T.toString()),console.log(T),null===(x=console.groupEnd)||void 0===x||x.call(console)}),y},deps:[Im,Uc,Re,u.zs3,u.Sil,Zm,bu,[class gD{},new u.FiY],[class pD{},new u.FiY]]},Uc,{provide:kc,useFactory:function Ah(n){return n.routerState.root},deps:[Li]},Ob,Sh,class Rv{preload(e,t){return t().pipe(mu(()=>dt(null)))}},{provide:bu,useValue:{enableTracing:!1}}];function Fv(){return new u.PXZ("Router",Li)}let Fb=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[yD,Lv(t),{provide:Ov,useFactory:Dh,deps:[[Li,new u.FiY,new u.tp0]]},{provide:bu,useValue:r||{}},{provide:_e,useFactory:Lb,deps:[ue,[new u.tBr(ze),new u.FiY],bu]},{provide:Dp,useFactory:vD,deps:[Li,Yl,bu]},{provide:kv,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Sh},{provide:u.PXZ,multi:!0,useFactory:Fv},[Uv,{provide:u.ip1,multi:!0,useFactory:bD,deps:[Uv]},{provide:Ub,useFactory:CD,deps:[Uv]},{provide:u.tb,multi:!0,useExisting:Ub}]]}}static forChild(t){return{ngModule:n,providers:[Lv(t)]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ov,8),u.LFG(Li,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();function vD(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Dp(n,e,t)}function Lb(n,e,t={}){return t.useHash?new ke(n,e):new Ze(n,e)}function Dh(n){return"guarded"}function Lv(n){return[{provide:u.deG,multi:!0,useValue:n},{provide:Zm,multi:!0,useValue:n}]}let Uv=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new mo.x}appInitializer(){return this.injector.get(Z,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),o=this.injector.get(Li),c=this.injector.get(bu);return"disabled"===c.initialNavigation?(o.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(o.hooks.afterPreactivation=()=>this.initNavigation?dt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),o.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(bu),i=this.injector.get(Ob),o=this.injector.get(Dp),c=this.injector.get(Li),h=this.injector.get(u.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),o.init(),c.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();function bD(n){return n.appInitializer.bind(n)}function CD(n){return n.bootstrapListener.bind(n)}const Ub=new u.OlP("Router Initializer");class Vv{}class Bv{}class La{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(c):this.headers.set(o,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof La?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new La;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof La?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let c=this.headers.get(t);if(!c)return;c=c.filter(h=>-1===o.indexOf(h)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Bb{encodeKey(e){return jb(e)}encodeValue(e){return jb(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const ID=/%(\d[a-f0-9])/gi,SD={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function jb(n){return encodeURIComponent(n).replace(ID,(e,t)=>{var r;return null!==(r=SD[t])&&void 0!==r?r:e})}function jv(n){return`${n}`}class Bc{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Bb,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function TD(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[c,h]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],p=t.get(c)||[];p.push(h),t.set(c,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Bc({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(jv(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(jv(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class AD{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function MD(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function PD(n){return"undefined"!=typeof Blob&&n instanceof Blob}function zm(n){return"undefined"!=typeof FormData&&n instanceof FormData}class xh{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function xD(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new La),this.context||(this.context=new AD),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+c}}else this.params=new Bc,this.urlWithParams=t}serializeBody(){return null===this.body?null:MD(this.body)||PD(this.body)||zm(this.body)||function ND(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Bc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||zm(this.body)?null:PD(this.body)?this.body.type||null:MD(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Bc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,o=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,h=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,p=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,T=e.params||this.params;const S=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((x,O)=>x.set(O,e.setHeaders[O]),y)),e.setParams&&(T=Object.keys(e.setParams).reduce((x,O)=>x.set(O,e.setParams[O]),T)),new xh(r,i,c,{params:T,headers:y,context:S,reportProgress:p,responseType:o,withCredentials:h})}}var Ir=(()=>((Ir=Ir||{})[Ir.Sent=0]="Sent",Ir[Ir.UploadProgress=1]="UploadProgress",Ir[Ir.ResponseHeader=2]="ResponseHeader",Ir[Ir.DownloadProgress=3]="DownloadProgress",Ir[Ir.Response=4]="Response",Ir[Ir.User=5]="User",Ir))();class Hb{constructor(e,t=200,r="OK"){this.headers=e.headers||new La,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class js extends Hb{constructor(e={}){super(e),this.type=Ir.ResponseHeader}clone(e={}){return new js({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Hv extends Hb{constructor(e={}){super(e),this.type=Ir.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Hv({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class kD extends Hb{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Wm(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Km=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof xh)o=t;else{let p,y;p=i.headers instanceof La?i.headers:new La(i.headers),i.params&&(y=i.params instanceof Bc?i.params:new Bc({fromObject:i.params})),o=new xh(t,r,void 0!==i.body?i.body:null,{headers:p,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=dt(o).pipe(gh(p=>this.handler.handle(p)));if(t instanceof xh||"events"===i.observe)return c;const h=c.pipe(Pa(p=>p instanceof Hv));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return h.pipe((0,yt.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe((0,yt.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe((0,yt.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return h.pipe((0,yt.U)(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Bc).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Wm(i,r))}post(t,r,i={}){return this.request("POST",t,Wm(i,r))}put(t,r,i={}){return this.request("PUT",t,Wm(i,r))}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Vv))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class $v{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const $b=new u.OlP("HTTP_INTERCEPTORS");let ZN=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const OD=/^\)\]\}',?\n/;let Ap=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new cs.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((O,V)=>i.setRequestHeader(O,V.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const O=t.detectContentTypeHeader();null!==O&&i.setRequestHeader("Content-Type",O)}if(t.responseType){const O=t.responseType.toLowerCase();i.responseType="json"!==O?O:"text"}const o=t.serializeBody();let c=null;const h=()=>{if(null!==c)return c;const O=i.statusText||"OK",V=new La(i.getAllResponseHeaders()),J=function FD(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return c=new js({headers:V,status:i.status,statusText:O,url:J}),c},p=()=>{let{headers:O,status:V,statusText:J,url:we}=h(),Ge=null;204!==V&&(Ge=void 0===i.response?i.responseText:i.response),0===V&&(V=Ge?200:0);let nt=V>=200&&V<300;if("json"===t.responseType&&"string"==typeof Ge){const rt=Ge;Ge=Ge.replace(OD,"");try{Ge=""!==Ge?JSON.parse(Ge):null}catch(Xe){Ge=rt,nt&&(nt=!1,Ge={error:Xe,text:Ge})}}nt?(r.next(new Hv({body:Ge,headers:O,status:V,statusText:J,url:we||void 0})),r.complete()):r.error(new kD({error:Ge,headers:O,status:V,statusText:J,url:we||void 0}))},y=O=>{const{url:V}=h(),J=new kD({error:O,status:i.status||0,statusText:i.statusText||"Unknown Error",url:V||void 0});r.error(J)};let T=!1;const S=O=>{T||(r.next(h()),T=!0);let V={type:Ir.DownloadProgress,loaded:O.loaded};O.lengthComputable&&(V.total=O.total),"text"===t.responseType&&!!i.responseText&&(V.partialText=i.responseText),r.next(V)},x=O=>{let V={type:Ir.UploadProgress,loaded:O.loaded};O.lengthComputable&&(V.total=O.total),r.next(V)};return i.addEventListener("load",p),i.addEventListener("error",y),i.addEventListener("timeout",y),i.addEventListener("abort",y),t.reportProgress&&(i.addEventListener("progress",S),null!==o&&i.upload&&i.upload.addEventListener("progress",x)),i.send(o),r.next({type:Ir.Sent}),()=>{i.removeEventListener("error",y),i.removeEventListener("abort",y),i.removeEventListener("load",p),i.removeEventListener("timeout",y),t.reportProgress&&(i.removeEventListener("progress",S),null!==o&&i.upload&&i.upload.removeEventListener("progress",x)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Cn))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Cu=new u.OlP("XSRF_COOKIE_NAME"),qv=new u.OlP("XSRF_HEADER_NAME");class Mh{}let LD=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Do(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(fe),u.LFG(u.Lbi),u.LFG(Cu))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Gv=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const o=this.tokenService.getToken();return null!==o&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,o)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Mh),u.LFG(qv))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Zv=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get($b,[]);this.chain=r.reduceRight((i,o)=>new $v(i,o),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Bv),u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Ui=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Gv,useClass:ZN}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Cu,useValue:t.cookieName}:[],t.headerName?{provide:qv,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Gv,{provide:$b,useExisting:Gv,multi:!0},{provide:Mh,useClass:LD},{provide:Cu,useValue:"XSRF-TOKEN"},{provide:qv,useValue:"X-XSRF-TOKEN"}]}),n})(),jc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Km,{provide:Vv,useClass:Zv},Ap,{provide:Bv,useExisting:Ap}],imports:[[Ui.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();var xp=F(4986),rn=F(5813);function Tu(){return(0,Zr.e)((n,e)=>{let t,r=!1;n.subscribe((0,On.x)(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Hc(n,e=hh.y){return n=null!=n?n:Ph,(0,Zr.e)((t,r)=>{let i,o=!0;t.subscribe((0,On.x)(r,c=>{const h=e(c);(o||!n(i,h))&&(o=!1,i=h,r.next(c))}))})}function Ph(n,e){return n===e}var ct,er=F(2011),Iu=(F(5881),F(3942)),be=F(5861),Or=F(9681),Eo=F(4859),bo=F(1877),R=F(2090),Zb="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ua={},Qm=Qm||{},Ot=Zb||self;function Pp(){}function Wv(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Nh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Jm="closure_uid_"+(1e9*Math.random()>>>0),zb=0;function VD(n,e,t){return n.call.apply(n.bind,arguments)}function BD(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ii(n,e,t){return(ii=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?VD:BD).apply(null,arguments)}function Xm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function si(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,o){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function Su(){this.s=this.s,this.o=this.o}var JN={};Su.prototype.s=!1,Su.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function UD(n){return Object.prototype.hasOwnProperty.call(n,Jm)&&n[Jm]||(n[Jm]=++zb)}(this);delete JN[n]}},Su.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Wb=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},e_=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let o=0;o<r;o++)o in i&&e.call(t,i[o],o,n)};function Kb(n){return Array.prototype.concat.apply([],arguments)}function Yb(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Yv(n){return/^[\s\xa0]*$/.test(n)}var _s,HD=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Qi(n,e){return-1!=n.indexOf(e)}function t_(n,e){return n<e?-1:n>e?1:0}e:{var Qb=Ot.navigator;if(Qb){var $c=Qb.userAgent;if($c){_s=$c;break e}}_s=""}function Qv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Jv(n){const e={};for(const t in n)e[t]=n[t];return e}var Jb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xv(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<Jb.length;o++)t=Jb[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function kh(n){return kh[" "](n),n}kh[" "]=Pp;var n_,n,Xb=Qi(_s,"Opera"),Rh=Qi(_s,"Trident")||Qi(_s,"MSIE"),eC=Qi(_s,"Edge"),e0=eC||Rh,tC=Qi(_s,"Gecko")&&!(Qi(_s.toLowerCase(),"webkit")&&!Qi(_s,"Edge"))&&!(Qi(_s,"Trident")||Qi(_s,"MSIE"))&&!Qi(_s,"Edge"),qD=Qi(_s.toLowerCase(),"webkit")&&!Qi(_s,"Edge");function t0(){var n=Ot.document;return n?n.documentMode:void 0}e:{var r_="",i_=(n=_s,tC?/rv:([^\);]+)(\)|;)/.exec(n):eC?/Edge\/([\d\.]+)/.exec(n):Rh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):qD?/WebKit\/(\S+)/.exec(n):Xb?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(i_&&(r_=i_?i_[1]:""),Rh){var Np=t0();if(null!=Np&&Np>parseFloat(r_)){n_=String(Np);break e}}n_=r_}var XN={};var kp=Ot.document&&Rh&&(t0()||parseInt(n_,10))||void 0,nC=function(){if(!Ot.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ot.addEventListener("test",Pp,e),Ot.removeEventListener("test",Pp,e)}catch(t){}return n}();function oi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function qc(n,e){if(oi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(tC){e:{try{kh(e.nodeName);var i=!0;break e}catch(o){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:ZD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&qc.Z.h.call(this)}}oi.prototype.h=function(){this.defaultPrevented=!0},si(qc,oi);var ZD={2:"touch",3:"pen",4:"mouse"};qc.prototype.h=function(){qc.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Du="closure_listenable_"+(1e6*Math.random()|0),s_=0;function s0(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++s_,this.ca=this.fa=!1}function o0(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function o_(n){this.src=n,this.g={},this.h=0}function Rp(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=Wb(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(o0(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Op(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.ca&&o.listener==e&&o.capture==!!t&&o.ia==r)return i}return-1}o_.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var c=Op(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new s0(e,this.src,o,!!r,i)).fa=t,n.push(e)),e};var a_="closure_lm_"+(1e6*Math.random()|0),l_={};function u_(n,e,t,r,i){if(r&&r.once)return c_(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)u_(n,e[o],t,r,i);return null}return t=d0(t),n&&n[Du]?n.N(e,t,Nh(r)?!!r.capture:!!r,i):a0(n,e,t,!1,r,i)}function a0(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var c=Nh(i)?!!i.capture:!!i,h=Fp(n);if(h||(n[a_]=h=new o_(n)),(t=h.add(e,t,r,c,o)).proxy)return t;if(r=function rC(){var e=iC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)nC||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(c0(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function c_(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)c_(n,e[o],t,r,i);return null}return t=d0(t),n&&n[Du]?n.O(e,t,Nh(r)?!!r.capture:!!r,i):a0(n,e,t,!0,r,i)}function l0(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)l0(n,e[o],t,r,i);else r=Nh(r)?!!r.capture:!!r,t=d0(t),n&&n[Du]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Op(o=n.g[e],t,r,i))&&(o0(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=Fp(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Op(e,t,r,i)),(t=-1<n?e[n]:null)&&u0(t))}function u0(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Du])Rp(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(c0(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Fp(e))?(Rp(t,n),0==t.h&&(t.src=null,e[a_]=null)):o0(n)}}}function c0(n){return n in l_?l_[n]:l_[n]="on"+n}function iC(n,e){if(n.ca)n=!0;else{e=new qc(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&u0(n),n=t.call(r,e)}return n}function Fp(n){return(n=n[a_])instanceof o_?n:null}var d_="__closure_events_fn_"+(1e9*Math.random()>>>0);function d0(n){return"function"==typeof n?n:(n[d_]||(n[d_]=function(e){return n.handleEvent(e)}),n[d_])}function ai(){Su.call(this),this.i=new o_(this),this.P=this,this.I=null}function Ci(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new oi(e,n);else if(e instanceof oi)e.target=e.target||n;else{var i=e;Xv(e=new oi(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var c=e.g=t[o];i=Oh(c,r,!0,e)&&i}if(i=Oh(c=e.g=n,r,!0,e)&&i,i=Oh(c,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Oh(c=e.g=t[o],r,!1,e)&&i}function Oh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var c=e[o];if(c&&!c.ca&&c.capture==t){var h=c.listener,p=c.ia||c.src;c.fa&&Rp(n.i,c),i=!1!==h.call(p,r)&&i}}return i&&!r.defaultPrevented}si(ai,Su),ai.prototype[Du]=!0,ai.prototype.removeEventListener=function(n,e,t,r){l0(this,n,e,t,r)},ai.prototype.M=function(){if(ai.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)o0(t[r]);delete n.g[e],n.h--}}this.I=null},ai.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ai.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Fh=Ot.JSON.stringify;function sC(){var n=dC;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var f_,h0=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new aC,n=>n.reset());class aC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function lC(n){Ot.setTimeout(()=>{throw n},0)}function h_(n,e){f_||function uC(){var n=Ot.Promise.resolve(void 0);f_=function(){n.then(zD)}}(),cC||(f_(),cC=!0),dC.add(n,e)}var cC=!1,dC=new class oC{constructor(){this.h=this.g=null}add(e,t){const r=h0.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function zD(){for(var n;n=sC();){try{n.h.call(n.g)}catch(t){lC(t)}var e=h0;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}cC=!1}function Lp(n,e){ai.call(this),this.h=n||1,this.g=e||Ot,this.j=ii(this.kb,this),this.l=Date.now()}function f0(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Sr(n,e,t){if("function"==typeof n)t&&(n=ii(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ii(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ot.setTimeout(n,e||0)}function p0(n){n.g=Sr(()=>{n.g=null,n.i&&(n.i=!1,p0(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}si(Lp,ai),(ct=Lp.prototype).da=!1,ct.S=null,ct.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ci(this,"tick"),this.da&&(f0(this),this.start()))}},ct.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ct.M=function(){Lp.Z.M.call(this),f0(this),delete this.g};class WD extends Su{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:p0(this)}M(){super.M(),this.g&&(Ot.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Up(n){Su.call(this),this.h=n,this.g={}}si(Up,Su);var g0=[];function hC(n,e,t,r){Array.isArray(t)||(t&&(g0[0]=t.toString()),t=g0);for(var i=0;i<t.length;i++){var o=u_(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function m0(n){Qv(n.g,function(e,t){this.g.hasOwnProperty(t)&&u0(e)},n),n.g={}}function Vp(){this.g=!0}function Uh(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function YD(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var c=1;c<i.length;c++)i[c]=""}}}return Fh(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}Up.prototype.M=function(){Up.Z.M.call(this),m0(this)},Up.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vp.prototype.Aa=function(){this.g=!1},Vp.prototype.info=function(){};var Au={},QD=null;function Bp(){return QD=QD||new ai}function p_(n){oi.call(this,Au.Ma,n)}function ys(n){const e=Bp();Ci(e,new p_(e,n))}function pC(n,e){oi.call(this,Au.STAT_EVENT,n),this.stat=e}function Ji(n){const e=Bp();Ci(e,new pC(e,n))}function Jo(n,e){oi.call(this,Au.Na,n),this.size=e}function Xi(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ot.setTimeout(function(){n()},e)}Au.Ma="serverreachability",si(p_,oi),Au.STAT_EVENT="statevent",si(pC,oi),Au.Na="timingevent",si(Jo,oi);var vs={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},_0={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function g_(){}function mC(){}g_.prototype.h=null;var Gc,jp={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function y0(){oi.call(this,"d")}function Hp(){oi.call(this,"c")}function m_(){}function Vh(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Up(this),this.P=yC,this.W=new Lp(n=e0?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new _C}function _C(){this.i=null,this.g="",this.h=!1}si(y0,oi),si(Hp,oi),si(m_,g_),m_.prototype.g=function(){return new XMLHttpRequest},m_.prototype.i=function(){return{}},Gc=new m_;var yC=45e3,__={},Zc={};function v0(n,e,t){n.K=1,n.v=I_(Nl(e)),n.s=t,n.U=!0,w0(n,null)}function w0(n,e){n.F=Date.now(),Bh(n),n.A=Nl(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),D0(t.h,"t",r),n.C=0,t=n.l.H,n.h=new _C,n.g=jC(n.l,t?e:null,!n.s),0<n.O&&(n.L=new WD(ii(n.Ia,n,n.g),n.O)),hC(n.V,n.g,"readystatechange",n.gb),e=n.H?Jv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),ys(1),function Lh(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var c="",h=o.split("&"),p=0;p<h.length;p++){var y=h[p].split("=");if(1<y.length){var T=y[0];y=y[1];var S=T.split("_");c=2<=S.length&&"type"==S[1]?c+(T+"=")+y+"&":c+(T+"=redacted&")}}else c=null;else c=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function E0(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function y_(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=v_(n,t),i==Zc){4==e&&(n.o=4,Ji(14),r=!1),Uh(n.j,n.m,null,"[Incomplete Response]");break}if(i==__){n.o=4,Ji(15),Uh(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Uh(n.j,n.m,i,null),w_(n,i)}E0(n)&&i!=Zc&&i!=__&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ji(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),R0(e),e.L=!0,Ji(11))):(Uh(n.j,n.m,t,"[Invalid Chunked Response]"),xu(n),jh(n))}function v_(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Zc:(t=Number(e.substring(t,r)),isNaN(t)?__:(r+=1)+t>e.length?Zc:(e=e.substr(r,t),n.C=r+t,e))}function Bh(n){n.Y=Date.now()+n.P,b0(n,n.P)}function b0(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Xi(ii(n.eb,n),e)}function $p(n){n.B&&(Ot.clearTimeout(n.B),n.B=null)}function jh(n){0==n.l.G||n.I||cA(n.l,n)}function xu(n){$p(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,f0(n.W),m0(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function w_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||AC(t.i,n)))if(t.I=n.N,!n.J&&AC(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Xi(ii(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;O0(t),Mu(t)}k0(t),Ji(18)}if(1>=S_(t.i)&&t.ka){try{t.ka()}catch(y){}t.ka=void 0}}else Pu(t,11)}else if((n.J||t.g==n)&&O0(t),!Yv(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const T=y[3];null!=T&&(t.ma=T,t.h.info("VER="+t.ma));const S=y[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const x=y[5];null!=x&&"number"==typeof x&&0<x&&(t.K=r=1.5*x,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const O=n.g;if(O){const V=O.g?O.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(V){var o=r.i;!o.g&&(Qi(V,"spdy")||Qi(V,"quic")||Qi(V,"h2"))&&(o.j=o.l,o.g=new Set,o.h&&(D_(o,o.h),o.h=null))}if(r.D){const J=O.g?O.g.getResponseHeader("X-HTTP-Session-Id"):null;J&&(r.sa=J,tr(r.F,r.D,J))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=BC(r,r.H?r.la:null,r.W),c.J){A0(r.i,c);var h=c,p=r.K;p&&h.setTimeout(p),h.B&&($p(h),Bh(h)),r.g=c}else N0(r);0<t.l.length&&P_(t)}else"stop"!=y[0]&&"close"!=y[0]||Pu(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Pu(t,7):Xc(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}ys(4)}catch(y){}}function E_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Wv(n)||"string"==typeof n)e_(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Wv(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function vC(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Wv(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}}function Hh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Hh)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function C0(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];zc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)zc(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function zc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(ct=Vh.prototype).setTimeout=function(n){this.P=n},ct.gb=function(n){n=n.target;const e=this.L;e&&3==Rl(n)?e.l():this.Ia(n)},ct.Ia=function(n){try{if(n==this.g)e:{const T=Rl(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>T)&&(3!=T||e0||this.g&&(this.h.h||this.g.ga()||zp(this.g)))){this.I||4!=T||7==e||ys(8==e||0>=S?3:2),$p(this);var t=this.g.ba();this.N=t;t:if(E0(this)){var r=zp(this.g);n="";var i=r.length,o=4==Rl(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){xu(this),jh(this);var c="";break t}this.h.i=new Ot.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function KD(n,e,t,r,i,o,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+c})}(this.j,this.u,this.A,this.m,this.X,T,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yv(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Ji(12),xu(this),jh(this);break e}Uh(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,w_(this,t)}this.U?(y_(this,T,c),e0&&this.i&&3==T&&(hC(this.V,this.W,"tick",this.fb),this.W.start())):(Uh(this.j,this.m,c,null),w_(this,c)),4==T&&xu(this),this.i&&!this.I&&(4==T?cA(this.l,this):(this.i=!1,Bh(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Ji(12)):(this.o=0,Ji(13)),xu(this),jh(this)}}}catch(T){}},ct.fb=function(){if(this.g){var n=Rl(this.g),e=this.g.ga();this.C<e.length&&($p(this),y_(this,n,e),this.i&&4!=n&&Bh(this))}},ct.cancel=function(){this.I=!0,xu(this)},ct.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function fC(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ys(3),Ji(17)),xu(this),this.o=2,jh(this)):b0(this,this.Y-n)},(ct=Hh.prototype).R=function(){C0(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},ct.T=function(){return C0(this),this.g.concat()},ct.get=function(n,e){return zc(this.h,n)?this.h[n]:e},ct.set=function(n,e){zc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},ct.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],o=this.get(i);n.call(e,o,i,this)}};var wC=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Wc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Wc){this.g=void 0!==e?e:n.g,b_(this,n.j),this.s=n.s,C_(this,n.i),T_(this,n.m),this.l=n.l,e=n.h;var t=new $h;t.i=e.i,e.g&&(t.g=new Hh(e.g),t.h=e.h),EC(this,t),this.o=n.o}else n&&(t=String(n).match(wC))?(this.g=!!e,b_(this,t[1]||"",!0),this.s=qp(t[2]||""),C_(this,t[3]||"",!0),T_(this,t[4]),this.l=qp(t[5]||"",!0),EC(this,t[6]||"",!0),this.o=qp(t[7]||"")):(this.g=!!e,this.h=new $h(null,this.g))}function Nl(n){return new Wc(n)}function b_(n,e,t){n.j=t?qp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function C_(n,e,t){n.i=t?qp(e,!0):e}function T_(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function EC(n,e,t){e instanceof $h?(n.h=e,function Yc(n,e){e&&!n.j&&(kl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(I0(this,r),D0(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Gp(e,TC)),n.h=new $h(e,n.g))}function tr(n,e,t){n.h.set(e,t)}function I_(n){return tr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function qp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Gp(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,tA),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function tA(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Wc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Gp(e,T0,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Gp(e,T0,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Gp(t,"/"==t.charAt(0)?CC:bC,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Gp(t,IC)),n.join("")};var T0=/[#\/\?@]/g,bC=/[#\?:]/g,CC=/[#\?]/g,TC=/[#\?@]/g,IC=/#/g;function $h(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function kl(n){n.g||(n.g=new Hh,n.h=0,n.i&&function JD(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function I0(n,e){kl(n),e=Kc(n,e),zc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,zc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&C0(n)))}function S0(n,e){return kl(n),e=Kc(n,e),zc(n.g.h,e)}function D0(n,e,t){I0(n,e),0<t.length&&(n.i=null,n.g.set(Kc(n,e),Yb(t)),n.h+=t.length)}function Kc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function SC(n){this.l=n||qh,n=Ot.PerformanceNavigationTiming?0<(n=Ot.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ot.g&&Ot.g.Ea&&Ot.g.Ea()&&Ot.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ct=$h.prototype).add=function(n,e){kl(this),this.i=null,n=Kc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ct.forEach=function(n,e){kl(this),this.g.forEach(function(t,r){e_(t,function(i){n.call(e,i,r,this)},this)},this)},ct.T=function(){kl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],o=0;o<i.length;o++)t.push(e[r]);return t},ct.R=function(n){kl(this);var e=[];if("string"==typeof n)S0(this,n)&&(e=Kb(e,this.g.get(Kc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Kb(e,n[t])}return e},ct.set=function(n,e){return kl(this),this.i=null,S0(this,n=Kc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ct.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},ct.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var c=i;""!==r[o]&&(c+="="+encodeURIComponent(String(r[o]))),n.push(c)}}return this.i=n.join("&")};var qh=10;function DC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function S_(n){return n.h?1:n.g?n.g.size:0}function AC(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function D_(n,e){n.g?n.g.add(e):n.h=e}function A0(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function rA(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Yb(n.i)}function It(){}function iA(){this.g=new It}function sA(n,e,t){const r=t||"";try{E_(n,function(i,o){let c=i;Nh(i)&&(c=Fh(i)),e.push(r+o+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Qc(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Zp(n){this.l=n.$b||null,this.j=n.ib||!1}function Jc(n,e){ai.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Gh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}SC.prototype.cancel=function(){if(this.i=rA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},It.prototype.stringify=function(n){return Ot.JSON.stringify(n,void 0)},It.prototype.parse=function(n){return Ot.JSON.parse(n,void 0)},si(Zp,g_),Zp.prototype.g=function(){return new Jc(this.l,this.j)},Zp.prototype.i=function(n){return function(){return n}}({}),si(Jc,ai);var Gh=0;function ar(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function A_(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Zh(n)}function Zh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ct=Jc.prototype).open=function(n,e){if(this.readyState!=Gh)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Zh(this)},ct.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ot).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ct.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,A_(this)),this.readyState=Gh},ct.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Zh(this)),this.g&&(this.readyState=3,Zh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ot.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ar(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},ct.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?A_(this):Zh(this),3==this.readyState&&ar(this)}},ct.Ua=function(n){this.g&&(this.response=this.responseText=n,A_(this))},ct.Ta=function(n){this.g&&(this.response=n,A_(this))},ct.ha=function(){this.g&&A_(this)},ct.setRequestHeader=function(n,e){this.v.append(n,e)},ct.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ct.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Jc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var aA=Ot.JSON.parse;function Fr(n){ai.call(this),this.headers=new Hh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=x0,this.K=this.L=!1}si(Fr,ai);var x0="",xC=/^https?$/i,MC=["POST","PUT"];function lA(n){return"content-type"==n.toLowerCase()}function NC(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,kC(n),x_(n)}function kC(n){n.D||(n.D=!0,Ci(n,"complete"),Ci(n,"error"))}function zh(n){if(n.h&&void 0!==Qm&&(!n.C[1]||4!=Rl(n)||2!=n.ba()))if(n.v&&4==Rl(n))Sr(n.Fa,0,n);else if(Ci(n,"readystatechange"),4==Rl(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(wC)[1]||null;if(!i&&Ot.self&&Ot.self.location){var o=Ot.self.location.protocol;i=o.substr(0,o.length-1)}r=!xC.test(i?i.toLowerCase():"")}t=r}if(t)Ci(n,"complete"),Ci(n,"success");else{n.m=6;try{var c=2<Rl(n)?n.g.statusText:""}catch(p){c=""}n.j=c+" ["+n.ba()+"]",kC(n)}}finally{x_(n)}}}function x_(n,e){if(n.g){RC(n);const t=n.g,r=n.C[0]?Pp:null;n.g=null,n.C=null,e||Ci(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function RC(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ot.clearTimeout(n.A),n.A=null)}function Rl(n){return n.g?n.g.readyState:0}function zp(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case x0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function M_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function OC(n){let e="";return Qv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):tr(n,e,t))}function Wh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function FC(n){this.za=0,this.l=[],this.h=new Vp,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Wh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Wh("baseRetryDelayMs",5e3,n),this.$a=Wh("retryDelaySeedMs",1e4,n),this.Ya=Wh("forwardChannelMaxRetries",2,n),this.ra=Wh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new SC(n&&n.concurrentRequestLimit),this.Ca=new iA,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Xc(n){if(LC(n),3==n.G){var e=n.V++,t=Nl(n.F);tr(t,"SID",n.J),tr(t,"RID",e),tr(t,"TYPE","terminate"),Kh(n,t),(e=new Vh(n,n.h,e,void 0)).K=2,e.v=I_(Nl(t)),t=!1,Ot.navigator&&Ot.navigator.sendBeacon&&(t=Ot.navigator.sendBeacon(e.v.toString(),"")),!t&&Ot.Image&&((new Image).src=e.v,t=!0),t||(e.g=jC(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Bh(e)}Wp(n)}function Mu(n){n.g&&(R0(n),n.g.cancel(),n.g=null)}function LC(n){Mu(n),n.u&&(Ot.clearTimeout(n.u),n.u=null),O0(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ot.clearTimeout(n.m),n.m=null)}function M0(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&P_(n)}function P_(n){DC(n.i)||n.m||(n.m=!0,h_(n.Ha,n),n.C=0)}function P0(n,e){var t;t=e?e.m:n.V++;const r=Nl(n.F);tr(r,"SID",n.J),tr(r,"RID",t),tr(r,"AID",n.U),Kh(n,r),n.o&&n.s&&M_(r,n.o,n.s),t=new Vh(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=VC(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),D_(n.i,t),v0(t,r,e)}function Kh(n,e){n.j&&E_({},function(t,r){tr(e,r,t)})}function VC(n,e,t){t=Math.min(n.l.length,t);var r=n.j?ii(n.j.Oa,n.j,n):null;e:{var i=n.l;let o=-1;for(;;){const c=["count="+t];-1==o?0<t?(o=i[0].h,c.push("ofs="+o)):o=0:c.push("ofs="+o);let h=!0;for(let p=0;p<t;p++){let y=i[p].h;const T=i[p].g;if(y-=o,0>y)o=Math.max(0,i[p].h-100),h=!1;else try{sA(T,c,"req"+y+"_")}catch(S){r&&r(T)}}if(h){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function N0(n){n.g||n.u||(n.Y=1,h_(n.Ga,n),n.A=0)}function k0(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Xi(ii(n.Ga,n),dA(n,n.A)),n.A++,0))}function R0(n){null!=n.B&&(Ot.clearTimeout(n.B),n.B=null)}function uA(n){n.g=new Vh(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Nl(n.oa);tr(e,"RID","rpc"),tr(e,"SID",n.J),tr(e,"CI",n.N?"0":"1"),tr(e,"AID",n.U),Kh(n,e),tr(e,"TYPE","xmlhttp"),n.o&&n.s&&M_(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=I_(Nl(e)),t.s=null,t.U=!0,w0(t,n)}function O0(n){null!=n.v&&(Ot.clearTimeout(n.v),n.v=null)}function cA(n,e){var t=null;if(n.g==e){O0(n),R0(n),n.g=null;var r=2}else{if(!AC(n.i,e))return;t=e.D,A0(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Ci(r=Bp(),new Jo(r,t,e,i)),P_(n)}else N0(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function UC(n,e){return!(S_(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Xi(ii(n.Ha,n,e),dA(n,n.C)),n.C++,0)))}(n,e)||2==r&&k0(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Pu(n,5);break;case 4:Pu(n,10);break;case 3:Pu(n,6);break;default:Pu(n,2)}}function dA(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Pu(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=ii(n.jb,n);t||(t=new Wc("//www.google.com/images/cleardot.gif"),Ot.location&&"http"==Ot.location.protocol||b_(t,"https"),I_(t)),function oA(n,e){const t=new Vp;if(Ot.Image){const r=new Image;r.onload=Xm(Qc,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Xm(Qc,t,r,"TestLoadImage: error",!1,e),r.onabort=Xm(Qc,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Xm(Qc,t,r,"TestLoadImage: timeout",!1,e),Ot.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ji(2);n.G=0,n.j&&n.j.va(e),Wp(n),LC(n)}function Wp(n){n.G=0,n.I=-1,n.j&&((0!=rA(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Yb(n.l),n.l.length=0),n.j.ua())}function BC(n,e,t){let r=function XD(n){return n instanceof Wc?Nl(n):new Wc(n,void 0)}(t);if(""!=r.i)e&&C_(r,e+"."+r.i),T_(r,r.m);else{const i=Ot.location;r=function eA(n,e,t,r){var i=new Wc(null,void 0);return n&&b_(i,n),e&&C_(i,e),t&&T_(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Qv(n.aa,function(i,o){tr(r,o,i)}),t=n.sa,(e=n.D)&&t&&tr(r,e,t),tr(r,"VER",n.ma),Kh(n,r),r}function jC(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Fr(t&&n.Ba&&!n.qa?new Zp({ib:!0}):n.qa)).L=n.H,e}function F0(){}function Nu(){if(Rh&&!(10<=Number(kp)))throw Error("Environmental error: no available transport.")}function Hs(n,e){ai.call(this),this.g=new FC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Yv(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yv(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Yh(this)}function HC(n){y0.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function $C(){Hp.call(this),this.status=1}function Yh(n){this.g=n}(ct=Fr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Gc.g(),this.C=function gC(n){return n.h||(n.h=n.i())}(this.u?this.u:Gc),this.g.onreadystatechange=ii(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(o){return void NC(this,o)}n=t||"";const i=new Hh(this.headers);r&&E_(r,function(o,c){i.set(c,o)}),r=function Kv(n){e:{var e=lA;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Ot.FormData&&n instanceof Ot.FormData,!(0<=Wb(MC,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(o,c){this.g.setRequestHeader(c,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{RC(this),0<this.B&&((this.K=function PC(n){return Rh&&function n0(){return function $D(n){var e=XN;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=HD(String(n_)).split("."),t=HD("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",o=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;n=t_(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||t_(0==i[2].length,0==o[2].length)||t_(i[2],o[2]),i=i[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ii(this.pa,this)):this.A=Sr(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){NC(this,o)}},ct.pa=function(){void 0!==Qm&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ci(this,"timeout"),this.abort(8))},ct.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ci(this,"complete"),Ci(this,"abort"),x_(this))},ct.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),x_(this,!0)),Fr.Z.M.call(this)},ct.Fa=function(){this.s||(this.F||this.v||this.l?zh(this):this.cb())},ct.cb=function(){zh(this)},ct.ba=function(){try{return 2<Rl(this)?this.g.status:-1}catch(n){return-1}},ct.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ct.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),aA(e)}},ct.Da=function(){return this.m},ct.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ct=FC.prototype).ma=8,ct.G=1,ct.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},ct.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Vh(this,this.h,n,void 0);let o=this.s;if(this.P&&(o?(o=Jv(o),Xv(o,this.P)):o=this.P),null===this.o&&(i.H=o),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=VC(this,i,e),tr(t=Nl(this.F),"RID",n),tr(t,"CVER",22),this.D&&tr(t,"X-HTTP-Session-Id",this.D),Kh(this,t),this.o&&o&&M_(t,this.o,o),D_(this.i,i),this.Ra&&tr(t,"TYPE","init"),this.ja?(tr(t,"$req",e),tr(t,"SID","null"),i.$=!0,v0(i,t,null)):v0(i,t,e),this.G=2}}else 3==this.G&&(n?P0(this,n):0==this.l.length||DC(this.i)||P0(this))},ct.Ga=function(){if(this.u=null,uA(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Xi(ii(this.bb,this),n)}},ct.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ji(10),Mu(this),uA(this))},ct.ab=function(){null!=this.v&&(this.v=null,Mu(this),k0(this),Ji(19))},ct.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ji(2)):(this.h.info("Failed to ping google.com"),Ji(1))},(ct=F0.prototype).xa=function(){},ct.wa=function(){},ct.va=function(){},ct.ua=function(){},ct.Oa=function(){},Nu.prototype.g=function(n,e){return new Hs(n,e)},si(Hs,ai),Hs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),h_(ii(n.hb,n,e))),Ji(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=BC(n,null,n.W),P_(n)},Hs.prototype.close=function(){Xc(this.g)},Hs.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,M0(this.g,e)}else this.v?((e={}).__data__=Fh(n),M0(this.g,e)):M0(this.g,n)},Hs.prototype.M=function(){this.g.j=null,delete this.j,Xc(this.g),delete this.g,Hs.Z.M.call(this)},si(HC,y0),si($C,Hp),si(Yh,F0),Yh.prototype.xa=function(){Ci(this.g,"a")},Yh.prototype.wa=function(n){Ci(this.g,new HC(n))},Yh.prototype.va=function(n){Ci(this.g,new $C(n))},Yh.prototype.ua=function(){Ci(this.g,"b")},Nu.prototype.createWebChannel=Nu.prototype.g,Hs.prototype.send=Hs.prototype.u,Hs.prototype.open=Hs.prototype.m,Hs.prototype.close=Hs.prototype.close,vs.NO_ERROR=0,vs.TIMEOUT=8,vs.HTTP_ERROR=6,_0.COMPLETE="complete",mC.EventType=jp,jp.OPEN="a",jp.CLOSE="b",jp.ERROR="c",jp.MESSAGE="d",ai.prototype.listen=ai.prototype.N,Fr.prototype.listenOnce=Fr.prototype.O,Fr.prototype.getLastError=Fr.prototype.La,Fr.prototype.getLastErrorCode=Fr.prototype.Da,Fr.prototype.getStatus=Fr.prototype.ba,Fr.prototype.getResponseJson=Fr.prototype.Qa,Fr.prototype.getResponseText=Fr.prototype.ga,Fr.prototype.send=Fr.prototype.ea;var hA=Ua.createWebChannelTransport=function(){return new Nu},qC=Ua.getStatEventTarget=function(){return Bp()},L0=Ua.ErrorCode=vs,fA=Ua.EventType=_0,Qh=Ua.Event=Au,GC=Ua.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ZC=Ua.FetchXmlHttpFactory=Zp,N_=Ua.WebChannel=mC,zC=Ua.XhrIo=Fr;const WC="@firebase/firestore";class li{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}li.UNAUTHENTICATED=new li(null),li.GOOGLE_CREDENTIALS=new li("google-credentials-uid"),li.FIRST_PARTY=new li("first-party-uid"),li.MOCK_USER=new li("mock-user");let Jh="9.8.0";const Va=new bo.Yd("@firebase/firestore");function U0(){return Va.logLevel}function je(n,...e){if(Va.logLevel<=bo.in.DEBUG){const t=e.map(V0);Va.debug(`Firestore (${Jh}): ${n}`,...t)}}function Lr(n,...e){if(Va.logLevel<=bo.in.ERROR){const t=e.map(V0);Va.error(`Firestore (${Jh}): ${n}`,...t)}}function Kp(n,...e){if(Va.logLevel<=bo.in.WARN){const t=e.map(V0);Va.warn(`Firestore (${Jh}): ${n}`,...t)}}function V0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ht(n="Unexpected state"){const e=`FIRESTORE (${Jh}) INTERNAL ASSERTION FAILED: `+n;throw Lr(e),new Error(e)}function Pt(n,e){n||ht()}function st(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Le extends R.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ui{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class QC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(li.UNAUTHENTICATED))}shutdown(){}}class gA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class mA{constructor(e){this.t=e,this.currentUser=li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let c=new ui;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new ui,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const y=c;e.enqueueRetryable((0,be.Z)(function*(){yield y.promise,yield o(r.currentUser)}))},p=y=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new ui)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pt("string"==typeof r.accessToken),new QC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Pt(null===e||"string"==typeof e),new li(e)}}class JC{constructor(e,t,r){this.type="FirstParty",this.user=li.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class XC{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new JC(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class eT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _A{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=o=>{null!=o.error&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.p;return this.p=o.token,je("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.g.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.g.getImmediate({optional:!0});o?i(o):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Pt("string"==typeof t.token),this.p=t.token,new eT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class $s{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function vA(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}$s.A=-1;class tT{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=vA(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function Vt(n,e){return n<e?-1:n>e?1:0}function ku(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function B0(n){return n+"\0"}class lr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Le(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Le(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Le(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Le(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return lr.fromMillis(Date.now())}static fromDate(e){return lr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new lr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vt(this.nanoseconds,e.nanoseconds):Vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class At{constructor(e){this.timestamp=e}static fromTimestamp(e){return new At(e)}static min(){return new At(new lr(0,0))}static max(){return new At(new lr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function nT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ol(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Xh{constructor(e,t,r){void 0===t?t=0:t>e.length&&ht(),void 0===r?r=e.length-t:r>e.length-t&&ht(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Xh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),c=t.get(i);if(o<c)return-1;if(o>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class dn extends Xh{construct(e,t,r){return new dn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Le(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new dn(t)}static emptyPath(){return new dn([])}}const iT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zr extends Xh{construct(e,t,r){return new zr(e,t,r)}static isValidIdentifier(e){return iT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new zr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new Le(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Le(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Le(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(o(),i++)}if(o(),c)throw new Le(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zr(t)}static emptyPath(){return new zr([])}}class ed{constructor(e){this.fields=e,e.sort(zr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ku(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Wr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new Wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wr.EMPTY_BYTE_STRING=new Wr("");const k_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ru(n){if(Pt(!!n),"string"==typeof n){let e=0;const t=k_.exec(n);if(Pt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ln(n.seconds),nanos:Ln(n.nanos)}}function Ln(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Xo(n){return"string"==typeof n?Wr.fromBase64String(n):Wr.fromUint8Array(n)}function j0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function wA(n){const e=n.mapValue.fields.__previous_value__;return j0(e)?wA(e):e}function ef(n){const e=Ru(n.mapValue.fields.__local_write_time__.timestampValue);return new lr(e.seconds,e.nanos)}class EA{constructor(e,t,r,i,o,c,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class Fl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Fl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Fl&&e.projectId===this.projectId&&e.database===this.database}}function Yp(n){return null==n}function Qp(n){return 0===n&&1/n==-1/0}function H0(n){return"number"==typeof n&&Number.isInteger(n)&&!Qp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class tt{constructor(e){this.path=e}static fromPath(e){return new tt(dn.fromString(e))}static fromName(e){return new tt(dn.fromString(e).popFirst(5))}static empty(){return new tt(dn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===dn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new dn(e.slice()))}}const Ba={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},td={nullValue:"NULL_VALUE"};function ea(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?j0(n)?4:bA(n)?9007199254740991:10:ht()}function ja(n,e){if(n===e)return!0;const t=ea(n);if(t!==ea(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ef(n).isEqual(ef(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Ru(r.timestampValue),c=Ru(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Xo(n.bytesValue).isEqual(Xo(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Ln(r.geoPointValue.latitude)===Ln(i.geoPointValue.latitude)&&Ln(r.geoPointValue.longitude)===Ln(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ln(r.integerValue)===Ln(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Ln(r.doubleValue),c=Ln(i.doubleValue);return o===c?Qp(o)===Qp(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return ku(n.arrayValue.values||[],e.arrayValue.values||[],ja);case 10:return function(r,i){const o=r.mapValue.fields||{},c=i.mapValue.fields||{};if(nT(o)!==nT(c))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(void 0===c[h]||!ja(o[h],c[h])))return!1;return!0}(n,e);default:return ht()}var i}function tf(n,e){return void 0!==(n.values||[]).find(t=>ja(t,e))}function Ll(n,e){if(n===e)return 0;const t=ea(n),r=ea(e);if(t!==r)return Vt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Vt(n.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Ln(i.integerValue||i.doubleValue),h=Ln(o.integerValue||o.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return sT(n.timestampValue,e.timestampValue);case 4:return sT(ef(n),ef(e));case 5:return Vt(n.stringValue,e.stringValue);case 6:return function(i,o){const c=Xo(i),h=Xo(o);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),h=o.split("/");for(let p=0;p<c.length&&p<h.length;p++){const y=Vt(c[p],h[p]);if(0!==y)return y}return Vt(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const c=Vt(Ln(i.latitude),Ln(o.latitude));return 0!==c?c:Vt(Ln(i.longitude),Ln(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const c=i.values||[],h=o.values||[];for(let p=0;p<c.length&&p<h.length;++p){const y=Ll(c[p],h[p]);if(y)return y}return Vt(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===Ba.mapValue&&o===Ba.mapValue)return 0;if(i===Ba.mapValue)return 1;if(o===Ba.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),p=o.fields||{},y=Object.keys(p);h.sort(),y.sort();for(let T=0;T<h.length&&T<y.length;++T){const S=Vt(h[T],y[T]);if(0!==S)return S;const x=Ll(c[h[T]],p[y[T]]);if(0!==x)return x}return Vt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw ht()}}function sT(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Vt(n,e);const t=Ru(n),r=Ru(e),i=Vt(t.seconds,r.seconds);return 0!==i?i:Vt(t.nanos,r.nanos)}function nf(n){return Jp(n)}function Jp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Ru(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Xo(n.bytesValue).toBase64():"referenceValue"in n?tt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const c of r.values||[])o?o=!1:i+=",",i+=Jp(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",c=!0;for(const h of i)c?c=!1:o+=",",o+=`${h}:${Jp(r.fields[h])}`;return o+"}"}(n.mapValue):ht();var e}function nd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function oT(n){return!!n&&"integerValue"in n}function Xp(n){return!!n&&"arrayValue"in n}function aT(n){return!!n&&"nullValue"in n}function rd(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function eg(n){return!!n&&"mapValue"in n}function Ha(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ol(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ha(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ha(n.arrayValue.values[t]);return e}return Object.assign({},n)}function bA(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function lT(n){return"nullValue"in n?td:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?nd(Fl.empty(),tt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ht()}function CA(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?nd(Fl.empty(),tt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ba:ht()}function TA(n,e){const t=Ll(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function $0(n,e){const t=Ll(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class es{constructor(e){this.value=e}static empty(){return new es({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!eg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ha(t)}setAll(e){let t=zr.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=Ha(c):i.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());eg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ja(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];eg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ol(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new es(Ha(this.value))}}function q0(n){const e=[];return Ol(n.fields,(t,r)=>{const i=new zr([t]);if(eg(r)){const o=q0(r.mapValue).fields;if(0===o.length)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)}),new ed(e)}class Un{constructor(e,t,r,i,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Un(e,0,At.min(),At.min(),es.empty(),0)}static newFoundDocument(e,t,r){return new Un(e,1,t,At.min(),r,0)}static newNoDocument(e,t){return new Un(e,2,t,At.min(),es.empty(),0)}static newUnknownDocument(e,t){return new Un(e,3,t,At.min(),es.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=es.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=es.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Un(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class tg{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function R_(n){return n.fields.find(e=>2===e.kind)}function id(n){return n.fields.filter(e=>2!==e.kind)}tg.UNKNOWN_ID=-1;class O_{constructor(e,t){this.fieldPath=e,this.kind=t}}class ng{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ng(0,ta.min())}}function uT(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=At.fromTimestamp(1e9===r?new lr(t+1,0):new lr(t,r));return new ta(i,tt.empty(),e)}function IA(n){return new ta(n.readTime,n.key,-1)}class ta{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ta(At.min(),tt.empty(),-1)}static max(){return new ta(At.max(),tt.empty(),-1)}}function cT(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=tt.comparator(n.documentKey,e.documentKey),0!==t?t:Vt(n.largestBatchId,e.largestBatchId))}class Dr{constructor(e,t){this.comparator=e,this.root=t||ci.EMPTY}insert(e,t){return new Dr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ci.BLACK,null,null))}remove(e){return new Dr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ou(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ou(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ou(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ou(this.root,e,this.comparator,!0)}}class Ou{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ci{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=null!=r?r:ci.RED,this.left=null!=i?i:ci.EMPTY,this.right=null!=o?o:ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new ci(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ci.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}ci.EMPTY=null,ci.RED=!0,ci.BLACK=!1,ci.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ci(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Vn{constructor(e){this.comparator=e,this.data=new Dr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new G0(this.data.getIterator())}getIteratorFrom(e){return new G0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Vn(this.comparator);return t.data=e,t}}class G0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function sd(n){return n.hasNext()?n.getNext():void 0}class dT{constructor(e,t=null,r=[],i=[],o=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=h,this.P=null}}function Z0(n,e=null,t=[],r=[],i=null,o=null,c=null){return new dT(n,e,t,r,i,o,c)}function od(n){const e=st(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+nf(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Yp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>nf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>nf(r)).join(",")),e.P=t}return e.P}function rf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!PA(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ja(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!K0(n.startAt,e.startAt)&&K0(n.endAt,e.endAt)}function F_(n){return tt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function L_(n,e){return n.filters.filter(t=>t instanceof Ti&&t.field.isEqual(e))}function z0(n,e,t){let r=td,i=!0;for(const o of L_(n,e)){let c=td,h=!0;switch(o.op){case"<":case"<=":c=lT(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,h=!1;break;case"!=":case"not-in":c=td}TA({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];TA({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function sf(n,e,t){let r=Ba,i=!0;for(const o of L_(n,e)){let c=Ba,h=!0;switch(o.op){case">=":case">":c=CA(o.value),h=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,h=!1;break;case"!=":case"not-in":c=Ba}$0({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];$0({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Ti extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new W0(e,t,r):"array-contains"===t?new rg(e,r):"in"===t?new AA(e,r):"not-in"===t?new xA(e,r):"array-contains-any"===t?new MA(e,r):new Ti(e,t,r)}static V(e,t,r){return"in"===t?new $a(e,r):new DA(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Ll(t,this.value)):null!==t&&ea(this.value)===ea(t)&&this.v(Ll(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ht()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class W0 extends Ti{constructor(e,t,r){super(e,t,r),this.key=tt.fromName(r.referenceValue)}matches(e){const t=tt.comparator(e.key,this.key);return this.v(t)}}class $a extends Ti{constructor(e,t){super(e,"in",t),this.keys=U_(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class DA extends Ti{constructor(e,t){super(e,"not-in",t),this.keys=U_(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function U_(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>tt.fromName(r.referenceValue))}class rg extends Ti{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Xp(t)&&tf(t.arrayValue,this.value)}}class AA extends Ti{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&tf(this.value.arrayValue,t)}}class xA extends Ti{constructor(e,t){super(e,"not-in",t)}matches(e){if(tf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!tf(this.value.arrayValue,t)}}class MA extends Ti{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Xp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>tf(this.value.arrayValue,r))}}class na{constructor(e,t){this.position=e,this.inclusive=t}}class Ul{constructor(e,t="asc"){this.field=e,this.dir=t}}function PA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function hT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],c=n.position[i];if(r=o.field.isKeyField()?tt.comparator(tt.fromName(c.referenceValue),t.key):Ll(c,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function K0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ja(n.position[t],e.position[t]))return!1;return!0}class qa{constructor(e,t=null,r=[],i=[],o=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=p,this.D=null,this.C=null}}function V_(n,e,t,r,i,o,c,h){return new qa(n,e,t,r,i,o,c,h)}function ad(n){return new qa(n)}function Y0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function fT(n){for(const e of n.filters)if(e.S())return e.field;return null}function ig(n){return null!==n.collectionGroup}function Fu(n){const e=st(n);if(null===e.D){e.D=[];const t=fT(e),r=Y0(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Ul(t)),e.D.push(new Ul(zr.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.D.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Ul(zr.keyField(),o))}}}return e.D}function qs(n){const e=st(n);if(!e.C)if("F"===e.limitType)e.C=Z0(e.path,e.collectionGroup,Fu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of Fu(e))t.push(new Ul(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new na(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new na(e.startAt.position,e.startAt.inclusive):null;e.C=Z0(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function B_(n,e,t){return new qa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ld(n,e){return rf(qs(n),qs(e))&&n.limitType===e.limitType}function pT(n){return`${od(qs(n))}|lt:${n.limitType}`}function Q0(n){return`Query(target=${function SA(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${nf(r.value)}`;var r}).join(", ")}]`),Yp(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>nf(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>nf(t)).join(",")),`Target(${e})`}(qs(n))}; limitType=${n.limitType})`}function J0(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):tt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,c){const h=hT(i,o,c);return i.inclusive?h<=0:h<0}(t.startAt,Fu(t),r)||t.endAt&&!function(i,o,c){const h=hT(i,o,c);return i.inclusive?h>=0:h>0}(t.endAt,Fu(t),r)));var t,r}function gT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function X0(n){return(e,t)=>{let r=!1;for(const i of Fu(n)){const o=ew(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function ew(n,e,t){const r=n.field.isKeyField()?tt.comparator(e.key,t.key):function(i,o,c){const h=o.data.field(i),p=c.data.field(i);return null!==h&&null!==p?Ll(h,p):ht()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ht()}}function tw(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qp(e)?"-0":e}}function mT(n){return{integerValue:""+n}}function nw(n,e){return H0(e)?mT(e):tw(n,e)}class sg{constructor(){this._=void 0}}function kA(n,e,t){return n instanceof af?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof Lu?iw(n,e):n instanceof Ar?ud(n,e):function(r,i){const o=rw(r,i),c=yT(o)+yT(r.k);return oT(o)&&oT(r.k)?mT(c):tw(r.M,c)}(n,e)}function _T(n,e,t){return n instanceof Lu?iw(n,e):n instanceof Ar?ud(n,e):t}function rw(n,e){return n instanceof lf?oT(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class af extends sg{}class Lu extends sg{constructor(e){super(),this.elements=e}}function iw(n,e){const t=RA(e);for(const r of n.elements)t.some(i=>ja(i,r))||t.push(r);return{arrayValue:{values:t}}}class Ar extends sg{constructor(e){super(),this.elements=e}}function ud(n,e){let t=RA(e);for(const r of n.elements)t=t.filter(i=>!ja(i,r));return{arrayValue:{values:t}}}class lf extends sg{constructor(e,t){super(),this.M=e,this.k=t}}function yT(n){return Ln(n.integerValue||n.doubleValue)}function RA(n){return Xp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Vl{constructor(e,t){this.field=e,this.transform=t}}class sw{constructor(e,t){this.version=e,this.transformResults=t}}class Ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ur}static exists(e){return new Ur(void 0,e)}static updateTime(e){return new Ur(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function og(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class j_{}function FA(n,e,t){n instanceof cd?function(r,i,o){const c=r.value.clone(),h=wT(r.fieldTransforms,i,o.transformResults);c.setAll(h),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof uf?function(r,i,o){if(!og(r.precondition,i))return void i.convertToUnknownDocument(o.version);const c=wT(r.fieldTransforms,i,o.transformResults),h=i.data;h.setAll(aw(r)),h.setAll(c),i.convertToFoundDocument(o.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ag(n,e,t){var i;n instanceof cd?function(r,i,o){if(!og(r.precondition,i))return;const c=r.value.clone(),h=lw(r.fieldTransforms,o,i);c.setAll(h),i.convertToFoundDocument(lg(i),c).setHasLocalMutations()}(n,e,t):n instanceof uf?function(r,i,o){if(!og(r.precondition,i))return;const c=lw(r.fieldTransforms,o,i),h=i.data;h.setAll(aw(r)),h.setAll(c),i.convertToFoundDocument(lg(i),h).setHasLocalMutations()}(n,e,t):og(n.precondition,i=e)&&i.convertToNoDocument(At.min())}function vT(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=rw(r.transform,i||null);null!=o&&(null==t&&(t=es.empty()),t.set(r.field,o))}return t||null}function ow(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ku(t,r,(i,o)=>function OA(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Lu&&r instanceof Lu||t instanceof Ar&&r instanceof Ar?ku(t.elements,r.elements,ja):t instanceof lf&&r instanceof lf?ja(t.k,r.k):t instanceof af&&r instanceof af);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function lg(n){return n.isFoundDocument()?n.version:At.min()}class cd extends j_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class uf extends j_{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}}function aw(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function wT(n,e,t){const r=new Map;Pt(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],c=o.transform,h=e.data.field(o.field);r.set(o.field,_T(c,h,t[i]))}return r}function lw(n,e,t){const r=new Map;for(const i of n){const o=i.transform,c=t.data.field(i.field);r.set(i.field,kA(o,c,e))}return r}class Uu extends j_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class H_ extends j_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class LA{constructor(e){this.count=e}}var mr,un;function UA(n){switch(n){default:return ht();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function ET(n){if(void 0===n)return Lr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case mr.OK:return ge.OK;case mr.CANCELLED:return ge.CANCELLED;case mr.UNKNOWN:return ge.UNKNOWN;case mr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case mr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case mr.INTERNAL:return ge.INTERNAL;case mr.UNAVAILABLE:return ge.UNAVAILABLE;case mr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case mr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case mr.NOT_FOUND:return ge.NOT_FOUND;case mr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case mr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case mr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case mr.ABORTED:return ge.ABORTED;case mr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case mr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case mr.DATA_LOSS:return ge.DATA_LOSS;default:return ht()}}(un=mr||(mr={}))[un.OK=0]="OK",un[un.CANCELLED=1]="CANCELLED",un[un.UNKNOWN=2]="UNKNOWN",un[un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",un[un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",un[un.NOT_FOUND=5]="NOT_FOUND",un[un.ALREADY_EXISTS=6]="ALREADY_EXISTS",un[un.PERMISSION_DENIED=7]="PERMISSION_DENIED",un[un.UNAUTHENTICATED=16]="UNAUTHENTICATED",un[un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",un[un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",un[un.ABORTED=10]="ABORTED",un[un.OUT_OF_RANGE=11]="OUT_OF_RANGE",un[un.UNIMPLEMENTED=12]="UNIMPLEMENTED",un[un.INTERNAL=13]="INTERNAL",un[un.UNAVAILABLE=14]="UNAVAILABLE",un[un.DATA_LOSS=15]="DATA_LOSS";class Vu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ol(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return rT(this.inner)}size(){return this.innerSize}}const bT=new Dr(tt.comparator);function Gs(){return bT}const VA=new Dr(tt.comparator);function $_(...n){let e=VA;for(const t of n)e=e.insert(t.key,t);return e}function cf(){return new Vu(n=>n.toString(),(n,e)=>n.isEqual(e))}const BA=new Dr(tt.comparator),jA=new Vn(tt.comparator);function In(...n){let e=jA;for(const t of n)e=e.add(t);return e}const HA=new Vn(Vt);function ug(){return HA}class df{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,hf.createSynthesizedTargetChangeForCurrentChange(e,t)),new df(At.min(),r,ug(),Gs(),In())}}class hf{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t){return new hf(Wr.EMPTY_BYTE_STRING,t,In(),In(),In())}}class cg{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class CT{constructor(e,t){this.targetId=e,this.$=t}}class TT{constructor(e,t,r=Wr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class $A{constructor(){this.B=0,this.L=GA(),this.U=Wr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=In(),t=In(),r=In();return this.L.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ht()}}),new hf(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=GA()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class IT{constructor(e){this.nt=e,this.st=new Map,this.it=Gs(),this.rt=qA(),this.ot=new Vn(Vt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const o=i.target;if(F_(o))if(0===r){const c=new tt(o.path);this.ct(t,c,Un.newNoDocument(c,At.min()))}else Pt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((o,c)=>{const h=this.wt(c);if(h){if(o.current&&F_(h.target)){const p=new tt(h.target.path);null!==this.it.get(p)||this.It(c,p)||this.ct(c,p,Un.newNoDocument(p,e))}o.j&&(t.set(c,o.H()),o.J())}});let r=In();this.rt.forEach((o,c)=>{let h=!0;c.forEachWhile(p=>{const y=this.wt(p);return!y||2===y.purpose||(h=!1,!1)}),h&&(r=r.add(o))}),this.it.forEach((o,c)=>c.setReadTime(e));const i=new df(e,t,this.ot,this.it,r);return this.it=Gs(),this.rt=qA(),this.ot=new Vn(Vt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new $A,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Vn(Vt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||je("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new $A),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function qA(){return new Dr(tt.comparator)}function GA(){return new Dr(tt.comparator)}const tk={asc:"ASCENDING",desc:"DESCENDING"},nk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class rk{constructor(e,t){this.databaseId=e,this.N=t}}function q_(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZA(n,e){return n.N?e.toBase64():e.toUint8Array()}function ik(n,e){return q_(n,e.toTimestamp())}function xr(n){return Pt(!!n),At.fromTimestamp(function(e){const t=Ru(e);return new lr(t.seconds,t.nanos)}(n))}function ST(n,e){return(t=n,new dn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function uw(n){const e=dn.fromString(n);return Pt(Z_(e)),e}function dd(n,e){return ST(n.databaseId,e.path)}function ra(n,e){const t=uw(e);if(t.get(1)!==n.databaseId.projectId)throw new Le(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Le(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new tt(cw(t))}function G_(n,e){return ST(n.databaseId,e)}function zA(n){const e=uw(n);return 4===e.length?dn.emptyPath():cw(e)}function hd(n){return new dn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cw(n){return Pt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function DT(n,e,t){return{name:dd(n,e),fields:t.value.mapValue.fields}}function dw(n,e,t){const r=ra(n,e.name),i=xr(e.updateTime),o=new es({mapValue:{fields:e.fields}}),c=Un.newFoundDocument(r,i,o);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function dg(n,e){let t;if(e instanceof cd)t={update:DT(n,e.key,e.value)};else if(e instanceof Uu)t={delete:dd(n,e.key)};else if(e instanceof uf)t={update:DT(n,e.key,e.data),updateMask:nx(e.fieldMask)};else{if(!(e instanceof H_))return ht();t={verify:dd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof af)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Lu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ar)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof lf)return{fieldPath:o.field.canonicalString(),increment:c.k};throw ht()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:ik(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ht()),t;var i}function hg(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Ur.updateTime(xr(i.updateTime)):void 0!==i.exists?Ur.exists(i.exists):Ur.none():Ur.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,c){let h=null;"setToServerValue"in c?(Pt("REQUEST_TIME"===c.setToServerValue),h=new af):"appendMissingElements"in c?h=new Lu(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new Ar(c.removeAllFromArray.values||[]):"increment"in c?h=new lf(o,c.increment):ht();const p=zr.fromServerFormat(c.fieldPath);return new Vl(p,h)}(n,i)):[];var i;if(e.update){const i=ra(n,e.update.name),o=new es({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new ed((e.updateMask.fieldPaths||[]).map(y=>zr.fromServerFormat(y)));return new uf(i,o,c,t,r)}return new cd(i,o,t,r)}if(e.delete){const i=ra(n,e.delete);return new Uu(i,t)}if(e.verify){const i=ra(n,e.verify);return new H_(i,t)}return ht()}function YA(n,e){return{documents:[G_(n,e.path)]}}function QA(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=G_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=G_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const y=p.map(T=>function(S){if("=="===S.op){if(rd(S.value))return{unaryFilter:{field:ff(S.field),op:"IS_NAN"}};if(aT(S.value))return{unaryFilter:{field:ff(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(rd(S.value))return{unaryFilter:{field:ff(S.field),op:"IS_NOT_NAN"}};if(aT(S.value))return{unaryFilter:{field:ff(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ff(S.field),op:ok(S.op),value:S.value}}}(T));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const o=function(p){if(0!==p.length)return p.map(y=>{return{field:ff((T=y).field),direction:ex(T.dir)};var T})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const c=(y=e.limit,n.N||Yp(y)?y:{value:y});var y,h,p;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function JA(n){let e=zA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Pt(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let o=[];t.where&&(o=AT(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(T=>{return new Ul(Bu((S=T).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(T){let S;return S="object"==typeof T?T.value:T,Yp(S)?null:S}(t.limit));let p=null;var T;t.startAt&&(p=new na((T=t.startAt).values||[],!!T.before));let y=null;return t.endAt&&(y=function(T){return new na(T.values||[],!T.before)}(t.endAt)),V_(e,i,c,o,h,"F",p,y)}function AT(n){return n?void 0!==n.unaryFilter?[ia(n)]:void 0!==n.fieldFilter?[tx(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>AT(e)).reduce((e,t)=>e.concat(t)):ht():[]}function ex(n){return tk[n]}function ok(n){return nk[n]}function ff(n){return{fieldPath:n.canonicalString()}}function Bu(n){return zr.fromServerFormat(n.fieldPath)}function tx(n){return Ti.create(Bu(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(n.fieldFilter.op),n.fieldFilter.value)}function ia(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Bu(n.unaryFilter.field);return Ti.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Bu(n.unaryFilter.field);return Ti.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Bu(n.unaryFilter.field);return Ti.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Bu(n.unaryFilter.field);return Ti.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}function nx(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Z_(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ts(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=z_(e)),e=rx(n.get(t),e);return z_(e)}function rx(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function z_(n){return n+"\x01\x01"}function sa(n){const e=n.length;if(Pt(e>=2),2===e)return Pt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),dn.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const c=n.indexOf("\x01",o);switch((c<0||c>t)&&ht(),n.charAt(c+1)){case"\x01":const h=n.substring(o,c);let p;0===i.length?p=h:(i+=h,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(o,c),i+="\0";break;case"\x11":i+=n.substring(o,c+1);break;default:ht()}o=c+2}return new dn(r)}const hw=["userId","batchId"];function W_(n,e){return[n,ts(e)]}function fw(n,e,t){return[n,ts(e),t]}const ix={},sx=["prefixPath","collectionGroup","readTime","documentId"],ox=["prefixPath","collectionGroup","documentId"],pw=["collectionGroup","readTime","prefixPath","documentId"],fd=["canonicalId","targetId"],xT=["targetId","path"],MT=["path","targetId"],ax=["collectionId","parent"],ak=["indexId","uid"],lx=["uid","sequenceNumber"],ux=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],cx=["indexId","uid","orderedDocumentKey"],PT=["userId","collectionPath","documentId"],dx=["userId","collectionPath","largestBatchId"],hx=["userId","collectionGroup","largestBatchId"],fx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],gw=[...fx,"documentOverlays"],mw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],px=[...mw,"indexConfiguration","indexState","indexEntries"],NT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _w{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,r)=>{t(e)})}static reject(e){return new me((t,r)=>{r(e)})}static waitFor(e){return new me((t,r)=>{let i=0,o=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++o,c&&o===i&&t()},p=>r(p))}),c=!0,o===i&&t()})}static or(e){let t=me.resolve(!1);for(const r of e)t=t.next(i=>i?me.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}}class pf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new ui,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new gf(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=kT(r.target.error);this.At.reject(new gf(e,i))}}static open(e,t,r,i){try{return new pf(t,e.transaction(i,r))}catch(o){throw new gf(t,o)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new mx(t)}}class Co{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Co.Vt((0,R.z$)())&&Lr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return je("SimpleDb","Removing database:",e),pd(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,R.hl)())return!1;if(Co.St())return!0;const e=(0,R.z$)(),t=Co.Vt(e),r=0<t&&t<10,i=Co.Dt(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,be.Z)(function*(){return t.db||(je("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=c=>{r(c.target.result)},o.onblocked=()=>{i(new gf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new Le(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Le(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new gf(e,h))},o.onupgradeneeded=c=>{je("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.Pt.kt(c.target.result,o.transaction,c.oldVersion,t.version).next(()=>{je("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,be.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{o.db=yield o.Nt(e);const p=pf.open(o.db,e,c?"readonly":"readwrite",r),y=i(p).next(T=>(p.bt(),T)).catch(T=>(p.abort(T),me.reject(T))).toPromise();return y.catch(()=>{}),yield p.Rt,y}catch(p){const y="FirebaseError"!==p.name&&h<3;if(je("SimpleDb","Transaction failed with error:",p.message,"Retrying:",y),o.close(),!y)return Promise.reject(p)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class gx{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return pd(this.Ft.delete())}}class gf extends Le{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ju(n){return"IndexedDbTransactionError"===n.name}class mx{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(je("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(je("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),pd(r)}add(e){return je("SimpleDb","ADD",this.store.name,e,e),pd(this.store.add(e))}get(e){return pd(this.store.get(e)).next(t=>(void 0===t&&(t=null),je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return je("SimpleDb","DELETE",this.store.name,e),pd(this.store.delete(e))}count(){return je("SimpleDb","COUNT",this.store.name),pd(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.Kt(i,(c,h)=>{o.push(h)}).next(()=>o)}{const i=this.store.getAll(r.range);return new me((o,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{o(h.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new me((i,o)=>{r.onerror=c=>{o(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Qt(e,t){je("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(o,c,h)=>h.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new me((r,i)=>{t.onerror=o=>{const c=kT(o.target.error);i(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}Kt(e,t){const r=[];return new me((i,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const p=new gx(h),y=t(h.primaryKey,h.value,p);if(y instanceof me){const T=y.catch(S=>(p.done(),me.reject(S)));r.push(T)}p.isDone?i():null===p.Lt?h.continue():h.continue(p.Lt)}}).next(()=>me.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function pd(n){return new me((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=kT(r.target.error);t(i)}})}let _x=!1;function kT(n){const e=Co.Vt((0,R.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return _x||(_x=!0,setTimeout(()=>{throw r},0)),r}}return n}class yw extends _w{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function di(n,e){const t=st(n);return Co.xt(t.Ht,e)}class vw{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&FA(o,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&ag(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&ag(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(At.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),In())}isEqual(e){return this.batchId===e.batchId&&ku(this.mutations,e.mutations,(t,r)=>ow(t,r))&&ku(this.baseMutations,e.baseMutations,(t,r)=>ow(t,r))}}class ww{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Pt(e.mutations.length===r.length);let i=BA;const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new ww(e,t,r,i)}}class RT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class gd{constructor(e,t,r,i,o=At.min(),c=At.min(),h=Wr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new gd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new gd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new gd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class yx{constructor(e){this.Jt=e}}function vx(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:K_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:dd(i=n.Jt,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:q_(i,o.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ga(e.version)};else{if(!e.isUnknownDocument())return ht();r.unknownDocument={path:t.path.toArray(),version:Ga(e.version)}}var i,o;return r}function K_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ga(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function md(n){const e=new lr(n.seconds,n.nanoseconds);return At.fromTimestamp(e)}function mf(n,e){const t=(e.baseMutations||[]).map(o=>hg(n.Jt,o));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(c.updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o)}const r=e.mutations.map(o=>hg(n.Jt,o)),i=lr.fromMillis(e.localWriteTimeMs);return new vw(e.batchId,i,t,r)}function _f(n){const e=md(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?md(n.lastLimboFreeSnapshotVersion):At.min();let r;var i;return void 0!==n.query.documents?(Pt(1===(i=n.query).documents.length),r=qs(ad(zA(i.documents[0])))):r=qs(JA(n.query)),new gd(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Wr.fromBase64String(n.resumeToken))}function Hu(n,e){const t=Ga(e.snapshotVersion),r=Ga(e.lastLimboFreeSnapshotVersion);let i;i=F_(e.target)?YA(n.Jt,e.target):QA(n.Jt,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:od(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Y_(n){const e=JA({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?B_(e,e.limit,"L"):e}function fg(n,e){return new RT(e.largestBatchId,hg(n.Jt,e.overlayMutation))}function Q_(n,e){const t=e.path.lastSegment();return[n,ts(e.path.popLast()),t]}class wx{getBundleMetadata(e,t){return J_(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:md(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return J_(e).put({bundleId:(r=t).id,createTime:Ga(xr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return X_(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Y_(i.bundledQuery),readTime:md(i.readTime)};var i})}saveNamedQuery(e,t){return X_(e).put({name:(r=t).name,readTime:Ga(xr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function J_(n){return di(n,"bundles")}function X_(n){return di(n,"namedQueries")}class yf{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new yf(e,t.uid||"")}getOverlay(e,t){return ey(e).get(Q_(this.userId,t)).next(r=>r?fg(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((o,c)=>{const h=new RT(t,c);i.push(this.Xt(e,h))}),me.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(ts(c.getCollectionPath())));const o=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);o.push(ey(e).Qt("collectionPathOverlayIndex",h))}),me.waitFor(o)}getOverlaysForCollection(e,t,r){const i=cf(),o=ts(t),c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return ey(e).qt("collectionPathOverlayIndex",c).next(h=>{for(const p of h){const y=fg(this.M,p);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=cf();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ey(e).Wt({index:"collectionGroupOverlayIndex",range:h},(p,y,T)=>{const S=fg(this.M,y);o.size()<i||S.largestBatchId===c?(o.set(S.getKey(),S),c=S.largestBatchId):T.done()}).next(()=>o)}Xt(e,t){return ey(e).put(function(r,i,o){const[c,h,p]=Q_(i,o.mutation.key);return{userId:i,collectionPath:h,documentId:p,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:dg(r.Jt,o.mutation)}}(this.M,this.userId,t))}}function ey(n){return di(n,"documentOverlays")}class vf{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Ln(e.integerValue));else if("doubleValue"in e){const r=Ln(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Qp(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Xo(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?bA(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):ht()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),tt.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function uk(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Ex(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=uk(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}vf.fe=new vf;class OT{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=Ex(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=Ex(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class bx{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class Cx{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class pg{constructor(){this.De=new OT,this.Ce=new bx(this.De),this.xe=new Cx(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class _d{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new _d(this.indexId,this.documentKey,this.arrayValue,r)}}function $u(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Ew(n.arrayValue,e.arrayValue),0!==t?t:(t=Ew(n.directionalValue,e.directionalValue),0!==t?t:tt.comparator(n.documentKey,e.documentKey)))}function Ew(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class FT{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=R_(e);if(void 0!==t&&!this.Be(t))return!1;const r=id(e);let i=0,o=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const c=r[i];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[o++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(o>=this.Me.length||!this.Ue(this.Me[o++],c))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Tx{constructor(){this.qe=new bw}addToCollectionParentIndex(e,t){return this.qe.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(ta.min())}updateCollectionGroup(e,t,r){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class bw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Vn(dn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Vn(dn.comparator)).toArray()}}const gg=new Uint8Array(0);class Cw{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new bw,this.Ge=new Vu(r=>od(r),(r,i)=>rf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const o={collectionId:r,parent:ts(i)};return Ix(e).put(o)}return me.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[B0(t),""],!1,!0);return Ix(e).qt(i).next(o=>{for(const c of o){if(c.collectionId!==t)break;r.push(sa(c.parent))}return r})}addFieldIndex(e,t){const r=Ef(e),i={indexId:(o=t).indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var o;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=Ef(e),i=ty(e),o=wf(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=wf(e);let i=!0;const o=new Map;return me.forEach(this.Qe(t),c=>this.je(e,c).next(h=>{i&&(i=!!h),o.set(c,h)})).next(()=>{if(i){let c=In();const h=[];return me.forEach(o,(p,y)=>{var T;je("IndexedDbIndexManager",`Using index ${T=p,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(rt=>`${rt.fieldPath}:${rt.kind}`).join(",")}`} to execute ${od(t)}`);const S=function(rt,Xe){const xt=R_(Xe);if(void 0===xt)return null;for(const Nt of L_(rt,xt.fieldPath))switch(Nt.op){case"array-contains-any":return Nt.value.arrayValue.values||[];case"array-contains":return[Nt.value]}return null}(y,p),x=function(rt,Xe){const xt=new Map;for(const Nt of id(Xe))for(const fn of L_(rt,Nt.fieldPath))switch(fn.op){case"==":case"in":xt.set(Nt.fieldPath.canonicalString(),fn.value);break;case"not-in":case"!=":return xt.set(Nt.fieldPath.canonicalString(),fn.value),Array.from(xt.values())}return null}(y,p),O=function(rt,Xe){const xt=[];let Nt=!0;for(const fn of id(Xe)){const Kr=0===fn.kind?z0(rt,fn.fieldPath,rt.startAt):sf(rt,fn.fieldPath,rt.startAt);xt.push(Kr.value),Nt&&(Nt=Kr.inclusive)}return new na(xt,Nt)}(y,p),V=function(rt,Xe){const xt=[];let Nt=!0;for(const fn of id(Xe)){const Kr=0===fn.kind?sf(rt,fn.fieldPath,rt.endAt):z0(rt,fn.fieldPath,rt.endAt);xt.push(Kr.value),Nt&&(Nt=Kr.inclusive)}return new na(xt,Nt)}(y,p),J=this.We(p,y,O),we=this.We(p,y,V),Ge=this.ze(p,y,x),nt=this.He(p.indexId,S,J,O.inclusive,we,V.inclusive,Ge);return me.forEach(nt,rt=>r.Gt(rt,t.limit).next(Xe=>{Xe.forEach(xt=>{const Nt=tt.fromSegments(xt.documentKey);c.has(Nt)||(c=c.add(Nt),h.push(Nt))})}))}).next(()=>h)}return me.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,o,c,h){const p=(null!=t?t.length:1)*Math.max(r.length,o.length),y=p/(null!=t?t.length:1),T=[];for(let S=0;S<p;++S){const x=t?this.Je(t[S/y]):gg,O=this.Ye(e,x,r[S%y],i),V=this.Xe(e,x,o[S%y],c),J=h.map(we=>this.Ye(e,x,we,!0));T.push(...this.createRange(O,V,J))}return T}Ye(e,t,r,i){const o=new _d(e,tt.empty(),t,r);return i?o:o.ke()}Xe(e,t,r,i){const o=new _d(e,tt.empty(),t,r);return i?o.ke():o}je(e,t){const r=new FT(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let c=null;for(const h of o)r.$e(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;return me.forEach(this.Qe(t),i=>this.je(e,i).next(o=>{o?0!==r&&o.fields.length<function(c){let h=new Vn(zr.comparator),p=!1;for(const y of c.filters){const T=y;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?p=!0:h=h.add(T.field))}for(const y of c.orderBy)y.field.isKeyField()||(h=h.add(y.field));return h.size+(p?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new pg;for(const i of id(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const c=r.Ne(i.kind);vf.fe.Zt(o,c)}return r.Se()}Je(e){const t=new pg;return vf.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new pg;return vf.fe.Zt(nd(this.databaseId,t),r.Ne(function(i){const o=id(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new pg);let o=0;for(const c of id(e)){const h=r[o++];for(const p of i)if(this.en(t,c.fieldPath)&&Xp(h))i=this.nn(i,c,h);else{const y=p.Ne(c.kind);vf.fe.Zt(h,y)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],o=[];for(const c of r.arrayValue.values||[])for(const h of i){const p=new pg;p.seed(h.Se()),vf.fe.Zt(c,p.Ne(t.kind)),o.push(p)}return o}en(e,t){return!!e.filters.find(r=>r instanceof Ti&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Ef(e),i=ty(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(o=>{const c=[];return me.forEach(o,h=>i.get([h.indexId,this.uid]).next(p=>{c.push(function(y,T){const S=T?new ng(T.sequenceNumber,new ta(md(T.readTime),new tt(sa(T.documentKey)),T.largestBatchId)):ng.empty(),x=y.fields.map(([O,V])=>new O_(zr.fromServerFormat(O),V));return new tg(y.indexId,y.collectionGroup,x,S)}(h,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Vt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Ef(e),o=ty(e);return this.rn(e).next(c=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>me.forEach(h,p=>{return o.put({indexId:p.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Ga((x=r).readTime),documentKey:ts(x.documentKey.path),largestBatchId:x.largestBatchId});var x})))}updateIndexEntries(e,t){const r=new Map;return me.forEach(t,(i,o)=>{const c=r.get(i.collectionGroup);return(c?me.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),me.forEach(h,p=>this.on(e,i,p).next(y=>{const T=this.un(o,p);return y.isEqual(T)?me.resolve():this.an(e,o,p,y,T)}))))})}cn(e,t,r,i){return wf(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return wf(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=wf(e);let o=new Vn($u);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(c,h)=>{o=o.add(new _d(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>o)}un(e,t){let r=new Vn($u);const i=this.Ze(t,e);if(null==i)return r;const o=R_(t);if(null!=o){const c=e.data.field(o.fieldPath);if(Xp(c))for(const h of c.arrayValue.values||[])r=r.add(new _d(t.indexId,e.key,this.Je(h),i))}else r=r.add(new _d(t.indexId,e.key,gg,i));return r}an(e,t,r,i,o){je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,p,y,T,S){const x=h.getIterator(),O=p.getIterator();let V=sd(x),J=sd(O);for(;V||J;){let we=!1,Ge=!1;if(V&&J){const nt=y(V,J);nt<0?Ge=!0:nt>0&&(we=!0)}else null!=V?Ge=!0:we=!0;we?(T(J),J=sd(O)):Ge?(S(V),V=sd(x)):(V=sd(x),J=sd(O))}}(i,o,$u,h=>{c.push(this.cn(e,t,r,h))},h=>{c.push(this.hn(e,t,r,h))}),me.waitFor(c)}rn(e){let t=1;return ty(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>$u(c,h)).filter((c,h,p)=>!h||0!==$u(c,p[h-1]));const i=[];i.push(e);for(const c of r){const h=$u(c,e),p=$u(c,t);if(0===h)i[0]=e.ke();else if(h>0&&p<0)i.push(c),i.push(c.ke());else if(p>0)break}i.push(t);const o=[];for(let c=0;c<i.length;c+=2)o.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,gg,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,gg,[]]));return o}getMinOffset(e,t){let r;return me.forEach(this.Qe(t),i=>this.je(e,i).next(o=>{o?(!r||cT(o.indexState.offset,r)<0)&&(r=o.indexState.offset):r=ta.min()})).next(()=>r)}}function Ix(n){return di(n,"collectionParents")}function wf(n){return di(n,"indexEntries")}function Ef(n){return di(n,"indexConfiguration")}function ty(n){return di(n,"indexState")}const LT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Zs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Zs(e,Zs.DEFAULT_COLLECTION_PERCENTILE,Zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Sx(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],c=IDBKeyRange.only(t.batchId);let h=0;const p=r.Wt({range:c},(T,S,x)=>(h++,x.delete()));o.push(p.next(()=>{Pt(1===h)}));const y=[];for(const T of t.mutations){const S=fw(e,T.key.path,t.batchId);o.push(i.delete(S)),y.push(T.key)}return me.waitFor(o).next(()=>y)}function ny(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ht();e=n.noDocument}return JSON.stringify(e).length}Zs.DEFAULT_COLLECTION_PERCENTILE=10,Zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zs.DEFAULT=new Zs(41943040,Zs.DEFAULT_COLLECTION_PERCENTILE,Zs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zs.DISABLED=new Zs(-1,0,0);class Tw{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){Pt(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new Tw(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yd(e).Wt({index:"userMutationsIndex",range:r},(i,o,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=mg(e),c=yd(e);return c.add({}).next(h=>{Pt("number"==typeof h);const p=new vw(h,t,r,i),y=function(x,O,V){const J=V.baseMutations.map(Ge=>dg(x.Jt,Ge)),we=V.mutations.map(Ge=>dg(x.Jt,Ge));return{userId:O,batchId:V.batchId,localWriteTimeMs:V.localWriteTime.toMillis(),baseMutations:J,mutations:we}}(this.M,this.userId,p),T=[];let S=new Vn((x,O)=>Vt(x.canonicalString(),O.canonicalString()));for(const x of i){const O=fw(this.userId,x.key.path,h);S=S.add(x.key.path.popLast()),T.push(c.put(y)),T.push(o.put(O,ix))}return S.forEach(x=>{T.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.ln[h]=p.keys()}),me.waitFor(T).next(()=>p)})}lookupMutationBatch(e,t){return yd(e).get(t).next(r=>r?(Pt(r.userId===this.userId),mf(this.M,r)):null)}fn(e,t){return this.ln[t]?me.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return yd(e).Wt({index:"userMutationsIndex",range:i},(c,h,p)=>{h.userId===this.userId&&(Pt(h.batchId>=r),o=mf(this.M,h)),p.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return yd(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,o,c)=>{r=o.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yd(e).qt("userMutationsIndex",t).next(r=>r.map(i=>mf(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=W_(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return mg(e).Wt({range:i},(c,h,p)=>{const[y,T,S]=c,x=sa(T);if(y===this.userId&&t.path.isEqual(x))return yd(e).get(S).next(O=>{if(!O)throw ht();Pt(O.userId===this.userId),o.push(mf(this.M,O))});p.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vn(Vt);const i=[];return t.forEach(o=>{const c=W_(this.userId,o.path),h=IDBKeyRange.lowerBound(c),p=mg(e).Wt({range:h},(y,T,S)=>{const[x,O,V]=y,J=sa(O);x===this.userId&&o.path.isEqual(J)?r=r.add(V):S.done()});i.push(p)}),me.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=W_(this.userId,r),c=IDBKeyRange.lowerBound(o);let h=new Vn(Vt);return mg(e).Wt({range:c},(p,y,T)=>{const[S,x,O]=p,V=sa(x);S===this.userId&&r.isPrefixOf(V)?V.length===i&&(h=h.add(O)):T.done()}).next(()=>this.dn(e,h))}dn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(yd(e).get(o).next(c=>{if(null===c)throw ht();Pt(c.userId===this.userId),r.push(mf(this.M,c))}))}),me.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Sx(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),me.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return me.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return mg(e).Wt({range:r},(o,c,h)=>{if(o[0]===this.userId){const p=sa(o[1]);i.push(p)}else h.done()}).next(()=>{Pt(0===i.length)})})}containsKey(e,t){return Dx(e,this.userId,t)}wn(e){return Ax(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Dx(n,e,t){const r=W_(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let c=!1;return mg(n).Wt({range:o,jt:!0},(h,p,y)=>{const[T,S,x]=h;T===e&&S===i&&(c=!0),y.done()}).next(()=>c)}function yd(n){return di(n,"mutations")}function mg(n){return di(n,"documentMutations")}function Ax(n){return di(n,"mutationQueues")}class bf{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new bf(0)}static yn(){return new bf(-1)}}class xx{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new bf(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>At.fromTimestamp(new lr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>_g(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Pt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return _g(e).Wt((c,h)=>{const p=_f(h);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,o.push(this.removeTargetData(e,p)))}).next(()=>me.waitFor(o)).next(()=>i)}forEachTarget(e,t){return _g(e).Wt((r,i)=>{const o=_f(i);t(o)})}pn(e){return Mx(e).get("targetGlobalKey").next(t=>(Pt(null!==t),t))}In(e,t){return Mx(e).put("targetGlobalKey",t)}Tn(e,t){return _g(e).put(Hu(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=od(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return _g(e).Wt({range:i,index:"queryTargetsIndex"},(c,h,p)=>{const y=_f(h);rf(t,y.target)&&(o=y,p.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=vd(e);return t.forEach(c=>{const h=ts(c.path);i.push(o.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),me.waitFor(i)}removeMatchingKeys(e,t,r){const i=vd(e);return me.forEach(t,o=>{const c=ts(o.path);return me.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=vd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=vd(e);let o=In();return i.Wt({range:r,jt:!0},(c,h,p)=>{const y=sa(c[1]),T=new tt(y);o=o.add(T)}).next(()=>o)}containsKey(e,t){const r=ts(t.path),i=IDBKeyRange.bound([r],[B0(r)],!1,!0);let o=0;return vd(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([c,h],p,y)=>{0!==c&&(o++,y.done())}).next(()=>o>0)}Et(e,t){return _g(e).get(t).next(r=>r?_f(r):null)}}function _g(n){return di(n,"targets")}function Mx(n){return di(n,"targetGlobal")}function vd(n){return di(n,"targetDocuments")}function Cf(n){return s.apply(this,arguments)}function s(){return s=(0,be.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==NT)throw n;je("LocalStore","Unexpectedly lost primary lease")}),s.apply(this,arguments)}function a([n,e],[t,r]){const i=Vt(n,t);return 0===i?Vt(e,r):i}class l{constructor(e){this.An=e,this.buffer=new Vn(a),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();a(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class d{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;je("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,be.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){ju(i)?je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Cf(i)}yield t.Sn(e)}))}}class f{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return me.resolve($s.A);const r=new l(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(LT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),LT):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,o,c,h,p,y;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,c=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(o=S,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(y=Date.now(),U0()<=bo.in.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-T}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${o} targets in `+(p-h)+`ms\n\tRemoved ${S} documents in `+(y-p)+`ms\nTotal Duration: ${y-T}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:S})))}}class g{constructor(e,t){this.db=e,this.garbageCollector=new f(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return v(e,r)}removeReference(e,t,r){return v(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return v(e,t)}On(e,t){return function(r,i){let o=!1;return Ax(r).zt(c=>Dx(r,c,i).next(h=>(h&&(o=!0),me.resolve(!h)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Mn(e,(c,h)=>{if(h<=t){const p=this.On(e,c).next(y=>{if(!y)return o++,r.getEntry(e,c).next(()=>(r.removeEntry(c,At.min()),vd(e).delete([0,ts(c.path)])))});i.push(p)}}).next(()=>me.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return v(e,t)}Mn(e,t){const r=vd(e);let i,o=$s.A;return r.Wt({index:"documentTargetsIndex"},([c,h],{path:p,sequenceNumber:y})=>{0===c?(o!==$s.A&&t(new tt(sa(i)),o),o=y,i=p):o=$s.A}).next(()=>{o!==$s.A&&t(new tt(sa(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function v(n,e){return vd(n).put((r=n.currentSequenceNumber,{targetId:0,path:ts(e.path),sequenceNumber:r}));var r}class E{constructor(){this.changes=new Vu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?me.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class C{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return U(e).put(r)}removeEntry(e,t,r){return U(e).delete(function(i,o){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],K_(o),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Un.newInvalidDocument(t);return U(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(q(t))},(i,o)=>{r=this.$n(t,o)}).next(()=>r)}Bn(e,t){let r={size:0,document:Un.newInvalidDocument(t)};return U(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(q(t))},(i,o)=>{r={document:this.$n(t,o),size:ny(o)}}).next(()=>r)}getEntries(e,t){let r=Gs();return this.Ln(e,t,(i,o)=>{const c=this.$n(i,o);r=r.insert(i,c)}).next(()=>r)}Un(e,t){let r=Gs(),i=new Dr(tt.comparator);return this.Ln(e,t,(o,c)=>{const h=this.$n(o,c);r=r.insert(o,h),i=i.insert(o,ny(c))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return me.resolve();let i=new Vn(De);t.forEach(p=>i=i.add(p));const o=IDBKeyRange.bound(q(i.first()),q(i.last())),c=i.getIterator();let h=c.getNext();return U(e).Wt({index:"documentKeyIndex",range:o},(p,y,T)=>{const S=tt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&De(h,S)<0;)r(h,null),h=c.getNext();h&&h.isEqual(S)&&(r(h,y),h=c.hasNext()?c.getNext():null),h?T.Ut(q(h)):T.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),K_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],o=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return U(e).qt(IDBKeyRange.bound(i,o,!0)).next(c=>{let h=Gs();for(const p of c){const y=this.$n(tt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Gs();const c=te(t,r),h=te(t,ta.max());return U(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(p,y,T)=>{const S=this.$n(tt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);o=o.insert(S.key,S),o.size===i&&T.done()}).next(()=>o)}newChangeBuffer(e){return new A(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return P(e).get("remoteDocumentGlobalKey").next(t=>(Pt(!!t),t))}Fn(e,t){return P(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function lk(n,e){let t;if(e.document)t=dw(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=tt.fromSegments(e.noDocument.path),i=md(e.noDocument.readTime);t=Un.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ht();{const r=tt.fromSegments(e.unknownDocument.path),i=md(e.unknownDocument.version);t=Un.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new lr(r[0],r[1]);return At.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(At.min()))return r}return Un.newInvalidDocument(e)}}class A extends E{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Vu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Vn((o,c)=>Vt(o.canonicalString(),c.canonicalString()));return this.changes.forEach((o,c)=>{const h=this.Gn.get(o);if(t.push(this.Kn.removeEntry(e,o,h.readTime)),c.isValidDocument()){const p=vx(this.Kn.M,c);i=i.add(o.path.popLast()),r+=ny(p)-h.size,t.push(this.Kn.addEntry(e,o,p))}else if(r-=h.size,this.trackRemovals){const p=vx(this.Kn.M,c.convertToNoDocument(At.min()));t.push(this.Kn.addEntry(e,o,p))}}),i.forEach(o=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.Kn.updateMetadata(e,r)),me.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((o,c)=>{this.Gn.set(o,{size:c,readTime:r.get(o).readTime})}),r))}}function P(n){return di(n,"remoteDocumentGlobal")}function U(n){return di(n,"remoteDocumentsV14")}function q(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function te(n,e){const t=e.documentKey.path.toArray();return[n,K_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function De(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Vt(t[o],r[o]),i)return i;return i=Vt(t.length,r.length),i||(i=Vt(t[t.length-2],r[r.length-2]),i||Vt(t[t.length-1],r[r.length-1]))}class $e{constructor(e){this.M=e}kt(e,t,r,i){const o=new pf("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hw,{unique:!0}),h.createObjectStore("documentMutations"),Je(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=me.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),Je(e)),c=c.next(()=>function(h){const p=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:At.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(o))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,p){return p.store("mutations").qt().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hw,{unique:!0});const T=p.store("mutations"),S=y.map(x=>T.put(x));return me.waitFor(S)})}(e,o))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Qn(o))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.jn(o)))),r<7&&i>=7&&(c=c.next(()=>this.Wn(o))),r<8&&i>=8&&(c=c.next(()=>this.zn(e,o))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Hn(o))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:PT});p.createIndex("collectionPathOverlayIndex",dx,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",hx,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:sx});p.createIndex("documentKeyIndex",ox),p.createIndex("collectionGroupIndex",pw)}(e)).next(()=>this.Jn(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>{!function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:ak}).createIndex("sequenceNumberIndex",lx,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:ux}).createIndex("documentKeyIndex",cx,{unique:!1})}(e)})),c}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=ny(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>me.forEach(i,o=>{const c=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",c).next(h=>me.forEach(h,p=>{Pt(p.userId===o.userId);const y=mf(this.M,p);return Sx(e,o.userId,y).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.Wt((c,h)=>{const p=new dn(c),y=[0,ts(p)];o.push(t.get(y).next(T=>T?me.resolve():t.put({targetId:0,path:ts(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>me.waitFor(o))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:ax});const r=t.store("collectionParents"),i=new bw,o=c=>{if(i.add(c)){const h=c.lastSegment(),p=c.popLast();return r.put({collectionId:h,parent:ts(p)})}};return t.store("remoteDocuments").Wt({jt:!0},(c,h)=>{const p=new dn(c);return o(p.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([c,h,p],y)=>{const T=sa(h);return o(T.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const o=_f(i),c=Hu(this.M,o);return t.put(c)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((o,c)=>{const h=t.store("remoteDocumentsV14"),p=(y=c,y.document?new tt(dn.fromString(y.document.name).popFirst(5)):y.noDocument?tt.fromSegments(y.noDocument.path):y.unknownDocument?tt.fromSegments(y.unknownDocument.path):ht()).path.toArray();var y;const T={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(T))}).next(()=>me.waitFor(i))}}function Je(n){n.createObjectStore("targetDocuments",{keyPath:xT}).createIndex("documentTargetsIndex",MT,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",fd,{unique:!0}),n.createObjectStore("targetGlobal")}const ut="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Pe{constructor(e,t,r,i,o,c,h,p,y,T,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=o,this.window=c,this.document=h,this.Xn=y,this.Zn=T,this.ts=S,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=x=>Promise.resolve(),!Pe.vt())throw new Le(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new g(this,i),this.hs=t+"main",this.M=new yx(p),this.ls=new Co(this.hs,this.ts,new $e(this.M)),this.fs=new xx(this.referenceDelegate,this.M),this.ds=new C(this.M),this._s=new wx,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===T&&Lr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Le(ge.FAILED_PRECONDITION,ut);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new $s(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,be.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,be.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,be.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Jt(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(ju(e))return je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return vt(e).get("owner").next(t=>me.resolve(this.Ps(t)))}Vs(e){return Jt(e).delete(this.clientId)}vs(){var e=this;return(0,be.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=di(r,"clientMetadata");return i.qt().next(o=>{const c=e.Ds(o,18e5),h=o.filter(p=>-1===c.indexOf(p));return me.forEach(h,p=>i.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?me.resolve(!0):vt(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Le(ge.FAILED_PRECONDITION,ut);return!1}}return!(!this.networkEnabled||!this.inForeground)||Jt(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,be.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new yw(t,$s.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Jt(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return Tw.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Cw(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return yf.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){je("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=14===(c=this.ts)?px:13===c?mw:12===c?gw:11===c?fx:void ht();var c;let h;return this.ls.runTransaction(e,i,o,p=>(h=new yw(p,this.es?this.es.next():$s.A),"readwrite-primary"===t?this.Es(h).next(y=>!!y||this.As(h)).next(y=>{if(!y)throw Lr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Le(ge.FAILED_PRECONDITION,NT);return r(h)}).next(y=>this.bs(h).next(()=>y)):this.$s(h).next(()=>r(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}$s(e){return vt(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Le(ge.FAILED_PRECONDITION,ut)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vt(e).put("owner",t)}static vt(){return Co.vt()}Rs(e){const t=vt(e);return t.get("owner").next(r=>this.Ps(r)?(je("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):me.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Lr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,R.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return je("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Lr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Lr("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vt(n){return di(n,"owner")}function Jt(n){return di(n,"clientMetadata")}function bn(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class zs{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const o of r)o.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const o of t)o.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return tt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):ig(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new tt(t)).next(r=>{let i=$_();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let o=$_();return this.indexManager.getCollectionParents(e,i).next(c=>me.forEach(c,h=>{const p=(y=t,T=h.child(i),new qa(T,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,T;return this.zs(e,p,r).next(y=>{y.forEach((T,S)=>{o=o.insert(T,S)})})}).next(()=>o))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(o=>(i=o,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(o=>{for(const c of o)for(const h of c.mutations){const p=h.key;let y=i.get(p);null==y&&(y=Un.newInvalidDocument(p),i=i.insert(p,y)),ag(h,y,c.localWriteTime),y.isFoundDocument()||(i=i.remove(p))}}).next(()=>(i.forEach((o,c)=>{J0(t,c)||(i=i.remove(o))}),i))}}class Bl{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=In(),i=In();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Bl(e,t.fromCache,r,i)}}class ry{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(o=>o||this.ei(e,t,i,r)).next(o=>o||this.ni(e,t))}ti(e,t){return me.resolve(null)}ei(e,t,r,i){return function NA(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(At.min())?this.ni(e,t):this.Zs.Ks(e,r).next(o=>{const c=this.si(t,o);return this.ii(t,c,r,i)?this.ni(e,t):(U0()<=bo.in.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Q0(t)),this.ri(e,c,t,uT(i,-1)))})}si(e,t){let r=new Vn(X0(e));return t.forEach((i,o)=>{J0(e,o)&&(r=r.add(o))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ni(e,t){return U0()<=bo.in.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",Q0(t)),this.Zs.Qs(e,t,ta.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}}class Iw{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new Dr(Vt),this.ai=new Vu(o=>od(o),rf),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new zs(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function iy(n,e,t,r){return new Iw(n,e,t,r)}function sy(n,e){return yg.apply(this,arguments)}function yg(){return yg=(0,be.Z)(function*(n,e){const t=st(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(o=>(i=o,t.li(e),t.Bs.getAllMutationBatches(r))).next(o=>{const c=[],h=[];let p=In();for(const y of i){c.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}for(const y of o){h.push(y.batchId);for(const T of y.mutations)p=p.add(T.key)}return t.fi.Ks(r,p).next(y=>({di:y,removedBatchIds:c,addedBatchIds:h}))})})}),yg.apply(this,arguments)}function Sw(n,e){const t=st(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.hi.newChangeBuffer({trackRemovals:!0});return function(c,h,p,y){const T=p.batch,S=T.keys();let x=me.resolve();return S.forEach(O=>{x=x.next(()=>y.getEntry(h,O)).next(V=>{const J=p.docVersions.get(O);Pt(null!==J),V.version.compareTo(J)<0&&(T.applyToRemoteDocument(V,p),V.isValidDocument()&&(V.setReadTime(p.commitVersion),y.addEntry(V)))})}),x.next(()=>c.Bs.removeMutationBatch(h,T))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function oy(n){const e=st(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function Dw(n,e){const t=st(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const h=[];e.targetChanges.forEach((y,T)=>{const S=i.get(T);if(!S)return;h.push(t.fs.removeMatchingKeys(o,y.removedDocuments,T).next(()=>t.fs.addMatchingKeys(o,y.addedDocuments,T)));let x=S.withSequenceNumber(o.currentSequenceNumber);var O,V,J;e.targetMismatches.has(T)?x=x.withResumeToken(Wr.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):y.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(y.resumeToken,r)),i=i.insert(T,x),V=x,J=y,(0===(O=S).resumeToken.approximateByteSize()||V.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8||J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0)&&h.push(t.fs.updateTargetData(o,x))});let p=Gs();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))}),h.push(ay(o,c,e.documentUpdates).next(y=>{p=y})),!r.isEqual(At.min())){const y=t.fs.getLastRemoteSnapshotVersion(o).next(T=>t.fs.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(y)}return me.waitFor(h).next(()=>c.apply(o)).next(()=>t.fi.Gs(o,p)).next(()=>p)}).then(o=>(t.ui=i,o))}function ay(n,e,t){let r=In();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let o=Gs();return t.forEach((c,h)=>{const p=i.get(c);h.isNoDocument()&&h.version.isEqual(At.min())?(e.removeEntry(c,h.readTime),o=o.insert(c,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||0===h.version.compareTo(p.version)&&p.hasPendingWrites?(e.addEntry(h),o=o.insert(c,h)):je("LocalStore","Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",h.version)}),o})}function mU(n,e){const t=st(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function ly(n,e){const t=st(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(o=>o?(i=o,me.resolve(i)):t.fs.allocateTargetId(r).next(c=>(i=new gd(e,c,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function uy(n,e,t){return Px.apply(this,arguments)}function Px(){return Px=(0,be.Z)(function*(n,e,t){const r=st(n),i=r.ui.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!ju(c))throw c;je("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),Px.apply(this,arguments)}function UT(n,e,t){const r=st(n);let i=At.min(),o=In();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,p,y){const T=st(h),S=T.ai.get(y);return void 0!==S?me.resolve(T.ui.get(S)):T.fs.getTargetData(p,y)}(r,c,qs(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(c,h.targetId).next(p=>{o=p})}).next(()=>r.oi.Qs(c,e,t?i:At.min(),t?o:In())).next(h=>(hk(r,gT(e),h),{documents:h,_i:o})))}function ck(n,e){const t=st(n),r=st(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.Et(o,e).next(c=>c?c.target:null))}function dk(n,e){const t=st(n),r=t.ci.get(e)||At.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,uT(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(hk(t,e,i),i))}function hk(n,e,t){let r=At.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ci.set(e,r)}function Nx(){return Nx=(0,be.Z)(function*(n,e,t,r){const i=st(n);let o=In(),c=Gs();for(const y of t){const T=e.wi(y.metadata.name);y.document&&(o=o.add(T));const S=e.mi(y);S.setReadTime(e.gi(y.metadata.readTime)),c=c.insert(T,S)}const h=i.hi.newChangeBuffer({trackRemovals:!0}),p=yield ly(i,(y=r,qs(ad(dn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>ay(y,h,c).next(T=>(h.apply(y),T)).next(T=>i.fs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>i.fs.addMatchingKeys(y,o,p.targetId)).next(()=>i.fi.Gs(y,T)).next(()=>T)))}),Nx.apply(this,arguments)}function yU(n,e){return kx.apply(this,arguments)}function kx(){return kx=(0,be.Z)(function*(n,e,t=In()){const r=yield ly(n,qs(Y_(e.bundledQuery))),i=st(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const c=xr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i._s.saveNamedQuery(o,e);const h=r.withResumeToken(Wr.EMPTY_BYTE_STRING,c);return i.ui=i.ui.insert(h.targetId,h),i.fs.updateTargetData(o,h).next(()=>i.fs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.fs.addMatchingKeys(o,t,r.targetId)).next(()=>i._s.saveNamedQuery(o,e))})}),kx.apply(this,arguments)}class vU{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return me.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:xr(r.createTime)}),me.resolve()}getNamedQuery(e,t){return me.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:Y_(r.bundledQuery),readTime:xr(r.readTime)}),me.resolve();var r}}class wU{constructor(){this.overlays=new Dr(tt.comparator),this.Ii=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Xt(e,t,o)}),me.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ii.delete(r)),me.resolve()}getOverlaysForCollection(e,t,r){const i=cf(),o=t.length+1,c=new tt(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===o&&p.largestBatchId>r&&i.set(p.getKey(),p)}return me.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Dr((y,T)=>y-T);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let T=o.get(y.largestBatchId);null===T&&(T=cf(),o=o.insert(y.largestBatchId,T)),T.set(y.getKey(),y)}}const h=cf(),p=o.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,T)=>h.set(y,T)),!(h.size()>=i)););return me.resolve(h)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const c=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new RT(t,r));let o=this.Ii.get(t);void 0===o&&(o=In(),this.Ii.set(t,o)),this.Ii.set(t,o.add(r.key))}}class Rx{constructor(){this.Ti=new Vn(Vi.Ei),this.Ai=new Vn(Vi.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new Vi(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new Vi(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new tt(new dn([])),r=new Vi(t,e),i=new Vi(t,e+1),o=[];return this.Ai.forEachInRange([r,i],c=>{this.Pi(c),o.push(c.key)}),o}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new tt(new dn([])),r=new Vi(t,e),i=new Vi(t,e+1);let o=In();return this.Ai.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(e){const t=new Vi(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Vi{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return tt.comparator(e.key,t.key)||Vt(e.Ci,t.Ci)}static Ri(e,t){return Vt(e.Ci,t.Ci)||tt.comparator(e.key,t.key)}}class EU{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new Vn(Vi.Ei)}checkEmpty(e){return me.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const o=this.xi;this.xi++;const c=new vw(o,t,r,i);this.Bs.push(c);for(const h of i)this.Ni=this.Ni.add(new Vi(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return me.resolve(c)}lookupMutationBatch(e,t){return me.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),o=i<0?0:i;return me.resolve(this.Bs.length>o?this.Bs[o]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return me.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Vi(t,0),i=new Vi(t,Number.POSITIVE_INFINITY),o=[];return this.Ni.forEachInRange([r,i],c=>{const h=this.ki(c.Ci);o.push(h)}),me.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vn(Vt);return t.forEach(i=>{const o=new Vi(i,0),c=new Vi(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([o,c],h=>{r=r.add(h.Ci)})}),me.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;tt.isDocumentKey(o)||(o=o.child(""));const c=new Vi(new tt(o),0);let h=new Vn(Vt);return this.Ni.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(p.Ci)),!0)},c),me.resolve(this.Oi(h))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Pt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return me.forEach(t.mutations,i=>{const o=new Vi(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new Vi(t,0),i=this.Ni.firstAfterOrEqual(r);return me.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return me.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class bU{constructor(e){this.$i=e,this.docs=new Dr(tt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,c=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return me.resolve(r?r.document.mutableCopy():Un.newInvalidDocument(t))}getEntries(e,t){let r=Gs();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Un.newInvalidDocument(i))}),me.resolve(r)}getAllFromCollection(e,t,r){let i=Gs();const o=new tt(t.child("")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||cT(IA(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return me.resolve(i)}getAllFromCollectionGroup(e,t,r,i){ht()}Bi(e,t){return me.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new CU(this)}getSize(e){return me.resolve(this.size)}}class CU extends E{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),me.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class TU{constructor(e){this.persistence=e,this.Li=new Vu(t=>od(t),rf),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Rx,this.targetCount=0,this.Ki=bf.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),me.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new bf(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.Tn(t),me.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Li.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Li.delete(c),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),me.waitFor(o).next(()=>i)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return me.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),me.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(c=>{o.push(i.markPotentiallyOrphaned(e,c))}),me.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),me.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return me.resolve(r)}containsKey(e,t){return me.resolve(this.qi.containsKey(t))}}class IU{constructor(e,t){this.Gi={},this.overlays={},this.es=new $s(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new TU(this),this.indexManager=new Tx,this.ds=new bU(r=>this.referenceDelegate.Qi(r)),this.M=new yx(t),this._s=new vU(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wU,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new EU(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){je("MemoryPersistence","Starting transaction:",e);const i=new SU(this.es.next());return this.referenceDelegate.ji(),r(i).next(o=>this.referenceDelegate.Wi(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}zi(e,t){return me.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class SU extends _w{constructor(e){super(),this.currentSequenceNumber=e}}class Ox{constructor(e){this.persistence=e,this.Hi=new Rx,this.Ji=null}static Yi(e){return new Ox(e)}get Xi(){if(this.Ji)return this.Ji;throw ht()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),me.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),me.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Xi,r=>{const i=tt.fromPath(r);return this.Zi(e,i).next(o=>{o||t.removeEntry(i,At.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return me.or([()=>me.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function fk(n,e){return`firestore_clients_${n}_${e}`}function pk(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Fx(n,e){return`firestore_targets_${n}_${e}`}class VT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let o,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(o=new Le(i.error.code,i.error.message))),c?new VT(e,t,i.state,o):(Lr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Aw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new Le(r.error.code,r.error.message))),o?new Aw(e,r.state,i):(Lr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class BT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ug();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=H0(r.activeTargetIds[c]),o=o.add(r.activeTargetIds[c]);return i?new BT(e,o):(Lr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Lx{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Lx(t.clientId,t.onlineState):(Lr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ux{constructor(){this.activeTargetIds=ug()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Vx{constructor(e,t,r,i,o){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Dr(Vt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.hr=fk(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new Ux),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,be.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const o=e.getItem(fk(e.persistenceKey,i));if(o){const c=BT.tr(i,o);c&&(e.ar=e.ar.insert(c.clientId,c))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Fx(this.persistenceKey,e));if(r){const i=Aw.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Fx(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return je("SharedClientState","READ",e,t),t}setItem(e,t){je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(je("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void Lr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,be.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(o){let c=$s.A;if(null!=o)try{const h=JSON.parse(o);Pt("number"==typeof h),c=h}catch(h){Lr("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==$s.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Fr(o)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new VT(this.currentUser,e,t,r),o=pk(this.persistenceKey,this.currentUser,e);this.setItem(o,i.er())}Ar(e){const t=pk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=Fx(this.persistenceKey,e),o=new Aw(e,t,r);this.setItem(i,o.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return BT.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return VT.tr(new li(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return Aw.tr(i,t)}pr(e){return Lx.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,be.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),o=this.Tr(r),c=[],h=[];return o.forEach(p=>{i.has(p)||c.push(p)}),i.forEach(p=>{o.has(p)||h.push(p)}),this.syncEngine.Lr(c,h).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=ug();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class gk{constructor(){this.Ur=new Ux,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Ux,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class DU{Kr(e){}shutdown(){}}class mk{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const AU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class xU{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class MU extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,o){const c=this.ho(e,t);je("RestConnection","Sending: ",c,r);const h={};return this.lo(h,i,o),this.fo(e,c,h,r).then(p=>(je("RestConnection","Received: ",p),p),p=>{throw Kp("RestConnection",`${e} failed with error: `,p,"url: ",c,"request:",r),p})}_o(e,t,r,i,o){return this.co(e,t,r,i,o)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Jh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}ho(e,t){return`${this.uo}/v1/${t}:${AU[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((o,c)=>{const h=new zC;h.listenOnce(fA.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case L0.NO_ERROR:const y=h.getResponseJson();je("Connection","XHR received:",JSON.stringify(y)),o(y);break;case L0.TIMEOUT:je("Connection",'RPC "'+e+'" timed out'),c(new Le(ge.DEADLINE_EXCEEDED,"Request time out"));break;case L0.HTTP_ERROR:const T=h.getStatus();if(je("Connection",'RPC "'+e+'" failed with status:',T,"response text:",h.getResponseText()),T>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const x=function(O){const V=O.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(V)>=0?V:ge.UNKNOWN}(S.status);c(new Le(x,S.message))}else c(new Le(ge.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Le(ge.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{je("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);h.send(t,"POST",p,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=hA(),c=qC(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new ZC({})),this.lo(h.initMessageHeaders,t,r),(0,R.uI)()||(0,R.b$)()||(0,R.d)()||(0,R.w1)()||(0,R.Mn)()||(0,R.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const p=i.join("");je("Connection","Creating WebChannel: "+p,h);const y=o.createWebChannel(p,h);let T=!1,S=!1;const x=new xU({Jr:V=>{S?je("Connection","Not sending because WebChannel is closed:",V):(T||(je("Connection","Opening WebChannel transport."),y.open(),T=!0),je("Connection","WebChannel sending:",V),y.send(V))},Yr:()=>y.close()}),O=(V,J,we)=>{V.listen(J,Ge=>{try{we(Ge)}catch(nt){setTimeout(()=>{throw nt},0)}})};return O(y,N_.EventType.OPEN,()=>{S||je("Connection","WebChannel transport opened.")}),O(y,N_.EventType.CLOSE,()=>{S||(S=!0,je("Connection","WebChannel transport closed"),x.ro())}),O(y,N_.EventType.ERROR,V=>{S||(S=!0,Kp("Connection","WebChannel transport errored:",V),x.ro(new Le(ge.UNAVAILABLE,"The operation could not be completed")))}),O(y,N_.EventType.MESSAGE,V=>{var J;if(!S){const we=V.data[0];Pt(!!we);const Ge=we,nt=Ge.error||(null===(J=Ge[0])||void 0===J?void 0:J.error);if(nt){je("Connection","WebChannel received error:",nt);const rt=nt.status;let Xe=function(Nt){const fn=mr[Nt];if(void 0!==fn)return ET(fn)}(rt),xt=nt.message;void 0===Xe&&(Xe=ge.INTERNAL,xt="Unknown error status: "+rt+" with message "+nt.message),S=!0,x.ro(new Le(Xe,xt)),y.close()}else je("Connection","WebChannel received:",we),x.oo(we)}}),O(c,Qh.STAT_EVENT,V=>{V.stat===GC.PROXY?je("Connection","Detected buffering proxy"):V.stat===GC.NOPROXY&&je("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.io()},0),x}}function _k(){return"undefined"!=typeof window?window:null}function jT(){return"undefined"!=typeof document?document:null}function xw(n){return new rk(n,!0)}class Bx{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=o,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class yk{constructor(e,t,r,i,o,c,h,p){this.Yn=e,this.Vo=r,this.vo=i,this.So=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Bx(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,be.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,be.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,be.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(Lr(t.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Le(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,be.Z)(function*(){e.state=0,e.start()}))}jo(e){return je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class PU extends yk{constructor(e,t,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.M=o}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function WA(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:ht(),i=e.targetChange.targetIds||[],o=function(p,y){return p.N?(Pt(void 0===y||"string"==typeof y),Wr.fromBase64String(y||"")):(Pt(void 0===y||y instanceof Uint8Array),Wr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(p){const y=void 0===p.code?ge.UNKNOWN:ET(p.code);return new Le(y,p.message||"")}(c);t=new TT(r,i,o,h||null)}else if("documentChange"in e){const r=e.documentChange,i=ra(n,r.document.name),o=xr(r.document.updateTime),c=new es({mapValue:{fields:r.document.fields}}),h=Un.newFoundDocument(i,o,c);t=new cg(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=ra(n,r.document),o=r.readTime?xr(r.readTime):At.min(),c=Un.newNoDocument(i,o);t=new cg([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=ra(n,r.document);t=new cg([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ht();{const r=e.filter,o=new LA(r.count||0);t=new CT(r.targetId,o)}}var p;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return At.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?At.min():o.readTime?xr(o.readTime):At.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=hd(this.M),t.addTarget=function(i,o){let c;const h=o.target;return c=F_(h)?{documents:YA(i,h)}:{query:QA(i,h)},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?c.resumeToken=ZA(i,o.resumeToken):o.snapshotVersion.compareTo(At.min())>0&&(c.readTime=q_(i,o.snapshotVersion.toTimestamp())),c}(this.M,e);const r=function XA(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ht()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=hd(this.M),t.removeTarget=e,this.Lo(t)}}class NU extends yk{constructor(e,t,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.M=o,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Pt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function KA(n,e){return n&&n.length>0?(Pt(void 0!==e),n.map(t=>function(r,i){let o=xr(r.updateTime?r.updateTime:i);return o.isEqual(At.min())&&(o=xr(i)),new sw(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=xr(e.commitTime);return this.listener.tu(r,t)}return Pt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=hd(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>dg(this.M,r))};this.Lo(t)}}class kU extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new Le(ge.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.So.co(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(ge.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.So._o(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Le(ge.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class RU{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Lr(t),this.uu=!1):je("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class OU{constructor(e,t,r,i,o){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=o,this.gu.Kr(h=>{r.enqueueAndForget((0,be.Z)(function*(){var p;Tf(c)&&(je("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,be.Z)(function*(y){const T=st(y);T.wu.add(4),yield cy(T),T.yu.set("Unknown"),T.wu.delete(4),yield Mw(T)}),function(y){return p.apply(this,arguments)})(c))}))}),this.yu=new RU(r,i)}}function Mw(n){return jx.apply(this,arguments)}function jx(){return jx=(0,be.Z)(function*(n){if(Tf(n))for(const e of n.mu)yield e(!0)}),jx.apply(this,arguments)}function cy(n){return Hx.apply(this,arguments)}function Hx(){return Hx=(0,be.Z)(function*(n){for(const e of n.mu)yield e(!1)}),Hx.apply(this,arguments)}function HT(n,e){const t=st(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),Gx(t)?qx(t):hy(t).Mo()&&$x(t,e))}function Pw(n,e){const t=st(n),r=hy(t);t._u.delete(e),r.Mo()&&vk(t,e),0===t._u.size&&(r.Mo()?r.$o():Tf(t)&&t.yu.set("Unknown"))}function $x(n,e){n.pu.Z(e.targetId),hy(n).Ho(e)}function vk(n,e){n.pu.Z(e),hy(n).Jo(e)}function qx(n){n.pu=new IT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),hy(n).start(),n.yu.au()}function Gx(n){return Tf(n)&&!hy(n).ko()&&n._u.size>0}function Tf(n){return 0===st(n).wu.size}function wk(n){n.pu=void 0}function FU(n){return Zx.apply(this,arguments)}function Zx(){return Zx=(0,be.Z)(function*(n){n._u.forEach((e,t)=>{$x(n,e)})}),Zx.apply(this,arguments)}function LU(n,e){return zx.apply(this,arguments)}function zx(){return zx=(0,be.Z)(function*(n,e){wk(n),Gx(n)?(n.yu.lu(e),qx(n)):n.yu.set("Unknown")}),zx.apply(this,arguments)}function UU(n,e,t){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,be.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof TT&&2===e.state&&e.cause)try{yield(r=(0,be.Z)(function*(i,o){const c=o.cause;for(const h of o.targetIds)i._u.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i._u.delete(h),i.pu.removeTarget(h))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield $T(n,r)}else if(e instanceof cg?n.pu.ut(e):e instanceof CT?n.pu._t(e):n.pu.ht(e),!t.isEqual(At.min()))try{const r=yield oy(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const c=i.pu.yt(o);return c.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const y=i._u.get(p);y&&i._u.set(p,y.withResumeToken(h.resumeToken,o))}}),c.targetMismatches.forEach(h=>{const p=i._u.get(h);if(!p)return;i._u.set(h,p.withResumeToken(Wr.EMPTY_BYTE_STRING,p.snapshotVersion)),vk(i,h);const y=new gd(p.target,h,1,p.sequenceNumber);$x(i,y)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){je("RemoteStore","Failed to raise snapshot:",r),yield $T(n,r)}var r}),Wx.apply(this,arguments)}function $T(n,e,t){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,be.Z)(function*(n,e,t){if(!ju(e))throw e;n.wu.add(1),yield cy(n),n.yu.set("Offline"),t||(t=()=>oy(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){je("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Mw(n)}))}),Kx.apply(this,arguments)}function Ek(n,e){return e().catch(t=>$T(n,t,e))}function dy(n){return Yx.apply(this,arguments)}function Yx(){return Yx=(0,be.Z)(function*(n){const e=st(n),t=If(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;VU(e);)try{const i=yield mU(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,BU(e,i)}catch(i){yield $T(e,i)}bk(e)&&Ck(e)}),Yx.apply(this,arguments)}function VU(n){return Tf(n)&&n.du.length<10}function BU(n,e){n.du.push(e);const t=If(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function bk(n){return Tf(n)&&!If(n).ko()&&n.du.length>0}function Ck(n){If(n).start()}function jU(n){return Qx.apply(this,arguments)}function Qx(){return Qx=(0,be.Z)(function*(n){If(n).nu()}),Qx.apply(this,arguments)}function HU(n){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,be.Z)(function*(n){const e=If(n);for(const t of n.du)e.Zo(t.mutations)}),Jx.apply(this,arguments)}function $U(n,e,t){return Xx.apply(this,arguments)}function Xx(){return Xx=(0,be.Z)(function*(n,e,t){const r=n.du.shift(),i=ww.from(r,e,t);yield Ek(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield dy(n)}),Xx.apply(this,arguments)}function qU(n,e){return eM.apply(this,arguments)}function eM(){return eM=(0,be.Z)(function*(n,e){var t;e&&If(n).Xo&&(yield(t=(0,be.Z)(function*(r,i){if(UA(o=i.code)&&o!==ge.ABORTED){const c=r.du.shift();If(r).Fo(),yield Ek(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield dy(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),bk(n)&&Ck(n)}),eM.apply(this,arguments)}function Tk(n,e){return tM.apply(this,arguments)}function tM(){return tM=(0,be.Z)(function*(n,e){const t=st(n);t.asyncQueue.verifyOperationInProgress(),je("RemoteStore","RemoteStore received new credentials");const r=Tf(t);t.wu.add(3),yield cy(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Mw(t)}),tM.apply(this,arguments)}function nM(n,e){return rM.apply(this,arguments)}function rM(){return rM=(0,be.Z)(function*(n,e){const t=st(n);e?(t.wu.delete(2),yield Mw(t)):e||(t.wu.add(2),yield cy(t),t.yu.set("Unknown"))}),rM.apply(this,arguments)}function hy(n){return n.Iu||(n.Iu=function(e,t,r){const i=st(e);return i.iu(),new PU(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:FU.bind(null,n),eo:LU.bind(null,n),zo:UU.bind(null,n)}),n.mu.push(function(){var e=(0,be.Z)(function*(t){t?(n.Iu.Fo(),Gx(n)?qx(n):n.yu.set("Unknown")):(yield n.Iu.stop(),wk(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function If(n){return n.Tu||(n.Tu=function(e,t,r){const i=st(e);return i.iu(),new NU(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:jU.bind(null,n),eo:qU.bind(null,n),eu:HU.bind(null,n),tu:$U.bind(null,n)}),n.mu.push(function(){var e=(0,be.Z)(function*(t){t?(n.Tu.Fo(),yield dy(n)):(yield n.Tu.stop(),n.du.length>0&&(je("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class iM{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ui,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,o){const c=Date.now()+r,h=new iM(e,t,c,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Le(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fy(n,e){if(Lr("AsyncQueue",`${e}: ${n}`),ju(n))return new Le(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class py{constructor(e){this.comparator=e?(t,r)=>e(t,r)||tt.comparator(t.key,r.key):(t,r)=>tt.comparator(t.key,r.key),this.keyedMap=$_(),this.sortedSet=new Dr(this.comparator)}static emptySet(e){return new py(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof py)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new py;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Ik{constructor(){this.Eu=new Dr(tt.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):ht():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class gy{constructor(e,t,r,i,o,c,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p}static fromInitialDocuments(e,t,r,i){const o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new gy(e,t,py.emptySet(t),o,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class GU{constructor(){this.Ru=void 0,this.listeners=[]}}class ZU{constructor(){this.queries=new Vu(e=>pT(e),ld),this.onlineState="Unknown",this.bu=new Set}}function sM(n,e){return oM.apply(this,arguments)}function oM(){return oM=(0,be.Z)(function*(n,e){const t=st(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new GU),i)try{o.Ru=yield t.onListen(r)}catch(c){const h=fy(c,`Initialization of query '${Q0(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,o),o.listeners.push(e),e.Pu(t.onlineState),o.Ru&&e.Vu(o.Ru)&&uM(t)}),oM.apply(this,arguments)}function aM(n,e){return lM.apply(this,arguments)}function lM(){return lM=(0,be.Z)(function*(n,e){const t=st(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const c=o.listeners.indexOf(e);c>=0&&(o.listeners.splice(c,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),lM.apply(this,arguments)}function zU(n,e){const t=st(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.Vu(i)&&(r=!0);c.Ru=i}}r&&uM(t)}function WU(n,e,t){const r=st(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function uM(n){n.bu.forEach(e=>{e.next()})}class cM{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new gy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=gy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class KU{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class Sk{constructor(e){this.M=e}wi(e){return ra(this.M,e)}mi(e){return e.metadata.exists?dw(this.M,e.document,!1):Un.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return xr(e)}}class YU{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Dk(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=dn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new Sk(this.M);for(const i of e)if(i.metadata.queries){const o=r.wi(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||In()).add(o);t.set(c,h)}}return t}complete(){var e=this;return(0,be.Z)(function*(){const t=yield function _U(n,e,t,r){return Nx.apply(this,arguments)}(e.localStore,new Sk(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield yU(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Dk(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Ak{constructor(e){this.key=e}}class xk{constructor(e){this.key=e}}class Mk{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=In(),this.mutatedKeys=In(),this.Gu=X0(e),this.Qu=new py(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new Ik,i=t?t.Qu:this.Qu;let o=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,S)=>{const x=i.get(T),O=J0(this.query,S)?S:null,V=!!x&&this.mutatedKeys.has(x.key),J=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let we=!1;x&&O?x.data.isEqual(O.data)?V!==J&&(r.track({type:3,doc:O}),we=!0):this.Hu(x,O)||(r.track({type:2,doc:O}),we=!0,(p&&this.Gu(O,p)>0||y&&this.Gu(O,y)<0)&&(h=!0)):!x&&O?(r.track({type:0,doc:O}),we=!0):x&&!O&&(r.track({type:1,doc:x}),we=!0,(p||y)&&(h=!0)),we&&(O?(c=c.add(O),o=J?o.add(T):o.delete(T)):(c=c.delete(T),o=o.delete(T)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const T="F"===this.query.limitType?c.last():c.first();c=c.delete(T.key),o=o.delete(T.key),r.track({type:1,doc:T})}return{Qu:c,zu:r,ii:h,mutatedKeys:o}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const o=e.zu.Au();o.sort((y,T)=>function(S,x){const O=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return O(S)-O(x)}(y.type,T.type)||this.Gu(y.doc,T.doc)),this.Ju(r);const c=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,p=h!==this.qu;return this.qu=h,0!==o.length||p?{snapshot:new gy(this.query,e.Qu,i,o,e.mutatedKeys,0===h,p,!1),Xu:c}:{Xu:c}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Ik,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=In(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new xk(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new Ak(r))}),t}ta(e){this.Uu=e._i,this.Ku=In();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return gy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class QU{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class JU{constructor(e){this.key=e,this.na=!1}}class XU{constructor(e,t,r,i,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new Vu(h=>pT(h),ld),this.ra=new Map,this.oa=new Set,this.ua=new Dr(tt.comparator),this.aa=new Map,this.ca=new Rx,this.ha={},this.la=new Map,this.fa=bf.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function eV(n,e){return dM.apply(this,arguments)}function dM(){return dM=(0,be.Z)(function*(n,e){const t=RM(n);let r,i;const o=t.ia.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.ea();else{const c=yield ly(t.localStore,qs(e));t.isPrimaryClient&&HT(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield hM(t,e,r,"current"===h)}return i}),dM.apply(this,arguments)}function hM(n,e,t,r){return fM.apply(this,arguments)}function fM(){return fM=(0,be.Z)(function*(n,e,t,r){n._a=(T,S,x)=>{return(O=(0,be.Z)(function*(V,J,we,Ge){let nt=J.view.Wu(we);nt.ii&&(nt=yield UT(V.localStore,J.query,!1).then(({documents:xt})=>J.view.Wu(xt,nt)));const rt=Ge&&Ge.targetChanges.get(J.targetId),Xe=J.view.applyChanges(nt,V.isPrimaryClient,rt);return CM(V,J.targetId,Xe.Xu),Xe.snapshot}),function(V,J,we,Ge){return O.apply(this,arguments)})(n,T,S,x);var O};const i=yield UT(n.localStore,e,!0),o=new Mk(e,i._i),c=o.Wu(i.documents),h=hf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),p=o.applyChanges(c,n.isPrimaryClient,h);CM(n,t,p.Xu);const y=new QU(e,t,o);return n.ia.set(e,y),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),p.snapshot}),fM.apply(this,arguments)}function tV(n,e){return pM.apply(this,arguments)}function pM(){return pM=(0,be.Z)(function*(n,e){const t=st(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(o=>!ld(o,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield uy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Pw(t.remoteStore,r.targetId),my(t,r.targetId)}).catch(Cf))):(my(t,r.targetId),yield uy(t.localStore,r.targetId,!0))}),pM.apply(this,arguments)}function gM(){return gM=(0,be.Z)(function*(n,e,t){const r=OM(n);try{const i=yield function(o,c){const h=st(o),p=lr.now(),y=c.reduce((S,x)=>S.add(x.key),In());let T;return h.persistence.runTransaction("Locally write mutations","readwrite",S=>h.fi.Ks(S,y).next(x=>{T=x;const O=[];for(const V of c){const J=vT(V,T.get(V.key));null!=J&&O.push(new uf(V.key,J,q0(J.value.mapValue),Ur.exists(!0)))}return h.Bs.addMutationBatch(S,p,O,c)})).then(S=>(S.applyToLocalDocumentSet(T),{batchId:S.batchId,changes:T}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,h){let p=o.ha[o.currentUser.toKey()];p||(p=new Dr(Vt)),p=p.insert(c,h),o.ha[o.currentUser.toKey()]=p}(r,i.batchId,t),yield wd(r,i.changes),yield dy(r.remoteStore)}catch(i){const o=fy(i,"Failed to persist write");t.reject(o)}}),gM.apply(this,arguments)}function Pk(n,e){return mM.apply(this,arguments)}function mM(){return mM=(0,be.Z)(function*(n,e){const t=st(n);try{const r=yield Dw(t.localStore,e);e.targetChanges.forEach((i,o)=>{const c=t.aa.get(o);c&&(Pt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.na=!0:i.modifiedDocuments.size>0?Pt(c.na):i.removedDocuments.size>0&&(Pt(c.na),c.na=!1))}),yield wd(t,r,e)}catch(r){yield Cf(r)}}),mM.apply(this,arguments)}function Nk(n,e,t){const r=st(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((o,c)=>{const h=c.view.Pu(e);h.snapshot&&i.push(h.snapshot)}),function(o,c){const h=st(o);h.onlineState=c;let p=!1;h.queries.forEach((y,T)=>{for(const S of T.listeners)S.Pu(c)&&(p=!0)}),p&&uM(h)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function rV(n,e,t){return _M.apply(this,arguments)}function _M(){return _M=(0,be.Z)(function*(n,e,t){const r=st(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),o=i&&i.key;if(o){let c=new Dr(tt.comparator);c=c.insert(o,Un.newNoDocument(o,At.min()));const h=In().add(o),p=new df(At.min(),new Map,new Vn(Vt),c,h);yield Pk(r,p),r.ua=r.ua.remove(o),r.aa.delete(e),TM(r)}else yield uy(r.localStore,e,!1).then(()=>my(r,e,t)).catch(Cf)}),_M.apply(this,arguments)}function iV(n,e){return yM.apply(this,arguments)}function yM(){return yM=(0,be.Z)(function*(n,e){const t=st(n),r=e.batch.batchId;try{const i=yield Sw(t.localStore,e);bM(t,r,null),EM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield wd(t,i)}catch(i){yield Cf(i)}}),yM.apply(this,arguments)}function sV(n,e,t){return vM.apply(this,arguments)}function vM(){return vM=(0,be.Z)(function*(n,e,t){const r=st(n);try{const i=yield function(o,c){const h=st(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return h.Bs.lookupMutationBatch(p,c).next(T=>(Pt(null!==T),y=T.keys(),h.Bs.removeMutationBatch(p,T))).next(()=>h.Bs.performConsistencyCheck(p)).next(()=>h.fi.Ks(p,y))})}(r.localStore,e);bM(r,e,t),EM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield wd(r,i)}catch(i){yield Cf(i)}}),vM.apply(this,arguments)}function wM(){return wM=(0,be.Z)(function*(n,e){const t=st(n);Tf(t.remoteStore)||je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const c=st(o);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.Bs.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=fy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),wM.apply(this,arguments)}function EM(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function bM(n,e,t){const r=st(n);let i=r.ha[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function my(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||kk(n,r)})}function kk(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(Pw(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),TM(n))}function CM(n,e,t){for(const r of t)r instanceof Ak?(n.ca.addReference(r.key,e),aV(n,r)):r instanceof xk?(je("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||kk(n,r.key)):ht()}function aV(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(je("SyncEngine","New document in limbo: "+t),n.oa.add(r),TM(n))}function TM(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new tt(dn.fromString(e)),r=n.fa.next();n.aa.set(r,new JU(t)),n.ua=n.ua.insert(t,r),HT(n.remoteStore,new gd(qs(ad(t.path)),r,2,$s.A))}}function wd(n,e,t){return IM.apply(this,arguments)}function IM(){return IM=(0,be.Z)(function*(n,e,t){const r=st(n),i=[],o=[],c=[];var h;r.ia.isEmpty()||(r.ia.forEach((h,p)=>{c.push(r._a(p,e,t).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,y.fromCache?"not-current":"current"),i.push(y);const T=Bl.Ys(p.targetId,y);o.push(T)}}))}),yield Promise.all(c),r.sa.zo(i),yield(h=(0,be.Z)(function*(p,y){const T=st(p);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>me.forEach(y,x=>me.forEach(x.Hs,O=>T.persistence.referenceDelegate.addReference(S,x.targetId,O)).next(()=>me.forEach(x.Js,O=>T.persistence.referenceDelegate.removeReference(S,x.targetId,O)))))}catch(S){if(!ju(S))throw S;je("LocalStore","Failed to update sequence numbers: "+S)}for(const S of y){const x=S.targetId;if(!S.fromCache){const O=T.ui.get(x),J=O.withLastLimboFreeSnapshotVersion(O.snapshotVersion);T.ui=T.ui.insert(x,J)}}}),function(p,y){return h.apply(this,arguments)})(r.localStore,o))}),IM.apply(this,arguments)}function lV(n,e){return SM.apply(this,arguments)}function SM(){return SM=(0,be.Z)(function*(n,e){const t=st(n);if(!t.currentUser.isEqual(e)){je("SyncEngine","User change. New user:",e.toKey());const r=yield sy(t.localStore,e);t.currentUser=e,(i=t).la.forEach(c=>{c.forEach(h=>{h.reject(new Le(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield wd(t,r.di)}var i}),SM.apply(this,arguments)}function uV(n,e){const t=st(n),r=t.aa.get(e);if(r&&r.na)return In().add(r.key);{let i=In();const o=t.ra.get(e);if(!o)return i;for(const c of o){const h=t.ia.get(c);i=i.unionWith(h.view.ju)}return i}}function cV(n,e){return DM.apply(this,arguments)}function DM(){return DM=(0,be.Z)(function*(n,e){const t=st(n),r=yield UT(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&CM(t,e.targetId,i.Xu),i}),DM.apply(this,arguments)}function dV(n,e){return AM.apply(this,arguments)}function AM(){return AM=(0,be.Z)(function*(n,e){const t=st(n);return dk(t.localStore,e).then(r=>wd(t,r))}),AM.apply(this,arguments)}function hV(n,e,t,r){return xM.apply(this,arguments)}function xM(){return xM=(0,be.Z)(function*(n,e,t,r){const i=st(n),o=yield function(c,h){const p=st(c),y=st(p.Bs);return p.persistence.runTransaction("Lookup mutation documents","readonly",T=>y.fn(T,h).next(S=>S?p.fi.Ks(T,S):me.resolve(null)))}(i.localStore,e);var h;null!==o?("pending"===t?yield dy(i.remoteStore):"acknowledged"===t||"rejected"===t?(bM(i,e,r||null),EM(i,e),h=e,st(st(i.localStore).Bs)._n(h)):ht(),yield wd(i,o)):je("SyncEngine","Cannot apply mutation batch with id: "+e)}),xM.apply(this,arguments)}function MM(){return MM=(0,be.Z)(function*(n,e){const t=st(n);if(RM(t),OM(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Rk(t,r.toArray());t.da=!0,yield nM(t.remoteStore,!0);for(const o of i)HT(t.remoteStore,o)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((o,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(my(t,c),uy(t.localStore,c,!0))),Pw(t.remoteStore,c)}),yield i,yield Rk(t,r),function(o){const c=st(o);c.aa.forEach((h,p)=>{Pw(c.remoteStore,p)}),c.ca.Si(),c.aa=new Map,c.ua=new Dr(tt.comparator)}(t),t.da=!1,yield nM(t.remoteStore,!1)}}),MM.apply(this,arguments)}function Rk(n,e,t){return PM.apply(this,arguments)}function PM(){return PM=(0,be.Z)(function*(n,e,t){const r=st(n),i=[],o=[];for(const c of e){let h;const p=r.ra.get(c);if(p&&0!==p.length){h=yield ly(r.localStore,qs(p[0]));for(const y of p){const T=r.ia.get(y),S=yield cV(r,T);S.snapshot&&o.push(S.snapshot)}}else{const y=yield ck(r.localStore,c);h=yield ly(r.localStore,y),yield hM(r,Ok(y),c,!1)}i.push(h)}return r.sa.zo(o),i}),PM.apply(this,arguments)}function Ok(n){return V_(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function pV(n){const e=st(n);return st(st(e.localStore).persistence).Fs()}function gV(n,e,t,r){return NM.apply(this,arguments)}function NM(){return NM=(0,be.Z)(function*(n,e,t,r){const i=st(n);if(i.da)return void je("SyncEngine","Ignoring unexpected query state notification.");const o=i.ra.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const c=yield dk(i.localStore,gT(o[0])),h=df.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield wd(i,c,h);break}case"rejected":yield uy(i.localStore,e,!0),my(i,e,r);break;default:ht()}}),NM.apply(this,arguments)}function mV(n,e,t){return kM.apply(this,arguments)}function kM(){return kM=(0,be.Z)(function*(n,e,t){const r=RM(n);if(r.da){for(const i of e){if(r.ra.has(i)){je("SyncEngine","Adding an already active target "+i);continue}const o=yield ck(r.localStore,i),c=yield ly(r.localStore,o);yield hM(r,Ok(o),c.targetId,!1),HT(r.remoteStore,c)}for(const i of t)r.ra.has(i)&&(yield uy(r.localStore,i,!1).then(()=>{Pw(r.remoteStore,i),my(r,i)}).catch(Cf))}}),kM.apply(this,arguments)}function RM(n){const e=st(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Pk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rV.bind(null,e),e.sa.zo=zU.bind(null,e.eventManager),e.sa.wa=WU.bind(null,e.eventManager),e}function OM(n){const e=st(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sV.bind(null,e),e}class Fk{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,be.Z)(function*(){t.M=xw(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return iy(this.persistence,new ry,e.initialUser,this.M)}ya(e){return new IU(Ox.Yi,this.M)}ga(e){return new gk}terminate(){var e=this;return(0,be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Lk extends Fk{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield OM(r.Ta.syncEngine),yield dy(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return iy(this.persistence,new ry,e.initialUser,this.M)}pa(e){return new d(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=bn(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Zs.withCacheSize(this.cacheSizeBytes):Zs.DEFAULT;return new Pe(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,_k(),jT(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new gk}}class yV extends Lk{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof Vx&&(r.sharedClientState.syncEngine={$r:hV.bind(null,i),Br:gV.bind(null,i),Lr:mV.bind(null,i),Fs:pV.bind(null,i),Fr:dV.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var o=(0,be.Z)(function*(c){yield function fV(n,e){return MM.apply(this,arguments)}(r.Ta.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):c||r.gcScheduler.stop())});return function(c){return o.apply(this,arguments)}}())})()}ga(e){const t=_k();if(!Vx.vt(t))throw new Le(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=bn(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Vx(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class FM{initialize(e,t){var r=this;return(0,be.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>Nk(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=lV.bind(null,r.syncEngine),yield nM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ZU}createDatastore(e){const t=xw(e.databaseInfo.databaseId),r=new MU(e.databaseInfo);return new kU(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=h=>Nk(this.syncEngine,h,0),c=mk.vt()?new mk:new DU,new OU(t,r,i,o,c);var t,r,i,o,c}createSyncEngine(e,t){return function(r,i,o,c,h,p,y){const T=new XU(r,i,o,c,h,p);return y&&(T.da=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,be.Z)(function*(t){const r=st(t);je("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield cy(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Uk(n,e=10240){let t=0;return{read:()=>(0,be.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class qT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class vV{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new ui,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,be.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,be.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,be.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const o=yield e.Sa(i);return new KU(JSON.parse(o),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,be.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,be.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,be.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class wV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Le(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,be.Z)(function*(o,c){const h=st(o),p=hd(h.M)+"/documents",y={documents:c.map(O=>dd(h.M,O))},T=yield h._o("BatchGetDocuments",p,y),S=new Map;T.forEach(O=>{const V=function sk(n,e){return"found"in e?function(t,r){Pt(!!r.found);const i=ra(t,r.found.name),o=xr(r.found.updateTime),c=new es({mapValue:{fields:r.found.fields}});return Un.newFoundDocument(i,o,c)}(n,e):"missing"in e?function(t,r){Pt(!!r.missing),Pt(!!r.readTime);const i=ra(t,r.missing),o=xr(r.readTime);return Un.newNoDocument(i,o)}(n,e):ht()}(h.M,O);S.set(V.key.toString(),V)});const x=[];return c.forEach(O=>{const V=S.get(O.toString());Pt(!!V),x.push(V)}),x}),function(o,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Uu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=tt.fromPath(i);e.mutations.push(new H_(o,e.precondition(o)))}),yield(r=(0,be.Z)(function*(i,o){const c=st(i),h=hd(c.M)+"/documents",p={writes:o.map(y=>dg(c.M,y))};yield c.co("Commit",h,p)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ht();t=At.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Le(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ur.updateTime(t):Ur.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(At.min()))throw new Le(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ur.updateTime(t)}return Ur.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class EV{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.xa=r.maxAttempts,this.No=new Bx(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,be.Z)(function*(){const t=new wV(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.Ma(o)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!Yp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!UA(t)}return!1}}class bV{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=li.UNAUTHENTICATED,this.clientId=tT.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,be.Z)(function*(h){je("FirestoreClient","Received user=",h.uid),yield o.authCredentialListener(h),o.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(je("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Le(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ui;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=fy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function Vk(n,e){return LM.apply(this,arguments)}function LM(){return LM=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),je("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,be.Z)(function*(o){r.isEqual(o)||(yield sy(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),LM.apply(this,arguments)}function Bk(n,e){return UM.apply(this,arguments)}function UM(){return UM=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield VM(n);je("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Tk(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>Tk(e.remoteStore,o)),n.onlineComponents=e}),UM.apply(this,arguments)}function VM(n){return BM.apply(this,arguments)}function BM(){return BM=(0,be.Z)(function*(n){return n.offlineComponents||(je("FirestoreClient","Using default OfflineComponentProvider"),yield Vk(n,new Fk)),n.offlineComponents}),BM.apply(this,arguments)}function GT(n){return jM.apply(this,arguments)}function jM(){return jM=(0,be.Z)(function*(n){return n.onlineComponents||(je("FirestoreClient","Using default OnlineComponentProvider"),yield Bk(n,new FM)),n.onlineComponents}),jM.apply(this,arguments)}function jk(n){return VM(n).then(e=>e.persistence)}function HM(n){return VM(n).then(e=>e.localStore)}function Hk(n){return GT(n).then(e=>e.remoteStore)}function $M(n){return GT(n).then(e=>e.syncEngine)}function _y(n){return qM.apply(this,arguments)}function qM(){return qM=(0,be.Z)(function*(n){const e=yield GT(n),t=e.eventManager;return t.onListen=eV.bind(null,e.syncEngine),t.onUnlisten=tV.bind(null,e.syncEngine),t}),qM.apply(this,arguments)}function $k(n,e,t={}){const r=new ui;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,o,c,h,p){const y=new qT({next:S=>{o.enqueueAndForget(()=>aM(i,T));const x=S.docs.has(c);!x&&S.fromCache?p.reject(new Le(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&S.fromCache&&h&&"server"===h.source?p.reject(new Le(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),T=new cM(ad(c.path),y,{includeMetadataChanges:!0,ku:!0});return sM(i,T)}(yield _y(n),n.asyncQueue,e,t,r)})),r.promise}function qk(n,e,t={}){const r=new ui;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(i,o,c,h,p){const y=new qT({next:S=>{o.enqueueAndForget(()=>aM(i,T)),S.fromCache&&"server"===h.source?p.reject(new Le(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),T=new cM(c,y,{includeMetadataChanges:!0,ku:!0});return sM(i,T)}(yield _y(n),n.asyncQueue,e,t,r)})),r.promise}const Gk=new Map;function GM(n,e,t){if(!t)throw new Le(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Zk(n,e,t,r){if(!0===e&&!0===r)throw new Le(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function zk(n){if(!tt.isDocumentKey(n))throw new Le(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Wk(n){if(tt.isDocumentKey(n))throw new Le(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ZT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ht()}function mn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Le(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ZT(n);throw new Le(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Kk(n,e){if(e<=0)throw new Le(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class Yk{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Le(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Le(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Zk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nw{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yk({}),this._settingsFrozen=!1,e instanceof Fl?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Le(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fl(i.options.projectId)}(e))}get app(){if(!this._app)throw new Le(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Le(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yk(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new pA;switch(t.type){case"gapi":const r=t.client;return Pt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new XC(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Le(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Gk.get(e);t&&(je("ComponentProvider","Removing Datastore"),Gk.delete(e),t.terminate())}(this),Promise.resolve()}}class ur{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ur(this.firestore,e,this._key)}}class ws{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ws(this.firestore,e,this._query)}}class qu extends ws{constructor(e,t,r){super(e,t,ad(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ur(this.firestore,null,new tt(e))}withConverter(e){return new qu(this.firestore,e,this._path)}}function Qk(n,e,...t){if(n=(0,R.m9)(n),GM("collection","path",e),n instanceof Nw){const r=dn.fromString(e,...t);return Wk(r),new qu(n,null,r)}{if(!(n instanceof ur||n instanceof qu))throw new Le(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return Wk(r),new qu(n.firestore,null,r)}}function zT(n,e,...t){if(n=(0,R.m9)(n),1===arguments.length&&(e=tT.R()),GM("doc","path",e),n instanceof Nw){const r=dn.fromString(e,...t);return zk(r),new ur(n,null,new tt(r))}{if(!(n instanceof ur||n instanceof qu))throw new Le(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dn.fromString(e,...t));return zk(r),new ur(n.firestore,n instanceof qu?n.converter:null,new tt(r))}}function Jk(n,e){return n=(0,R.m9)(n),e=(0,R.m9)(e),(n instanceof ur||n instanceof qu)&&(e instanceof ur||e instanceof qu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Xk(n,e){return n=(0,R.m9)(n),e=(0,R.m9)(e),n instanceof ws&&e instanceof ws&&n.firestore===e.firestore&&ld(n._query,e._query)&&n.converter===e.converter}class kV{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Bx(this,"async_queue_retry"),this.Qa=()=>{const t=jT();t&&je("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=jT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=jT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new ui;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,be.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!ju(t))throw t;je("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,Lr("INTERNAL UNHANDLED ERROR: ",function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),c}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=iM.createAndSchedule(this,e,t,r,o=>this.Ha(o));return this.La.push(i),i}ja(){this.Ua&&ht()}verifyOperationInProgress(){}Ja(){var e=this;return(0,be.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function ZM(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class RV{constructor(){this._progressObserver={},this._taskCompletionResolver=new ui,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class _r extends Nw{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new kV,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||eR(this),this._firestoreClient.terminate()}}function hi(n){return n._firestoreClient||eR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function eR(n){var e;const t=n._freezeSettings(),r=(o=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new EA(n._databaseId,o,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var o,h;n._firestoreClient=new bV(n._authCredentials,n._appCheckCredentials,n._queue,r)}function tR(n,e,t){const r=new ui;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield Vk(n,t),yield Bk(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(o=i).name?o.code===ge.FAILED_PRECONDITION||o.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&o instanceof DOMException)||22===o.code||20===o.code||11===o.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var o})).then(()=>r.promise)}function nR(n){if(n._initialized||n._terminated)throw new Le(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ed{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Le(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Gu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gu(Wr.fromBase64String(e))}catch(t){throw new Le(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Gu(Wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class vg{constructor(e){this._methodName=e}}class WT{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Le(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Le(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vt(this._lat,e._lat)||Vt(this._long,e._long)}}const qV=/^__.*__$/;class GV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new uf(e,this.data,this.fieldMask,t,this.fieldTransforms):new cd(e,this.data,t,this.fieldTransforms)}}class rR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new uf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function iR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class KT{constructor(e,t,r,i,o,c){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===o&&this.tc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new KT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return JT(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(iR(this.ec)&&qV.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class ZV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||xw(e)}lc(e,t,r,i=!1){return new KT({ec:e,methodName:t,hc:r,path:zr.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function wg(n){const e=n._freezeSettings(),t=xw(n._databaseId);return new ZV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function YT(n,e,t,r,i,o={}){const c=n.lc(o.merge||o.mergeFields?2:0,e,t,i);YM("Data must be an object, but it was:",c,r);const h=aR(r,c);let p,y;if(o.merge)p=new ed(c.fieldMask),y=c.fieldTransforms;else if(o.mergeFields){const T=[];for(const S of o.mergeFields){const x=QM(e,S,t);if(!c.contains(x))throw new Le(ge.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);uR(T,x)||T.push(x)}p=new ed(T),y=c.fieldTransforms.filter(S=>p.covers(S.field))}else p=null,y=c.fieldTransforms;return new GV(new es(h),p,y)}class kw extends vg{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kw}}function sR(n,e,t){return new KT({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class zM extends vg{_toFieldTransform(e){return new Vl(e.path,new af)}isEqual(e){return e instanceof zM}}class zV extends vg{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=sR(this,e,!0),r=this.fc.map(o=>Eg(o,t)),i=new Lu(r);return new Vl(e.path,i)}isEqual(e){return this===e}}class WV extends vg{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=sR(this,e,!0),r=this.fc.map(o=>Eg(o,t)),i=new Ar(r);return new Vl(e.path,i)}isEqual(e){return this===e}}class KV extends vg{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new lf(e.M,nw(e.M,this.dc));return new Vl(e.path,t)}isEqual(e){return this===e}}function WM(n,e,t,r){const i=n.lc(1,e,t);YM("Data must be an object, but it was:",i,r);const o=[],c=es.empty();Ol(r,(p,y)=>{const T=QT(e,p,t);y=(0,R.m9)(y);const S=i.oc(T);if(y instanceof kw)o.push(T);else{const x=Eg(y,S);null!=x&&(o.push(T),c.set(T,x))}});const h=new ed(o);return new rR(c,h,i.fieldTransforms)}function KM(n,e,t,r,i,o){const c=n.lc(1,e,t),h=[QM(e,r,t)],p=[i];if(o.length%2!=0)throw new Le(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<o.length;x+=2)h.push(QM(e,o[x])),p.push(o[x+1]);const y=[],T=es.empty();for(let x=h.length-1;x>=0;--x)if(!uR(y,h[x])){const O=h[x];let V=p[x];V=(0,R.m9)(V);const J=c.oc(O);if(V instanceof kw)y.push(O);else{const we=Eg(V,J);null!=we&&(y.push(O),T.set(O,we))}}const S=new ed(y);return new rR(T,S,c.fieldTransforms)}function oR(n,e,t,r=!1){return Eg(t,n.lc(r?4:3,e))}function Eg(n,e){if(lR(n=(0,R.m9)(n)))return YM("Unsupported field value:",e,n),aR(n,e);if(n instanceof vg)return function(t,r){if(!iR(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const c of t){let h=Eg(c,r.uc(o));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,R.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return nw(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=lr.fromDate(t);return{timestampValue:q_(r.M,i)}}if(t instanceof lr){const i=new lr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:q_(r.M,i)}}if(t instanceof WT)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Gu)return{bytesValue:ZA(r.M,t._byteString)};if(t instanceof ur){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r.ac(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ST(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${ZT(t)}`)}(n,e)}function aR(n,e){const t={};return rT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ol(n,(r,i)=>{const o=Eg(i,e.sc(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function lR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof lr||n instanceof WT||n instanceof Gu||n instanceof ur||n instanceof vg)}function YM(n,e,t){if(!lR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=ZT(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function QM(n,e,t){if((e=(0,R.m9)(e))instanceof Ed)return e._internalPath;if("string"==typeof e)return QT(n,e);throw JT("Field path arguments must be of type string or ",n,!1,void 0,t)}const YV=new RegExp("[~\\*/\\[\\]]");function QT(n,e,t){if(e.search(YV)>=0)throw JT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ed(...e.split("."))._internalPath}catch(r){throw JT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function JT(n,e,t,r,i){const o=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(o||c)&&(p+=" (found",o&&(p+=` in field ${r}`),c&&(p+=` in document ${i}`),p+=")"),new Le(ge.INVALID_ARGUMENT,h+n+p)}function uR(n,e){return n.some(t=>t.isEqual(e))}class Rw{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ur(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new QV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(XT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class QV extends Rw{data(){return super.data()}}function XT(n,e){return"string"==typeof e?QT(n,e):e instanceof Ed?e._internalPath:e._delegate._internalPath}class bg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bd extends Rw{constructor(e,t,r,i,o,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ow(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(XT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Ow extends bd{data(e={}){return super.data(e)}}class Sf{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new bg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ow(this._firestore,this._userDataWriter,r.key,r,new bg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Le(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Ow(r._firestore,r._userDataWriter,c.doc.key,c.doc,new bg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new Ow(r._firestore,r._userDataWriter,c.doc.key,c.doc,new bg(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,y=-1;return 0!==c.type&&(p=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),1!==c.type&&(o=o.add(c.doc),y=o.indexOf(c.doc.key)),{type:JV(c.type),doc:h,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function JV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function cR(n,e){return n instanceof bd&&e instanceof bd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Sf&&e instanceof Sf&&n._firestore===e._firestore&&Xk(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function dR(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Le(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fw{}function Df(n,...e){for(const t of e)n=t._apply(n);return n}class XV extends Fw{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=wg(e.firestore),r=function(i,o,c,h,p,y,T){let S;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Le(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){_R(T,y);const O=[];for(const V of T)O.push(mR(h,i,V));S={arrayValue:{values:O}}}else S=mR(h,i,T)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||_R(T,y),S=oR(c,"where",T,"in"===y||"not-in"===y);const x=Ti.create(p,y,S);return function(O,V){if(V.S()){const we=fT(O);if(null!==we&&!we.isEqual(V.field))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${we.toString()}' and '${V.field.toString()}'`);const Ge=Y0(O);null!==Ge&&yR(0,V.field,Ge)}const J=function(we,Ge){for(const nt of we.filters)if(Ge.indexOf(nt.op)>=0)return nt.op;return null}(O,function(we){switch(we){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(V.op));if(null!==J)throw new Le(ge.INVALID_ARGUMENT,J===V.op?`Invalid query. You cannot use more than one '${V.op.toString()}' filter.`:`Invalid query. You cannot use '${V.op.toString()}' filters with '${J.toString()}' filters.`)}(i,x),x}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new ws(e.firestore,e.converter,function(i,o){const c=i.filters.concat([o]);return new qa(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class tB extends Fw{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new Le(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Le(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Ul(i,o);return function(h,p){if(null===Y0(h)){const y=fT(h);null!==y&&yR(0,y,p.field)}}(r,c),c}(e._query,this._c,this.gc);return new ws(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new qa(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class hR extends Fw{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new ws(e.firestore,e.converter,B_(e._query,this.yc,this.Ic))}}class fR extends Fw{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=gR(e,this.type,this.Tc,this.Ec);return new ws(e.firestore,e.converter,(i=t,new qa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class pR extends Fw{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=gR(e,this.type,this.Tc,this.Ec);return new ws(e.firestore,e.converter,(i=t,new qa((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function gR(n,e,t,r){if(t[0]=(0,R.m9)(t[0]),t[0]instanceof Rw)return function(i,o,c,h,p){if(!h)throw new Le(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const T of Fu(i))if(T.field.isKeyField())y.push(nd(o,h.key));else{const S=h.data.field(T.field);if(j0(S))throw new Le(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const x=T.field.canonicalString();throw new Le(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}y.push(S)}return new na(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=wg(n.firestore);return function(o,c,h,p,y,T){const S=o.explicitOrderBy;if(y.length>S.length)throw new Le(ge.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let O=0;O<y.length;O++){const V=y[O];if(S[O].field.isKeyField()){if("string"!=typeof V)throw new Le(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof V}`);if(!ig(o)&&-1!==V.indexOf("/"))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${V}' contains a slash.`);const J=o.path.child(dn.fromString(V));if(!tt.isDocumentKey(J))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${J}' is not because it contains an odd number of segments.`);const we=new tt(J);x.push(nd(c,we))}else{const J=oR(h,p,V);x.push(J)}}return new na(x,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function mR(n,e,t){if("string"==typeof(t=(0,R.m9)(t))){if(""===t)throw new Le(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ig(e)&&-1!==t.indexOf("/"))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(dn.fromString(t));if(!tt.isDocumentKey(r))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return nd(n,new tt(r))}if(t instanceof ur)return nd(n,t._key);throw new Le(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ZT(t)}.`)}function _R(n,e){if(!Array.isArray(n)||0===n.length)throw new Le(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Le(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function yR(n,e,t){if(!t.isEqual(e))throw new Le(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const uB={maxAttempts:5};class JM{convertValue(e,t="none"){switch(ea(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ln(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ht()}}convertObject(e,t){const r={};return Ol(e.fields,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new WT(Ln(e.latitude),Ln(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=wA(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ef(e));default:return null}}convertTimestamp(e){const t=Ru(e);return new lr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dn.fromString(e);Pt(Z_(r));const i=new Fl(r.get(1),r.get(3)),o=new tt(r.popFirst(5));return i.isEqual(t)||Lr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function eI(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class cB extends JM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ur(this.firestore,null,t)}}class vR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wg(e)}set(e,t,r){this._verifyNotCommitted();const i=Af(e,this._firestore),o=eI(i.converter,t,r),c=YT(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Ur.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=Af(e,this._firestore);let c;return c="string"==typeof(t=(0,R.m9)(t))||t instanceof Ed?KM(this._dataReader,"WriteBatch.update",o._key,t,r,i):WM(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(c.toMutation(o._key,Ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Af(e,this._firestore);return this._mutations=this._mutations.concat(new Uu(t._key,Ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Le(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Af(n,e){if((n=(0,R.m9)(n)).firestore!==e)throw new Le(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Cg extends JM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ur(this.firestore,null,t)}}function wR(n,e,t){n=mn(n,ur);const r=mn(n.firestore,_r),i=eI(n.converter,e,t);return yy(r,[YT(wg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Ur.none())])}function ER(n,e,t,...r){n=mn(n,ur);const i=mn(n.firestore,_r),o=wg(i);let c;return c="string"==typeof(e=(0,R.m9)(e))||e instanceof Ed?KM(o,"updateDoc",n._key,e,t,r):WM(o,"updateDoc",n._key,e),yy(i,[c.toMutation(n._key,Ur.exists(!0))])}function bR(n,...e){var t,r,i;n=(0,R.m9)(n);let o={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||ZM(e[c])||(o=e[c],c++);const h={includeMetadataChanges:o.includeMetadataChanges};if(ZM(e[c])){const S=e[c];e[c]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[c+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[c+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let p,y,T;if(n instanceof ur)y=mn(n.firestore,_r),T=ad(n._key.path),p={next:S=>{e[c]&&e[c](XM(y,n,S))},error:e[c+1],complete:e[c+2]};else{const S=mn(n,ws);y=mn(S.firestore,_r),T=S._query;const x=new Cg(y);p={next:O=>{e[c]&&e[c](new Sf(y,x,S,O))},error:e[c+1],complete:e[c+2]},dR(n._query)}return function(S,x,O,V){const J=new qT(V),we=new cM(x,J,O);return S.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return sM(yield _y(S),we)})),()=>{J.Aa(),S.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return aM(yield _y(S),we)}))}}(hi(y),T,h,p)}function yy(n,e){return function(t,r){const i=new ui;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function nV(n,e,t){return gM.apply(this,arguments)}(yield $M(t),r,i)})),i.promise}(hi(n),e)}function XM(n,e,t){const r=t.docs.get(e._key),i=new Cg(n);return new bd(n,i,e._key,r,new bg(t.hasPendingWrites,t.fromCache),e.converter)}class wB extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=wg(e)}get(e){const t=Af(e,this._firestore),r=new cB(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ht();const o=i[0];if(o.isFoundDocument())return new Rw(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new Rw(this._firestore,r,t._key,null,t.converter);throw ht()})}set(e,t,r){const i=Af(e,this._firestore),o=eI(i.converter,t,r),c=YT(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const o=Af(e,this._firestore);let c;return c="string"==typeof(t=(0,R.m9)(t))||t instanceof Ed?KM(this._dataReader,"Transaction.update",o._key,t,r,i):WM(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,c),this}delete(e){const t=Af(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Af(e,this._firestore),r=new Cg(this._firestore);return super.get(e).then(i=>new bd(this._firestore,r,t._key,i._document,new bg(!1,!1),t.converter))}}function e1(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Le("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function TR(){if("undefined"==typeof Uint8Array)throw new Le("unimplemented","Uint8Arrays are not available in this environment.")}function IR(){if(!function ek(){return"undefined"!=typeof atob}())throw new Le("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Jh=Or.SDK_VERSION,(0,Or._registerComponent)(new Eo.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),o=new _r(i,new mA(t.getProvider("auth-internal")),new _A(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC")),(0,Or.registerVersion)(WC,"3.4.9",n),(0,Or.registerVersion)(WC,"3.4.9","esm2017")}();class Lw{constructor(e){this._delegate=e}static fromBase64String(e){return IR(),new Lw(Gu.fromBase64String(e))}static fromUint8Array(e){return TR(),new Lw(Gu.fromUint8Array(e))}toBase64(){return IR(),this._delegate.toBase64()}toUint8Array(){return TR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function t1(n){return function xB(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class MB{enableIndexedDbPersistence(e,t){return function FV(n,e){nR(n=mn(n,_r));const t=hi(n),r=n._freezeSettings(),i=new FM;return tR(t,i,new Lk(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function LV(n){nR(n=mn(n,_r));const e=hi(n),t=n._freezeSettings(),r=new FM;return tR(e,r,new yV(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function UV(n){if(n._initialized&&!n._terminated)throw new Le(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ui;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(t=(0,be.Z)(function*(r){if(!Co.vt())return Promise.resolve();const i=r+"main";yield Co.delete(i)}),function(r){return t.apply(this,arguments)})(bn(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class SR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Fl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Kp("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function PV(n,e,t,r={}){var i;const o=(n=mn(n,Nw))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&Kp("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=li.MOCK_USER;else{c=(0,R.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Le(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new li(p)}n._authCredentials=new gA(new QC(c,h))}}(this._delegate,e,t,r)}enableNetwork(){return function BV(n){return function CV(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield jk(n),t=yield Hk(n);return e.setNetworkEnabled(!0),function(r){const i=st(r);return i.wu.delete(0),Mw(i)}(t)}))}(hi(n=mn(n,_r)))}(this._delegate)}disableNetwork(){return function jV(n){return function TV(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield jk(n),t=yield Hk(n);return e.setNetworkEnabled(!1),(r=(0,be.Z)(function*(i){const o=st(i);o.wu.add(0),yield cy(o),o.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(hi(n=mn(n,_r)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Zk("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function VV(n){return function(e){const t=new ui;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function oV(n,e){return wM.apply(this,arguments)}(yield $M(e),t)})),t.promise}(hi(n=mn(n,_r)))}(this._delegate)}onSnapshotsInSync(e){return function vB(n,e){return function DV(n,e){const t=new qT(e);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield _y(n),i=t,st(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield _y(n),i=t,void st(r).bu.delete(i);var r,i}))}}(hi(n=mn(n,_r)),ZM(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new vy(this,Qk(this._delegate,e))}catch(t){throw Ws(t,"collection()","Firestore.collection()")}}doc(e){try{return new Za(this,zT(this._delegate,e))}catch(t){throw Ws(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ks(this,function NV(n,e){if(n=mn(n,Nw),GM("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Le(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ws(n,null,(t=e,new qa(dn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ws(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function EB(n,e,t){n=mn(n,_r);const r=Object.assign(Object.assign({},uB),t);return function(i){if(i.maxAttempts<1)throw new Le(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function AV(n,e,t){const r=new ui;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const i=yield(o=n,GT(o).then(c=>c.datastore));var o;new EV(n.asyncQueue,i,t,e,r).run()})),r.promise}(hi(n),i=>e(new wB(n,i)),r)}(this._delegate,t=>e(new DR(this,t)))}batch(){return hi(this._delegate),new AR(new vR(this._delegate,e=>yy(this._delegate,e)))}loadBundle(e){return function HV(n,e){const t=hi(n=mn(n,_r)),r=new RV;return function xV(n,e,t,r){const i=function(o,c){let h;return h="string"==typeof o?(new TextEncoder).encode(o):o,p=function(p,y){if(p instanceof Uint8Array)return Uk(p,y);if(p instanceof ArrayBuffer)return Uk(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new vV(p,c);var p}(t,xw(e));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function _V(n,e,t){const r=st(n);var i;(i=(0,be.Z)(function*(o,c,h){try{const p=yield c.getMetadata();if(yield function(x,O){const V=st(x),J=xr(O.createTime);return V.persistence.runTransaction("hasNewerBundle","readonly",we=>V._s.getBundleMetadata(we,O.id)).then(we=>!!we&&we.createTime.compareTo(J)>=0)}(o.localStore,p))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(x=p).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);h._updateProgress(Dk(p));const y=new YU(p,o.localStore,c.M);let T=yield c.ma();for(;T;){const x=yield y.Fu(T);x&&h._updateProgress(x),T=yield c.ma()}const S=yield y.complete();return yield wd(o,S.Lu,void 0),yield function(x,O){const V=st(x);return V.persistence.runTransaction("Save bundle","readwrite",J=>V._s.saveBundleMetadata(J,O))}(o.localStore,p),h._completeWith(S.progress),Promise.resolve(S.Bu)}catch(p){return Kp("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var x}),function(o,c,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield $M(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function $V(n,e){return function MV(n,e){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(t,r){const i=st(t);return i.persistence.runTransaction("Get named query","readonly",o=>i._s.getNamedQuery(o,r))}(yield HM(n),e)}))}(hi(n=mn(n,_r)),e).then(t=>t?new ws(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ks(this,t):null)}}class tI extends JM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lw(new Gu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Za.forKey(t,this.firestore,null)}}class DR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new tI(e)}get(e){const t=Ig(e);return this._delegate.get(t).then(r=>new Uw(this._firestore,new bd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Ig(e);return r?(e1("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Ig(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Ig(e);return this._delegate.delete(t),this}}class AR{constructor(e){this._delegate=e}set(e,t,r){const i=Ig(e);return r?(e1("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=Ig(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=Ig(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Tg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Ow(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Vw(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Tg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new Tg(e,new tI(e),t),i.set(t,o)),o}}Tg.INSTANCES=new WeakMap;class Za{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tI(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Za(t,new ur(t._delegate,r,new tt(e)))}static forKey(e,t,r){return new Za(t,new ur(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new vy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new vy(this.firestore,Qk(this._delegate,e))}catch(t){throw Ws(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,R.m9)(e))instanceof ur&&Jk(this._delegate,e)}set(e,t){t=e1("DocumentReference.set",t);try{return t?wR(this._delegate,e,t):wR(this._delegate,e)}catch(r){throw Ws(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?ER(this._delegate,e):ER(this._delegate,e,t,...r)}catch(i){throw Ws(i,"updateDoc()","DocumentReference.update()")}}delete(){return function _B(n){return yy(mn(n.firestore,_r),[new Uu(n._key,Ur.none())])}(this._delegate)}onSnapshot(...e){const t=xR(e),r=MR(e,i=>new Uw(this.firestore,new bd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return bR(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function hB(n){n=mn(n,ur);const e=mn(n.firestore,_r),t=hi(e),r=new Cg(e);return function IV(n,e){const t=new ui;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,o,c){try{const h=yield function(p,y){const T=st(p);return T.persistence.runTransaction("read document","readonly",S=>T.fi.Ls(S,y))}(i,o);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new Le(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=fy(h,`Failed to get document '${o} from cache`);c.reject(p)}}),function(i,o,c){return r.apply(this,arguments)})(yield HM(n),e,t);var r})),t.promise}(t,n._key).then(i=>new bd(e,r,n._key,i,new bg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function fB(n){n=mn(n,ur);const e=mn(n.firestore,_r);return $k(hi(e),n._key,{source:"server"}).then(t=>XM(e,n,t))}(this._delegate):function dB(n){n=mn(n,ur);const e=mn(n.firestore,_r);return $k(hi(e),n._key).then(t=>XM(e,n,t))}(this._delegate),t.then(r=>new Uw(this.firestore,new bd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Za(this.firestore,this._delegate.withConverter(e?Tg.getInstance(this.firestore,e):null))}}function Ws(n,e,t){return n.message=n.message.replace(e,t),n}function xR(n){for(const e of n)if("object"==typeof e&&!t1(e))return e;return{}}function MR(n,e){var t,r;let i;return i=t1(n[0])?n[0]:t1(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Uw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Za(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return cR(this._delegate,e._delegate)}}class Vw extends Uw{data(e){const t=this._delegate.data(e);return function YC(n,e){n||ht()}(void 0!==t),t}}class Ks{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tI(e)}where(e,t,r){try{return new Ks(this.firestore,Df(this._delegate,function eB(n,e,t){const r=e,i=XT("where",n);return new XV(i,r,t)}(e,t,r)))}catch(i){throw Ws(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ks(this.firestore,Df(this._delegate,function nB(n,e="asc"){const t=e,r=XT("orderBy",n);return new tB(r,t)}(e,t)))}catch(r){throw Ws(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ks(this.firestore,Df(this._delegate,function rB(n){return Kk("limit",n),new hR("limit",n,"F")}(e)))}catch(t){throw Ws(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ks(this.firestore,Df(this._delegate,function iB(n){return Kk("limitToLast",n),new hR("limitToLast",n,"L")}(e)))}catch(t){throw Ws(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ks(this.firestore,Df(this._delegate,function sB(...n){return new fR("startAt",n,!0)}(...e)))}catch(t){throw Ws(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ks(this.firestore,Df(this._delegate,function oB(...n){return new fR("startAfter",n,!1)}(...e)))}catch(t){throw Ws(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ks(this.firestore,Df(this._delegate,function aB(...n){return new pR("endBefore",n,!1)}(...e)))}catch(t){throw Ws(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ks(this.firestore,Df(this._delegate,function lB(...n){return new pR("endAt",n,!0)}(...e)))}catch(t){throw Ws(t,"endAt()","Query.endAt()")}}isEqual(e){return Xk(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function gB(n){n=mn(n,ws);const e=mn(n.firestore,_r),t=hi(e),r=new Cg(e);return function SV(n,e){const t=new ui;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(i,o,c){try{const h=yield UT(i,o,!0),p=new Mk(o,h._i),y=p.Wu(h.documents),T=p.applyChanges(y,!1);c.resolve(T.snapshot)}catch(h){const p=fy(h,`Failed to execute query '${o} against cache`);c.reject(p)}}),function(i,o,c){return r.apply(this,arguments)})(yield HM(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Sf(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function mB(n){n=mn(n,ws);const e=mn(n.firestore,_r),t=hi(e),r=new Cg(e);return qk(t,n._query,{source:"server"}).then(i=>new Sf(e,r,n,i))}(this._delegate):function pB(n){n=mn(n,ws);const e=mn(n.firestore,_r),t=hi(e),r=new Cg(e);return dR(n._query),qk(t,n._query).then(i=>new Sf(e,r,n,i))}(this._delegate),t.then(r=>new n1(this.firestore,new Sf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=xR(e),r=MR(e,i=>new n1(this.firestore,new Sf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return bR(this._delegate,t,r)}withConverter(e){return new Ks(this.firestore,this._delegate.withConverter(e?Tg.getInstance(this.firestore,e):null))}}class NB{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Vw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class n1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ks(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Vw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new NB(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Vw(this._firestore,r))})}isEqual(e){return cR(this._delegate,e._delegate)}}class vy extends Ks{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Za(this.firestore,e):null}doc(e){try{return new Za(this.firestore,void 0===e?zT(this._delegate):zT(this._delegate,e))}catch(t){throw Ws(t,"doc()","CollectionReference.doc()")}}add(e){return function yB(n,e){const t=mn(n.firestore,_r),r=zT(n),i=eI(n.converter,e);return yy(t,[YT(wg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Ur.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Za(this.firestore,t))}isEqual(e){return Jk(this._delegate,e._delegate)}withConverter(e){return new vy(this.firestore,this._delegate.withConverter(e?Tg.getInstance(this.firestore,e):null))}}function Ig(n){return mn(n,ur)}class r1{constructor(...e){this._delegate=new Ed(...e)}static documentId(){return new r1(zr.keyField().canonicalString())}isEqual(e){return(e=(0,R.m9)(e))instanceof Ed&&this._delegate._internalPath.isEqual(e._internalPath)}}class Sg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function CB(){return new zM("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Sg(e)}static delete(){const e=function bB(){return new kw("deleteField")}();return e._methodName="FieldValue.delete",new Sg(e)}static arrayUnion(...e){const t=function TB(...n){return new zV("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Sg(t)}static arrayRemove(...e){const t=function IB(...n){return new WV("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Sg(t)}static increment(e){const t=function SB(n){return new KV("increment",n)}(e);return t._methodName="FieldValue.increment",new Sg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const kB={Firestore:SR,GeoPoint:WT,Timestamp:lr,Blob:Lw,Transaction:DR,WriteBatch:AR,DocumentReference:Za,DocumentSnapshot:Uw,Query:Ks,QueryDocumentSnapshot:Vw,QuerySnapshot:n1,CollectionReference:vy,FieldPath:r1,FieldValue:Sg,setLogLevel:function PB(n){!function KC(n){Va.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function OB(n){(function RB(n,e){n.INTERNAL.registerComponent(new Eo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},kB)))})(n,(e,t)=>new SR(e,t,new MB)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(Iu.Z);var i1=F(6451),nI=F(5363),FB=F(6063);class LB extends mo.x{constructor(e=1/0,t=1/0,r=FB.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:c}=this;t||(r.push(e),!i&&r.push(o.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let c=0;c<o.length&&!e.closed;c+=r?1:2)e.next(o[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const c=t.now();let h=0;for(let p=1;p<r.length&&r[p]<=c;p+=2)h=p;h&&r.splice(0,h+1)}}}var PR=F(3099);function NR(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,PR.B)({connector:()=>new LB(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function kR(n,e){return(0,tv.m)(e)?ni(()=>n,e):ni(()=>n)}var s1=F(9468);F(5867);const OR=new Map,HB={activated:!1,tokenObservers:[]},$B={initialized:!1,enabled:!1};function Bi(n){return OR.get(n)||HB}function jl(n,e){OR.set(n,e)}function iI(){return $B}class WB{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,be.Z)(function*(){t.stop();try{t.pending=new R.BH,yield function KB(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new R.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ys=new R.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function LR(n){if(!Bi(n).activated)throw Ys.create("use-before-activation",{appName:n.name})}function u1(n,e){return c1.apply(this,arguments)}function c1(){return c1=(0,be.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const o={method:"POST",body:JSON.stringify(e),headers:r};let c,h;try{c=yield fetch(n,o)}catch(S){throw Ys.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==c.status)throw Ys.create("fetch-status-error",{httpStatus:c.status});try{h=yield c.json()}catch(S){throw Ys.create("fetch-parse-error",{originalErrorMessage:S.message})}const p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw Ys.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(p[1]),T=Date.now();return{token:h.token,expireTimeMillis:T+y,issuedAtTimeMillis:T}}),c1.apply(this,arguments)}function ej(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Bw="firebase-app-check-store";let aI=null;function VR(){return aI||(aI=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ys.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Bw,{keyPath:"compositeKey"})}}catch(t){e(Ys.create("storage-open",{originalErrorMessage:t.message}))}}),aI)}function d1(){return d1=(0,be.Z)(function*(n,e){const r=(yield VR()).transaction(Bw,"readwrite"),o=r.objectStore(Bw).put({compositeKey:n,value:e});return new Promise((c,h)=>{o.onsuccess=p=>{c()},r.onerror=p=>{var y;h(Ys.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})}),d1.apply(this,arguments)}const jw=new bo.Yd("@firebase/app-check");function $R(n,e){return(0,R.hl)()?function ij(n,e){return function BR(n,e){return d1.apply(this,arguments)}(function HR(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{jw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function qR(){return iI().enabled}function GR(){return g1.apply(this,arguments)}function g1(){return g1=(0,be.Z)(function*(){const n=iI();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),g1.apply(this,arguments)}const cj={error:"UNKNOWN_ERROR"};function dj(n){return R.US.encodeString(JSON.stringify(n),!1)}function lI(n){return m1.apply(this,arguments)}function m1(){return m1=(0,be.Z)(function*(n,e=!1){const t=n.app;LR(t);const r=Bi(t);let o,i=r.token;if(!i){const p=yield r.cachedTokenPromise;p&&uI(p)&&(i=p)}if(!e&&i&&uI(i))return{token:i.token};let h,c=!1;if(qR()){r.exchangeTokenPromise||(r.exchangeTokenPromise=u1(ej(t,yield GR()),n.heartbeatServiceProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0);const p=yield r.exchangeTokenPromise;return yield $R(t,p),jl(t,Object.assign(Object.assign({},r),{token:p})),{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(p=>(r.exchangeTokenPromise=void 0,p)),c=!0),i=yield r.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?jw.warn(p.message):jw.error(p),o=p}return i?(h={token:i.token},jl(t,Object.assign(Object.assign({},r),{token:i})),yield $R(t,i)):h=fj(o),c&&zR(t,h),h}),m1.apply(this,arguments)}function y1(n,e){const t=Bi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),jl(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function ZR(n){const{app:e}=n,t=Bi(e);let r=t.tokenRefresher;r||(r=function hj(n){const{app:e}=n;return new WB((0,be.Z)(function*(){let r;if(r=Bi(e).token?yield lI(n,!0):yield lI(n),r.error)throw r.error}),()=>!0,()=>{const t=Bi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),jl(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function zR(n,e){const t=Bi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function uI(n){return n.expireTimeMillis-Date.now()>0}function fj(n){return{token:dj(cj),error:n}}class pj{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Bi(this.app);for(const t of e)y1(this.app,t.next);return Promise.resolve()}}const tO="app-check-internal";!function Aj(){(0,Or._registerComponent)(new Eo.wA("app-check",n=>function gj(n,e){return new pj(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(tO).initialize()})),(0,Or._registerComponent)(new Eo.wA(tO,n=>function mj(n){return{getToken:e=>lI(n,e),addTokenListener:e=>function _1(n,e,t,r){const{app:i}=n,o=Bi(i),c={next:t,error:r,type:e};if(jl(i,Object.assign(Object.assign({},o),{tokenObservers:[...o.tokenObservers,c]})),o.token&&uI(o.token)){const h=o.token;Promise.resolve().then(()=>{t({token:h.token}),ZR(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>ZR(n))}(n,"INTERNAL",e),removeTokenListener:e=>y1(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Or.registerVersion)("@firebase/app-check","0.5.8")}();class Hw{constructor(){return(0,rn.vb)("app-check")}}"undefined"!=typeof window&&window;var dI=F(127);const C1=new u.OlP("angularfire2.auth.use-emulator"),T1=new u.OlP("angularfire2.auth.settings"),I1=new u.OlP("angularfire2.auth.tenant-id"),S1=new u.OlP("angularfire2.auth.langugage-code"),D1=new u.OlP("angularfire2.auth.use-device-language"),A1=new u.OlP("angularfire.auth.persistence"),x1=(n,e,t,r,i,o,c,h)=>(0,er.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,o&&p.useDeviceLanguage(),c)for(const[y,T]of Object.entries(c))p.settings[y]=T;return h&&p.setPersistence(h),p},[t,r,i,o,c,h]);let $w=(()=>{class n{constructor(t,r,i,o,c,h,p,y,T,S,x,O){const V=new mo.x,J=dt(void 0).pipe((0,nI.Q)(c.outsideAngular),ni(()=>o.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,5881)))),(0,yt.U)(()=>(0,er.on)(t,o,r)),(0,yt.U)(we=>x1(we,o,h,y,T,S,p,x)),NR({bufferSize:1,refCount:!1}));if($r(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=dt(null);else{J.pipe(mh()).subscribe();const Ge=J.pipe(ni(Xe=>Xe.getRedirectResult().then(xt=>xt,()=>null)),rn.iC,NR({bufferSize:1,refCount:!1})),nt=J.pipe(ni(Xe=>new cs.y(xt=>({unsubscribe:o.runOutsideAngular(()=>Xe.onAuthStateChanged(Nt=>xt.next(Nt),Nt=>xt.error(Nt),()=>xt.complete()))})))),rt=J.pipe(ni(Xe=>new cs.y(xt=>({unsubscribe:o.runOutsideAngular(()=>Xe.onIdTokenChanged(Nt=>xt.next(Nt),Nt=>xt.error(Nt),()=>xt.complete()))}))));this.authState=Ge.pipe(kR(nt),(0,s1.R)(c.outsideAngular),(0,nI.Q)(c.insideAngular)),this.user=Ge.pipe(kR(rt),(0,s1.R)(c.outsideAngular),(0,nI.Q)(c.insideAngular)),this.idToken=this.user.pipe(ni(Xe=>Xe?(0,Pn.D)(Xe.getIdToken()):dt(null))),this.idTokenResult=this.user.pipe(ni(Xe=>Xe?(0,Pn.D)(Xe.getIdTokenResult()):dt(null))),this.credential=(0,i1.T)(Ge,V,this.authState.pipe(Pa(Xe=>!Xe))).pipe((0,yt.U)(Xe=>(null==Xe?void 0:Xe.user)?Xe:null),(0,s1.R)(c.outsideAngular),(0,nI.Q)(c.insideAngular))}return(0,er.pX)(this,J,o,{spy:{apply:(we,Ge,nt)=>{(we.startsWith("signIn")||we.startsWith("createUser"))&&nt.then(rt=>V.next(rt))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(er.Dh),u.LFG(er.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(rn.HU),u.LFG(C1,8),u.LFG(T1,8),u.LFG(I1,8),u.LFG(S1,8),u.LFG(D1,8),u.LFG(A1,8),u.LFG(Hw,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Rj=(()=>{class n{constructor(){dI.Z.registerVersion("angularfire",rn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[$w]}),n})();function rO(n,e){return function Oj(n,e=xp.z){return new cs.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function M1(n,e){return rO(n,e).pipe((0,yt.U)(t=>({payload:t,type:"query"})))}function hI(n,e){return M1(n,e).pipe(vm(void 0),Tu(),(0,yt.U)(([t,r])=>{const i=r.payload.docChanges(),o=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const p=i.find(T=>T.doc.ref.isEqual(c.ref)),y=null==t?void 0:t.payload.docs.find(T=>T.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(c.metadata)||o.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),o}))}function iO(n,e,t){return hI(n,t).pipe(xc((r,i)=>function Lj(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Uj(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return P1(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return P1(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return P1(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),Hc(),(0,yt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function P1(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function sO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class oO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=hI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,yt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(vm(void 0),Tu(),Pa(([r,i])=>i.length>0||!r),(0,yt.U)(([r,i])=>i),rn.iC)}auditTrail(e){return this.stateChanges(e).pipe(xc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sO(e);return iO(this.query,t,this.afs.schedulers.outsideAngular).pipe(rn.iC)}valueChanges(e={}){return M1(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),rn.iC)}get(e){return(0,Pn.D)(this.query.get(e)).pipe(rn.iC)}add(e){return this.ref.add(e)}doc(e){return new aO(this.ref.doc(e),this.afs)}}class aO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=cO(r,t);return new oO(i,o,this.afs)}snapshotChanges(){return function Fj(n,e){return rO(n,e).pipe(vm(void 0),Tu(),(0,yt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(rn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,yt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Pn.D)(this.ref.get(e)).pipe(rn.iC)}}class Vj{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?hI(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Pa(t=>t.length>0),rn.iC):hI(this.query,this.afs.schedulers.outsideAngular).pipe(rn.iC)}auditTrail(e){return this.stateChanges(e).pipe(xc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=sO(e);return iO(this.query,t,this.afs.schedulers.outsideAngular).pipe(rn.iC)}valueChanges(e={}){return M1(this.query,this.afs.schedulers.outsideAngular).pipe((0,yt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),rn.iC)}get(e){return(0,Pn.D)(this.query.get(e)).pipe(rn.iC)}}const lO=new u.OlP("angularfire2.enableFirestorePersistence"),uO=new u.OlP("angularfire2.firestore.persistenceSettings"),Bj=new u.OlP("angularfire2.firestore.settings"),jj=new u.OlP("angularfire2.firestore.use-emulator");function cO(n,e=(t=>t)){return{query:e(n),ref:n}}let qw=(()=>{class n{constructor(t,r,i,o,c,h,p,y,T,S,x,O,V,J,we,Ge,nt){this.schedulers=p;const rt=(0,er.on)(t,h,r),Xe=T;S&&x1(rt,h,x,V,J,we,O,Ge),[this.firestore,this.persistenceEnabled$]=(0,er.cc)(`${rt.name}.firestore`,"AngularFirestore",rt.name,()=>{const xt=h.runOutsideAngular(()=>rt.firestore());if(o&&xt.settings(o),Xe&&xt.useEmulator(...Xe),i&&!$r(c)){const Nt=()=>{try{return(0,Pn.D)(xt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(fn){return"undefined"!=typeof console&&console.warn(fn),dt(!1)}};return[xt,h.runOutsideAngular(Nt)]}return[xt,dt(!1)]},[o,Xe,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:c}=cO(i,r),h=this.schedulers.ngZone.run(()=>o);return new oO(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),o=this.firestore.collectionGroup(t);return new Vj(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new aO(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(er.Dh),u.LFG(er.xv,8),u.LFG(lO,8),u.LFG(Bj,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(rn.HU),u.LFG(uO,8),u.LFG(jj,8),u.LFG($w,8),u.LFG(C1,8),u.LFG(T1,8),u.LFG(I1,8),u.LFG(S1,8),u.LFG(D1,8),u.LFG(A1,8),u.LFG(Hw,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Hj=(()=>{class n{constructor(){dI.Z.registerVersion("angularfire",rn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:lO,useValue:!0},{provide:uO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[qw]}),n})(),wy=(()=>{class n{constructor(t,r){this.http=t,this.fireservices=r,this.get_allSports().subscribe(i=>{this.sports2=i.map(o=>o.payload.doc.data())})}get_allSports(){return this.fireservices.collection("Sports").snapshotChanges()}f(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Km),u.LFG(qw))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class dO{}const Cd="*";function hO(n,e){return{type:7,name:n,definitions:e,options:{}}}function N1(n,e=null){return{type:4,styles:e,timings:n}}function fO(n,e=null){return{type:2,steps:n,options:e}}function Dg(n){return{type:6,styles:n,offset:null}}function fI(n,e,t){return{type:0,name:n,styles:e,options:t}}function k1(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function pO(n){Promise.resolve(null).then(n)}class Gw{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){pO(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class gO{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?pO(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==o&&this._onFinish()}),c.onDestroy(()=>{++r==o&&this._onDestroy()}),c.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((c,h)=>Math.max(c,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}var qj=F(2587);let xf=(()=>{class n{constructor(t,r,i,o){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=o,this.afAuth.authState.subscribe(c=>{c?(this.userData=c,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{console.log(i),this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new qj.Q).then(t=>{t&&this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(qw),u.LFG($w),u.LFG(Li),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Gj=(()=>{class n{transform(t,r){return t?r?(r=r.toLocaleLowerCase(),t.filter(i=>i.toLocaleLowerCase().includes(r))):t:[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=u.Yjl({name:"appFilter",type:n,pure:!0}),n})();const pI=function(){return["/sports"]};function Zj(n,e){if(1&n&&(u.TgZ(0,"button",52),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.s9C("fragment",t.id),u.Q6J("routerLink",u.DdM(3,pI)),u.xp6(1),u.hij("",t.naziv," ")}}function zj(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"li",53,54)(2,"p",55,56),u.NdJ("mouseover",function(){const o=u.CHM(t).$implicit;return u.oxw(2).enterSearch(o)})("click",function(){const o=u.CHM(t).$implicit;u.oxw();const c=u.MAs(44);return u.oxw().hideSearch(o),c.value=o}),u._uU(4),u.qZA()()}if(2&n){const t=e.$implicit;u.s9C("value",t),u.xp6(4),u.Oqu(t)}}function Wj(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",22)(1,"ul",23)(2,"li",24)(3,"a",25),u.NdJ("click",function(){return u.CHM(t),u.oxw().changePosition(0)}),u._uU(4,"Home "),u.TgZ(5,"span",26),u._uU(6,"(current)"),u.qZA()()(),u.TgZ(7,"li",27)(8,"a",28),u.NdJ("click",function(){return u.CHM(t),u.oxw().changePosition(650)}),u._uU(9,"Histoy"),u.qZA()(),u.TgZ(10,"li",27)(11,"a",29),u.NdJ("click",function(){return u.CHM(t),u.oxw().changePosition(650)}),u._uU(12,"About Us"),u.qZA()(),u.TgZ(13,"li",27)(14,"a",30),u.NdJ("click",function(){return u.CHM(t),u.oxw().changePosition(650)}),u._uU(15,"Contact"),u.qZA()(),u.TgZ(16,"li",27)(17,"a",31),u.NdJ("click",function(){return u.CHM(t),u.oxw().changePosition(650)}),u._uU(18,"Author"),u.qZA()(),u.TgZ(19,"li",27)(20,"a",32),u.NdJ("click",function(){return u.CHM(t),u.oxw().changePosition(650)}),u._uU(21,"CRUD"),u.qZA()(),u.TgZ(22,"li",27)(23,"a",33),u._uU(24,"Documentation"),u.qZA()(),u.TgZ(25,"li",27)(26,"a",34),u.NdJ("click",function(){return u.CHM(t),u.oxw().changePosition(650)}),u._UZ(27,"i",35),u._uU(28,"User Profile "),u.qZA()(),u.TgZ(29,"li",27)(30,"a",36),u.NdJ("click",function(){return u.CHM(t),u.oxw().authService.SignOut()}),u._UZ(31,"i",37),u._uU(32,"Log out "),u.qZA()(),u.TgZ(33,"li",38),u.NdJ("mouseenter",function(){return u.CHM(t),u.oxw().rotate()}),u.TgZ(34,"div",39),u.NdJ("mouseleave",function(){return u.CHM(t),u.oxw().hideDdl()}),u.TgZ(35,"button",40),u.NdJ("mouseenter",function(){return u.CHM(t),u.oxw().showDdl()}),u.TgZ(36,"label",41),u._uU(37,"Sports"),u.qZA()(),u.TgZ(38,"div",42),u.NdJ("mouseleave",function(){return u.CHM(t),u.oxw().hideDdl()}),u.YNc(39,Zj,2,4,"button",43),u.qZA()()()(),u.TgZ(40,"div")(41,"div",44)(42,"form",45)(43,"input",46,47),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().searchValue=i})("ngModelChange",function(i){return u.CHM(t),u.oxw().searchText=i})("click",function(){return u.CHM(t),u.oxw().showHide2()}),u.qZA(),u.TgZ(45,"button",48,49),u.NdJ("click",function(){u.CHM(t);const i=u.MAs(44);return u.oxw().changePosition2(i.placeholder,i.value),i.value="",i.placeholder=""}),u._uU(47,"Search"),u.qZA()()(),u.TgZ(48,"ul",50),u.YNc(49,zj,5,2,"li",51),u.ALo(50,"appFilter"),u.qZA()()()}if(2&n){const t=u.oxw();u.xp6(39),u.Q6J("ngForOf",t.sports2),u.xp6(4),u.Q6J("ngModel",t.searchValue)("ngModel",t.searchText),u.xp6(6),u.Q6J("ngForOf",u.xi3(50,4,t.characters,t.searchText))}}function Kj(n,e){if(1&n&&(u.TgZ(0,"button",52),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.s9C("fragment",t.id),u.Q6J("routerLink",u.DdM(3,pI)),u.xp6(1),u.hij("",t.naziv," ")}}function Yj(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"li",53,54)(2,"p",55,56),u.NdJ("mouseover",function(){const o=u.CHM(t).$implicit;return u.oxw(2).enterSearch(o)})("click",function(){const o=u.CHM(t).$implicit;u.oxw();const c=u.MAs(39);return u.oxw().hideSearch(o),c.value=o}),u._uU(4),u.qZA()()}if(2&n){const t=e.$implicit;u.s9C("value",t),u.xp6(4),u.Oqu(t)}}function Qj(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",22)(1,"ul",23)(2,"li",24)(3,"a",25),u.NdJ("click",function(){return u.CHM(t),u.oxw().changePosition(0)}),u._uU(4,"Home "),u.TgZ(5,"span",26),u._uU(6,"(current)"),u.qZA()()(),u.TgZ(7,"li",27)(8,"a",28),u.NdJ("click",function(){return u.CHM(t),u.oxw().changePosition(650)}),u._uU(9,"Histoy"),u.qZA()(),u.TgZ(10,"li",27)(11,"a",29),u.NdJ("click",function(){return u.CHM(t),u.oxw().changePosition(650)}),u._uU(12,"About Us"),u.qZA()(),u.TgZ(13,"li",27)(14,"a",30),u.NdJ("click",function(){return u.CHM(t),u.oxw().changePosition(650)}),u._uU(15,"Contact"),u.qZA()(),u.TgZ(16,"li",27)(17,"a",31),u.NdJ("click",function(){return u.CHM(t),u.oxw().changePosition(650)}),u._uU(18,"Author"),u.qZA()(),u.TgZ(19,"li",27)(20,"a",32),u.NdJ("click",function(){return u.CHM(t),u.oxw().changePosition(650)}),u._uU(21,"CRUD"),u.qZA()(),u.TgZ(22,"li",27)(23,"a",33),u._uU(24,"Documentation"),u.qZA()(),u.TgZ(25,"li",27)(26,"a",57),u.NdJ("click",function(){return u.CHM(t),u.oxw().changePosition(650)}),u._uU(27,"Sign In"),u.qZA()(),u.TgZ(28,"li",38),u.NdJ("mouseenter",function(){return u.CHM(t),u.oxw().rotate()}),u.TgZ(29,"div",39),u.NdJ("mouseleave",function(){return u.CHM(t),u.oxw().hideDdl()}),u.TgZ(30,"button",40),u.NdJ("mouseenter",function(){return u.CHM(t),u.oxw().showDdl()}),u.TgZ(31,"label",41),u._uU(32,"Sports"),u.qZA()(),u.TgZ(33,"div",42),u.NdJ("mouseleave",function(){return u.CHM(t),u.oxw().hideDdl()}),u.YNc(34,Kj,2,4,"button",43),u.qZA()()()(),u.TgZ(35,"div")(36,"div",44)(37,"form",45)(38,"input",46,47),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().searchValue=i})("ngModelChange",function(i){return u.CHM(t),u.oxw().searchText=i})("click",function(){return u.CHM(t),u.oxw().showHide2()}),u.qZA(),u.TgZ(40,"button",48,49),u.NdJ("click",function(){u.CHM(t);const i=u.MAs(39);return u.oxw().changePosition2(i.placeholder,i.value),i.value="",i.placeholder=""}),u._uU(42,"Search"),u.qZA()()(),u.TgZ(43,"ul",50),u.YNc(44,Yj,5,2,"li",51),u.ALo(45,"appFilter"),u.qZA()()()}if(2&n){const t=u.oxw();u.xp6(34),u.Q6J("ngForOf",t.sports2),u.xp6(4),u.Q6J("ngModel",t.searchValue)("ngModel",t.searchText),u.xp6(6),u.Q6J("ngForOf",u.xi3(45,4,t.characters,t.searchText))}}function Jj(n,e){if(1&n&&(u.TgZ(0,"button",52),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.s9C("fragment",t.id),u.Q6J("routerLink",u.DdM(3,pI)),u.xp6(1),u.hij("",t.naziv," ")}}function Xj(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",58),u.NdJ("mouseleave",function(){return u.CHM(t),u.oxw().hideBurger()}),u.TgZ(1,"ul",23)(2,"li",24)(3,"a",59),u._uU(4,"Home "),u.TgZ(5,"span",26),u._uU(6,"(current)"),u.qZA()()(),u.TgZ(7,"li",27)(8,"a",60),u._uU(9,"Histoy"),u.qZA()(),u.TgZ(10,"li",27)(11,"a",61),u._uU(12,"About Us"),u.qZA()(),u.TgZ(13,"li",27)(14,"a",62),u._uU(15,"Contact"),u.qZA()(),u.TgZ(16,"li",27)(17,"a",63),u._uU(18,"Author"),u.qZA()(),u.TgZ(19,"li",27)(20,"a",32),u.NdJ("click",function(){return u.CHM(t),u.oxw().changePosition(650)}),u._uU(21,"CRUD"),u.qZA()(),u.TgZ(22,"li",27)(23,"a",33),u._uU(24,"Documentation"),u.qZA()(),u.TgZ(25,"li",27)(26,"a",34),u.NdJ("click",function(){return u.CHM(t),u.oxw().changePosition(650)}),u._UZ(27,"i",35),u._uU(28,"User Profile "),u.qZA()(),u.TgZ(29,"li",27)(30,"a",36),u.NdJ("click",function(){return u.CHM(t),u.oxw().authService.SignOut()}),u._UZ(31,"i",37),u._uU(32,"Log out "),u.qZA()(),u.TgZ(33,"li",64)(34,"div",65),u.NdJ("mouseleave",function(){return u.CHM(t),u.oxw().hideDdl1()}),u.TgZ(35,"button",66),u.NdJ("click",function(){return u.CHM(t),u.oxw().showDdl1()}),u._uU(36," Sports "),u.qZA(),u.TgZ(37,"div",67),u.NdJ("mouseleave",function(){return u.CHM(t),u.oxw().hideDdl1()}),u.YNc(38,Jj,2,4,"button",43),u.qZA()()()(),u._UZ(39,"div"),u.qZA()}if(2&n){const t=u.oxw();u.xp6(38),u.Q6J("ngForOf",t.sports2)}}function e3(n,e){if(1&n&&(u.TgZ(0,"button",52),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.s9C("fragment",t.id),u.Q6J("routerLink",u.DdM(3,pI)),u.xp6(1),u.hij("",t.naziv," ")}}function t3(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",58),u.NdJ("mouseleave",function(){return u.CHM(t),u.oxw().hideBurger()}),u.TgZ(1,"ul",23)(2,"li",24)(3,"a",59),u._uU(4,"Home "),u.TgZ(5,"span",26),u._uU(6,"(current)"),u.qZA()()(),u.TgZ(7,"li",27)(8,"a",60),u._uU(9,"Histoy"),u.qZA()(),u.TgZ(10,"li",27)(11,"a",61),u._uU(12,"About Us"),u.qZA()(),u.TgZ(13,"li",27)(14,"a",62),u._uU(15,"Contact"),u.qZA()(),u.TgZ(16,"li",27)(17,"a",63),u._uU(18,"Author"),u.qZA()(),u.TgZ(19,"li",27)(20,"a",32),u.NdJ("click",function(){return u.CHM(t),u.oxw().changePosition(650)}),u._uU(21,"CRUD"),u.qZA()(),u.TgZ(22,"li",27)(23,"a",33),u._uU(24,"Documentation"),u.qZA()(),u.TgZ(25,"li",27)(26,"a",57),u.NdJ("click",function(){return u.CHM(t),u.oxw().changePosition(650)}),u._uU(27,"Sign In"),u.qZA()(),u.TgZ(28,"li",64)(29,"div",65),u.NdJ("mouseleave",function(){return u.CHM(t),u.oxw().hideDdl1()}),u.TgZ(30,"button",66),u.NdJ("click",function(){return u.CHM(t),u.oxw().showDdl1()}),u._uU(31," Sports "),u.qZA(),u.TgZ(32,"div",67),u.NdJ("mouseleave",function(){return u.CHM(t),u.oxw().hideDdl1()}),u.YNc(33,e3,2,4,"button",43),u.qZA()()()(),u._UZ(34,"div"),u.qZA()}if(2&n){const t=u.oxw();u.xp6(33),u.Q6J("ngForOf",t.sports2)}}let za=(()=>{class n{constructor(t,r){this.SportService=t,this.authService=r,this.top=0,this.childMessage="Hola Mundo",this.message=new u.vpe,this.event=document.addEventListener("scroll",this.getY),this.searchValue="",this.isOpen=!0,this.searchText="",this.characters=["Football Courts","Tennis courts","Sports hall","Swimming pools","Massages","Gym"]}sendMessage(){this.message.emit(this.childMessage)}searchOut(t){var r=[];this.sports2.forEach(i=>{i.velikiOpis.includes(t)&&r.push(i)}),this.message.emit(r)}ngOnInit(){this.SportService.get_allSports().subscribe(t=>{this.sports2=t.map(r=>r.payload.doc.data())}),this.SportService.get_allSports().subscribe(t=>{this.sports=t.map(r=>r.payload.doc.data())})}dugmeKlik(){var t=document.getElementById("aaa");null==t||t.setAttribute("style","color:red")}changePosition(t){setTimeout(()=>{window.scroll(0,t)},300)}showLinks(){var t=document.getElementById("hide"),r=null==t?void 0:t.getAttribute("style");if("b"==(null==r?void 0:r.charAt(8)))null==t||t.setAttribute("style","display:none");else{var o=document.getElementById("hide");null==o||o.setAttribute("style","display:block;position:absolute;z-index:99;background-color:#3d6277;width:100px;padding;0px auto;color:white;padding:20px;")}}hideLinks(){var t=document.getElementById("hide");null==t||t.setAttribute("style","display:none")}showDdl(){var t;null===(t=document.getElementById("ddlD"))||void 0===t||t.setAttribute("style","display:block;margin-top:35%")}hideDdl(){var t,r,i;null===(t=document.getElementById("ddlD"))||void 0===t||t.setAttribute("style","display:none;"),null===(r=document.getElementById("bt"))||void 0===r||r.setAttribute("style","    transform: rotate(0deg);transition: 0.3s;"),null===(i=document.getElementById("pt"))||void 0===i||i.setAttribute("style","    transform: rotate(0deg);transition: 0.3s;")}showDdl1(){var t;null===(t=document.getElementById("ddlD1"))||void 0===t||t.setAttribute("style","display:block;position:absolute")}hideDdl1(){var t;null===(t=document.getElementById("ddlD1"))||void 0===t||t.setAttribute("style","display:none;")}showBurger(){var t,r,i;null===(t=document.getElementById("ulNav"))||void 0===t||t.classList.add("x1"),null===(r=document.getElementById("srchH"))||void 0===r||r.classList.add("style","display:none;"),null===(i=document.getElementById("navbarSupportedContent2"))||void 0===i||i.setAttribute("style","display:block!important;background-color: #71a7d3;text-align:center;")}hideBurger(){var t,r;null===(t=document.getElementById("navbarSupportedContent2"))||void 0===t||t.setAttribute("style","display:none!important;"),null===(r=document.getElementById("srchH"))||void 0===r||r.classList.add("style","display:block;")}rotate(){var t,r;null===(t=document.getElementById("bt"))||void 0===t||t.setAttribute("style","    transform: rotate(180deg);transition: 0.3s;"),null===(r=document.getElementById("pt"))||void 0===r||r.setAttribute("style","    transform: rotate(180deg);transition: 0.3s;")}toggle(){this.isOpen=!this.isOpen}onWindowScroll(){var t,r;null===(t=document.getElementById("txt"))||void 0===t||t.setAttribute("style","display:block;animation-fill-mode: both; animation-name: example;position:relative; animation-duration: 2s;"),null===(r=document.getElementById("member2"))||void 0===r||r.setAttribute("style"," animation-name: mymove;position:relative; animation-duration: 3s;"),window.pageYOffset||document.documentElement.scrollTop||document}getY(){this.top=window.pageYOffset||document.documentElement.scrollTop;var t=document.getElementsByClassName("navbar")[0],r=document.getElementsByClassName("log")[0];this.top<=50?(t.setAttribute("style","animation-name: navi3; animation-duration: 1s;animation-fill-mode: both;"),r.setAttribute("style","animation-name: navi2;position:relative; animation-duration: 1s;animation-fill-mode: both;")):(t.setAttribute("style","animation-name: navi4; animation-duration: 1s;animation-fill-mode: both;"),r.setAttribute("style","animation-name: navi;position:relative; animation-duration: 1s;animation-fill-mode: both;"))}changePosition2(t,r){"Football Courts"==t||r.includes("Football Courts")?setTimeout(()=>{window.scroll(0,800)},300):"Tennis courts"==t||r.includes("Tennis courts")?setTimeout(()=>{window.scroll(0,1300)},300):"Sports hall"==t||r.includes("Sports hall")?setTimeout(()=>{window.scroll(0,1850)},300):"Swimming pools"==t||r.includes("Swimming pools")?setTimeout(()=>{window.scroll(0,2400)},300):"Massages"==t||r.includes("Massages")?setTimeout(()=>{window.scroll(0,2900)},300):("Gym"==t||r.includes("Gym"))&&setTimeout(()=>{window.scroll(0,3500)},300)}showHide2(){var t;null===(t=document.getElementById("hide2"))||void 0===t||t.setAttribute("style","display:block;    position: absolute;margin-top: 38px;")}enterSearch(t){var r;null===(r=document.getElementById("search"))||void 0===r||r.setAttribute("placeholder",t)}hideSearch(t){var r,i;null===(r=document.getElementById("search"))||void 0===r||r.setAttribute("value",t),null===(i=document.getElementById("hide2"))||void 0===i||i.setAttribute("style","display:none;")}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(wy),u.Y36(xf))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-prva-komponenta"]],hostBindings:function(t,r){1&t&&u.NdJ("scroll",function(){return r.onWindowScroll()},!1,u.Jf7)},outputs:{message:"message"},decls:33,vars:4,consts:[[1,"container"],["id","navigacija",1,"navbar","navbar-expand-lg","navbar-light","padd"],["id","logo"],["href","#",1,"navbar-brand"],["id","logoImg","src","../../assets/images/logo.png",1,"log"],["type","button","data-toggle","collapse","data-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-icon"],["class","collapse navbar-collapse spc","id","navbarSupportedContent",4,"ngIf","ngIfElse"],["userloggedOut",""],["class","collapse navbar-collapse spc","id","navbarSupportedContent2",3,"mouseleave",4,"ngIf","ngIfElse"],["userloggedOutBurger",""],["id","carouselExampleSlidesOnly","data-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],["id","baner",1,"carousel-item","active"],["id","txt",1,"text-block"],["id","kutija",1,"album","py-5","bg-light"],["id","pod",1,"row"],["id","member",1,"col-md-8","col-sm-6"],[1,"colorbg-text"],["href","tel:+ 381 69545702"],["id","dugme",1,"col-md-4","col-sm-6"],["href","","routerLink","/contact","id","member2",1,"btn","btn-3","btn-3e","location-button","pull-right","aNo"],["id","navbarSupportedContent",1,"collapse","navbar-collapse","spc"],["id","ulNav",1,"navbar-nav","mr-auto"],[1,"nav-item","active"],["id","Home","href","#",1,"nav-link",3,"click"],[1,"sr-only"],[1,"nav-item"],["id","Histoy","href","","routerLink","/history",1,"nav-link",3,"click"],["id","About Us","routerLink","/about-us","href","",1,"nav-link",3,"click"],["id","Contact","href","","routerLink","/contact",1,"nav-link",3,"click"],["id","Author","href","","routerLink","/author",1,"nav-link",3,"click"],["id","Author","href","","routerLink","/trainer-crud",1,"nav-link",3,"click"],["id","dokumentacija","href","../../assets/DokumentacijaSc.pdf",1,"nav-link"],["id","User","href","","routerLink","/dashboard",1,"nav-link",3,"click"],[1,"fas","fa-user"],["href","#",1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["id","dropdownSports",1,"nav-item",3,"mouseenter"],["id","bnt",1,"btn-group",3,"mouseleave"],["type","button","id","bt","routerLink","/sports","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btnD","btn-secondary","dropdown-toggle",3,"mouseenter"],["id","pt"],["id","ddlD",1,"dropdown-menu","dropdown-menu-right",3,"mouseleave"],["class","dropdown-item","type","button",3,"routerLink","fragment",4,"ngFor","ngForOf"],["id","srchH"],[1,"form-inline","my-2","my-lg-0","fleks"],["name","search","type","text","placeholder","Search","id","search","aria-label","Search",1,"form-control","mr-sm-2",3,"ngModel","ngModelChange","click"],["search",""],["routerLink","/sports","type","submit",1,"btn","btn-outline-success","my-2","my-sm-0",3,"click"],["searchB",""],["id","hide2",1,"list-group","list-group-flush"],["style","cursor:pointer","class","list-group-item",3,"value",4,"ngFor","ngForOf"],["type","button",1,"dropdown-item",3,"routerLink","fragment"],[1,"list-group-item",2,"cursor","pointer",3,"value"],["lis",""],[3,"mouseover","click"],["p",""],["id","sign-in","href","","routerLink","/sign",1,"nav-link",3,"click"],["id","navbarSupportedContent2",1,"collapse","navbar-collapse","spc",3,"mouseleave"],["href","#",1,"nav-link"],["href","","routerLink","/history",1,"nav-link"],["routerLink","/about-us","href","",1,"nav-link"],["href","","routerLink","/contact",1,"nav-link"],["href","","routerLink","/author",1,"nav-link"],["id","dropdownSports1",1,"nav-item"],["id"," ",1,"btn-group",3,"mouseleave"],["type","button","routerLink","/sports","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btnD","btn-secondary","dropdown-toggle",3,"click"],["id","ddlD1",1,"dropdown-menu","dropdown-menu-right",3,"mouseleave"]],template:function(t,r){if(1&t&&(u.TgZ(0,"div",0)(1,"nav",1)(2,"div",2)(3,"a",3),u._UZ(4,"img",4),u.qZA()(),u.TgZ(5,"button",5),u.NdJ("click",function(){return r.showBurger()}),u._UZ(6,"span",6),u.qZA(),u.YNc(7,Wj,51,7,"div",7),u.YNc(8,Qj,46,7,"ng-template",null,8,u.W1O),u.YNc(10,Xj,40,1,"div",9),u.YNc(11,t3,35,1,"ng-template",null,10,u.W1O),u.qZA(),u.TgZ(13,"div",11)(14,"div",12)(15,"div",13)(16,"div",14)(17,"h1"),u._uU(18,"Sports Center"),u.qZA(),u.TgZ(19,"h4"),u._uU(20,"Try it and you'll stay"),u.qZA()()()()(),u.TgZ(21,"div",15)(22,"div",0)(23,"div",16)(24,"div",17)(25,"div",18)(26,"h2"),u._uU(27,"Our facility is spacious, safe, clean, and professionally staffed. We invite you to come take a personal tour. Call us at "),u.TgZ(28,"a",19),u._uU(29,"+ 381 69545702"),u.qZA()()()(),u.TgZ(30,"div",20)(31,"a",21),u._uU(32,"Become a Member >>"),u.qZA()()()()()()),2&t){const i=u.MAs(9),o=u.MAs(12);u.xp6(7),u.Q6J("ngIf",r.authService.userData)("ngIfElse",i),u.xp6(3),u.Q6J("ngIf",r.authService.userData)("ngIfElse",o)}},directives:[hr,Ml,Bs,Bn,Tc,$o,Tl,_i,fo,pu],pipes:[Gj],styles:[".fleks[_ngcontent-%COMP%]{display:flex;float:right}#ulNav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#688392}.aNo[_ngcontent-%COMP%]{background-color:none;border:none}.btnD[_ngcontent-%COMP%]{background-color:#71a7d3!important;border-color:#71a7d3!important}.brn[_ngcontent-%COMP%]:hover{color:#1c87c9}.spc[_ngcontent-%COMP%]{justify-content:space-between}.padd[_ngcontent-%COMP%]{padding:20px}input[_ngcontent-%COMP%]{margin-right:10px}.navbar-brand[_ngcontent-%COMP%]{width:70%}img[_ngcontent-%COMP%]{width:30%}#baner[_ngcontent-%COMP%]{width:100%;height:500px;background-image:url(banner.42b569c992e56774.jpg);background-position:initial;background-size:cover;display:flex;justify-content:flex-end;align-items:center;padding-bottom:30px}.text-block[_ngcontent-%COMP%]{background-color:#000;opacity:.6;color:#fff;margin-right:30px;padding:30px;margin-top:auto}#pod[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}#kutija[_ngcontent-%COMP%]{background-color:#71a7d3!important;color:#fff;border-bottom:10px solid}#kutija[_ngcontent-%COMP%]   .aNo[_ngcontent-%COMP%]{color:#fff;padding:20px;border:1px solid white}#dugme[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:end}#linija[_ngcontent-%COMP%]{border-top:#000000}#kutija[_ngcontent-%COMP%]   .aNo[_ngcontent-%COMP%]:hover{background-color:#4392d3!important;color:#fff!important}#navigacija[_ngcontent-%COMP%]{background-color:#71a7d3!important;box-shadow:0 1px #fff}#actived[_ngcontent-%COMP%]{background-color:#688392}.btn-outline-success[_ngcontent-%COMP%]{border-color:#fff;color:#fff}.btn-outline-success[_ngcontent-%COMP%]:hover{background-color:#688392;color:#fff}a[_ngcontent-%COMP%]{color:#fff!important}#hide[_ngcontent-%COMP%]{display:none}.container[_ngcontent-%COMP%]{max-width:100%!important;padding-left:0!important;padding-right:0!important}nav[_ngcontent-%COMP%]{position:fixed;z-index:4;margin:0 auto;width:-webkit-fill-available;height:100px}#member[_ngcontent-%COMP%]{padding-left:30px}#dugme[_ngcontent-%COMP%]{padding-right:30px}.row[_ngcontent-%COMP%]{--bs-gutter-x: 0 rem!important}#navbarSupportedContent2[_ngcontent-%COMP%]{display:none!important}.x[_ngcontent-%COMP%]{display:block!important;background-color:#71a7d3}.x2[_ngcontent-%COMP%]{display:none}.x1[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.z4[_ngcontent-%COMP%]{display:block}#bt[_ngcontent-%COMP%]:hover{background-color:#688392!important}#txt[_ngcontent-%COMP%]{right:-400px;display:none}@keyframes slideMeni{0%{left:100%}to{left:2%}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}@keyframes example{to{right:100px}}@keyframes mymove{to{transform:rotate(360deg)}}@keyframes navi{to{width:20%}}@keyframes navi2{to{width:30%}}@keyframes navi3{to{height:100px}}@keyframes navi4{to{height:70px}}[_nghost-%COMP%]{display:block}.open-close-container[_ngcontent-%COMP%]{border:1px solid #dddddd;margin-top:1em;padding:20px 20px 0;color:#000;font-weight:700;font-size:20px}#hide2[_ngcontent-%COMP%]{display:none}li[_ngcontent-%COMP%]{white-space:nowrap}"],data:{animation:[hO("openClose",[fI("open",Dg({height:"200px",opacity:1,backgroundColor:"yellow"})),fI("closed",Dg({height:"100px",opacity:.8,backgroundColor:"blue"})),k1("open => closed",[N1("1s")]),k1("closed => open",[N1("0.5s")])])]}}),n})(),n3=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-maps"]],decls:8,vars:0,consts:[[1,"mapouter"],[1,"gmap_canvas"],["width","100%","height","300","id","gmap_canvas","src","https://maps.google.com/maps?q=zdravka%20celara%2016&t=&z=13&ie=UTF8&iwloc=&output=embed","frameborder","0","scrolling","no","marginheight","0","marginwidth","0"],["href","https://www.whatismyip-address.com/divi-discount/"],["href","https://www.embedgooglemap.net"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1),u._UZ(2,"iframe",2),u.TgZ(3,"a",3),u._uU(4,"divi discount"),u.qZA(),u._UZ(5,"br"),u.TgZ(6,"a",4),u._uU(7,"google maps in html"),u.qZA()()())},styles:[".mapouter[_ngcontent-%COMP%]{position:relative;text-align:right;height:300px;width:100%!important}.gmap_canvas[_ngcontent-%COMP%]{overflow:hidden;background:none!important;height:300px;width:100%!important}"]}),n})(),r3=(()=>{class n{constructor(t){this.SportService=t}ngOnInit(){this.SportService.get_allSports().subscribe(t=>{this.sports2=t.map(r=>r.payload.doc.data())})}receiveMessage(t){this.sports2=t}changePosition(t){setTimeout(()=>{window.scroll(0,t)},300)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(wy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-about-us"]],decls:48,vars:0,consts:[[3,"message"],["id","material",1,"container"],[1,"row"],[1,"mbr-section-title","align-center","mbr-bold","pb-3","mbr-fonts-style","display-5"],[1,"mbr-section-subtitle","align-center","mbr-light","pb-3","mbr-fonts-style","display-2"],[1,"mbr-text","align-center","pb-3","mbr-fonts-style","display-5"],["id","cont",1,"mbr-section-btn","align-center"],["id","abtn","routerLink","/contact","href","",1,"btn","btn-md","btn-black-outline","display-4",3,"click"],["id","header1-0",1,"container","container1"],[1,"row","justify-content-md-center"],[1,"mbr-white","col-md-10"],[1,"col-md-4"],[1,"card"],[1,"card-img","pb-3"],[1,"material-icons","fg"],[1,"card-box"],[1,"card-title","py-3","mbr-fonts-style","display-5"],[1,"mbr-text","mbr-fonts-style","display-7"]],template:function(t,r){1&t&&(u.TgZ(0,"app-prva-komponenta",0),u.NdJ("message",function(o){return r.receiveMessage(o)}),u.qZA(),u.TgZ(1,"div",1)(2,"div",2)(3,"h1",3),u._uU(4,"ABOUTH 'SPORTS CENTER'"),u.qZA(),u.TgZ(5,"h3",4),u._uU(6,"MEET OUR TEAM"),u.qZA(),u.TgZ(7,"p",5),u._uU(8," Welcome to our site. Here you will get acquainted with the complex 'Sports Center'. The Sports Center started operating in 2019, which in itself has advantages because we use the latest equipment in all sports we offer. Our services allow you to determine for yourself how you will function in the center. In addition to the equipment, we also offer the friendly staff at your disposal. It is up to you to come and leave the rest to us. 'Come and stay'. "),u.qZA(),u.TgZ(9,"div",6)(10,"a",7),u.NdJ("click",function(){return r.changePosition(600)}),u._uU(11," CONTACT US"),u.qZA()()()(),u.TgZ(12,"div",8)(13,"div",9),u._UZ(14,"div",10),u.qZA()(),u.TgZ(15,"div",1)(16,"div",2)(17,"div",11)(18,"div",12)(19,"div",13)(20,"span",14),u._uU(21,"psychology"),u.qZA()(),u.TgZ(22,"div",15)(23,"h4",16),u._uU(24," Creativity"),u.qZA(),u.TgZ(25,"p",17),u._uU(26," It's the ability to think outside the box. We make decisions, create something new and generate a lot of ideas. "),u.qZA()()()(),u.TgZ(27,"div",11)(28,"div",12)(29,"div",13)(30,"span",14),u._uU(31,"public"),u.qZA()(),u.TgZ(32,"div",15)(33,"h4",16),u._uU(34," Worldwide"),u.qZA(),u.TgZ(35,"p",17),u._uU(36,' Our services are available worldwide and everyone can afford it.\xa0\xa0\xa0\xa0World famous brand "Sports Center ". '),u.qZA()()()(),u.TgZ(37,"div",11)(38,"div",12)(39,"div",13)(40,"span",14),u._uU(41,"mood"),u.qZA()(),u.TgZ(42,"div",15)(43,"h4",16),u._uU(44," Unique Styles "),u.qZA(),u.TgZ(45,"p",17),u._uU(46," A unique brand that does not copy any other, \xa0 but has its own line and sticks to its way of working\xa0\xa0... "),u.qZA()()()()()(),u._UZ(47,"app-maps"))},directives:[za,Ml,n3],styles:["#header1-0[_ngcontent-%COMP%]{background-image:url(banner1.863a1a277f3e4002.jpg);width:100%;height:300px;background-position:center}.p-3[_ngcontent-%COMP%]{margin-bottom:20px!important}#ab[_ngcontent-%COMP%]{padding:20px}.card-box[_ngcontent-%COMP%], .card-img[_ngcontent-%COMP%]{text-align:center}#material[_ngcontent-%COMP%]{margin:20px auto}#cont[_ngcontent-%COMP%]{display:flex;justify-content:center}#abtn[_ngcontent-%COMP%]{padding:10px 30px;border:1px solid #000000}#abtn[_ngcontent-%COMP%]:hover{background-color:#000;color:#fff}.container1[_ngcontent-%COMP%]{max-width:100%!important}.fg[_ngcontent-%COMP%]{font-size:50px!important}"]}),n})(),i3=(()=>{class n{constructor(t){this.SportService=t}ngOnInit(){this.SportService.get_allSports().subscribe(t=>{this.sports2=t.map(r=>r.payload.doc.data())})}receiveMessage(t){this.sports2=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(wy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-author"]],decls:11,vars:0,consts:[[3,"message"],[1,"card","mb-3",2,"max-width","70%"],[1,"row","no-gutters"],[1,"col-md-6"],["src","../../assets/images/author.jpg","alt","author",1,"card-img"],[1,"col-md-4"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(t,r){1&t&&(u.TgZ(0,"app-prva-komponenta",0),u.NdJ("message",function(o){return r.receiveMessage(o)}),u.qZA(),u.TgZ(1,"div",1)(2,"div",2)(3,"div",3),u._UZ(4,"img",4),u.qZA(),u.TgZ(5,"div",5)(6,"div",6)(7,"h5",7),u._uU(8,"Author"),u.qZA(),u.TgZ(9,"p",8),u._uU(10,"Hello, I am Stefan Stanisavljevi\u0107, a student of the ICT college in Belgrade. I am majoring in Internet technology and learning to become a good web developer. I love making websites and I try to get better and better at it. ."),u.qZA()()()()())},directives:[za],styles:["*[_ngcontent-%COMP%]{margin:0 auto}"]}),n})();function s3(n,e){1&n&&(u.TgZ(0,"div"),u._uU(1,"First Name is required."),u.qZA())}function o3(n,e){1&n&&(u.TgZ(0,"div"),u._uU(1,"Please, enter at least 3 letters."),u.qZA())}function a3(n,e){if(1&n&&(u.TgZ(0,"div",47),u.YNc(1,s3,2,0,"div",48),u.YNc(2,o3,2,0,"div",48),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",null==t.f||null==t.f.firstName||null==t.f.firstName.errors?null:t.f.firstName.errors.required),u.xp6(1),u.Q6J("ngIf",null==t.f||null==t.f.firstName||null==t.f.firstName.errors?null:t.f.firstName.errors.pattern)}}function l3(n,e){1&n&&(u.TgZ(0,"div"),u._uU(1,"Last Name is required."),u.qZA())}function u3(n,e){1&n&&(u.TgZ(0,"div"),u._uU(1,"Please, enter at least 3 letters."),u.qZA())}function c3(n,e){if(1&n&&(u.TgZ(0,"div",47),u.YNc(1,l3,2,0,"div",48),u.YNc(2,u3,2,0,"div",48),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",null==t.f||null==t.f.lastName||null==t.f.lastName.errors?null:t.f.lastName.errors.required),u.xp6(1),u.Q6J("ngIf",null==t.f||null==t.f.lastName||null==t.f.lastName.errors?null:t.f.lastName.errors.pattern)}}function d3(n,e){1&n&&(u.TgZ(0,"div"),u._uU(1,"Email is required."),u.qZA())}function h3(n,e){1&n&&(u.TgZ(0,"div"),u._uU(1," Please, enter the format: example@gmail.com."),u.qZA())}function f3(n,e){if(1&n&&(u.TgZ(0,"div",47),u.YNc(1,d3,2,0,"div",48),u.YNc(2,h3,2,0,"div",48),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",null==t.f||null==t.f.email||null==t.f.email.errors?null:t.f.email.errors.required),u.xp6(1),u.Q6J("ngIf",null==t.f||null==t.f.email||null==t.f.email.errors?null:t.f.email.errors.pattern)}}function p3(n,e){1&n&&(u.TgZ(0,"div"),u._uU(1,"Mobile Number is required."),u.qZA())}function g3(n,e){1&n&&(u.TgZ(0,"div"),u._uU(1,"Please, Enter 10 digit Mobile Number."),u.qZA())}function m3(n,e){if(1&n&&(u.TgZ(0,"div",47),u.YNc(1,p3,2,0,"div",48),u.YNc(2,g3,2,0,"div",48),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",null==t.f||null==t.f.mobileNumber||null==t.f.mobileNumber.errors?null:t.f.mobileNumber.errors.required),u.xp6(1),u.Q6J("ngIf",null==t.f||null==t.f.mobileNumber||null==t.f.mobileNumber.errors?null:t.f.mobileNumber.errors.pattern)}}let _3=(()=>{class n{constructor(t){this.fb=t,this.form=new Aa({}),this.form=t.group({mobileNumber:["",[or.required,or.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],firstName:["",[or.required,or.pattern("[a-zA-Z][a-zA-Z]{2,15}")]],lastName:["",[or.required,or.pattern("^[a-zA-Z][a-zA-Z]{2,20}")]],email:["",[or.required,or.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$")]],text:[""]})}ngOnInit(){}get f(){return this.form.controls}sendForm(){window.alert("Your form has been sent"),this.form=this.fb.group({mobileNumber:["",[or.required,or.pattern("^((\\+91-?)|0)?[0-9]{10}$")]],firstName:["",[or.required,or.pattern("[a-zA-Z][a-zA-Z]{2,15}")]],lastName:["",[or.required,or.pattern("^[a-zA-Z][a-zA-Z]{2,20}")]],email:["",[or.required,or.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$")]],text:[""]})}submit(){console.log(this.form.value)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Xy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-contact"]],decls:95,vars:6,consts:[[1,"ftco-section"],[1,"container"],[1,"row","justify-content-center"],[1,"col-md-6","text-center","mb-5"],["id","naslov",1,"heading-section"],[1,"col-md-12"],[1,"wrapper"],[1,"row","mb-5"],[1,"col-md-3"],[1,"dbox","w-100","text-center"],[1,"icon","d-flex","align-items-center","justify-content-center"],[1,"fa","fa-map-marker"],[1,"text"],[1,"fa","fa-phone"],["href","tel://069545703"],[1,"fa","fa-paper-plane"],["href","mailto:info@site.com"],[1,"fa","fa-globe"],["href","#"],[1,"row","no-gutters"],[1,"col-md-7"],[1,"contact-wrap","w-100","p-md-5","p-4"],[1,"mb-4"],["id","form-message-warning",1,"mb-4"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6"],["for","firstName"],["formControlName","firstName","id","firstName","type","text",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["for","lastName"],["formControlName","lastName","id","lastName","type","text",1,"form-control"],["for","email"],["formControlName","email","id","email","type","text",1,"form-control"],[1,"form-group"],["for","mobileNumber"],["formControlName","mobileNumber","id","mobileNumber","type","text",1,"form-control"],["for","textarea"],["formControlName","text","id","text","type","text",1,"form-control"],["type","submit",1,"btn","btn-primary",2,"margin-top","10px",3,"disabled","click"],[1,"col-md-5","d-flex","align-items-stretch"],[1,"info-wrap","w-100","p-5","img"],[1,"mapouter"],[1,"gmap_canvas"],["width","350","height","450","id","gmap_canvas","src","https://maps.google.com/maps?q=zdravka%20celara%2016&t=&z=15&ie=UTF8&iwloc=&output=embed","frameborder","0","scrolling","no","marginheight","0","marginwidth","0"],["href","https://fmovies-online.net"],["href","https://www.embedgooglemap.net"],[1,"alert","alert-danger"],[4,"ngIf"]],template:function(t,r){1&t&&(u._UZ(0,"app-prva-komponenta"),u.TgZ(1,"section",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"h2",4),u._uU(6,"Contact Form"),u.qZA()()(),u.TgZ(7,"div",2)(8,"div",5)(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10),u._UZ(14,"span",11),u.qZA(),u.TgZ(15,"div",12)(16,"p")(17,"span"),u._uU(18,"Address:"),u.qZA(),u._uU(19," Zdravka \u010ce\u010dara 16"),u.qZA()()()(),u.TgZ(20,"div",8)(21,"div",9)(22,"div",10),u._UZ(23,"span",13),u.qZA(),u.TgZ(24,"div",12)(25,"p")(26,"span"),u._uU(27,"Phone:"),u.qZA(),u.TgZ(28,"a",14),u._uU(29,"Phone: + 381 69545702"),u.qZA()()()()(),u.TgZ(30,"div",8)(31,"div",9)(32,"div",10),u._UZ(33,"span",15),u.qZA(),u.TgZ(34,"div",12)(35,"p")(36,"span"),u._uU(37,"Email:"),u.qZA(),u.TgZ(38,"a",16),u._uU(39,"info@site.com"),u.qZA()()()()(),u.TgZ(40,"div",8)(41,"div",9)(42,"div",10),u._UZ(43,"span",17),u.qZA(),u.TgZ(44,"div",12)(45,"p")(46,"span"),u._uU(47,"Website"),u.qZA(),u.TgZ(48,"a",18),u._uU(49,"site.com"),u.qZA()()()()()(),u.TgZ(50,"div",19)(51,"div",20)(52,"div",21)(53,"h3",22),u._uU(54,"Contact Us"),u.qZA(),u._UZ(55,"div",23),u.TgZ(56,"form",24),u.NdJ("ngSubmit",function(){return r.submit()}),u.TgZ(57,"div",25)(58,"div",26)(59,"label",27),u._uU(60,"First Name"),u.qZA(),u._UZ(61,"input",28),u.YNc(62,a3,3,2,"div",29),u.qZA(),u.TgZ(63,"div",26)(64,"label",30),u._uU(65,"Last Name"),u.qZA(),u._UZ(66,"input",31),u.YNc(67,c3,3,2,"div",29),u.qZA(),u.TgZ(68,"div",5)(69,"label",32),u._uU(70,"Email"),u.qZA(),u._UZ(71,"input",33),u.YNc(72,f3,3,2,"div",29),u.qZA(),u.TgZ(73,"div",5)(74,"div",34)(75,"label",35),u._uU(76,"Mobile Number"),u.qZA(),u._UZ(77,"input",36),u.YNc(78,m3,3,2,"div",29),u.qZA()(),u.TgZ(79,"div",5)(80,"label",37),u._uU(81,"Message"),u.qZA(),u._UZ(82,"textarea",38),u.qZA()(),u.TgZ(83,"button",39),u.NdJ("click",function(){return r.sendForm()}),u._uU(84,"Submit"),u.qZA()()()(),u.TgZ(85,"div",40)(86,"div",41)(87,"div",42)(88,"div",43),u._UZ(89,"iframe",44),u.TgZ(90,"a",45),u._uU(91,"fmovies"),u.qZA(),u._UZ(92,"br"),u.TgZ(93,"a",46),u._uU(94,"embedgooglemap.net"),u.qZA()()()()()()()()()()()),2&t&&(u.xp6(56),u.Q6J("formGroup",r.form),u.xp6(6),u.Q6J("ngIf",(null==r.f||null==r.f.firstName?null:r.f.firstName.touched)&&(null==r.f||null==r.f.firstName?null:r.f.firstName.invalid)),u.xp6(5),u.Q6J("ngIf",(null==r.f||null==r.f.lastName?null:r.f.lastName.touched)&&(null==r.f||null==r.f.lastName?null:r.f.lastName.invalid)),u.xp6(5),u.Q6J("ngIf",(null==r.f||null==r.f.email?null:r.f.email.touched)&&(null==r.f||null==r.f.email?null:r.f.email.invalid)),u.xp6(6),u.Q6J("ngIf",(null==r.f||null==r.f.mobileNumber?null:r.f.mobileNumber.touched)&&(null==r.f||null==r.f.mobileNumber?null:r.f.mobileNumber.invalid)),u.xp6(5),u.Q6J("disabled",!r.form.valid))},directives:[za,Tc,$o,Sc,_i,fo,_,hr],styles:[".icon[_ngcontent-%COMP%]{border-radius:50%;width:60px;height:60px;background:#46b5d1;margin:0 auto 20px}.fa[_ngcontent-%COMP%]{color:#fff}p[_ngcontent-%COMP%]{color:#666}span[_ngcontent-%COMP%]{color:#000}a[_ngcontent-%COMP%]{text-decoration:none;color:#46b5d1}.contactForm[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:none;border-bottom:1px solid rgba(0,0,0,.1);padding:0;font-size:16px}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}label[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:500}#form-message-success[_ngcontent-%COMP%]{display:none}.help[_ngcontent-%COMP%]{color:#f35656}",".mapouter[_ngcontent-%COMP%]{position:relative;text-align:right;height:450px;width:350px;}",".gmap_canvas[_ngcontent-%COMP%] {overflow:hidden;background:none!important;height:450px;width:350px;}"]}),n})(),y3=(()=>{class n{constructor(t){this.SportService=t,this.br=1,this.sbr=1,this.broj=0,this.n=1}ngOnInit(){this.SportService.get_allSports().subscribe(t=>{this.sports2=t.map(r=>r.payload.doc.data())})}receiveMessage(t){this.sports2=t}uNapred(){var t,r,i=document.getElementsByClassName("slika"),o=document.getElementById("prva"),c=null==o?void 0:o.getAttribute("src"),h=null==c?void 0:c.slice(20,-4),p=Number(h);console.log(p);var y=document.getElementsByClassName("slika"),T=null===(r=null===(t=document.getElementById("poslednja"))||void 0===t?void 0:t.getAttribute("src"))||void 0===r?void 0:r.slice(20,-4);Number(T);for(let x=0;x<y.length;x++)y[x].classList.remove("animation"),window.requestAnimationFrame(function(){y[x].classList.add("animation")});4==p&&(p=0);for(let x=0;x<i.length;x++)p++,i[x].setAttribute("src","../../assets/images/"+p+".jpg")}uNazad(){var t,r=document.getElementsByClassName("slika"),i=document.getElementsByClassName("slika");for(let c=0;c<r.length;c++){var o=Number(null===(t=r[c].getAttribute("src"))||void 0===t?void 0:t.slice(20,-4));o-=1,console.log(o),o<0&&(o=7-(o*=-1)),r[c].setAttribute("src","../../assets/images/"+o+".jpg")}for(let c=0;c<i.length;c++)console.log("usoo"),i[c].classList.remove("animation"),window.requestAnimationFrame(function(){i[c].classList.add("animation")})}zoomIn(t){var r,i,o,h=null===(r=document.getElementsByClassName("slika")[t].getAttribute("src"))||void 0===r?void 0:r.slice(20,-4);null===(i=document.getElementById("img01"))||void 0===i||i.setAttribute("src","../../assets/images/"+h+".jpg"),null===(o=document.getElementById("img01"))||void 0===o||o.setAttribute("name",""+h),document.getElementsByClassName("modal")[0].setAttribute("style"," display: block; position: fixed; z-index: 111111;padding-top: 50px;left: 0;top: 0;overflow: auto;background-color: rgba(0,0,0,0.8);display:flex;justify-content:center;align-content:center;")}closeImg(){var t=document.getElementsByClassName("modal");console.log(t[0]),t[0].setAttribute("style"," display: none;")}napred(){var t=document.getElementById("img01");console.log(null==t?void 0:t.getAttribute("name"));var r=null==t?void 0:t.getAttribute("name"),i=Number(r)+this.br;this.br++,i>6&&(this.br=0,i=0);var o="../../assets/images/"+i+".jpg";console.log(o),null==t||t.setAttribute("src",o)}nazad(){var t=document.getElementById("img01");if(1==this.n){var r=null==t?void 0:t.getAttribute("name");this.n++,this.broj=Number(r)-this.sbr}this.broj-=this.sbr,console.log(this.broj),this.broj<0&&(this.broj=7,this.sbr=0,this.broj-=this.sbr,console.log(this.broj)),this.sbr++;var i="../../assets/images/"+this.broj+".jpg";console.log(i),null==t||t.setAttribute("src",i)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(wy))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-history"]],decls:29,vars:0,consts:[[3,"message"],[1,"container","container1"],[1,"row"],["width","40%","src","../../assets/images/banner2.jpg"],["id","myModal",1,"modal"],[1,"col-md-1","arr"],["src","../../assets/images/arrll.png",1,"slika1",3,"click"],["id","img01",1,"modal-content"],["id","caption"],[1,"close",2,"color","white","font-size","30px","margin-left","80%","position","absolute",3,"click"],["src","../../assets/images/arrr.png",1,"slika1",3,"click"],[1,"container","container2"],["id","kolona",1,"row"],[1,"col-md-1"],["src","../../assets/images/arrleft.png",1,"slika1",3,"click"],[1,"col-md-3"],["id","prva","src","../../assets/images/1.jpg",1,"slika",3,"click"],["src","../../assets/images/2.jpg",1,"slika",3,"click"],["src","../../assets/images/3.jpg",1,"slika",3,"click"],["id","poslednja","src","../../assets/images/4.jpg",1,"slika",3,"click"],["src","../../assets/images/arrright.png",1,"slika1",3,"click"]],template:function(t,r){1&t&&(u.TgZ(0,"app-prva-komponenta",0),u.NdJ("message",function(o){return r.receiveMessage(o)}),u.qZA(),u.TgZ(1,"div",1)(2,"div",2)(3,"p"),u._UZ(4,"img",3),u._uU(5," The construction of the sports center began in 2010. With the great help of our current partners, the project was completed in record time. The complex was built according to the latest standards and technologies. The sports center was completed in early 2012 and put into operation a month later. To the great joy of all visitors, every first useful person of the month received free appointments and treatments to show how much we care about them. The construction of the sports center began in 2010. With the great help of our current partners, the project was completed in record time. The complex was built according to the latest standards and technologies. The sports center was completed in early 2012 and put into operation a month later. To the great joy of all visitors, every first useful person of the month received free appointments and treatments to show how much we care about them. The construction of the sports center began in 2010. With the great help of our current partners, the project was completed in record time. The complex was built according to the latest standards and technologies. The sports center was completed in early 2012 and put into operation a month later. To the great joy of all visitors, every first useful person of the month received free appointments and treatments to show how much we care about them. "),u.qZA()()(),u.TgZ(6,"div",4)(7,"div",5)(8,"img",6),u.NdJ("click",function(){return r.nazad()}),u.qZA()(),u._UZ(9,"img",7)(10,"div",8),u.TgZ(11,"span",9),u.NdJ("click",function(){return r.closeImg()}),u._uU(12,"\xd7"),u.qZA(),u.TgZ(13,"div",5)(14,"img",10),u.NdJ("click",function(){return r.napred()}),u.qZA()()(),u.TgZ(15,"div",11)(16,"div",12)(17,"div",13)(18,"img",14),u.NdJ("click",function(){return r.uNazad()}),u.qZA()(),u.TgZ(19,"div",15)(20,"img",16),u.NdJ("click",function(){return r.zoomIn(0)}),u.qZA()(),u.TgZ(21,"div",15)(22,"img",17),u.NdJ("click",function(){return r.zoomIn(1)}),u.qZA()(),u.TgZ(23,"div",15)(24,"img",18),u.NdJ("click",function(){return r.zoomIn(2)}),u.qZA()(),u.TgZ(25,"div",15)(26,"img",19),u.NdJ("click",function(){return r.zoomIn(3)}),u.qZA()(),u.TgZ(27,"div",13)(28,"img",20),u.NdJ("click",function(){return r.uNapred()}),u.qZA()()()())},directives:[za],styles:["img[_ngcontent-%COMP%]{float:left;margin-right:20px}img[_ngcontent-%COMP%]:hover, .close[_ngcontent-%COMP%]:hover{cursor:pointer}.row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around}p[_ngcontent-%COMP%]{text-align:justify;font-size:large}.container1[_ngcontent-%COMP%]{margin:30px auto}.slika[_ngcontent-%COMP%]{height:320px;width:-webkit-fill-available}.container2[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around;margin:50px auto}.slika1[_ngcontent-%COMP%]{width:-webkit-fill-available}.col-md-3[_ngcontent-%COMP%]{width:20%}@media (min-width: 768px){.col-md-3[_ngcontent-%COMP%]{flex:0 0 auto;width:20%}}@media (max-width: 765px){.container[_ngcontent-%COMP%], .container-sm[_ngcontent-%COMP%]{max-width:540px}#kolona[_ngcontent-%COMP%]{flex-direction:column}.col-md-3[_ngcontent-%COMP%]{flex:0 0 auto;width:100%}}.modal[_ngcontent-%COMP%]{display:none;position:fixed;z-index:1;padding-top:100px;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000;background-color:#000c}.modal-content[_ngcontent-%COMP%]{width:30%!important;margin:20px auto!important}.arr[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.animation[_ngcontent-%COMP%]{position:relative;transform:rotateY(180deg);transition:transform 1s}.animation2[_ngcontent-%COMP%]{position:relative;transform:rotateY(360deg);transition:transform 3s}"]}),n})(),gI=(()=>{class n{constructor(t){this.fireservices=t}create_newTrainers(t,r){return this.fireservices.collection("Trainer").add(t)}get_allTrainer(){return this.fireservices.collection("Trainer").snapshotChanges()}get_allSports(){return this.fireservices.collection("Sports").snapshotChanges()}reloadCurrentPage(){window.location.reload()}update_trainer(t,r){this.fireservices.doc("Trainer/"+t).update(r)}delete_trainer(t){console.log(t),this.fireservices.doc("Trainer/"+t).delete()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(qw))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function v3(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9)(5,"img",10),u.NdJ("mouseenter",function(){const o=u.CHM(t).$implicit;return u.oxw().scaleImg(o.slika.src,o.id)}),u.qZA()(),u.TgZ(6,"div",11),u._UZ(7,"img",12),u.qZA()()(),u.TgZ(8,"div",13)(9,"p",14),u._uU(10),u.qZA(),u.TgZ(11,"div",15)(12,"div",16)(13,"button",17),u.NdJ("click",function(){const o=u.CHM(t).$implicit;return u.oxw().changePosition(o.posicija)})("click",function(){const o=u.CHM(t).$implicit;return u.oxw().viewUniqSport(o.id)}),u._uU(14,"View"),u.qZA()(),u.TgZ(15,"span",18),u._uU(16),u.qZA()()()()()}if(2&n){const t=e.$implicit;u.xp6(5),u.s9C("id",t.id),u.s9C("alt",t.slika.alt),u.s9C("src",t.slika.src,u.LSH),u.xp6(2),u.MGl("id","flip",t.id,""),u.xp6(3),u.Oqu(t.opis),u.xp6(3),u.MGl("id","b",t.id,""),u.xp6(3),u.hij(" ",t.fa," ")}}let mO=(()=>{class n{constructor(t,r){this.SportService=t,this.crudservice=r}ngOnInit(){this.crudservice.get_allSports().subscribe(t=>{this.sports2=t.map(r=>r.payload.doc.data())})}receiveMessage(t){this.sports2=t}scaleImg(t,r){var i,o;t.slice(0,-5);let h=t.replace("1","2");null===(i=document.getElementById("flip"+r))||void 0===i||i.setAttribute("src",h),null===(o=document.getElementById("flip"+r))||void 0===o||o.setAttribute("style","height: 225px; width: 100%;")}unScaleImg(){document.getElementsByTagName("img");var r=document.getElementById("t");null==r||r.setAttribute("src","../../assets/images/tennis1.jpg");var i=document.getElementById("f");null==i||i.setAttribute("src","../../assets/images/football.jpg");var o=document.getElementById("g");null==o||o.setAttribute("src","../../assets/images/gym1.jpg");var c=document.getElementById("m");null==c||c.setAttribute("src","../../assets/images/massage1.jpg");var h=document.getElementById("p");null==h||h.setAttribute("src","../../assets/images/pool.jpg");var p=document.getElementById("h");null==p||p.setAttribute("src","../../assets/images/hall.jpg")}viewUniqSport(t){}changePosition(t){setTimeout(()=>{window.scroll(0,t)},300)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(wy),u.Y36(gI))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-sadrzaj"]],decls:5,vars:1,consts:[[3,"message"],[1,"album","py-5","bg-light"],[1,"container"],[1,"row"],["class","col-md-4 ",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"card","mb-4","box-shadow"],[1,"flip-card"],[1,"flip-card-inner"],[1,"flip-card-front"],["data-src","holder.js/100px225?theme=thumb&bg=55595c&fg=eceeef&text=Thumbnail","data-holder-rendered","true",1,"card-img-top",2,"height","225px","width","100%","display","block",3,"id","alt","src","mouseenter"],[1,"flip-card-back"],["src","",3,"id"],[1,"card-body"],[1,"card-text"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn-group"],["routerLink","/sports","type","button",1,"btn","btn-sm","btn-outline-secondary",3,"id","click"],[1,"material-icons","pp"]],template:function(t,r){1&t&&(u.TgZ(0,"app-prva-komponenta",0),u.NdJ("message",function(o){return r.receiveMessage(o)}),u.qZA(),u.TgZ(1,"div",1)(2,"div",2)(3,"div",3),u.YNc(4,v3,17,7,"div",4),u.qZA()()()),2&t&&(u.xp6(4),u.Q6J("ngForOf",r.sports2))},directives:[za,Bn,Bs],styles:[".container-3[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.gym[_ngcontent-%COMP%]{background-image:url(gym1.82fbd2fe17ec7adc.jpg);background-position:center;background-size:cover;display:flex;align-items:center;justify-content:center;padding:30px}.pool[_ngcontent-%COMP%]{background-image:url(pool1.ba539f6e8a2ba8a4.jpg);background-position:center;background-size:cover;display:flex;align-items:center;justify-content:center;padding:30px}.mass[_ngcontent-%COMP%]{background-image:url(massage1.f4eb47fc84ac8338.jpg);background-position:center;background-size:cover;display:flex;align-items:center;justify-content:center;padding:30px}.row[_ngcontent-%COMP%]{width:inherit;display:flex;align-items:center;justify-content:space-around;padding:30px}.text-block[_ngcontent-%COMP%]{width:100%;padding:60px;background-color:#000;opacity:.6;color:#fff;word-wrap:break-word}.football[_ngcontent-%COMP%]{background-image:url(football1.cf9c80ea346eb6ce.jpg);background-position:center;background-size:cover;display:flex;align-items:center;justify-content:center;padding:30px}.tennis[_ngcontent-%COMP%]{background-image:url(tennis1.b4ce5d3c0e5e5768.jpg);background-position:center;background-size:cover;display:flex;align-items:center;justify-content:center;padding:30px}.hall[_ngcontent-%COMP%]{background-image:url(hall1.06d9b36a23fd0eeb.jpg);background-position:center;background-size:cover;display:flex;align-items:center;justify-content:center;padding:30px}.col-md-4[_ngcontent-%COMP%]:hover{transition:transform .4s;transform:scale(1.1)}.tra[_ngcontent-%COMP%]{transition:transform .4s}.pp[_ngcontent-%COMP%]{color:#9acd32!important}.flip-card[_ngcontent-%COMP%]{background-color:transparent;width:100%;height:230px;perspective:1000px}.flip-card-inner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;text-align:center;transition:transform .6s;transform-style:preserve-3d}.flip-card[_ngcontent-%COMP%]:hover   .flip-card-inner[_ngcontent-%COMP%]{transform:rotateY(180deg)}.flip-card-front[_ngcontent-%COMP%], .flip-card-back[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;-webkit-backface-visibility:hidden;backface-visibility:hidden}.flip-card-front[_ngcontent-%COMP%]{color:#000}.flip-card-back[_ngcontent-%COMP%]{color:#fff;transform:rotateY(180deg)}"]}),n})();const Qs=void 0,E3=["sr-Latn",[["a","p"],["pre podne","po podne"],Qs],[["pre podne","po podne"],Qs,Qs],[["n","p","u","s","\u010d","p","s"],["ned","pon","uto","sre","\u010det","pet","sub"],["nedelja","ponedeljak","utorak","sreda","\u010detvrtak","petak","subota"],["ne","po","ut","sr","\u010de","pe","su"]],Qs,[["j","f","m","a","m","j","j","a","s","o","n","d"],["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec"],["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"]],Qs,[["p.n.e.","n.e."],["p. n. e.","n. e."],["pre nove ere","nove ere"]],1,[6,0],["d.M.yy.","dd.MM.y.","dd. MMMM y.","EEEE, dd. MMMM y."],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss zzzz"],["{1} {0}",Qs,Qs,Qs],[",",".",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","#,##0.00\xa0\xa4","#E0"],"RSD","RSD","Srpski dinar",{AUD:[Qs,"$"],BAM:["KM"],BYN:[Qs,"r."],GEL:[Qs,"\u10da"],KRW:[Qs,"\u20a9"],NZD:[Qs,"$"],PHP:[Qs,"\u20b1"],TWD:["NT$"],USD:["US$","$"],VND:[Qs,"\u20ab"]},"ltr",function w3(n){return 5}];let b3=(()=>{class n{constructor(t,r){this.http=t,this.fireservices=r}get_allCategory(){return this.fireservices.collection("categoryOfSport").snapshotChanges()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Km),u.LFG(qw))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function C3(n,e){if(1&n&&(u.TgZ(0,"option",17),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.s9C("value",t.naziv),u.xp6(1),u.Oqu(t.naziv)}}const _O=function(n){return[n,"EUR","symbol","2.2-2","sr-Latn"]},T3=function(){return["/contact"]};function I3(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",18)(1,"div",19)(2,"div",20),u._UZ(3,"img",21),u.qZA(),u.TgZ(4,"div",22)(5,"h4",23)(6,"a",24),u._uU(7),u.qZA(),u.TgZ(8,"a",25),u._UZ(9,"img",26),u.qZA()(),u.TgZ(10,"p",27),u._uU(11),u.qZA(),u.TgZ(12,"div",28)(13,"h2",29),u._uU(14),u.ALo(15,"currency"),u.qZA(),u.TgZ(16,"h5",30),u._uU(17),u.ALo(18,"currency"),u.qZA(),u.TgZ(19,"h5",31),u._uU(20),u.ALo(21,"number"),u.qZA(),u.TgZ(22,"div",32)(23,"span",33),u._uU(24,"calendar_month"),u.qZA(),u.TgZ(25,"h6",34),u._uU(26),u.qZA()()(),u.TgZ(27,"div",35)(28,"p"),u._uU(29),u.qZA()(),u.TgZ(30,"button",36),u.NdJ("click",function(){return u.CHM(t),u.oxw().changePosition(650)}),u._uU(31,"contract"),u.qZA()()()()}if(2&n){const t=e.$implicit,r=u.oxw();u.s9C("id",t.id),u.xp6(3),u.s9C("src",t.slika.src,u.LSH),u.s9C("alt",t.slika.alt),u.xp6(4),u.hij(" ",t.naziv," "),u.xp6(4),u.Oqu(r.ispisKategorije(t.kategorija)),u.xp6(3),u.hij("Price per hour:",u.G7q(15,11,u.VKq(26,_O,t.cenaSaPopustomZaMladje)),""),u.xp6(3),u.hij("old price:",u.G7q(18,17,u.VKq(28,_O,t.cenaPoSatu)),""),u.xp6(3),u.hij("Save: ",u.xi3(21,23,r.snizenje(t.cenaPoSatu,t.cenaSaPopustomZaMladje),"1.1-2"),"% "),u.xp6(6),u.Oqu(t.datum),u.xp6(3),u.Oqu(t.velikiOpis),u.xp6(1),u.Q6J("routerLink",u.DdM(30,T3))}}!function Rt(n,e,t){(0,u.dwT)(n,e,t)}(E3,"sr-Latn");let yO=(()=>{class n{constructor(t,r,i){this.SportService=t,this.SportCategoryService=r,this.crudservice=i,this.childMessage="Hello World",this.searchValue="",this.sortValue=0,this.sportValue=0}receiveMessage(t){this.sports=t}ngOnInit(){this.category=this.SportCategoryService.get_allCategory(),this.SportCategoryService.get_allCategory().subscribe(t=>{this.category=t.map(r=>r.payload.doc.data())}),this.crudservice.get_allSports().subscribe(t=>{this.sports2=t.map(r=>r.payload.doc.data()),this.sports4=this.sports4,this.sports=this.sports2,this.sports3=this.sports2})}snizenje(t,r){return 100-Math.round(100*(100*r/t+Number.EPSILON))/100}ispisKategorije(t){var r="";return t.forEach(i=>{this.category.forEach(o=>{i==o.id&&(r+="| "+o.naziv+" ")})}),r}filterSortSport(t){this.sports2=this.SportService.sports2,this.searchValue="";let r=[];if(0==this.sportValue&&0==this.sortValue&&this.SportService.get_allSports().subscribe(i=>{this.sports2=i.map(o=>o.payload.doc.data())}),0==this.sportValue&&"0"!=this.sortValue&&("opada"==this.sortValue&&this.sports2.sort((i,o)=>i.cenaSaPopustomZaMladje>o.cenaSaPopustomZaMladje?-1:i.cenaSaPopustomZaMladje<o.cenaSaPopustomZaMladje?1:0),"raste"==this.sortValue&&this.sports2.sort((i,o)=>i.cenaSaPopustomZaMladje>o.cenaSaPopustomZaMladje?1:i.cenaSaPopustomZaMladje<o.cenaSaPopustomZaMladje?-1:0),"a_z"==this.sortValue&&this.sports2.sort((i,o)=>i.naziv>o.naziv?1:i.naziv<o.naziv?-1:0),"z_a"==this.sortValue&&this.sports2.sort((i,o)=>i.naziv>o.naziv?-1:i.naziv<o.naziv?1:0)),"0"!=this.sportValue&&0==this.sortValue){for(let i of this.sports2)this.sportValue==i.naziv&&r.push(i);this.sports2=r}if(0!=this.sportValue&&"0"!=this.sortValue){for(let i of this.sports2)this.sportValue==i.naziv&&r.push(i);"opada"==this.sortValue&&r.sort((i,o)=>i.cenaSaPopustomZaMladje>o.cenaSaPopustomZaMladje?-1:i.cenaSaPopustomZaMladje<o.cenaSaPopustomZaMladje?1:0),"raste"==this.sortValue&&r.sort((i,o)=>i.cenaSaPopustomZaMladje>o.cenaSaPopustomZaMladje?1:i.cenaSaPopustomZaMladje<o.cenaSaPopustomZaMladje?-1:0),"a_z"==this.sortValue&&r.sort((i,o)=>i.naziv>o.naziv?1:i.naziv<o.naziv?-1:0),"z_a"==this.sortValue&&r.sort((i,o)=>i.naziv>o.naziv?-1:i.naziv<o.naziv?1:0),this.sports2=r}}searchSport(){this.sortValue="0",this.sportValue="0";var t=[];this.sports2=this.SportService.sports2;for(let r of this.sports2)-1!==r.naziv.toLowerCase().indexOf(this.searchValue.toLowerCase())&&t.push(r);this.sports2=t}changePosition(t){setTimeout(()=>{window.scroll(0,t)},300)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(wy),u.Y36(b3),u.Y36(gI))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-sports"]],decls:30,vars:5,consts:[[3,"message"],[1,"container","sdl",2,"padding","20px","background-color","#71a7d3!important","padding","20px auto"],[1,"kateg","stil"],["name","kategroije","id","kategorije",3,"ngModel","change","ngModelChange"],["value","0"],[3,"value",4,"ngFor","ngForOf"],[1,"sort","stil"],["name","sortiranje",3,"ngModel","change","ngModelChange"],["value","opada"],["value","raste"],["value","a_z"],["value","z_a"],[1,"search","stil"],["type","text","name","search","placeholder","Search...",1,"pretraga","form-control","mr-sm-2","ng-untouched","ng-pristine","ng-valid",2,"height","43px",3,"ngModel","ngModelChange","keyup"],[1,"container","con4"],[1,"row"],["class","col-md-12 offset-md-2 bord w3-pale-blue bl",3,"id",4,"ngFor","ngForOf"],[3,"value"],[1,"col-md-12","offset-md-2","bord","w3-pale-blue","bl",3,"id"],[1,"product-card","bg-white","mb-4","overflow-hidden","d-lg-flex","rounded-lg","position-relative"],[1,"product-image","d-flex","align-items-center","m-4","xxx"],[1,"",3,"src","alt"],[1,"py-4","pr-4","pl-4","pl-lg-0","product-details",2,"margin-left","30px"],[1,"font-weight-bold","d-flex","justify-content-between"],["href","#!","title","Elegant designed coffee plant for desktop decoration",1,"text-dark"],["href","#!",1,"ml-2","text-muted"],["src","../../assets/images/sale1.png",2,"width","100px","height","90px"],[1,"font-weight-bold"],[1,"align-items-baseline","mb-2"],[1,"mr-2"],[1,"text-striked","text-muted","mr-3","font-weight-regular",2,"text-decoration","line-through"],[1,"text-danger"],["id","calendar"],[1,"material-icons"],[1,"text-striked","text-muted","d-inline","mr-3","font-weight-regular"],[1,"d-flex","align-items-baseline","mb-2"],["fragment","naslov",1,"btn","btn-outline-secondary",2,"float","right",3,"routerLink","click"]],template:function(t,r){1&t&&(u.TgZ(0,"app-prva-komponenta",0),u.NdJ("message",function(o){return r.receiveMessage(o)}),u.qZA(),u.TgZ(1,"div",1)(2,"div",2)(3,"h3"),u._uU(4,"Typs of sports"),u.qZA(),u.TgZ(5,"select",3),u.NdJ("change",function(o){return r.filterSortSport(o)})("ngModelChange",function(o){return r.sportValue=o}),u.TgZ(6,"option",4),u._uU(7,"Choose a category"),u.qZA(),u.YNc(8,C3,2,2,"option",5),u.qZA()(),u.TgZ(9,"div",6)(10,"h3"),u._uU(11,"Sort here:"),u.qZA(),u.TgZ(12,"select",7),u.NdJ("change",function(o){return r.filterSortSport(o)})("ngModelChange",function(o){return r.sortValue=o}),u.TgZ(13,"option",4),u._uU(14,"Sort"),u.qZA(),u.TgZ(15,"option",8),u._uU(16,"Price: High to Low"),u.qZA(),u.TgZ(17,"option",9),u._uU(18,"Price: Low to High"),u.qZA(),u.TgZ(19,"option",10),u._uU(20,"Alphabet: A to Z"),u.qZA(),u.TgZ(21,"option",11),u._uU(22,"Alphabet: Z to A"),u.qZA()()(),u.TgZ(23,"div",12)(24,"h3"),u._uU(25,"Search"),u.qZA(),u.TgZ(26,"input",13),u.NdJ("ngModelChange",function(o){return r.searchValue=o})("keyup",function(){return r.searchSport()}),u.qZA()()(),u.TgZ(27,"div",14)(28,"div",15),u.YNc(29,I3,32,31,"div",16),u.qZA()()),2&t&&(u.xp6(5),u.Q6J("ngModel",r.sportValue),u.xp6(3),u.Q6J("ngForOf",r.sports3),u.xp6(4),u.Q6J("ngModel",r.sortValue),u.xp6(14),u.Q6J("ngModel",r.searchValue),u.xp6(3),u.Q6J("ngForOf",r.sports2))},directives:[za,ne,fo,pu,Oe,gs,Bn,_i,Bs],pipes:[Mo,As],styles:['@import"https://fonts.googleapis.com/css2?family=Hahmlet:wght@200&display=swap";p[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%], label[_ngcontent-%COMP%], option[_ngcontent-%COMP%]{font-family:Hahmlet,serif}img[_ngcontent-%COMP%]{width:400px;height:300px}.form-control[_ngcontent-%COMP%]{display:block;width:100%;padding:.375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;background-clip:padding-box;border:1px solid #ced4da;-webkit-appearance:none;appearance:none;border-radius:0rem!important;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;height:43px}h2[_ngcontent-%COMP%]{color:red}.xxx[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.product-card[_ngcontent-%COMP%], .bl[_ngcontent-%COMP%]{background-color:#dff!important}.bord[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-top:30px;margin-bottom:30px;border-left:6px solid #71a7d3!important}.con4[_ngcontent-%COMP%]{margin:0 auto;display:flex;flex-direction:column;align-items:center;justify-content:center}@media (min-width: 768px){.offset-md-2[_ngcontent-%COMP%]{margin-left:0%}}a[_ngcontent-%COMP%]{text-decoration:none!important}#calendar[_ngcontent-%COMP%]{display:flex;align-items:flex-start}h6[_ngcontent-%COMP%]{font-size:19px!important}.dropdown-menu2[_ngcontent-%COMP%]{position:absolute;z-index:3;display:block;min-width:10rem;padding:.5rem 0;margin:20% auto;font-size:1rem;color:#212529;text-align:left;list-style:none;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.15);border-radius:.25rem}.dropdown-menu3[_ngcontent-%COMP%]{position:absolute;z-index:3;display:block;min-width:10rem;padding:.5rem 0;margin:50% auto;font-size:1rem;color:#212529;text-align:left;list-style:none;background-color:#fff;background-clip:padding-box;border:1px solid rgba(0,0,0,.15);border-radius:.25rem}.btn-group[_ngcontent-%COMP%]{margin-right:20px}select[_ngcontent-%COMP%]{border:none;padding:10px;background-color:#fff!important;color:#000}.sdl[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;border-bottom:6px solid #71a7d3!important;border-left:6px solid #71a7d3!important;border-right:6px solid #71a7d3!important}h3[_ngcontent-%COMP%]{color:#fff}']}),n})();const hn=!1;function vO(n){return new u.vHH(3e3,hn)}function sH(){return"undefined"!=typeof window&&void 0!==window.document}function O1(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Mf(n){switch(n.length){case 0:return new Gw;case 1:return n[0];default:return new gO(n)}}function wO(n,e,t,r,i={},o={}){const c=[],h=[];let p=-1,y=null;if(r.forEach(T=>{const S=T.offset,x=S==p,O=x&&y||{};Object.keys(T).forEach(V=>{let J=V,we=T[V];if("offset"!==V)switch(J=e.normalizePropertyName(J,c),we){case"!":we=i[V];break;case Cd:we=o[V];break;default:we=e.normalizeStyleValue(V,J,we,c)}O[J]=we}),x||h.push(O),y=O,p=S}),c.length)throw function W3(n){return new u.vHH(3502,hn)}();return h}function F1(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&L1(t,"start",n)));break;case"done":n.onDone(()=>r(t&&L1(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&L1(t,"destroy",n)))}}function L1(n,e,t){const r=t.totalTime,o=U1(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(o._data=c),o}function U1(n,e,t,r,i="",o=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!c}}function oa(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function EO(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let V1=(n,e)=>!1,bO=(n,e,t)=>[],CO=null;function B1(n){const e=n.parentNode||n.host;return e===CO?null:e}(O1()||"undefined"!=typeof Element)&&(sH()?(CO=(()=>document.documentElement)(),V1=(n,e)=>{for(;e;){if(e===n)return!0;e=B1(e)}return!1}):V1=(n,e)=>n.contains(e),bO=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Ag=null,TO=!1;function IO(n){Ag||(Ag=function aH(){return"undefined"!=typeof document?document.body:null}()||{},TO=!!Ag.style&&"WebkitAppearance"in Ag.style);let e=!0;return Ag.style&&!function oH(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Ag.style,!e&&TO&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in Ag.style)),e}const SO=V1,DO=bO;let AO=(()=>{class n{validateStyleProperty(t){return IO(t)}matchesElement(t,r){return!1}containsElement(t,r){return SO(t,r)}getParentElement(t){return B1(t)}query(t,r,i){return DO(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,c,h=[],p){return new Gw(i,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),j1=(()=>{class n{}return n.NOOP=new AO,n})();const H1="ng-enter",_I="ng-leave",yI="ng-trigger",vI=".ng-trigger",MO="ng-animating",$1=".ng-animating";function xg(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:q1(parseFloat(e[1]),e[2])}function q1(n,e){return"s"===e?1e3*n:n}function wI(n,e,t){return n.hasOwnProperty("duration")?n:function cH(n,e,t){let i,o=0,c="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(vO()),{duration:0,delay:0,easing:""};i=q1(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(o=q1(parseFloat(p),h[4]));const y=h[5];y&&(c=y)}else i=n;if(!t){let h=!1,p=e.length;i<0&&(e.push(function S3(){return new u.vHH(3100,hn)}()),h=!0),o<0&&(e.push(function D3(){return new u.vHH(3101,hn)}()),h=!0),h&&e.splice(p,0,vO())}return{duration:i,delay:o,easing:c}}(n,e,t)}function Ey(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function Pf(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else Ey(n,t);return t}function NO(n,e,t){return t?e+":"+t+";":""}function kO(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=NO(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=NO(0,fH(t),n.style[t]));n.setAttribute("style",e)}function Zu(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=Z1(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),O1()&&kO(n))}function Mg(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=Z1(t);n.style[r]=""}),O1()&&kO(n))}function Zw(n){return Array.isArray(n)?1==n.length?n[0]:fO(n):n}const G1=new RegExp("{{\\s*(.+?)\\s*}}","g");function RO(n){let e=[];if("string"==typeof n){let t;for(;t=G1.exec(n);)e.push(t[1]);G1.lastIndex=0}return e}function EI(n,e,t){const r=n.toString(),i=r.replace(G1,(o,c)=>{let h=e[c];return e.hasOwnProperty(c)||(t.push(function x3(n){return new u.vHH(3003,hn)}()),h=""),h.toString()});return i==r?n:i}function bI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const hH=/-+([a-z0-9])/g;function Z1(n){return n.replace(hH,(...e)=>e[1].toUpperCase())}function fH(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function aa(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function M3(n){return new u.vHH(3004,hn)}()}}function OO(n,e){return window.getComputedStyle(n)[e]}function vH(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function wH(n,e,t){if(":"==n[0]){const p=function EH(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function q3(n){return new u.vHH(3016,hn)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function $3(n){return new u.vHH(3015,hn)}()),e;const i=r[1],o=r[2],c=r[3];e.push(FO(i,c));"<"==o[0]&&!("*"==i&&"*"==c)&&e.push(FO(c,i))}(r,t,e)):t.push(n),t}const SI=new Set(["true","1"]),DI=new Set(["false","0"]);function FO(n,e){const t=SI.has(n)||DI.has(n),r=SI.has(e)||DI.has(e);return(i,o)=>{let c="*"==n||n==i,h="*"==e||e==o;return!c&&t&&"boolean"==typeof i&&(c=i?SI.has(n):DI.has(n)),!h&&r&&"boolean"==typeof o&&(h=o?SI.has(e):DI.has(e)),c&&h}}const bH=new RegExp("s*:selfs*,?","g");function z1(n,e,t,r){return new CH(n).build(e,t,r)}class CH{constructor(e){this._driver=e}build(e,t,r){const i=new SH(t);this._resetContextStyleTimingState(i);const o=aa(this,Zw(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),o}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function N3(){return new u.vHH(3006,hn)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const p=h,y=p.name;y.toString().split(/\s*,\s*/).forEach(T=>{p.name=T,o.push(this.visitState(p,t))}),p.name=y}else if(1==h.type){const p=this.visitTransition(h,t);r+=p.queryCount,i+=p.depCount,c.push(p)}else t.errors.push(function k3(){return new u.vHH(3007,hn)}())}),{type:7,name:e.name,states:o,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,c=i||{};r.styles.forEach(h=>{if(AI(h)){const p=h;Object.keys(p).forEach(y=>{RO(p[y]).forEach(T=>{c.hasOwnProperty(T)||o.add(T)})})}}),o.size&&(bI(o.values()),t.errors.push(function R3(n,e){return new u.vHH(3008,hn)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=aa(this,Zw(e.animation),t);return{type:1,matchers:vH(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Pg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>aa(this,r,t)),options:Pg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(c=>{t.currentTime=r;const h=aa(this,c,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:o,options:Pg(e.options)}}visitAnimate(e,t){const r=function AH(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return W1(wI(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=W1(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=wI(t,e);return W1(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:Dg({});if(5==o.type)i=this.visitKeyframes(o,t);else{let c=e.styles,h=!1;if(!c){h=!0;const y={};r.easing&&(y.easing=r.easing),c=Dg(y)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(c,t);p.isEmptyStep=h,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==Cd?r.push(c):t.errors.push(function O3(n){return new u.vHH(3002,hn)}()):r.push(c)}):r.push(e.styles);let i=!1,o=null;return r.forEach(c=>{if(AI(c)){const h=c,p=h.easing;if(p&&(o=p,delete h.easing),!i)for(let y in h)if(h[y].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(h=>{if(!this._driver.validateStyleProperty(h))return delete c[h],void t.unsupportedCSSPropertiesFound.add(h);const p=t.collectedStyles[t.currentQuerySelector],y=p[h];let T=!0;y&&(o!=i&&o>=y.startTime&&i<=y.endTime&&(t.errors.push(function F3(n,e,t,r,i){return new u.vHH(3010,hn)}()),T=!1),o=y.startTime),T&&(p[h]={startTime:o,endTime:i}),t.options&&function dH(n,e,t){const r=e.params||{},i=RO(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function A3(n){return new u.vHH(3001,hn)}())})}(c[h],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function L3(){return new u.vHH(3011,hn)}()),r;let o=0;const c=[];let h=!1,p=!1,y=0;const T=e.steps.map(Ge=>{const nt=this._makeStyleAst(Ge,t);let rt=null!=nt.offset?nt.offset:function DH(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(AI(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(AI(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(nt.styles),Xe=0;return null!=rt&&(o++,Xe=nt.offset=rt),p=p||Xe<0||Xe>1,h=h||Xe<y,y=Xe,c.push(Xe),nt});p&&t.errors.push(function U3(){return new u.vHH(3012,hn)}()),h&&t.errors.push(function V3(){return new u.vHH(3200,hn)}());const S=e.steps.length;let x=0;o>0&&o<S?t.errors.push(function B3(){return new u.vHH(3202,hn)}()):0==o&&(x=1/(S-1));const O=S-1,V=t.currentTime,J=t.currentAnimateTimings,we=J.duration;return T.forEach((Ge,nt)=>{const rt=x>0?nt==O?1:x*nt:c[nt],Xe=rt*we;t.currentTime=V+J.delay+Xe,J.duration=Xe,this._validateStyleAst(Ge,t),Ge.offset=rt,r.styles.push(Ge)}),r}visitReference(e,t){return{type:8,animation:aa(this,Zw(e.animation),t),options:Pg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Pg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Pg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,c]=function TH(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(bH,"")),n=n.replace(/@\*/g,vI).replace(/@\w+/g,t=>vI+"-"+t.substr(1)).replace(/:animating/g,$1),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,oa(t.collectedStyles,t.currentQuerySelector,{});const h=aa(this,Zw(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:h,originalSelector:e.selector,options:Pg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function j3(){return new u.vHH(3013,hn)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:wI(e.timings,t.errors,!0);return{type:12,animation:aa(this,Zw(e.animation),t),timings:r,options:null}}}class SH{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function AI(n){return!Array.isArray(n)&&"object"==typeof n}function Pg(n){return n?(n=Ey(n)).params&&(n.params=function IH(n){return n?Ey(n):null}(n.params)):n={},n}function W1(n,e,t){return{duration:n,delay:e,easing:t}}function K1(n,e,t,r,i,o,c=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:c,subTimeline:h}}class xI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const PH=new RegExp(":enter","g"),kH=new RegExp(":leave","g");function Y1(n,e,t,r,i,o={},c={},h,p,y=[]){return(new RH).buildKeyframes(n,e,t,r,i,o,c,h,p,y)}class RH{buildKeyframes(e,t,r,i,o,c,h,p,y,T=[]){y=y||new xI;const S=new Q1(e,t,y,i,o,T,[]);S.options=p,S.currentTimeline.setStyles([c],null,S.errors,p),aa(this,r,S);const x=S.timelines.filter(O=>O.containsAnimation());if(Object.keys(h).length){let O;for(let V=x.length-1;V>=0;V--){const J=x[V];if(J.element===t){O=J;break}}O&&!O.allowOnlyTimelineStyles()&&O.setStyles([h],null,S.errors,p)}return x.length?x.map(O=>O.buildKeyframes()):[K1(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);o!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const c=null!=r.duration?xg(r.duration):null,h=null!=r.delay?xg(r.delay):null;return 0!==c&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,c,h);o=Math.max(o,y.duration+y.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),aa(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=MI);const c=xg(o.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>aa(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?xg(e.options.delay):0;e.steps.forEach(c=>{const h=t.createSubContext(e.options);o&&h.delayNextStep(o),aa(this,c,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return wI(t.params?EI(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(p=>{h.forwardTime((p.offset||0)*o),h.setStyles(p.styles,p.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?xg(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=MI);let c=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let p=null;h.forEach((y,T)=>{t.currentQueryIndex=T;const S=t.createSubContext(e.options,y);o&&S.delayNextStep(o),y===t.element&&(p=S.currentTimeline),aa(this,e.animation,S),S.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,S.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,c=Math.abs(o.duration),h=c*(t.currentQueryTotal-1);let p=c*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":p=h-p;break;case"full":p=r.currentStaggerTime}const T=t.currentTimeline;p&&T.delayNextStep(p);const S=T.currentTime;aa(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-S+(i.startTime-r.currentTimeline.startTime)}}const MI={};class Q1{constructor(e,t,r,i,o,c,h,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=c,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=MI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new PI(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=xg(r.duration)),null!=r.delay&&(i.delay=xg(r.delay));const o=r.params;if(o){let c=i.params;c||(c=this.options.params={}),Object.keys(o).forEach(h=>{(!t||!c.hasOwnProperty(h))&&(c[h]=EI(o[h],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new Q1(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=MI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},o=new OH(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,c){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(PH,"."+this._enterClassName)).replace(kH,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),h.push(...y)}return!o&&0==h.length&&c.push(function H3(n){return new u.vHH(3014,hn)}()),h}}class PI{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new PI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Cd,this._currentKeyframe[t]=Cd}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const o=i&&i.params||{},c=function FH(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(o=>{t[o]=Cd})):Pf(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(h=>{const p=EI(c[h],o,r);this._pendingStyles[h]=p,this._localTimelineStyles.hasOwnProperty(h)||(this._backFill[h]=this._globalTimelineStyles.hasOwnProperty(h)?this._globalTimelineStyles[h]:Cd),this._updateStyle(h,p)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,p)=>{const y=Pf(h,!0);Object.keys(y).forEach(T=>{const S=y[T];"!"==S?e.add(T):S==Cd&&t.add(T)}),r||(y.offset=p/this.duration),i.push(y)});const o=e.size?bI(e.values()):[],c=t.size?bI(t.values()):[];if(r){const h=i[0],p=Ey(h);h.offset=0,p.offset=1,i=[h,p]}return K1(this.element,i,o,c,this.duration,this.startTime,this.easing,!1)}}class OH extends PI{constructor(e,t,r,i,o,c,h=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=h,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],c=r+t,h=t/c,p=Pf(e[0],!1);p.offset=0,o.push(p);const y=Pf(e[0],!1);y.offset=VO(h),o.push(y);const T=e.length-1;for(let S=1;S<=T;S++){let x=Pf(e[S],!1);x.offset=VO((t+x.offset*r)/c),o.push(x)}r=c,t=0,i="",e=o}return K1(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function VO(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class J1{}class LH extends J1{normalizePropertyName(e,t){return Z1(e)}normalizeStyleValue(e,t,r,i){let o="";const c=r.toString().trim();if(UH[t]&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(function P3(n,e){return new u.vHH(3005,hn)}())}return c+o}}const UH=(()=>function VH(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function BO(n,e,t,r,i,o,c,h,p,y,T,S,x){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:c,timelines:h,queriedElements:p,preStyleProps:y,postStyleProps:T,totalTime:S,errors:x}}const X1={};class jO{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function BH(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],o=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return o?o.buildStyles(t,r):c}build(e,t,r,i,o,c,h,p,y,T){const S=[],x=this.ast.options&&this.ast.options.params||X1,V=this.buildStyles(r,h&&h.params||X1,S),J=p&&p.params||X1,we=this.buildStyles(i,J,S),Ge=new Set,nt=new Map,rt=new Map,Xe="void"===i,xt={params:Object.assign(Object.assign({},x),J)},Nt=T?[]:Y1(e,t,this.ast.animation,o,c,V,we,xt,y,S);let fn=0;if(Nt.forEach(ca=>{fn=Math.max(ca.duration+ca.delay,fn)}),S.length)return BO(t,this._triggerName,r,i,Xe,V,we,[],[],nt,rt,fn,S);Nt.forEach(ca=>{const Ad=ca.element,aU=oa(nt,Ad,{});ca.preStyleProps.forEach(qg=>aU[qg]=!0);const IE=oa(rt,Ad,{});ca.postStyleProps.forEach(qg=>IE[qg]=!0),Ad!==t&&Ge.add(Ad)});const Kr=bI(Ge.values());return BO(t,this._triggerName,r,i,Xe,V,we,Nt,Kr,nt,rt,fn)}}class jH{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=Ey(this.defaultParams);return Object.keys(e).forEach(o=>{const c=e[o];null!=c&&(i[o]=c)}),this.styles.styles.forEach(o=>{if("string"!=typeof o){const c=o;Object.keys(c).forEach(h=>{let p=c[h];p.length>1&&(p=EI(p,i,t));const y=this.normalizer.normalizePropertyName(h,t);p=this.normalizer.normalizeStyleValue(h,y,p,t),r[y]=p})}}),r}}class $H{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new jH(i.style,i.options&&i.options.params||{},r)}),HO(this.states,"true","1"),HO(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new jO(e,i,this.states))}),this.fallbackTransition=function qH(n,e,t){return new jO(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function HO(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const GH=new xI;class ZH{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],o=z1(this._driver,t,r,[]);if(r.length)throw function K3(n){return new u.vHH(3503,hn)}();this._animations[e]=o}_buildPlayer(e,t,r){const i=e.element,o=wO(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations[e];let c;const h=new Map;if(o?(c=Y1(this._driver,t,o,H1,_I,{},{},r,GH,i),c.forEach(T=>{const S=oa(h,T.element,{});T.postStyleProps.forEach(x=>S[x]=null)})):(i.push(function Y3(){return new u.vHH(3300,hn)}()),c=[]),i.length)throw function Q3(n){return new u.vHH(3504,hn)}();h.forEach((T,S)=>{Object.keys(T).forEach(x=>{T[x]=this._driver.computeStyle(S,x,Cd)})});const y=Mf(c.map(T=>{const S=h.get(T.element);return this._buildPlayer(T,{},S)}));return this._playersById[e]=y,y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function J3(n){return new u.vHH(3301,hn)}();return t}listen(e,t,r,i){const o=U1(t,"","","");return F1(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const $O="ng-animate-queued",eP="ng-animate-disabled",QH=[],qO={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},JH={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Wa="__ng_removed";class tP{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function n$(n){return null!=n?n:null}(r?e.value:e),r){const o=Ey(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const zw="void",nP=new tP(zw);class XH{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ka(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function X3(n,e){return new u.vHH(3302,hn)}();if(null==r||0==r.length)throw function eH(n){return new u.vHH(3303,hn)}();if(!function r$(n){return"start"==n||"done"==n}(r))throw function tH(n,e){return new u.vHH(3400,hn)}();const o=oa(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};o.push(c);const h=oa(this._engine.statesByElement,e,{});return h.hasOwnProperty(t)||(Ka(e,yI),Ka(e,yI+"-"+t),h[t]=nP),()=>{this._engine.afterFlush(()=>{const p=o.indexOf(c);p>=0&&o.splice(p,1),this._triggers[t]||delete h[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function nH(n){return new u.vHH(3401,hn)}();return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),c=new rP(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(Ka(e,yI),Ka(e,yI+"-"+t),this._engine.statesByElement.set(e,h={}));let p=h[t];const y=new tP(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),h[t]=y,p||(p=nP),y.value!==zw&&p.value===y.value){if(!function o$(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(p.params,y.params)){const J=[],we=o.matchStyles(p.value,p.params,J),Ge=o.matchStyles(y.value,y.params,J);J.length?this._engine.reportError(J):this._engine.afterFlush(()=>{Mg(e,we),Zu(e,Ge)})}return}const x=oa(this._engine.playersByElement,e,[]);x.forEach(J=>{J.namespaceId==this.id&&J.triggerName==t&&J.queued&&J.destroy()});let O=o.matchTransition(p.value,y.value,e,y.params),V=!1;if(!O){if(!i)return;O=o.fallbackTransition,V=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:O,fromState:p,toState:y,player:c,isFallbackTransition:V}),V||(Ka(e,$O),c.onStart(()=>{by(e,$O)})),c.onDone(()=>{let J=this.players.indexOf(c);J>=0&&this.players.splice(J,1);const we=this._engine.playersByElement.get(e);if(we){let Ge=we.indexOf(c);Ge>=0&&we.splice(Ge,1)}}),this.players.push(c),x.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,vI,!0);r.forEach(i=>{if(i[Wa])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e),c=new Map;if(o){const h=[];if(Object.keys(o).forEach(p=>{if(c.set(p,o[p].value),this._triggers[p]){const y=this.trigger(e,p,zw,i);y&&h.push(y)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Mf(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const c=o.name;if(i.has(c))return;i.add(c);const p=this._triggers[c].fallbackTransition,y=r[c]||nP,T=new tP(zw),S=new rP(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:p,fromState:y,toState:T,player:S,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const o=e[Wa];(!o||o===qO)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ka(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,c=this._elementListeners.get(o);c&&c.forEach(h=>{if(h.name==r.triggerName){const p=U1(o,r.triggerName,r.fromState.value,r.toState.value);p._data=e,F1(r.player,h.phase,p,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==o||0==c?o-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class e${constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new XH(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,o=r.length-1;if(o>=0){let c=!1;if(void 0!==this.driver.getParentElement){let h=this.driver.getParentElement(t);for(;h;){const p=i.get(h);if(p){const y=r.indexOf(p);r.splice(y+1,0,e),c=!0;break}h=this.driver.getParentElement(h)}}else for(let h=o;h>=0;h--)if(this.driver.containsElement(r[h].hostElement,t)){r.splice(h+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let o=0;o<i.length;o++){const c=r[i[o]].namespaceId;if(c){const h=this._fetchNamespace(c);h&&t.add(h)}}}return t}trigger(e,t,r,i){if(NI(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!NI(t))return;const o=t[Wa];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ka(e,eP)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),by(e,eP))}removeNode(e,t,r,i){if(NI(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[Wa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return NI(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,vI,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,$1,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Mf(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Wa];if(r&&r.setForRemoval){if(e[Wa]=qO,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(eP))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ka(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Mf(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function rH(n){return new u.vHH(3402,hn)}()}_flushAnimations(e,t){const r=new xI,i=[],o=new Map,c=[],h=new Map,p=new Map,y=new Map,T=new Set;this.disabledNodes.forEach(gt=>{T.add(gt);const Dt=this.driver.query(gt,".ng-animate-queued",!0);for(let Ft=0;Ft<Dt.length;Ft++)T.add(Dt[Ft])});const S=this.bodyNode,x=Array.from(this.statesByElement.keys()),O=zO(x,this.collectedEnterElements),V=new Map;let J=0;O.forEach((gt,Dt)=>{const Ft=H1+J++;V.set(Dt,Ft),gt.forEach(Sn=>Ka(Sn,Ft))});const we=[],Ge=new Set,nt=new Set;for(let gt=0;gt<this.collectedLeaveElements.length;gt++){const Dt=this.collectedLeaveElements[gt],Ft=Dt[Wa];Ft&&Ft.setForRemoval&&(we.push(Dt),Ge.add(Dt),Ft.hasAnimation?this.driver.query(Dt,".ng-star-inserted",!0).forEach(Sn=>Ge.add(Sn)):nt.add(Dt))}const rt=new Map,Xe=zO(x,Array.from(Ge));Xe.forEach((gt,Dt)=>{const Ft=_I+J++;rt.set(Dt,Ft),gt.forEach(Sn=>Ka(Sn,Ft))}),e.push(()=>{O.forEach((gt,Dt)=>{const Ft=V.get(Dt);gt.forEach(Sn=>by(Sn,Ft))}),Xe.forEach((gt,Dt)=>{const Ft=rt.get(Dt);gt.forEach(Sn=>by(Sn,Ft))}),we.forEach(gt=>{this.processLeaveNode(gt)})});const xt=[],Nt=[];for(let gt=this._namespaceList.length-1;gt>=0;gt--)this._namespaceList[gt].drainQueuedTransitions(t).forEach(Ft=>{const Sn=Ft.player,$i=Ft.element;if(xt.push(Sn),this.collectedEnterElements.length){const to=$i[Wa];if(to&&to.setForMove){if(to.previousTriggersValues&&to.previousTriggersValues.has(Ft.triggerName)){const Gg=to.previousTriggersValues.get(Ft.triggerName),qf=this.statesByElement.get(Ft.element);qf&&qf[Ft.triggerName]&&(qf[Ft.triggerName].value=Gg)}return void Sn.destroy()}}const ec=!S||!this.driver.containsElement(S,$i),da=rt.get($i),$f=V.get($i),Pr=this._buildInstruction(Ft,r,$f,da,ec);if(Pr.errors&&Pr.errors.length)return void Nt.push(Pr);if(ec)return Sn.onStart(()=>Mg($i,Pr.fromStyles)),Sn.onDestroy(()=>Zu($i,Pr.toStyles)),void i.push(Sn);if(Ft.isFallbackTransition)return Sn.onStart(()=>Mg($i,Pr.fromStyles)),Sn.onDestroy(()=>Zu($i,Pr.toStyles)),void i.push(Sn);const cU=[];Pr.timelines.forEach(to=>{to.stretchStartingKeyframe=!0,this.disabledNodes.has(to.element)||cU.push(to)}),Pr.timelines=cU,r.append($i,Pr.timelines),c.push({instruction:Pr,player:Sn,element:$i}),Pr.queriedElements.forEach(to=>oa(h,to,[]).push(Sn)),Pr.preStyleProps.forEach((to,Gg)=>{const qf=Object.keys(to);if(qf.length){let Zg=p.get(Gg);Zg||p.set(Gg,Zg=new Set),qf.forEach(DN=>Zg.add(DN))}}),Pr.postStyleProps.forEach((to,Gg)=>{const qf=Object.keys(to);let Zg=y.get(Gg);Zg||y.set(Gg,Zg=new Set),qf.forEach(DN=>Zg.add(DN))})});if(Nt.length){const gt=[];Nt.forEach(Dt=>{gt.push(function iH(n,e){return new u.vHH(3505,hn)}())}),xt.forEach(Dt=>Dt.destroy()),this.reportError(gt)}const fn=new Map,Kr=new Map;c.forEach(gt=>{const Dt=gt.element;r.has(Dt)&&(Kr.set(Dt,Dt),this._beforeAnimationBuild(gt.player.namespaceId,gt.instruction,fn))}),i.forEach(gt=>{const Dt=gt.element;this._getPreviousPlayers(Dt,!1,gt.namespaceId,gt.triggerName,null).forEach(Sn=>{oa(fn,Dt,[]).push(Sn),Sn.destroy()})});const ca=we.filter(gt=>KO(gt,p,y)),Ad=new Map;ZO(Ad,this.driver,nt,y,Cd).forEach(gt=>{KO(gt,p,y)&&ca.push(gt)});const IE=new Map;O.forEach((gt,Dt)=>{ZO(IE,this.driver,new Set(gt),p,"!")}),ca.forEach(gt=>{const Dt=Ad.get(gt),Ft=IE.get(gt);Ad.set(gt,Object.assign(Object.assign({},Dt),Ft))});const qg=[],lU=[],uU={};c.forEach(gt=>{const{element:Dt,player:Ft,instruction:Sn}=gt;if(r.has(Dt)){if(T.has(Dt))return Ft.onDestroy(()=>Zu(Dt,Sn.toStyles)),Ft.disabled=!0,Ft.overrideTotalTime(Sn.totalTime),void i.push(Ft);let $i=uU;if(Kr.size>1){let da=Dt;const $f=[];for(;da=da.parentNode;){const Pr=Kr.get(da);if(Pr){$i=Pr;break}$f.push(da)}$f.forEach(Pr=>Kr.set(Pr,$i))}const ec=this._buildAnimation(Ft.namespaceId,Sn,fn,o,IE,Ad);if(Ft.setRealPlayer(ec),$i===uU)qg.push(Ft);else{const da=this.playersByElement.get($i);da&&da.length&&(Ft.parentPlayer=Mf(da)),i.push(Ft)}}else Mg(Dt,Sn.fromStyles),Ft.onDestroy(()=>Zu(Dt,Sn.toStyles)),lU.push(Ft),T.has(Dt)&&i.push(Ft)}),lU.forEach(gt=>{const Dt=o.get(gt.element);if(Dt&&Dt.length){const Ft=Mf(Dt);gt.setRealPlayer(Ft)}}),i.forEach(gt=>{gt.parentPlayer?gt.syncPlayerEvents(gt.parentPlayer):gt.destroy()});for(let gt=0;gt<we.length;gt++){const Dt=we[gt],Ft=Dt[Wa];if(by(Dt,_I),Ft&&Ft.hasAnimation)continue;let Sn=[];if(h.size){let ec=h.get(Dt);ec&&ec.length&&Sn.push(...ec);let da=this.driver.query(Dt,$1,!0);for(let $f=0;$f<da.length;$f++){let Pr=h.get(da[$f]);Pr&&Pr.length&&Sn.push(...Pr)}}const $i=Sn.filter(ec=>!ec.destroyed);$i.length?i$(this,Dt,$i):this.processLeaveNode(Dt)}return we.length=0,qg.forEach(gt=>{this.players.push(gt),gt.onDone(()=>{gt.destroy();const Dt=this.players.indexOf(gt);this.players.splice(Dt,1)}),gt.play()}),qg}elementContainsData(e,t){let r=!1;const i=t[Wa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let c=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(c=h)}else{const h=this.playersByElement.get(e);if(h){const p=!o||o==zw;h.forEach(y=>{y.queued||!p&&y.triggerName!=i||c.push(y)})}}return(r||i)&&(c=c.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),c}_beforeAnimationBuild(e,t,r){const o=t.element,c=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,T=y!==o,S=oa(r,y,[]);this._getPreviousPlayers(y,T,c,h,t.toState).forEach(O=>{const V=O.getRealPlayer();V.beforeDestroy&&V.beforeDestroy(),O.destroy(),S.push(O)})}Mg(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,c){const h=t.triggerName,p=t.element,y=[],T=new Set,S=new Set,x=t.timelines.map(V=>{const J=V.element;T.add(J);const we=J[Wa];if(we&&we.removedBeforeQueried)return new Gw(V.duration,V.delay);const Ge=J!==p,nt=function s$(n){const e=[];return WO(n,e),e}((r.get(J)||QH).map(fn=>fn.getRealPlayer())).filter(fn=>!!fn.element&&fn.element===J),rt=o.get(J),Xe=c.get(J),xt=wO(0,this._normalizer,0,V.keyframes,rt,Xe),Nt=this._buildPlayer(V,xt,nt);if(V.subTimeline&&i&&S.add(J),Ge){const fn=new rP(e,h,J);fn.setRealPlayer(Nt),y.push(fn)}return Nt});y.forEach(V=>{oa(this.playersByQueriedElement,V.element,[]).push(V),V.onDone(()=>function t$(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,V.element,V))}),T.forEach(V=>Ka(V,MO));const O=Mf(x);return O.onDestroy(()=>{T.forEach(V=>by(V,MO)),Zu(p,t.toStyles)}),S.forEach(V=>{oa(i,V,[]).push(O)}),O}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Gw(e.duration,e.delay)}}class rP{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new Gw,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>F1(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){oa(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function NI(n){return n&&1===n.nodeType}function GO(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function ZO(n,e,t,r,i){const o=[];t.forEach(p=>o.push(GO(p)));const c=[];r.forEach((p,y)=>{const T={};p.forEach(S=>{const x=T[S]=e.computeStyle(y,S,i);(!x||0==x.length)&&(y[Wa]=JH,c.push(y))}),n.set(y,T)});let h=0;return t.forEach(p=>GO(p,o[h++])),c}function zO(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=new Set(e),o=new Map;function c(h){if(!h)return 1;let p=o.get(h);if(p)return p;const y=h.parentNode;return p=t.has(y)?y:i.has(y)?1:c(y),o.set(h,p),p}return e.forEach(h=>{const p=c(h);1!==p&&t.get(p).push(h)}),t}function Ka(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function by(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function i$(n,e,t){Mf(t).onDone(()=>n.processLeaveNode(e))}function WO(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof gO?WO(r.players,e):e.push(r)}}function KO(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class kI{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new e$(e,t,r),this._timelineEngine=new ZH(e,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const c=e+"-"+i;let h=this._triggerCache[c];if(!h){const p=[],T=z1(this._driver,o,p,[]);if(p.length)throw function z3(n,e){return new u.vHH(3404,hn)}();h=function HH(n,e,t){return new $H(n,e,t)}(i,T,this._normalizer),this._triggerCache[c]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,c]=EO(r);this._timelineEngine.command(o,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[c,h]=EO(r);return this._timelineEngine.listen(c,t,h,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let l$=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o={}),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Zu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Zu(this._element,this._initialStyles),this._endStyles&&(Zu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Mg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Mg(this._element,this._endStyles),this._endStyles=null),Zu(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function iP(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];u$(i)&&(e=e||{},e[i]=n[i])}return e}function u$(n){return"display"===n||"position"===n}class YO{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:OO(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class c${validateStyleProperty(e){return IO(e)}matchesElement(e,t){return!1}containsElement(e,t){return SO(e,t)}getParentElement(e){return B1(e)}query(e,t,r){return DO(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,o,c=[]){const p={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(p.easing=o);const y={},T=c.filter(x=>x instanceof YO);(function pH(n,e){return 0===n||0===e})(r,i)&&T.forEach(x=>{let O=x.currentSnapshot;Object.keys(O).forEach(V=>y[V]=O[V])}),t=function gH(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let o=e[0],c=[];if(r.forEach(h=>{o.hasOwnProperty(h)||c.push(h),o[h]=t[h]}),c.length)for(var i=1;i<e.length;i++){let h=e[i];c.forEach(function(p){h[p]=OO(n,p)})}}return e}(e,t=t.map(x=>Pf(x,!1)),y);const S=function a$(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=iP(e[0]),e.length>1&&(r=iP(e[e.length-1]))):e&&(t=iP(e)),t||r?new l$(n,t,r):null}(e,t);return new YO(e,t,p,S)}}let d$=(()=>{class n extends dO{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:u.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?fO(t):t;return QO(this._renderer,null,r,"register",[i]),new h$(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(fe))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class h$ extends class $j{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new f$(this._id,e,t||{},this._renderer)}}class f${constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return QO(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function QO(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const JO="@.disabled";let p$=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,c)=>{const h=null==c?void 0:c.parentNode(o);h&&c.removeChild(h,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let T=this._rendererCache.get(o);return T||(T=new XO("",o,this.engine),this._rendererCache.set(o,T)),T}const c=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const p=T=>{Array.isArray(T)?T.forEach(p):this.engine.registerTrigger(c,h,t,T.name,T)};return r.data.animation.forEach(p),new g$(this,h,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[c,h]=o;c(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.FYo),u.LFG(kI),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class XO{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==JO?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class g$ extends XO{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==JO?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function m$(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.substr(1),c="";return"@"!=o.charAt(0)&&([o,c]=function _$(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,c,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let y$=(()=>{class n extends kI{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(fe),u.LFG(j1),u.LFG(J1))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const eF=new u.OlP("AnimationModuleType"),tF=[{provide:dO,useClass:d$},{provide:J1,useFactory:function v$(){return new LH}},{provide:kI,useClass:y$},{provide:u.FYo,useFactory:function w$(n,e,t){return new p$(n,e,t)},deps:[jn,kI,u.R0b]}],nF=[{provide:j1,useFactory:()=>new c$},{provide:eF,useValue:"BrowserAnimations"},...tF],E$=[{provide:j1,useClass:AO},{provide:eF,useValue:"NoopAnimations"},...tF];let b$=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?E$:nF}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:nF,imports:[va]}),n})(),C$=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-not-found"]],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"app-sadrzaj")},directives:[mO],styles:[""]}),n})();function T$(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",20)(1,"div",21)(2,"div",22),u._uU(3),u.qZA(),u.TgZ(4,"div",23),u._uU(5),u.qZA(),u.TgZ(6,"div",24),u._uU(7),u.qZA(),u.TgZ(8,"div",24),u._uU(9),u.qZA(),u.TgZ(10,"span")(11,"a",25),u.NdJ("click",function(){u.CHM(t);const i=u.oxw().$implicit;return u.oxw(2).EditRecord(i)})("mouseenter",function(){u.CHM(t);const i=u.oxw().index;return u.oxw(2).setLocal(i)}),u._uU(12,"Edit"),u.qZA(),u.TgZ(13,"a",26),u.NdJ("mouseenter",function(){u.CHM(t);const i=u.oxw().index;return u.oxw(2).setLocal(i)})("click",function(){u.CHM(t);const i=u.oxw().index;return u.oxw(2).DeleteTrainer(i)}),u._uU(14,"Delete"),u.qZA()()()()}if(2&n){const t=u.oxw(),r=t.$implicit,i=t.index;u.s9C("id",r.id),u.xp6(3),u.hij(" Name: ",r.ime," "),u.xp6(2),u.hij(" Last Name: ",r.prezime," "),u.xp6(2),u.hij(" Sports Id: ",r.idSport," "),u.xp6(2),u.hij(" Id:",i," ")}}function I$(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",27)(1,"div",21)(2,"div",22),u._uU(3," Edit trainer "),u.qZA(),u.TgZ(4,"div",3)(5,"div",8)(6,"div",28)(7,"input",29),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().$implicit.editname=i}),u.qZA()(),u.TgZ(8,"div",28)(9,"input",29),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().$implicit.editlastname=i}),u.qZA()(),u.TgZ(10,"div",28)(11,"input",29),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().$implicit.editid=i}),u.qZA()()()(),u.TgZ(12,"a",30),u.NdJ("click",function(){return u.CHM(t),u.oxw().$implicit.isedit=!1}),u._uU(13,"Cancel"),u.qZA(),u.TgZ(14,"a",31),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(),o=i.$implicit,c=i.index;return u.oxw(2).Updatarecord(o,c)}),u._uU(15,"Update "),u.qZA()()()}if(2&n){const t=u.oxw().$implicit;u.xp6(7),u.Q6J("ngModel",t.editname),u.xp6(2),u.Q6J("ngModel",t.editlastname),u.xp6(2),u.Q6J("ngModel",t.editid)}}function S$(n,e){if(1&n&&(u.TgZ(0,"div",17),u.YNc(1,T$,15,5,"div",18),u.YNc(2,I$,16,3,"ng-template",null,19,u.W1O),u.qZA()),2&n){const t=e.$implicit,r=u.MAs(3);u.xp6(1),u.Q6J("ngIf",!t.isedit)("ngIfElse",r)}}function D$(n,e){if(1&n&&(u.TgZ(0,"option",32,33),u._uU(2),u.qZA()),2&n){const t=e.$implicit;u.s9C("value",t),u.Q6J("ngValue",t),u.xp6(2),u.hij(" ",t," ")}}function A$(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"h4"),u._uU(5,"All trainers"),u.qZA()(),u.YNc(6,S$,4,2,"div",6),u.TgZ(7,"button",7),u.NdJ("click",function(){return u.CHM(t),u.oxw().reloadCurrentPage()}),u._uU(8,"if it doesn't work press this button(refresh page)"),u.qZA()(),u.TgZ(9,"form")(10,"span")(11,"h2"),u._uU(12,"Insert Trainer"),u.qZA()(),u.TgZ(13,"div",8)(14,"label",9),u._uU(15,"First Name"),u.qZA(),u.TgZ(16,"input",10),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().trainersName=i}),u.qZA()(),u.TgZ(17,"div",8)(18,"label",11),u._uU(19,"Last Name"),u.qZA(),u.TgZ(20,"input",12),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().trainersLastName=i}),u.qZA()(),u.TgZ(21,"div",8)(22,"label",13),u._uU(23,"Sports select"),u.qZA(),u.TgZ(24,"select",14),u.NdJ("ngModelChange",function(i){return u.CHM(t),u.oxw().trainersSport=i})("change",function(i){return u.CHM(t),u.oxw().onChange(i)}),u.YNc(25,D$,3,3,"option",15),u.qZA()(),u.TgZ(26,"button",16),u.NdJ("click",function(){return u.CHM(t),u.oxw().insertTrainers()}),u._uU(27,"Add Trainers"),u.qZA()()()()}if(2&n){const t=u.oxw();u.xp6(6),u.Q6J("ngForOf",t.trainers),u.xp6(10),u.Q6J("ngModel",t.trainersName),u.xp6(4),u.Q6J("ngModel",t.trainersLastName),u.xp6(4),u.Q6J("ngModel",t.trainersSport),u.xp6(1),u.Q6J("ngForOf",t.Sports),u.xp6(1),u.Q6J("disabled",!t.trainersName||!t.trainersLastName)}}function x$(n,e){1&n&&(u.TgZ(0,"div",34)(1,"div",3)(2,"div",4)(3,"div",5)(4,"div",35)(5,"h1",36)(6,"code"),u._uU(7,"Access Denied"),u.qZA()(),u._UZ(8,"hr",37),u.TgZ(9,"h2"),u._uU(10,"Try login"),u.qZA(),u.TgZ(11,"h3",38),u._uU(12,"You dont have permission to view this page."),u.qZA(),u.TgZ(13,"h3",39),u._uU(14,"\u{1f6ab}\u{1f6ab}\u{1f6ab}\u{1f6ab}"),u.qZA(),u.TgZ(15,"h6",39),u._uU(16,"error code:403 forbidden"),u.qZA()()()()()())}let M$=(()=>{class n{constructor(t,r,i){this.crudservice=t,this.fb=r,this.authService=i,this.Sports=["Court","Tennis court","Sports Hall","Swimming pools","Massage","Gym"],this.br=0,this.trainers2=this.trainers}ngOnChange(){}ngOnInit(){this.crudservice.get_allTrainer().subscribe(t=>{this.trainers=t.map(r=>r.payload.doc.data())})}EditRecord(t){t.isedit=!0,t.editname=t.ime,t.editlastname=t.prezime,t.editid=t.idSport}setLocal(t){this.crudservice.get_allTrainer().subscribe(r=>{localStorage.setItem("id",r[t].payload.doc.ref.id)})}Updatarecord(t,r){var i=localStorage.getItem("id");let o={};o.ime=t.editname,o.prezime=t.editlastname,o.idSport=t.editid,this.crudservice.update_trainer(i,o),t.isedit=!1}reloadCurrentPage(){window.location.reload()}DeleteTrainer(t){var r=localStorage.getItem("id");this.crudservice.delete_trainer(r)}onChange(t){"Court"==this.trainersSport[0]&&(this.trainersSport="f"),"Tennis court"==this.trainersSport[0]&&(this.trainersSport="t"),"Sports Hall"==this.trainersSport[0]&&(this.trainersSport="h"),"Swimming pools"==this.trainersSport[0]&&(this.trainersSport="p"),"Massage"==this.trainersSport[0]&&(this.trainersSport="m"),"Gym"==this.trainersSport[0]&&(this.trainersSport="g"),console.log(this.trainersSport[0])}insertTrainers(){this.trainersId=this.trainers.length,console.log(this.trainersSport[0]),this.crudservice.create_newTrainers({ime:this.trainersName,prezime:this.trainersLastName,idSport:this.trainersSport[0],id:this.trainersId},this.trainersId).then(r=>{this.trainersName="",this.trainersLastName="",this.trainersSport="",alert("Successfully added")}).catch(r=>{console.log(r)})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(gI),u.Y36(Xy),u.Y36(xf))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-trainer-crud"]],decls:4,vars:2,consts:[["class","container",4,"ngIf","ngIfElse"],["userloggedOut",""],[1,"container"],[1,"row"],[1,"row","p-2"],[1,"col-md-12","p-2","justify-content-center"],["class","col-md-3",4,"ngFor","ngForOf"],[2,"color","red","margin-top","20px",3,"click"],[1,"form-group"],["for","exampleInputEmail1"],["name","name","type","text","id","exampleInputName","aria-describedby","emailHelp","placeholder","Enter Name",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1"],["name","last","type","text","id","exampleInputLast","placeholder","Last Name",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleFormControlSelect2"],["multiple","","id","exampleFormControlSelect2","name","sport",1,"form-control",3,"ngModel","ngModelChange","change"],[3,"ngValue","value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary",2,"margin-top","10px","margin-bottom","10px",3,"disabled","click"],[1,"col-md-3"],["class","card",3,"id",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"card",3,"id"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle"],[1,"card-text"],[1,"btn","btn-primary","btn-xs",2,"margin-right","10px",3,"click","mouseenter"],["data-id","",1,"btn","btn-danger","btn-xs",3,"mouseenter","click"],[1,"card"],[1,"col-md-12"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"btn","btn-danger","btn-xs",2,"margin-right","10px",3,"click"],[1,"btn","btn-primary","btn-xs",3,"click"],[3,"ngValue","value"],["op",""],[1,"container",2,"height","600px","display","flex","align-items","center","justify-content","center"],[1,"w3-display-middle","center"],[1,"w3-jumbo","w3-animate-top","w3-center"],[1,"w3-border-white","w3-animate-left",2,"margin","auto","width","50%"],[1,"w3-center","w3-animate-right"],[1,"w3-center","w3-animate-zoom"]],template:function(t,r){if(1&t&&(u._UZ(0,"app-prva-komponenta"),u.YNc(1,A$,28,6,"div",0),u.YNc(2,x$,17,0,"ng-template",null,1,u.W1O)),2&t){const i=u.MAs(3);u.xp6(1),u.Q6J("ngIf",r.authService.userData)("ngIfElse",i)}},directives:[za,hr,Bn,_i,fo,pu,Tc,$o,Tl,bi,Oe,gs],styles:["#update[_ngcontent-%COMP%]{display:none}.center[_ngcontent-%COMP%]{flex-direction:column;align-items:center;justify-content:center;display:flex}"]}),n})(),P$=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(xf))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-sign-in"]],decls:38,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[2,"background-color","yellow!important"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"form-control"],["userName",""],["type","password","placeholder","Password","required","",1,"form-control"],["userPassword",""],["type","button","value","Sign in",1,"btn","btn-primary","btn-block","mb-4",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",2,"background-color","#ffaa5e",3,"click"],[1,"fab","fa-google-plus-g"],[1,"formGroup",2,"display","flex","align-items","center","justify-content","center"],[1,"redirectToLogin",2,"display","grid","align-items","center"],[2,"margin","0px auto"],["routerLink","/register-user",1,"redirect","btn","btn-primary","btn-block","mb-4"]],template:function(t,r){if(1&t){const i=u.EpF();u._UZ(0,"app-prva-komponenta"),u.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"h3"),u._uU(5,"Sign In"),u.qZA(),u.TgZ(6,"h5"),u._uU(7,"mail za logovanje "),u.TgZ(8,"mark",3),u._uU(9,"milos@gmail.com"),u.qZA()(),u.TgZ(10,"h5"),u._uU(11,"\u0161ifra "),u.TgZ(12,"mark",3),u._uU(13,"milos123"),u.qZA()(),u.TgZ(14,"h6"),u._uU(15,"Drugi nacin je registracija"),u.qZA(),u.TgZ(16,"div",4),u._UZ(17,"input",5,6),u.qZA(),u.TgZ(19,"div",4),u._UZ(20,"input",7,8),u.qZA(),u.TgZ(22,"div",4)(23,"input",9),u.NdJ("click",function(){u.CHM(i);const c=u.MAs(18),h=u.MAs(21);return r.authService.SignIn(c.value,h.value)}),u.qZA()(),u.TgZ(24,"div",4)(25,"span",10)(26,"span",11),u._uU(27,"Or"),u.qZA()()(),u.TgZ(28,"div",4)(29,"button",12),u.NdJ("click",function(){return r.authService.GoogleAuth()}),u._UZ(30,"i",13),u._uU(31," Log in with Google "),u.qZA()()(),u.TgZ(32,"div",14)(33,"div",15)(34,"span",16),u._uU(35,"Don't have an account?"),u.qZA(),u.TgZ(36,"button",17),u._uU(37," Register"),u.qZA()()()()()}},directives:[za,Bs],styles:[".authBlock[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column}.formGroup[_ngcontent-%COMP%]{margin-top:15px}"]}),n})(),N$=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(xf))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-sign-up"]],decls:28,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"form-control"],["userEmail",""],["type","password","placeholder","Password","required","",1,"form-control"],["userPwd",""],["href","","routerLink","/trainer-crud"],["type","button","value","Register",1,"btn","btn-primary","btn-block","mb-4",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",2,"background-color","#ffaa5e",3,"click"],[1,"fab","fa-google-plus-g"],[1,"redirectToLogin",2,"display","flex","align-items","center","justify-content","center","display","grid","align-items","center"],["routerLink","/sign",1,"redirect","btn","btn-primary","btn-block","mb-4"]],template:function(t,r){if(1&t){const i=u.EpF();u._UZ(0,"app-prva-komponenta"),u.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"h3"),u._uU(5,"Register"),u.qZA(),u.TgZ(6,"div",3),u._UZ(7,"input",4,5),u.qZA(),u.TgZ(9,"div",3),u._UZ(10,"input",6,7),u.qZA(),u.TgZ(12,"div",3)(13,"a",8)(14,"input",9),u.NdJ("click",function(){u.CHM(i);const c=u.MAs(8),h=u.MAs(11);return r.authService.SignUp(c.value,h.value)}),u.qZA()()(),u.TgZ(15,"div",3)(16,"span",10)(17,"span",11),u._uU(18,"Or"),u.qZA()()(),u.TgZ(19,"div",3)(20,"button",12),u.NdJ("click",function(){return r.authService.GoogleAuth()}),u._UZ(21,"i",13),u._uU(22," Continue with Google "),u.qZA()()(),u.TgZ(23,"div",14)(24,"span"),u._uU(25,"Already have an account? "),u.qZA(),u.TgZ(26,"button",15),u._uU(27,"Log In"),u.qZA()()()()}},directives:[za,Ml,Bs],styles:[".authBlock[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column}.formGroup[_ngcontent-%COMP%]{margin-top:15px}"]}),n})();function k$(n,e){if(1&n&&(u.TgZ(0,"div",1)(1,"div",17)(2,"div",18),u._UZ(3,"img",19),u.TgZ(4,"div",20)(5,"h1"),u._uU(6,"Hello: "),u.TgZ(7,"strong"),u._uU(8),u.qZA()(),u.TgZ(9,"p"),u._uU(10,"User ID: "),u.TgZ(11,"strong"),u._uU(12),u.qZA()(),u.TgZ(13,"p"),u._uU(14,"Email: "),u.TgZ(15,"strong"),u._uU(16),u.qZA()(),u.TgZ(17,"p"),u._uU(18,"Email Verified: "),u.TgZ(19,"strong"),u._uU(20),u.qZA()()()()()()),2&n){const t=e.ngIf;u.xp6(3),u.s9C("alt",t.displayName),u.xp6(5),u.Oqu(t.displayName?t.displayName:"User"),u.xp6(4),u.Oqu(t.uid),u.xp6(4),u.Oqu(t.email),u.xp6(4),u.Oqu(t.emailVerified)}}let R$=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(xf))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-dashboard"]],decls:24,vars:1,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],["routerLink","/trainer-crud",1,"nav-link","active"],[1,"fas","fa","fa-address-card"],["href","#",1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],["src","../../../assets/images/face0.png",1,"align-self-start","mr-5","img-thumbnail","rounded-circle",2,"width","20%",3,"alt"],[1,"media-body"]],template:function(t,r){1&t&&(u._UZ(0,"app-prva-komponenta"),u.TgZ(1,"div",0)(2,"div",1)(3,"nav",2)(4,"div",3)(5,"ul",4)(6,"li",5)(7,"a",6),u._UZ(8,"i",7),u._uU(9,"User Profile "),u.qZA()(),u.TgZ(10,"li",5)(11,"a",8),u._UZ(12,"i",9),u._uU(13,"CRUD Function "),u.qZA()(),u.TgZ(14,"li",5)(15,"a",10),u.NdJ("click",function(){return r.authService.SignOut()}),u._UZ(16,"i",11),u._uU(17,"Log out "),u.qZA()()()()(),u.TgZ(18,"main",12)(19,"div",13)(20,"div",14)(21,"h1",15),u._uU(22,"User Profile"),u.qZA()(),u.YNc(23,k$,21,5,"div",16),u.qZA()()()()),2&t&&(u.xp6(23),u.Q6J("ngIf",r.authService.userData))},directives:[za,Ml,hr],styles:["a[_ngcontent-%COMP%]{cursor:pointer}"]}),n})(),O$=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(xf))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-forgot-password"]],decls:18,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=u.EpF();u._UZ(0,"app-prva-komponenta"),u.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"h3"),u._uU(5,"Reset Password"),u.qZA(),u.TgZ(6,"p",3),u._uU(7,"Please enter your email address to request a password reset."),u.qZA(),u.TgZ(8,"div",4),u._UZ(9,"input",5,6),u.qZA(),u.TgZ(11,"div",4)(12,"input",7),u.NdJ("click",function(){u.CHM(i);const c=u.MAs(10);return r.authService.ForgotPassword(c.value)}),u.qZA()()(),u.TgZ(13,"div",8)(14,"span"),u._uU(15,"Go back to ? "),u.TgZ(16,"span",9),u._uU(17,"Log In"),u.qZA()()()()()}},directives:[za,Bs],styles:[""]}),n})();function F$(n,e){if(1&n&&(u.TgZ(0,"div",5)(1,"p",10),u._uU(2,"We have sent a confirmation email to "),u.TgZ(3,"strong"),u._uU(4),u.qZA(),u._uU(5,"."),u.qZA(),u.TgZ(6,"p",10),u._uU(7,"Please check your email and click on the link to verfiy your email address."),u.qZA()()),2&n){const t=e.ngIf;u.xp6(4),u.Oqu(t.email)}}const L$=[{path:"",redirectTo:"/SadrzajComponent",pathMatch:"full"},{path:"",component:mO},{path:"trainer-crud",component:M$},{path:"about-us",component:r3},{path:"author",component:i3},{path:"history",component:y3},{path:"sports",component:yO},{path:"sports#f",component:yO},{path:"contact",component:_3},{path:"sign",component:P$},{path:"forgot-password",component:O$},{path:"register-user",component:N$},{path:"dashboard",component:R$},{path:"verify-email-address",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(xf))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-verify-email"]],decls:20,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell",2,"display","flex","align-items","center","justify-content","center","flex-direction","column"],[1,"authBlock",2,"text-align","center"],["href","","routerLink","/trainer-crud"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin",2,"display","inline-grid"],["routerLink","/sign-in",1,"redirect","btn-primary","btn"],[1,"text-center"]],template:function(t,r){1&t&&(u._UZ(0,"app-prva-komponenta"),u.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"h3"),u._uU(5,"You are now registered.Thank You for Registering "),u.qZA(),u.TgZ(6,"h3"),u._uU(7,"Go to CRUD "),u.qZA(),u.TgZ(8,"a",3),u._uU(9," Crud operation here"),u.qZA(),u.YNc(10,F$,8,1,"div",4),u.TgZ(11,"div",5)(12,"button",6),u.NdJ("click",function(){return r.authService.SendVerificationMail()}),u._UZ(13,"i",7),u._uU(14," Resend Verification Email "),u.qZA()()(),u.TgZ(15,"div",8)(16,"span"),u._uU(17,"Go back to?"),u.qZA(),u.TgZ(18,"button",9),u._uU(19," Sign in"),u.qZA()()()()),2&t&&(u.xp6(10),u.Q6J("ngIf",r.authService.userData))},directives:[za,Ml,hr,Bs],styles:[""]}),n})()},{path:"**",component:C$}];let U$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[[va,dh,Fb.forRoot(L$,{anchorScrolling:"enabled"}),va,b$],Fb]}),n})(),V$=(()=>{class n{constructor(){this.animationState="out",this.timerID=null,this.scrollDistance=50,this.animate=!1,this.speed=80,this.acceleration=0}ngOnInit(){this.validateInputs()}validateInputs(){const t="BackToTopComponent component input validation error: ";if(this.scrollDistance<0)throw Error(t+"'scrollDistance' parameter must be greater or equal to 0");if(this.speed<1)throw Error(t+"'speed' parameter must be a positive number");if(this.acceleration<0)throw Error(t+"'acceleration' parameter must be greater or equal to 0")}onWindowScroll(){this.isBrowser()&&(this.animationState=this.getCurrentScrollTop()>this.scrollDistance/2?"in":"out")}scrollTop(t){!this.isBrowser()||(t.preventDefault(),this.animate?this.animateScrollTop():window.scrollTo(0,0))}animateScrollTop(){if(null!==this.timerID)return;let t=this.speed;const r=this;this.timerID=setInterval(function(){window.scrollBy(0,-t),t+=r.acceleration,0===r.getCurrentScrollTop()&&(clearInterval(r.timerID),r.timerID=null)},15)}getCurrentScrollTop(){return void 0!==window.scrollY&&window.scrollY>=0?window.scrollY:void 0!==window.pageYOffset&&window.pageYOffset>=0?window.pageYOffset:void 0!==document.body.scrollTop&&document.body.scrollTop>=0?document.body.scrollTop:void 0!==document.documentElement.scrollTop&&document.documentElement.scrollTop>=0?document.documentElement.scrollTop:0}isBrowser(){return"undefined"!=typeof window}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-back-to-top"]],hostBindings:function(t,r){1&t&&u.NdJ("scroll",function(){return r.onWindowScroll()},!1,u.Jf7)},inputs:{scrollDistance:"scrollDistance",animate:"animate",speed:"speed",acceleration:"acceleration"},decls:3,vars:1,consts:[["mat-fab","","color","primary","type","button","aria-label","Back to top of page",1,"back-to-top-button",3,"click"],[1,"material-icons","pp"]],template:function(t,r){1&t&&(u.TgZ(0,"button",0),u.NdJ("click",function(o){return r.scrollTop(o)}),u.TgZ(1,"span",1),u._uU(2,"keyboard_arrow_up"),u.qZA()()),2&t&&u.Q6J("@appearInOut",r.animationState)},styles:[".back-to-top-button[_ngcontent-%COMP%]{position:fixed;right:20px;bottom:20px;border:0;outline:none;color:#000;text-decoration:none;cursor:pointer}"],data:{animation:[hO("appearInOut",[fI("in",Dg({display:"block",opacity:"1"})),fI("out",Dg({display:"none",opacity:"0"})),k1("in <=> out",[Dg({display:"block"}),N1("400ms ease-in-out")])])]}}),n})(),B$=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-footer"]],decls:91,vars:0,consts:[["role","contentinfo",1,"mainfooter"],[1,"footer-top","p-y-2"],[1,"container-fluid"],[1,"footer-middle"],[1,"container"],[1,"row"],[1,"col-md-3","col-sm-6"],[1,"footer-pad"],[1,"list-unstyled"],["href","tel:+ 381 69545702"],["href","#","routerLink",""],["href","/sports"],["href","/history"],["href","/about-us"],["href","/contact"],["href","https://www.nike.com"],["href","https://www.adidas.com/us"],["href","https://www.asics.com/gb/en-gb/"],["href","https://www.nike.com/jordan"],["href","https://www.umbro.com/en/"],["href","https://sr-rs.facebook.com"],["aria-hidden","true",1,"fa","fa-facebook"],["href","https://twitter.com/?lang=sr"],["aria-hidden","true",1,"fa","fa-twitter"],["href","https://www.youtube.com/"],["aria-hidden","true",1,"fa","fa-youtube-play"],["href","https://www.linkedin.com"],["aria-hidden","true",1,"fa","fa-linkedin"],[1,"footer-bottom"],[1,"col-xs-12"],[1,"text-xs-center"]],template:function(t,r){1&t&&(u.TgZ(0,"footer",0)(1,"div",1),u._UZ(2,"div",2),u.qZA(),u.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"h4"),u._uU(9,"Address"),u.qZA(),u.TgZ(10,"address")(11,"ul",8)(12,"li"),u._uU(13," Beograd"),u._UZ(14,"br"),u._uU(15," 11000"),u._UZ(16,"br"),u._uU(17," Zdravka \u010celara"),u._UZ(18,"br"),u._uU(19," 16"),u._UZ(20,"br"),u.qZA(),u.TgZ(21,"li")(22,"a",9),u._uU(23,"Phone: + 381 69545702"),u.qZA()()()()()(),u.TgZ(24,"div",6)(25,"div",7)(26,"h4"),u._uU(27,"Links"),u.qZA(),u.TgZ(28,"ul",8)(29,"li")(30,"a",10),u._uU(31,"Home"),u.qZA()(),u.TgZ(32,"li")(33,"a",11),u._uU(34,"Sports"),u.qZA()(),u.TgZ(35,"li")(36,"a",12),u._uU(37,"History"),u.qZA()(),u.TgZ(38,"li")(39,"a",13),u._uU(40,"About"),u.qZA()(),u.TgZ(41,"li")(42,"a",14),u._uU(43,"Contact"),u.qZA()()()()(),u.TgZ(44,"div",6)(45,"div",7)(46,"h4"),u._uU(47,"Sponsors"),u.qZA(),u.TgZ(48,"ul",8)(49,"li")(50,"a",15),u._uU(51,"Nike"),u.qZA()(),u.TgZ(52,"li")(53,"a",16),u._uU(54,"Adidas"),u.qZA()(),u.TgZ(55,"li")(56,"a",17),u._uU(57,"Asics"),u.qZA()(),u.TgZ(58,"li")(59,"a",18),u._uU(60,"Air Jordan"),u.qZA()(),u.TgZ(61,"li")(62,"a",19),u._uU(63,"Umbro"),u.qZA()()()()(),u.TgZ(64,"div",6)(65,"div",7)(66,"h4"),u._uU(67,"Social Media"),u.qZA(),u.TgZ(68,"ul",8)(69,"li")(70,"a",20),u._UZ(71,"i",21),u._uU(72,"\xa0Facebook"),u.qZA()(),u.TgZ(73,"li")(74,"a",22),u._UZ(75,"i",23),u._uU(76,"\xa0Twitter"),u.qZA()(),u.TgZ(77,"li")(78,"a",24),u._UZ(79,"i",25),u._uU(80,"\xa0Youtube"),u.qZA()(),u.TgZ(81,"li")(82,"a",26),u._UZ(83,"i",27),u._uU(84," \xa0 Linkedin "),u.qZA()()()()()()()(),u.TgZ(85,"div",28)(86,"div",4)(87,"div",5)(88,"div",29)(89,"p",30),u._uU(90,"\xa9 Copyright 2022 - Stefan. All rights reserved."),u.qZA()()()()()())},directives:[Ml],styles:["footer[_ngcontent-%COMP%]{color:#fff}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;text-decoration:none!important}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}.footer-bottom[_ngcontent-%COMP%]{background:#3d6277;padding:2em}.footer-top[_ngcontent-%COMP%]{background:#2d4958}.footer-middle[_ngcontent-%COMP%]{background:#3d6277;padding-top:2em;color:#fff}.subnavigation-container[_ngcontent-%COMP%]{background:#3d6277}.subnavigation[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#fff;font-weight:700}.subnavigation-container[_ngcontent-%COMP%]{text-align:center}.subnavigation-container[_ngcontent-%COMP%]   .navbar[_ngcontent-%COMP%]{display:inline-block;margin-bottom:-6px}.col-subnav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:1rem;color:#fff;font-weight:700}.col-subnav[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{border-top:5px solid orange;background:white;color:#000}"]}),n})(),j$=(()=>{class n{constructor(t){this.router=t,this.title="nova-app",this.searchText="",this.characters=["Ant-Man","Aquaman","Asterix","The Atom","The Avengers","Batgirl","Batman","Batwoman"]}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Li))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:4,consts:[[3,"acceleration","animate","scrollDistance","speed"]],template:function(t,r){1&t&&u._UZ(0,"router-outlet")(1,"app-back-to-top",0)(2,"app-footer"),2&t&&(u.xp6(1),u.Q6J("acceleration",2)("animate",!1)("scrollDistance",50)("speed",50))},directives:[Om,V$,B$],styles:['@font-face{font-family:lato;src:url(Oxygen-Bold.f9004b20ac27a0b9.ttf) format("opentype")}body[_ngcontent-%COMP%]{font-family:lato}a[_ngcontent-%COMP%]{font-family:Hahmlet!important}body[_ngcontent-%COMP%]{font-family:Courier New,Courier,monospace!important}.bg-light[_ngcontent-%COMP%]{background-color:#fff!important;--bs-bg-opacity: 0!important}.container[_ngcontent-%COMP%]{max-width:100%!important}.pp[_ngcontent-%COMP%]{color:#9acd32!important}'],data:{animation:[]}}),n})();var H$=F(5032);const rF="@firebase/database";let sP="";function sF(n){sP=n}class G${constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,R.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,R.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Z${constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,R.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const oF=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new G$(e)}}catch(e){}return new Z$},Ng=oF("localStorage"),oP=oF("sessionStorage"),Cy=new bo.Yd("@firebase/database"),aF=function(){let n=1;return function(){return n++}}(),lF=function(n){const e=(0,R.dS)(n),t=new R.gQ;t.update(e);const r=t.digest();return R.US.encodeByteArray(r)},Ww=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Ww.apply(null,r):e+="object"==typeof r?(0,R.Pz)(r):r,e+=" "}return e};let kg=null,uF=!0;const cF=function(n,e){(0,R.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Cy.logLevel=bo.in.VERBOSE,kg=Cy.log.bind(Cy),e&&oP.set("logging_enabled",!0)):"function"==typeof n?kg=n:(kg=null,oP.remove("logging_enabled"))},ji=function(...n){if(!0===uF&&(uF=!1,null===kg&&!0===oP.get("logging_enabled")&&cF(!0)),kg){const e=Ww.apply(null,n);kg(e)}},Kw=function(n){return function(...e){ji(n,...e)}},aP=function(...n){const e="FIREBASE INTERNAL ERROR: "+Ww(...n);Cy.error(e)},zu=function(...n){const e=`FIREBASE FATAL ERROR: ${Ww(...n)}`;throw Cy.error(e),new Error(e)},Es=function(...n){const e="FIREBASE WARNING: "+Ww(...n);Cy.warn(e)},OI=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Td="[MIN_NAME]",Wu="[MAX_NAME]",Rg=function(n,e){if(n===e)return 0;if(n===Td||e===Wu)return-1;if(e===Td||n===Wu)return 1;{const t=FI(n),r=FI(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},K$=function(n,e){return n===e?0:n<e?-1:1},Yw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,R.Pz)(e))},lP=function(n){if("object"!=typeof n||null===n)return(0,R.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,R.Pz)(e[r]),t+=":",t+=lP(n[e[r]]);return t+="}",t},dF=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Hi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const hF=function(n){(0,R.hu)(!OI(n),"Invalid JSON number");const r=1023;let i,o,c,h,p;0===n?(o=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(o=0,c=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)y.push(o%2?1:0),o=Math.floor(o/2);y.push(i?1:0),y.reverse();const T=y.join("");let S="";for(p=0;p<64;p+=8){let x=parseInt(T.substr(p,8),2).toString(16);1===x.length&&(x="0"+x),S+=x}return S.toLowerCase()},X$=new RegExp("^-?(0*)\\d{1,10}$"),fF=-2147483648,uP=2147483647,FI=function(n){if(X$.test(n)){const e=Number(n);if(e>=fF&&e<=uP)return e}return null},Ty=function(n){try{n()}catch(e){setTimeout(()=>{throw Es("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Qw=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class tq{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Es(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class nq{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(ji("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Es(e)}}let Jw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const yF=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,EF="websocket",bF="long_polling";class dP{constructor(e,t,r,i,o=!1,c="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ng.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ng.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function CF(n,e,t){let r;if((0,R.hu)("string"==typeof e,"typeof type must == string"),(0,R.hu)("object"==typeof t,"typeof params must == object"),e===EF)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==bF)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function rq(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Hi(t,(o,c)=>{i.push(o+"="+c)}),r+i.join("&")}class iq{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,R.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,R.p$)(this.counters_)}}const hP={},fP={};function pP(n){const e=n.toString();return hP[e]||(hP[e]=new iq),hP[e]}class oq{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ty(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Nf{constructor(e,t,r,i,o,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Kw(e),this.stats_=pP(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),CF(t,bF,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new oq(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,R.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gP((...o)=>{const[c,h,p,y,T]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[c,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&yF.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Nf.forceAllow_=!0}static forceDisallow(){Nf.forceDisallow_=!0}static isAvailable(){return!((0,R.Yr)()||!Nf.forceAllow_&&(Nf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,R.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,R.h$)(t),i=dF(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,R.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,R.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class gP{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,R.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=aF(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=gP.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){ji("frame writing exception"),h.stack&&ji(h.stack),ji(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ji("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,R.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{ji("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let UI=null;"undefined"!=typeof MozWebSocket?UI=MozWebSocket:"undefined"!=typeof WebSocket&&(UI=WebSocket);let Iy=(()=>{class n{constructor(t,r,i,o,c,h,p){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Kw(this.connId),this.stats_=pP(r),this.connURL=n.connectionURL_(r,h,p,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,c){const h={v:"5"};return!(0,R.Yr)()&&"undefined"!=typeof location&&location.hostname&&yF.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),o&&(h.ac=o),c&&(h.p=c),CF(t,EF,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ng.set("previous_websocket_failure",!0);try{let i;if((0,R.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${sP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,p=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;p&&(c.proxy={origin:p})}this.mySock=new UI(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==UI&&!n.forceDisallow_}static previouslyFailed(){return Ng.isInMemoryStorage||!0===Ng.get("previous_websocket_failure")}markConnectionHealthy(){Ng.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,R.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,R.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,R.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=dF(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),MF=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Nf,Iy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Iy&&Iy.isAvailable();let i=r&&!Iy.previouslyFailed();if(t.webSocketOnly&&(r||Es("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Iy];else{const o=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class LF{constructor(e,t,r,i,o,c,h,p,y,T){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Kw("c:"+this.id+":"),this.transportManager_=new MF(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Qw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Yw("t",e),r=Yw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Yw("t",e),r=Yw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Yw("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?aP("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):aP("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Es("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Qw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Qw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ng.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class UF{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class VF{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,R.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,R.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class VI extends VF{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,R.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new VI}getInitialEvent(e){return(0,R.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class kn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function An(){return new kn("")}function sn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function kf(n){return n.pieces_.length-n.pieceNum_}function Yn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new kn(n.pieces_,e)}function _P(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Xw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function HF(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new kn(e,0)}function yr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof kn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new kn(t,0)}function on(n){return n.pieceNum_>=n.pieces_.length}function Js(n,e){const t=sn(n),r=sn(e);if(null===t)return e;if(t===r)return Js(Yn(n),Yn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Aq(n,e){const t=Xw(n,0),r=Xw(e,0);for(let i=0;i<t.length&&i<r.length;i++){const o=Rg(t[i],r[i]);if(0!==o)return o}return t.length===r.length?0:t.length<r.length?-1:1}function yP(n,e){if(kf(n)!==kf(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ya(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(kf(n)>kf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class xq{constructor(e,t){this.errorPrefix_=t,this.parts_=Xw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,R.ug)(this.parts_[r]);$F(this)}}function $F(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Og(n))}function Og(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class vP extends VF{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new vP}getInitialEvent(e){return(0,R.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const eE=1e3;let jI,Fg=(()=>{class n extends UF{constructor(t,r,i,o,c,h,p,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=Kw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=eE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,R.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");vP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&VI.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,c={r:o,a:t,b:r};this.log_((0,R.Pz)(c)),(0,R.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new R.BH,i={p:t._path.toString(),q:t._queryObject},o={action:"g",request:i,onComplete:h=>{const p=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,p,!1,null),r.resolve(p)):r.reject(p)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[c];void 0===h||o!==h||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),r.promise}listen(t,r,i,o){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,R.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,R.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const p={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,p=>{const y=p.d,T=p.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",p),"ok"!==T&&this.removeListen_(i,o),t.onComplete&&t.onComplete(T,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,R.r3)(t,"w")){const i=(0,R.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Es(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,R.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,R.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const c=o.s,h=o.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,R.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const c={p:t};o&&(c.q=i,c.t=o),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,R.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):aP("Unrecognized action received from server: "+(0,R.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,R.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=eE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=eE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=eE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,be.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let p=!1,y=null;const T=function(){y?y.close():(p=!0,o())};t.realtime_={close:T,sendRequest:function(O){(0,R.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(O)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[O,V]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);p?ji("getToken() completed but was canceled"):(ji("getToken() completed. Creating connection."),t.authToken_=O&&O.accessToken,t.appCheckToken_=V&&V.token,y=new LF(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,J=>{Es(J+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(O){t.log_("Failed to get token: "+O),p||(t.repoInfo_.nodeAdmin&&Es(O),T())}}})()}interrupt(t){ji("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){ji("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,R.xb)(this.interruptReasons_)&&(this.reconnectDelay_=eE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>lP(c)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new kn(t).toString();let o;if(this.listens.has(i)){const c=this.listens.get(i);o=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){ji("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){ji("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,R.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+sP.replace(/\./g,"-")]=1,(0,R.uI)()?t["framework.cordova"]=1:(0,R.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=VI.getInstance().currentlyOnline();return(0,R.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class cn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new cn(e,t)}}class BI{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new cn(Td,e),i=new cn(Td,t);return 0!==this.compare(r,i)}minPost(){return cn.MIN}}class ZF extends BI{static get __EMPTY_NODE(){return jI}static set __EMPTY_NODE(e){jI=e}compare(e,t){return Rg(e.name,t.name)}isDefinedOn(e){throw(0,R.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return cn.MIN}maxPost(){return new cn(Wu,jI)}makePost(e,t){return(0,R.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new cn(e,jI)}toString(){return".key"}}const Ku=new ZF;class HI{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(e=e,c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let EP,Hl=(()=>{class n{constructor(t,r,i,o,c){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=o?o:To.EMPTY_NODE,this.right=null!=c?c:To.EMPTY_NODE}copy(t,r,i,o,c){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=o?o:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const c=i(t,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===c?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return To.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return To.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class To{constructor(e,t=To.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new To(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Hl.BLACK,null,null))}remove(e){return new To(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Hl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new HI(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new HI(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new HI(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new HI(this.root_,null,this.comparator_,!0,e)}}function Uq(n,e){return Rg(n.name,e.name)}function wP(n,e){return Rg(n,e)}To.EMPTY_NODE=new class Lq{copy(e,t,r,i,o){return this}insert(e,t,r){return new Hl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const zF=function(n){return"number"==typeof n?"number:"+hF(n):"string:"+n},WF=function(n){if(n.isLeafNode()){const e=n.val();(0,R.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,R.r3)(e,".sv"),"Priority must be a string or number.")}else(0,R.hu)(n===EP||n.isEmpty(),"priority of unexpected type.");(0,R.hu)(n===EP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let KF,YF,QF,Sy=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,R.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),WF(this.priorityNode_)}static set __childrenNodeConstructor(t){KF=t}static get __childrenNodeConstructor(){return KF}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return on(t)?this:".priority"===sn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=sn(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,R.hu)(".priority"!==i||1===kf(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Yn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+zF(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?hF(this.value_):this.value_,this.lazyHash_=lF(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,R.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,R.hu)(o>=0,"Unknown leaf type: "+r),(0,R.hu)(c>=0,"Unknown leaf type: "+i),o===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const nr=new class Hq extends BI{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?Rg(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return cn.MIN}maxPost(){return new cn(Wu,new Sy("[PRIORITY-POST]",QF))}makePost(e,t){const r=YF(e);return new cn(t,new Sy("[PRIORITY-POST]",r))}toString(){return".priority"}},$q=Math.log(2);class qq{constructor(e){this.count=parseInt(Math.log(e+1)/$q,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const $I=function(n,e,t,r){n.sort(e);const i=function(p,y){const T=y-p;let S,x;if(0===T)return null;if(1===T)return S=n[p],x=t?t(S):S,new Hl(x,S.node,Hl.BLACK,null,null);{const O=parseInt(T/2,10)+p,V=i(p,O),J=i(O+1,y);return S=n[O],x=t?t(S):S,new Hl(x,S.node,Hl.BLACK,V,J)}},h=function(p){let y=null,T=null,S=n.length;const x=function(V,J){const we=S-V,Ge=S;S-=V;const nt=i(we+1,Ge),rt=n[we],Xe=t?t(rt):rt;O(new Hl(Xe,rt.node,J,null,nt))},O=function(V){y?(y.left=V,y=V):(T=V,y=V)};for(let V=0;V<p.count;++V){const J=p.nextBitIsOne(),we=Math.pow(2,p.count-(V+1));J?x(we,Hl.BLACK):(x(we,Hl.BLACK),x(we,Hl.RED))}return T}(new qq(n.length));return new To(r||e,h)};let bP;const Dy={};class Id{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,R.hu)(Dy&&nr,"ChildrenNode.ts has not been loaded"),bP=bP||new Id({".priority":Dy},{".priority":nr}),bP}get(e){const t=(0,R.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof To?t:null}hasIndex(e){return(0,R.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,R.hu)(e!==Ku,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(cn.Wrap);let h,c=o.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=o.getNext();h=i?$I(r,e.getCompare()):Dy;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const T=Object.assign({},this.indexes_);return T[p]=h,new Id(T,y)}addToIndexes(e,t){const r=(0,R.UI)(this.indexes_,(i,o)=>{const c=(0,R.DV)(this.indexSet_,o);if((0,R.hu)(c,"Missing index implementation for "+o),i===Dy){if(c.isDefinedOn(e.node)){const h=[],p=t.getIterator(cn.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&h.push(y),y=p.getNext();return h.push(e),$I(h,c.getCompare())}return Dy}{const h=t.get(e.name);let p=i;return h&&(p=p.remove(new cn(e.name,h))),p.insert(e,e.node)}});return new Id(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,R.UI)(this.indexes_,i=>{if(i===Dy)return i;{const o=t.get(e.name);return o?i.remove(new cn(e.name,o)):i}});return new Id(r,this.indexSet_)}}let tE,Kt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&WF(this.priorityNode_),this.children_.isEmpty()&&(0,R.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return tE||(tE=new n(new To(wP),null,Id.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||tE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?tE:r}}getChild(t){const r=sn(t);return null===r?this:this.getImmediateChild(r).getChild(Yn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,R.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new cn(t,r);let o,c;r.isEmpty()?(o=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=o.isEmpty()?tE:this.priorityNode_;return new n(o,h,c)}}updateChild(t,r){const i=sn(t);if(null===i)return r;{(0,R.hu)(".priority"!==sn(t)||1===kf(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Yn(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,c=!0;if(this.forEachChild(nr,(h,p)=>{r[h]=p.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):c=!1}),!t&&c&&o<2*i){const h=[];for(const p in r)h[p]=r[p];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+zF(this.getPriority().val())+":"),this.forEachChild(nr,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":lF(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const c=o.getPredecessorKey(new cn(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new cn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new cn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,cn.Wrap);let c=o.peek();for(;null!=c&&r.compare(c,t)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,cn.Wrap);let c=o.peek();for(;null!=c&&r.compare(c,t)>0;)o.getNext(),c=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===nE?-1:0}withIndex(t){if(t===Ku||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ku||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(nr),o=r.getIterator(nr);let c=i.getNext(),h=o.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=o.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===Ku?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const nE=new class Gq extends Kt{constructor(){super(new To(wP),Kt.EMPTY_NODE,Id.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Kt.EMPTY_NODE}isEmpty(){return!1}};function Mr(n,e=null){if(null===n)return Kt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,R.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Sy(n,Mr(e));if(n instanceof Array){let t=Kt.EMPTY_NODE;return Hi(n,(r,i)=>{if((0,R.r3)(n,r)&&"."!==r.substring(0,1)){const o=Mr(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(Mr(e))}{const t=[];let r=!1;if(Hi(n,(c,h)=>{if("."!==c.substring(0,1)){const p=Mr(h);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new cn(c,p)))}}),0===t.length)return Kt.EMPTY_NODE;const o=$I(t,Uq,c=>c.name,wP);if(r){const c=$I(t,nr.getCompare());return new Kt(o,Mr(e),new Id({".priority":c},{".priority":nr}))}return new Kt(o,Mr(e),Id.Default)}}Object.defineProperties(cn,{MIN:{value:new cn(Td,Kt.EMPTY_NODE)},MAX:{value:new cn(Wu,nE)}}),ZF.__EMPTY_NODE=Kt.EMPTY_NODE,Sy.__childrenNodeConstructor=Kt,function Vq(n){EP=n}(nE),function jq(n){QF=n}(nE),function Bq(n){YF=n}(Mr);class CP extends BI{constructor(e){super(),this.indexPath_=e,(0,R.hu)(!on(e)&&".priority"!==sn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?Rg(e.name,t.name):o}makePost(e,t){const r=Mr(e),i=Kt.EMPTY_NODE.updateChild(this.indexPath_,r);return new cn(t,i)}maxPost(){const e=Kt.EMPTY_NODE.updateChild(this.indexPath_,nE);return new cn(Wu,e)}toString(){return Xw(this.indexPath_,0).join("/")}}const TP=new class zq extends BI{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Rg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return cn.MIN}maxPost(){return cn.MAX}makePost(e,t){const r=Mr(e);return new cn(t,r)}toString(){return".value"}},Ay="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Wq=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const o=new Array(8);for(i=7;i>=0;i--)o[i]=Ay.charAt(t%64),t=Math.floor(t/64);(0,R.hu)(0===t,"Cannot push at time == 0");let c=o.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=Ay.charAt(e[i]);return(0,R.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),eL=function(n){if(n===""+uP)return"-";const e=FI(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Wu;const o=Ay.charAt(Ay.indexOf(t[r])+1);return t[r]=o,t.slice(0,r+1).join("")},tL=function(n){if(n===""+fF)return Td;const e=FI(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+uP:(delete t[t.length-1],t.join("")):(t[t.length-1]=Ay.charAt(Ay.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function nL(n){return{type:"value",snapshotNode:n}}function xy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function rE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function iE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class SP{constructor(e){this.index_=e}updateChild(e,t,r,i,o,c){(0,R.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(rE(t,h)):(0,R.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?c.trackChildChange(xy(t,r)):c.trackChildChange(iE(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(nr,(i,o)=>{t.hasChild(i)||r.trackChildChange(rE(i,o))}),t.isLeafNode()||t.forEachChild(nr,(i,o)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(o)||r.trackChildChange(iE(i,o,c))}else r.trackChildChange(xy(i,o))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Kt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class sE{constructor(e){this.indexedFilter_=new SP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=sE.getStartPost_(e),this.endPost_=sE.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,o,c){return this.matches(new cn(t,r))||(r=Kt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,o,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Kt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Kt.EMPTY_NODE);const o=this;return t.forEachChild(nr,(c,h)=>{o.matches(new cn(c,h))||(i=i.updateImmediateChild(c,Kt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Yq{constructor(e){this.rangedFilter_=new sE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,o,c){return this.rangedFilter_.matches(new cn(t,r))||(r=Kt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,o,c):this.fullLimitUpdateChild_(e,t,r,o,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Kt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let o;i=Kt.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;o.hasNext()&&c<this.limit_;){const h=o.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!p)break;i=i.updateImmediateChild(h.name,h.node),c++}}else{let o,c,h,p;if(i=t.withIndex(this.index_),i=i.updatePriority(Kt.EMPTY_NODE),this.reverse_){p=i.getReverseIterator(this.index_),o=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(x,O)=>S(O,x)}else p=i.getIterator(this.index_),o=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let y=0,T=!1;for(;p.hasNext();){const S=p.getNext();!T&&h(o,S)<=0&&(T=!0),T&&y<this.limit_&&h(S,c)<=0?y++:i=i.updateImmediateChild(S.name,Kt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,o){let c;if(this.reverse_){const S=this.index_.getCompare();c=(x,O)=>S(O,x)}else c=this.index_.getCompare();const h=e;(0,R.hu)(h.numChildren()===this.limit_,"");const p=new cn(t,r),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),T=this.rangedFilter_.matches(p);if(h.hasChild(t)){const S=h.getImmediateChild(t);let x=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=x&&(x.name===t||h.hasChild(x.name));)x=i.getChildAfterChild(this.index_,x,this.reverse_);const O=null==x?1:c(x,p);if(T&&!r.isEmpty()&&O>=0)return null!=o&&o.trackChildChange(iE(t,r,S)),h.updateImmediateChild(t,r);{null!=o&&o.trackChildChange(rE(t,S));const J=h.updateImmediateChild(t,Kt.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(null!=o&&o.trackChildChange(xy(x.name,x.node)),J.updateImmediateChild(x.name,x.node)):J}}return r.isEmpty()?e:T&&c(y,p)>=0?(null!=o&&(o.trackChildChange(rE(y.name,y.node)),o.trackChildChange(xy(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(y.name,Kt.EMPTY_NODE)):e}}class qI{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,R.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,R.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Td}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,R.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,R.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Wu}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,R.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nr}copy(){const e=new qI;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function DP(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function AP(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function GI(n,e){const t=n.copy();return t.index_=e,t}function rL(n){const e={};if(n.isDefault())return e;let t;return n.index_===nr?t="$priority":n.index_===TP?t="$value":n.index_===Ku?t="$key":((0,R.hu)(n.index_ instanceof CP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,R.Pz)(t),n.startSet_&&(e.startAt=(0,R.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,R.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,R.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,R.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function iL(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==nr&&(e.i=n.index_.toString()),e}class ZI extends UF{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Kw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,R.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const c=ZI.getListenId_(e,r),h={};this.listens_[c]=h;const p=rL(e._queryParams);this.restRequest_(o+".json",p,(y,T)=>{let S=T;if(404===y&&(S=null,y=null),null===y&&this.onDataUpdate_(o,S,!1,r),(0,R.DV)(this.listens_,c)===h){let x;x=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(x,null)}})}unlisten(e,t){const r=ZI.getListenId_(e,t);delete this.listens_[r]}get(e){const t=rL(e._queryParams),r=e._path.toString(),i=new R.BH;return this.restRequest_(r+".json",t,(o,c)=>{let h=c;404===o&&(h=null,o=null),null===o?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,R.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,R.cI)(h.responseText)}catch(y){Es("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,p)}else 401!==h.status&&404!==h.status&&Es("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class n6{constructor(){this.rootNode_=Kt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function zI(){return{value:null,children:new Map}}function My(n,e,t){if(on(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=sn(e);n.children.has(r)||n.children.set(r,zI()),My(n.children.get(r),e=Yn(e),t)}}function xP(n,e){if(on(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(nr,(r,i)=>{My(n,new kn(r),i)}),xP(n,e)}}if(n.children.size>0){const t=sn(e);return e=Yn(e),n.children.has(t)&&xP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function MP(n,e,t){null!==n.value?t(e,n.value):function r6(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{MP(i,new kn(e.toString()+"/"+r),t)})}class i6{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Hi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class a6{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new i6(e);const r=1e4+2e4*Math.random();Qw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Hi(e,(i,o)=>{o>0&&(0,R.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),Qw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Qa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Qa||(Qa={})),Qa))();function kP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class WI{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Qa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(on(this.path)){if(null!=this.affectedTree.value)return(0,R.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new kn(e));return new WI(An(),t,this.revert)}}return(0,R.hu)(sn(this.path)===e,"operationForChild called for unrelated child."),new WI(Yn(this.path),this.affectedTree,this.revert)}}class oE{constructor(e,t){this.source=e,this.path=t,this.type=Qa.LISTEN_COMPLETE}operationForChild(e){return on(this.path)?new oE(this.source,An()):new oE(this.source,Yn(this.path))}}class Lg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Qa.OVERWRITE}operationForChild(e){return on(this.path)?new Lg(this.source,An(),this.snap.getImmediateChild(e)):new Lg(this.source,Yn(this.path),this.snap)}}class Py{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Qa.MERGE}operationForChild(e){if(on(this.path)){const t=this.children.subtree(new kn(e));return t.isEmpty()?null:t.value?new Lg(this.source,An(),t.value):new Py(this.source,An(),t)}return(0,R.hu)(sn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Py(this.source,Yn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Rf{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(on(e))return this.isFullyInitialized()&&!this.filtered_;const t=sn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class l6{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function aE(n,e,t,r,i,o){const c=r.filter(h=>h.type===t);c.sort((h,p)=>function d6(n,e,t){if(null==e.childName||null==t.childName)throw(0,R.g5)("Should only compare child_ events.");const r=new cn(e.childName,e.snapshotNode),i=new cn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,p)),c.forEach(h=>{const p=function c6(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,o);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(p,n.query_))})})}function KI(n,e){return{eventCache:n,serverCache:e}}function lE(n,e,t,r){return KI(new Rf(e,t,r),n.serverCache)}function oL(n,e,t,r){return KI(n.eventCache,new Rf(e,t,r))}function YI(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ug(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let RP;class rr{constructor(e,t=(()=>(RP||(RP=new To(K$)),RP))()){this.value=e,this.children=t}static fromObject(e){let t=new rr(null);return Hi(e,(r,i)=>{t=t.set(new kn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:An(),value:this.value};if(on(e))return null;{const r=sn(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(Yn(e),t);return null!=o?{path:yr(new kn(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(on(e))return this;{const t=sn(e),r=this.children.get(t);return null!==r?r.subtree(Yn(e)):new rr(null)}}set(e,t){if(on(e))return new rr(t,this.children);{const r=sn(e),o=(this.children.get(r)||new rr(null)).set(Yn(e),t),c=this.children.insert(r,o);return new rr(this.value,c)}}remove(e){if(on(e))return this.children.isEmpty()?new rr(null):new rr(null,this.children);{const t=sn(e),r=this.children.get(t);if(r){const i=r.remove(Yn(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new rr(null):new rr(this.value,o)}return this}}get(e){if(on(e))return this.value;{const t=sn(e),r=this.children.get(t);return r?r.get(Yn(e)):null}}setTree(e,t){if(on(e))return t;{const r=sn(e),o=(this.children.get(r)||new rr(null)).setTree(Yn(e),t);let c;return c=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new rr(this.value,c)}}fold(e){return this.fold_(An(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(yr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,An(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(on(e))return null;{const o=sn(e),c=this.children.get(o);return c?c.findOnPath_(Yn(e),yr(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,An(),t)}foreachOnPath_(e,t,r){if(on(e))return this;{this.value&&r(t,this.value);const i=sn(e),o=this.children.get(i);return o?o.foreachOnPath_(Yn(e),yr(t,i),r):new rr(null)}}foreach(e){this.foreach_(An(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(yr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class $l{constructor(e){this.writeTree_=e}static empty(){return new $l(new rr(null))}}function uE(n,e,t){if(on(e))return new $l(new rr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const c=Js(i,e);return o=o.updateChild(c,t),new $l(n.writeTree_.set(i,o))}{const i=new rr(t),o=n.writeTree_.setTree(e,i);return new $l(o)}}}function OP(n,e,t){let r=n;return Hi(t,(i,o)=>{r=uE(r,yr(e,i),o)}),r}function aL(n,e){if(on(e))return $l.empty();{const t=n.writeTree_.setTree(e,new rr(null));return new $l(t)}}function FP(n,e){return null!=Vg(n,e)}function Vg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Js(t.path,e)):null}function lL(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(nr,(r,i)=>{e.push(new cn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new cn(r,i.value))}),e}function Of(n,e){if(on(e))return n;{const t=Vg(n,e);return new $l(null!=t?new rr(t):n.writeTree_.subtree(e))}}function LP(n){return n.writeTree_.isEmpty()}function Ny(n,e){return uL(An(),n.writeTree_,e)}function uL(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,R.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=uL(yr(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(yr(n,".priority"),r)),t}}function QI(n,e){return pL(e,n)}function _6(n,e){if(n.snap)return Ya(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ya(yr(n.path,t),e))return!0;return!1}function v6(n){return n.visible}function cL(n,e,t){let r=$l.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const c=o.path;let h;if(o.snap)Ya(t,c)?(h=Js(t,c),r=uE(r,h,o.snap)):Ya(c,t)&&(h=Js(c,t),r=uE(r,An(),o.snap.getChild(h)));else{if(!o.children)throw(0,R.g5)("WriteRecord should have .snap or .children");if(Ya(t,c))h=Js(t,c),r=OP(r,h,o.children);else if(Ya(c,t))if(h=Js(c,t),on(h))r=OP(r,An(),o.children);else{const p=(0,R.DV)(o.children,sn(h));if(p){const y=p.getChild(Yn(h));r=uE(r,An(),y)}}}}}return r}function dL(n,e,t,r,i){if(r||i){const o=Of(n.visibleWrites,e);return!i&&LP(o)?t:i||null!=t||FP(o,An())?Ny(cL(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(Ya(y.path,e)||Ya(e,y.path))},e),t||Kt.EMPTY_NODE):null}{const o=Vg(n.visibleWrites,e);if(null!=o)return o;{const c=Of(n.visibleWrites,e);return LP(c)?t:null!=t||FP(c,An())?Ny(c,t||Kt.EMPTY_NODE):null}}}function JI(n,e,t,r){return dL(n.writeTree,n.treePath,e,t,r)}function UP(n,e){return function w6(n,e,t){let r=Kt.EMPTY_NODE;const i=Vg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(nr,(o,c)=>{r=r.updateImmediateChild(o,c)}),r;if(t){const o=Of(n.visibleWrites,e);return t.forEachChild(nr,(c,h)=>{const p=Ny(Of(o,new kn(c)),h);r=r.updateImmediateChild(c,p)}),lL(o).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return lL(Of(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function hL(n,e,t,r){return function E6(n,e,t,r,i){(0,R.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=yr(e,t);if(FP(n.visibleWrites,o))return null;{const c=Of(n.visibleWrites,o);return LP(c)?i.getChild(t):Ny(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function XI(n,e){return function C6(n,e){return Vg(n.visibleWrites,e)}(n.writeTree,yr(n.treePath,e))}function VP(n,e,t){return function b6(n,e,t,r){const i=yr(e,t),o=Vg(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?Ny(Of(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function fL(n,e){return pL(yr(n.treePath,e),n.writeTree)}function pL(n,e){return{treePath:n,writeTree:e}}class D6{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,R.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,R.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,iE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,rE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,xy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,R.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,iE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const gL=new class A6{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class BP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Rf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return VP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ug(this.viewCache_),o=function S6(n,e,t,r,i,o){return function T6(n,e,t,r,i,o,c){let h;const p=Of(n.visibleWrites,e),y=Vg(p,An());if(null!=y)h=y;else{if(null==t)return[];h=Ny(p,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const T=[],S=c.getCompare(),x=o?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let O=x.getNext();for(;O&&T.length<i;)0!==S(O,r)&&T.push(O),O=x.getNext();return T}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function mL(n,e,t,r,i,o){const c=e.eventCache;if(null!=XI(r,t))return e;{let h,p;if(on(t))if((0,R.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Ug(e),S=UP(r,y instanceof Kt?y:Kt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,o)}else{const y=JI(r,Ug(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,o)}else{const y=sn(t);if(".priority"===y){(0,R.hu)(1===kf(t),"Can't have a priority with additional path components");const T=c.getNode();p=e.serverCache.getNode();const S=hL(r,t,T,p);h=null!=S?n.filter.updatePriority(T,S):c.getNode()}else{const T=Yn(t);let S;if(c.isCompleteForChild(y)){p=e.serverCache.getNode();const x=hL(r,t,c.getNode(),p);S=null!=x?c.getNode().getImmediateChild(y).updateChild(T,x):c.getNode().getImmediateChild(y)}else S=VP(r,y,e.serverCache);h=null!=S?n.filter.updateChild(c.getNode(),y,S,T,i,o):c.getNode()}}return lE(e,h,c.isFullyInitialized()||on(t),n.filter.filtersNodes())}}function eS(n,e,t,r,i,o,c,h){const p=e.serverCache;let y;const T=c?n.filter:n.filter.getIndexedFilter();if(on(t))y=T.updateFullNode(p.getNode(),r,null);else if(T.filtersNodes()&&!p.isFiltered()){const O=p.getNode().updateChild(t,r);y=T.updateFullNode(p.getNode(),O,null)}else{const O=sn(t);if(!p.isCompleteForPath(t)&&kf(t)>1)return e;const V=Yn(t),we=p.getNode().getImmediateChild(O).updateChild(V,r);y=".priority"===O?T.updatePriority(p.getNode(),we):T.updateChild(p.getNode(),O,we,V,gL,null)}const S=oL(e,y,p.isFullyInitialized()||on(t),T.filtersNodes());return mL(n,S,t,i,new BP(i,S,o),h)}function jP(n,e,t,r,i,o,c){const h=e.eventCache;let p,y;const T=new BP(i,e,o);if(on(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,c),p=lE(e,y,!0,n.filter.filtersNodes());else{const S=sn(t);if(".priority"===S)y=n.filter.updatePriority(e.eventCache.getNode(),r),p=lE(e,y,h.isFullyInitialized(),h.isFiltered());else{const x=Yn(t),O=h.getNode().getImmediateChild(S);let V;if(on(x))V=r;else{const J=T.getCompleteChild(S);V=null!=J?".priority"===_P(x)&&J.getChild(HF(x)).isEmpty()?J:J.updateChild(x,r):Kt.EMPTY_NODE}p=O.equals(V)?e:lE(e,n.filter.updateChild(h.getNode(),S,V,x,T,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function _L(n,e){return n.eventCache.isCompleteForChild(e)}function yL(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function HP(n,e,t,r,i,o,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=on(t)?r:new rr(null).setTree(t,r);const T=e.serverCache.getNode();return y.children.inorderTraversal((S,x)=>{if(T.hasChild(S)){const V=yL(0,e.serverCache.getNode().getImmediateChild(S),x);p=eS(n,p,new kn(S),V,i,o,c,h)}}),y.children.inorderTraversal((S,x)=>{const O=!e.serverCache.isCompleteForChild(S)&&void 0===x.value;if(!T.hasChild(S)&&!O){const J=yL(0,e.serverCache.getNode().getImmediateChild(S),x);p=eS(n,p,new kn(S),J,i,o,c,h)}}),p}class L6{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new SP(r.getIndex()),o=function Qq(n){return n.loadsAllData()?new SP(n.getIndex()):n.hasLimit()?new Yq(n):new sE(n)}(r);this.processor_=function x6(n){return{filter:n}}(o);const c=t.serverCache,h=t.eventCache,p=i.updateFullNode(Kt.EMPTY_NODE,c.getNode(),null),y=o.updateFullNode(Kt.EMPTY_NODE,h.getNode(),null),T=new Rf(p,c.isFullyInitialized(),i.filtersNodes()),S=new Rf(y,h.isFullyInitialized(),o.filtersNodes());this.viewCache_=KI(S,T),this.eventGenerator_=new l6(this.query_)}get query(){return this.query_}}function B6(n,e){const t=Ug(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!on(e)&&!t.getImmediateChild(sn(e)).isEmpty())?t.getChild(e):null}function vL(n){return 0===n.eventRegistrations_.length}function wL(n,e,t){const r=[];if(t){(0,R.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(o=>{const c=o.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let o=0;o<n.eventRegistrations_.length;++o){const c=n.eventRegistrations_[o];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(o+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function EL(n,e,t,r){e.type===Qa.MERGE&&null!==e.source.queryId&&((0,R.hu)(Ug(n.viewCache_),"We should always have a full cache before handling merges"),(0,R.hu)(YI(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function P6(n,e,t,r,i){const o=new D6;let c,h;if(t.type===Qa.OVERWRITE){const y=t;y.source.fromUser?c=jP(n,e,y.path,y.snap,r,i,o):((0,R.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!on(y.path),c=eS(n,e,y.path,y.snap,r,i,h,o))}else if(t.type===Qa.MERGE){const y=t;y.source.fromUser?c=function k6(n,e,t,r,i,o,c){let h=e;return r.foreach((p,y)=>{const T=yr(t,p);_L(e,sn(T))&&(h=jP(n,h,T,y,i,o,c))}),r.foreach((p,y)=>{const T=yr(t,p);_L(e,sn(T))||(h=jP(n,h,T,y,i,o,c))}),h}(n,e,y.path,y.children,r,i,o):((0,R.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),c=HP(n,e,y.path,y.children,r,i,h,o))}else if(t.type===Qa.ACK_USER_WRITE){const y=t;c=y.revert?function F6(n,e,t,r,i,o){let c;if(null!=XI(r,t))return e;{const h=new BP(r,e,i),p=e.eventCache.getNode();let y;if(on(t)||".priority"===sn(t)){let T;if(e.serverCache.isFullyInitialized())T=JI(r,Ug(e));else{const S=e.serverCache.getNode();(0,R.hu)(S instanceof Kt,"serverChildren would be complete if leaf node"),T=UP(r,S)}T=T,y=n.filter.updateFullNode(p,T,o)}else{const T=sn(t);let S=VP(r,T,e.serverCache);null==S&&e.serverCache.isCompleteForChild(T)&&(S=p.getImmediateChild(T)),y=null!=S?n.filter.updateChild(p,T,S,Yn(t),h,o):e.eventCache.getNode().hasChild(T)?n.filter.updateChild(p,T,Kt.EMPTY_NODE,Yn(t),h,o):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=JI(r,Ug(e)),c.isLeafNode()&&(y=n.filter.updateFullNode(y,c,o)))}return c=e.serverCache.isFullyInitialized()||null!=XI(r,An()),lE(e,y,c,n.filter.filtersNodes())}}(n,e,y.path,r,i,o):function R6(n,e,t,r,i,o,c){if(null!=XI(i,t))return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(on(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return eS(n,e,t,p.getNode().getChild(t),i,o,h,c);if(on(t)){let y=new rr(null);return p.getNode().forEachChild(Ku,(T,S)=>{y=y.set(new kn(T),S)}),HP(n,e,t,y,i,o,h,c)}return e}{let y=new rr(null);return r.foreach((T,S)=>{const x=yr(t,T);p.isCompleteForPath(x)&&(y=y.set(T,p.getNode().getChild(x)))}),HP(n,e,t,y,i,o,h,c)}}(n,e,y.path,y.affectedTree,r,i,o)}else{if(t.type!==Qa.LISTEN_COMPLETE)throw(0,R.g5)("Unknown operation type: "+t.type);c=function O6(n,e,t,r,i){const o=e.serverCache;return mL(n,oL(e,o.getNode(),o.isFullyInitialized()||on(t),o.isFiltered()),t,r,gL,i)}(n,e,t.path,r,o)}const p=o.getChanges();return function N6(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=YI(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(nL(YI(e)))}}(e,c,p),{viewCache:c,changes:p}}(n.processor_,i,e,t,r);return function M6(n,e){(0,R.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,R.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,R.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,bL(n,o.changes,o.viewCache.eventCache.getNode(),null)}function bL(n,e,t,r){return function u6(n,e,t,r){const i=[],o=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&o.push(function Kq(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),aE(n,i,"child_removed",e,r,t),aE(n,i,"child_added",e,r,t),aE(n,i,"child_moved",o,r,t),aE(n,i,"child_changed",e,r,t),aE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let tS,rS;class CL{constructor(){this.views=new Map}}function $P(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,R.hu)(null!=o,"SyncTree gave us an op for an invalid query."),EL(o,e,t,r)}{let o=[];for(const c of n.views.values())o=o.concat(EL(c,e,t,r));return o}}function TL(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let h=JI(t,i?r:null),p=!1;h?p=!0:r instanceof Kt?(h=UP(t,r),p=!1):(h=Kt.EMPTY_NODE,p=!1);const y=KI(new Rf(h,p,!1),new Rf(r,i,!1));return new L6(e,y)}return c}function IL(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Ff(n,e){let t=null;for(const r of n.views.values())t=t||B6(r,e);return t}function SL(n,e){return e._queryParams.loadsAllData()?nS(n):n.views.get(e._queryIdentifier)}function DL(n,e){return null!=SL(n,e)}function Lf(n){return null!=nS(n)}function nS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Y6=1;class AL{constructor(e){this.listenProvider_=e,this.syncPointTree_=new rr(null),this.pendingWriteTree_=function I6(){return{visibleWrites:$l.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function qP(n,e,t,r,i){return function f6(n,e,t,r,i){(0,R.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=uE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?ky(n,new Lg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Uf(n,e,t=!1){const r=function g6(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function m6(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,R.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&_6(h,r.path)?i=!1:Ya(r.path,h.path)&&(o=!0)),c--}return!!i&&(o?(function y6(n){n.visibleWrites=cL(n.allWrites,v6,An()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=aL(n.visibleWrites,r.path):Hi(r.children,p=>{n.visibleWrites=aL(n.visibleWrites,yr(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let o=new rr(null);return null!=r.snap?o=o.set(An(),!0):Hi(r.children,c=>{o=o.set(new kn(c),!0)}),ky(n,new WI(r.path,o,t))}return[]}function cE(n,e,t){return ky(n,new Lg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function GP(n,e,t,r){const i=e._path,o=n.syncPointTree_.get(i);let c=[];if(o&&("default"===e._queryIdentifier||DL(o,e))){const h=function z6(n,e,t,r){const i=e._queryIdentifier,o=[];let c=[];const h=Lf(n);if("default"===i)for(const[p,y]of n.views.entries())c=c.concat(wL(y,t,r)),vL(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||o.push(y.query));else{const p=n.views.get(i);p&&(c=c.concat(wL(p,t,r)),vL(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||o.push(p.query)))}return h&&!Lf(n)&&o.push(new(function q6(){return(0,R.hu)(tS,"Reference.ts has not been loaded"),tS}())(e._repo,e._path)),{removed:o,events:c}}(o,e,t,r);(function G6(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const p=h.removed;c=h.events;const y=-1!==p.findIndex(S=>S._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(i,(S,x)=>Lf(x));if(y&&!T){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const x=function iG(n){return n.fold((e,t,r)=>{if(t&&Lf(t))return[nS(t)];{let i=[];return t&&(i=IL(t)),Hi(r,(o,c)=>{i=i.concat(c)}),i}})}(S);for(let O=0;O<x.length;++O){const V=x[O],J=V.query,we=NL(n,V);n.listenProvider_.startListening(dE(J),sS(n,J),we.hashFn,we.onComplete)}}}!T&&p.length>0&&!r&&(y?n.listenProvider_.stopListening(dE(e),null):p.forEach(S=>{const x=n.queryToTagMap.get(oS(S));n.listenProvider_.stopListening(dE(S),x)})),function sG(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=oS(r),o=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(o)}}}(n,p)}return c}function xL(n,e,t){const r=e._path;let i=null,o=!1;n.syncPointTree_.foreachOnPath(r,(S,x)=>{const O=Js(S,r);i=i||Ff(x,O),o=o||Lf(x)});let h,c=n.syncPointTree_.get(r);c?(o=o||Lf(c),i=i||Ff(c,An())):(c=new CL,n.syncPointTree_=n.syncPointTree_.set(r,c)),null!=i?h=!0:(h=!1,i=Kt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((x,O)=>{const V=Ff(O,An());V&&(i=i.updateImmediateChild(x,V))}));const p=DL(c,e);if(!p&&!e._queryParams.loadsAllData()){const S=oS(e);(0,R.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const x=function oG(){return Y6++}();n.queryToTagMap.set(S,x),n.tagToQueryMap.set(x,S)}let T=function Z6(n,e,t,r,i,o){const c=TL(n,e,r,i,o);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function j6(n,e){n.eventRegistrations_.push(e)}(c,t),function H6(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(nr,(o,c)=>{r.push(xy(o,c))}),t.isFullyInitialized()&&r.push(nL(t.getNode())),bL(n,r,t.getNode(),e)}(c,t)}(c,e,t,QI(n.pendingWriteTree_,r),i,h);if(!p&&!o){const S=SL(c,e);T=T.concat(function aG(n,e,t){const r=e._path,i=sS(n,e),o=NL(n,t),c=n.listenProvider_.startListening(dE(e),i,o.hashFn,o.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,R.hu)(!Lf(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((y,T,S)=>{if(!on(y)&&T&&Lf(T))return[nS(T).query];{let x=[];return T&&(x=x.concat(IL(T).map(O=>O.query))),Hi(S,(O,V)=>{x=x.concat(V)}),x}});for(let y=0;y<p.length;++y){const T=p[y];n.listenProvider_.stopListening(dE(T),sS(n,T))}}return c}(n,e,S))}return T}function iS(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(c,h)=>{const y=Ff(h,Js(c,e));if(y)return y});return dL(i,e,o,t,!0)}function ky(n,e){return ML(e,n.syncPointTree_,null,QI(n.pendingWriteTree_,An()))}function ML(n,e,t,r){if(on(n.path))return PL(n,e,t,r);{const i=e.get(An());null==t&&null!=i&&(t=Ff(i,An()));let o=[];const c=sn(n.path),h=n.operationForChild(c),p=e.children.get(c);if(p&&h){const y=t?t.getImmediateChild(c):null,T=fL(r,c);o=o.concat(ML(h,p,y,T))}return i&&(o=o.concat($P(i,n,r,t))),o}}function PL(n,e,t,r){const i=e.get(An());null==t&&null!=i&&(t=Ff(i,An()));let o=[];return e.children.inorderTraversal((c,h)=>{const p=t?t.getImmediateChild(c):null,y=fL(r,c),T=n.operationForChild(c);T&&(o=o.concat(PL(T,h,p,y)))}),i&&(o=o.concat($P(i,n,r,t))),o}function NL(n,e){const t=e.query,r=sS(n,t);return{hashFn:()=>(function U6(n){return n.viewCache_.serverCache.getNode()}(e)||Kt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function eG(n,e,t){const r=ZP(n,t);if(r){const i=zP(r),o=i.path,c=i.queryId,h=Js(o,e);return WP(n,o,new oE(kP(c),h))}return[]}(n,t._path,r):function X6(n,e){return ky(n,new oE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const o=function J$(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return GP(n,t,null,o)}}}}function sS(n,e){const t=oS(e);return n.queryToTagMap.get(t)}function oS(n){return n._path.toString()+"$"+n._queryIdentifier}function ZP(n,e){return n.tagToQueryMap.get(e)}function zP(n){const e=n.indexOf("$");return(0,R.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new kn(n.substr(0,e))}}function WP(n,e,t){const r=n.syncPointTree_.get(e);return(0,R.hu)(r,"Missing sync point for query tag that we're tracking"),$P(r,t,QI(n.pendingWriteTree_,e),null)}function dE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function K6(){return(0,R.hu)(rS,"Reference.ts has not been loaded"),rS}())(n._repo,n._path):n}class KP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new KP(t)}node(){return this.node_}}class YP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=yr(this.path_,e);return new YP(this.syncTree_,t)}node(){return iS(this.syncTree_,this.path_)}}const kL=function(n,e,t){return n&&"object"==typeof n?((0,R.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?uG(n[".sv"],e,t):"object"==typeof n[".sv"]?cG(n[".sv"],e):void(0,R.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},uG=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,R.hu)(!1,"Unexpected server value: "+n)},cG=function(n,e,t){n.hasOwnProperty("increment")||(0,R.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,R.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,R.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},RL=function(n,e,t,r){return JP(e,new YP(t,n),r)},QP=function(n,e,t){return JP(n,new KP(e),t)};function JP(n,e,t){const r=n.getPriority().val(),i=kL(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const c=n,h=kL(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new Sy(h,Mr(i)):n}{const c=n;return o=c,i!==c.getPriority().val()&&(o=o.updatePriority(new Sy(i))),c.forEachChild(nr,(h,p)=>{const y=JP(p,e.getImmediateChild(h),t);y!==p&&(o=o.updateImmediateChild(h,y))}),o}}class XP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function aS(n,e){let t=e instanceof kn?e:new kn(e),r=n,i=sn(t);for(;null!==i;){const o=(0,R.DV)(r.node.children,i)||{children:{},childCount:0};r=new XP(i,r,o),t=Yn(t),i=sn(t)}return r}function Bg(n){return n.node.value}function eN(n,e){n.node.value=e,tN(n)}function OL(n){return n.node.childCount>0}function lS(n,e){Hi(n.node.children,(t,r)=>{e(new XP(t,n,r))})}function FL(n,e,t,r){t&&!r&&e(n),lS(n,i=>{FL(i,e,!0,r)}),t&&r&&e(n)}function hE(n){return new kn(null===n.parent?n.name:hE(n.parent)+"/"+n.name)}function tN(n){null!==n.parent&&function fG(n,e,t){const r=function dG(n){return void 0===Bg(n)&&!OL(n)}(t),i=(0,R.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,tN(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,tN(n))}(n.parent,n.name,n)}const pG=/[\[\].#$\/\u0000-\u001F\u007F]/,gG=/[\[\].#$\u0000-\u001F\u007F]/,nN=10485760,uS=function(n){return"string"==typeof n&&0!==n.length&&!pG.test(n)},LL=function(n){return"string"==typeof n&&0!==n.length&&!gG.test(n)},fE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!OI(n)||n&&"object"==typeof n&&(0,R.r3)(n,".sv")},Yu=function(n,e,t,r){r&&void 0===e||pE((0,R.gK)(n,"value"),e,t)},pE=function(n,e,t){const r=t instanceof kn?new xq(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Og(r));if("function"==typeof e)throw new Error(n+"contains a function "+Og(r)+" with contents = "+e.toString());if(OI(e))throw new Error(n+"contains "+e.toString()+" "+Og(r));if("string"==typeof e&&e.length>nN/3&&(0,R.ug)(e)>nN)throw new Error(n+"contains a string greater than "+nN+" utf8 bytes "+Og(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(Hi(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(o=!0,!uS(c)))throw new Error(n+" contains an invalid key ("+c+") "+Og(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Mq(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,R.ug)(e),$F(n)})(r,c),pE(n,h,r),function Pq(n){const e=n.parts_.pop();n.byteLength_-=(0,R.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+Og(r)+" in addition to actual children.")}},UL=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,R.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const o=[];Hi(e,(c,h)=>{const p=new kn(c);if(pE(i,h,yr(t,p)),".priority"===_P(p)&&!fE(h))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(p)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const o=Xw(r);for(let c=0;c<o.length;c++)if((".priority"!==o[c]||c!==o.length-1)&&!uS(o[c]))throw new Error(n+"contains an invalid key ("+o[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Aq);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Ya(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},rN=function(n,e,t){if(!t||void 0!==e){if(OI(e))throw new Error((0,R.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fE(e))throw new Error((0,R.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},gE=function(n,e,t,r){if(!(r&&void 0===t||uS(t)))throw new Error((0,R.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},mE=function(n,e,t,r){if(!(r&&void 0===t||LL(t)))throw new Error((0,R.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ja=function(n,e){if(".info"===sn(e))throw new Error(n+" failed = Can't modify data under /.info/")},VL=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!uS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),LL(n)}(t))throw new Error((0,R.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class vG{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function cS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!yP(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function iN(n,e,t){cS(n,t),BL(n,r=>yP(r,e))}function Xa(n,e,t){cS(n,t),BL(n,r=>Ya(r,e)||Ya(e,r))}function BL(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(wG(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function wG(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();kg&&ji("event: "+t.toString()),Ty(r)}}}const jL="repo_interrupt";class bG{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new vG,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zI(),this.transactionQueueTree_=new XP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function HL(n){const t=n.infoData_.getNode(new kn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function _E(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:HL(n)})}function $L(n,e,t,r,i){n.dataUpdateCount++;const o=new kn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const p=(0,R.UI)(t,y=>Mr(y));c=function nG(n,e,t,r){const i=ZP(n,r);if(i){const o=zP(i),c=o.path,h=o.queryId,p=Js(c,e),y=rr.fromObject(t);return WP(n,c,new Py(kP(h),p,y))}return[]}(n.serverSyncTree_,o,p,i)}else{const p=Mr(t);c=function tG(n,e,t,r){const i=ZP(n,r);if(null!=i){const o=zP(i),c=o.path,h=o.queryId,p=Js(c,e);return WP(n,c,new Lg(kP(h),p,t))}return[]}(n.serverSyncTree_,o,p,i)}else if(r){const p=(0,R.UI)(t,y=>Mr(y));c=function J6(n,e,t){const r=rr.fromObject(t);return ky(n,new Py({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,p)}else{const p=Mr(t);c=cE(n.serverSyncTree_,o,p)}let h=o;c.length>0&&(h=Oy(n,o)),Xa(n.eventQueue_,h,c)}function qL(n,e){sN(n,"connected",e),!1===e&&function DG(n){Ry(n,"onDisconnectEvents");const e=_E(n),t=zI();MP(n.onDisconnect_,An(),(i,o)=>{const c=RL(i,o,n.serverSyncTree_,e);My(t,i,c)});let r=[];MP(t,An(),(i,o)=>{r=r.concat(cE(n.serverSyncTree_,i,o));const c=uN(n,i);Oy(n,c)}),n.onDisconnect_=zI(),Xa(n.eventQueue_,An(),r)}(n)}function sN(n,e,t){const r=new kn("/.info/"+e),i=Mr(t);n.infoData_.updateSnapshot(r,i);const o=cE(n.infoSyncTree_,r,i);Xa(n.eventQueue_,r,o)}function dS(n){return n.nextWriteId_++}function oN(n,e,t,r,i){Ry(n,"set",{path:e.toString(),value:t,priority:r});const o=_E(n),c=Mr(t,r),h=iS(n.serverSyncTree_,e),p=QP(c,h,o),y=dS(n),T=qP(n.serverSyncTree_,e,p,y,!0);cS(n.eventQueue_,T),n.server_.put(e.toString(),c.val(!0),(x,O)=>{const V="ok"===x;V||Es("set at "+e+" failed: "+x);const J=Uf(n.serverSyncTree_,y,!V);Xa(n.eventQueue_,e,J),Vf(0,i,x,O)});const S=uN(n,e);Oy(n,S),Xa(n.eventQueue_,S,[])}function AG(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&xP(n.onDisconnect_,e),Vf(0,t,r,i)})}function GL(n,e,t,r){const i=Mr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(o,c)=>{"ok"===o&&My(n.onDisconnect_,e,i),Vf(0,r,o,c)})}function aN(n,e,t){let r;r=".info"===sn(e._path)?GP(n.infoSyncTree_,e,t):GP(n.serverSyncTree_,e,t),iN(n.eventQueue_,e._path,r)}function ZL(n){n.persistentConnection_&&n.persistentConnection_.interrupt(jL)}function Ry(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),ji(t,...e)}function Vf(n,e,t,r){e&&Ty(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let o=i;r&&(o+=": "+r);const c=new Error(o);c.code=i,e(c)}})}function lN(n,e,t){return iS(n.serverSyncTree_,e,t)||Kt.EMPTY_NODE}function hS(n,e=n.transactionQueueTree_){if(e||fS(n,e),Bg(e)){const t=WL(n,e);(0,R.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function RG(n,e,t){const r=t.map(y=>y.currentWriteId),i=lN(n,e,r);let o=i;const c=i.hash();for(let y=0;y<t.length;y++){const T=t[y];(0,R.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const S=Js(e,T.path);o=o.updateChild(S,T.currentOutputSnapshotRaw)}const h=o.val(!0),p=e;n.server_.put(p.toString(),h,y=>{Ry(n,"transaction put response",{path:p.toString(),status:y});let T=[];if("ok"===y){const S=[];for(let x=0;x<t.length;x++)t[x].status=2,T=T.concat(Uf(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&S.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();fS(n,aS(n.transactionQueueTree_,e)),hS(n,n.transactionQueueTree_),Xa(n.eventQueue_,e,T);for(let x=0;x<S.length;x++)Ty(S[x])}else{if("datastale"===y)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Es("transaction at "+p.toString()+" failed: "+y);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=y}Oy(n,e)}},c)}(n,hE(e),t)}else OL(e)&&lS(e,t=>{hS(n,t)})}function Oy(n,e){const t=zL(n,e),r=hE(t);return function OG(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],y=Js(t,p.path);let S,T=!1;if((0,R.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)T=!0,S=p.abortReason,i=i.concat(Uf(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)T=!0,S="maxretry",i=i.concat(Uf(n.serverSyncTree_,p.currentWriteId,!0));else{const x=lN(n,p.path,c);p.currentInputSnapshot=x;const O=e[h].update(x.val());if(void 0!==O){pE("transaction failed: Data returned ",O,p.path);let V=Mr(O);"object"==typeof O&&null!=O&&(0,R.r3)(O,".priority")||(V=V.updatePriority(x.getPriority()));const we=p.currentWriteId,Ge=_E(n),nt=QP(V,x,Ge);p.currentOutputSnapshotRaw=V,p.currentOutputSnapshotResolved=nt,p.currentWriteId=dS(n),c.splice(c.indexOf(we),1),i=i.concat(qP(n.serverSyncTree_,p.path,nt,p.currentWriteId,p.applyLocally)),i=i.concat(Uf(n.serverSyncTree_,we,!0))}else T=!0,S="nodata",i=i.concat(Uf(n.serverSyncTree_,p.currentWriteId,!0))}Xa(n.eventQueue_,t,i),i=[],T&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}fS(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Ty(r[h]);hS(n,n.transactionQueueTree_)}(n,WL(n,t),r),r}function zL(n,e){let t,r=n.transactionQueueTree_;for(t=sn(e);null!==t&&void 0===Bg(r);)r=aS(r,t),t=sn(e=Yn(e));return r}function WL(n,e){const t=[];return KL(n,e,t),t.sort((r,i)=>r.order-i.order),t}function KL(n,e,t){const r=Bg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);lS(e,i=>{KL(n,i,t)})}function fS(n,e){const t=Bg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,eN(e,t.length>0?t:void 0)}lS(e,r=>{fS(n,r)})}function uN(n,e){const t=hE(zL(n,e)),r=aS(n.transactionQueueTree_,e);return function hG(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{cN(n,i)}),cN(n,r),FL(r,i=>{cN(n,i)}),t}function cN(n,e){const t=Bg(e);if(t){const r=[];let i=[],o=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,R.hu)(o===c-1,"All SENT items should be at beginning of queue."),o=c,t[c].status=3,t[c].abortReason="set"):((0,R.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(Uf(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===o?eN(e,void 0):t.length=o+1,Xa(n.eventQueue_,hE(e),i);for(let c=0;c<r.length;c++)Ty(r[c])}}const dN=function(n,e){const t=UG(n),r=t.namespace;return"firebase.com"===t.domain&&zu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&zu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Es("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new dP(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new kn(t.pathString)}},UG=function(n){let e="",t="",r="",i="",o="",c=!0,h="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let T=n.indexOf("/");-1===T&&(T=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(T,S)),T<S&&(i=function FG(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(n.substring(T,S)));const x=function LG(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Es(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));y=e.indexOf(":"),y>=0?(c="https"===h||"wss"===h,p=parseInt(e.substring(y+1),10)):y=e.length;const O=e.slice(0,y);if("localhost"===O.toLowerCase())t="localhost";else if(O.split(".").length<=2)t=O;else{const V=e.indexOf(".");r=e.substring(0,V).toLowerCase(),t=e.substring(V+1),o=r}"ns"in x&&(o=x.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:o}};class YL{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,R.Pz)(this.snapshot.exportVal())}}class QL{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class JL{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,R.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class XL{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new R.BH;return AG(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ja("OnDisconnect.remove",this._path);const e=new R.BH;return GL(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ja("OnDisconnect.set",this._path),Yu("OnDisconnect.set",e,this._path,!1);const t=new R.BH;return GL(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ja("OnDisconnect.setWithPriority",this._path),Yu("OnDisconnect.setWithPriority",e,this._path,!1),rN("OnDisconnect.setWithPriority",t,!1);const r=new R.BH;return function xG(n,e,t,r,i){const o=Mr(t,r);n.server_.onDisconnectPut(e.toString(),o.val(!0),(c,h)=>{"ok"===c&&My(n.onDisconnect_,e,o),Vf(0,i,c,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ja("OnDisconnect.update",this._path),UL("OnDisconnect.update",e,this._path,!1);const t=new R.BH;return function MG(n,e,t,r){if((0,R.xb)(t))return ji("onDisconnect().update() called with empty data.  Don't do anything."),void Vf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,o)=>{"ok"===i&&Hi(t,(c,h)=>{const p=Mr(h);My(n.onDisconnect_,yr(e,c),p)}),Vf(0,r,i,o)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Io{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return on(this._path)?null:_P(this._path)}get ref(){return new el(this._repo,this._path)}get _queryIdentifier(){const e=iL(this._queryParams),t=lP(e);return"{}"===t?"default":t}get _queryObject(){return iL(this._queryParams)}isEqual(e){if(!((e=(0,R.m9)(e))instanceof Io))return!1;const t=this._repo===e._repo,r=yP(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Dq(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function pS(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Bf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ku){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Td)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Wu)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===nr){if(null!=e&&!fE(e)||null!=t&&!fE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,R.hu)(n.getIndex()instanceof CP||n.getIndex()===TP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function gS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class el extends Io{constructor(e,t){super(e,t,new qI,!1)}get parent(){const e=HF(this._path);return null===e?null:new el(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class jg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new kn(e),r=Hg(this.ref,e);return new jg(this._node.getChild(t),r,nr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new jg(i,Hg(this.ref,r),nr)))}hasChild(e){const t=new kn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function e2(n,e){return(n=(0,R.m9)(n))._checkNotDeleted("ref"),void 0!==e?Hg(n._root,e):n._root}function t2(n,e){(n=(0,R.m9)(n))._checkNotDeleted("refFromURL");const t=dN(e,n._repo.repoInfo_.nodeAdmin);VL("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&zu("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),e2(n,t.path.toString())}function Hg(n,e){return null===sn((n=(0,R.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),mE("child","path",t,!1)):mE("child","path",e,!1),new el(n._repo,yr(n._path,e));var t}function hN(n,e){n=(0,R.m9)(n),Ja("set",n._path),Yu("set",e,n._path,!1);const t=new R.BH;return oN(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function $G(n,e){UL("update",e,n._path,!1);const t=new R.BH;return function SG(n,e,t,r){Ry(n,"update",{path:e.toString(),value:t});let i=!0;const o=_E(n),c={};if(Hi(t,(h,p)=>{i=!1,c[h]=RL(yr(e,h),Mr(p),n.serverSyncTree_,o)}),i)ji("update() called with empty data.  Don't do anything."),Vf(0,r,"ok",void 0);else{const h=dS(n),p=function Q6(n,e,t,r){!function p6(n,e,t,r){(0,R.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=OP(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=rr.fromObject(t);return ky(n,new Py({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,h);cS(n.eventQueue_,p),n.server_.merge(e.toString(),t,(y,T)=>{const S="ok"===y;S||Es("update at "+e+" failed: "+y);const x=Uf(n.serverSyncTree_,h,!S),O=x.length>0?Oy(n,e):e;Xa(n.eventQueue_,O,x),Vf(0,r,y,T)}),Hi(t,y=>{const T=uN(n,yr(e,y));Oy(n,T)}),Xa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function qG(n){return function IG(n,e){const t=function rG(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,T)=>{const S=Js(y,t);r=r||Ff(T,S)});let i=n.syncPointTree_.get(t);i?r=r||Ff(i,An()):(i=new CL,n.syncPointTree_=n.syncPointTree_.set(t,i));const o=null!=r,c=o?new Rf(r,!0,!1):null;return function V6(n){return YI(n.viewCache_)}(TL(i,e,QI(n.pendingWriteTree_,e._path),o?c.getNode():Kt.EMPTY_NODE,o))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Mr(r).withIndex(e._queryParams.getIndex()),o=cE(n.serverSyncTree_,e._path,i);return iN(n.eventQueue_,e._path,o),Promise.resolve(i)},r=>(Ry(n,"get for query "+(0,R.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,R.m9)(n))._repo,n).then(e=>new jg(e,new el(n._repo,n._path),n._queryParams.getIndex()))}class mS{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new YL("value",this,new jg(e.snapshotNode,new el(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new QL(this,e,t):null}matches(e){return e instanceof mS&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class _S{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new QL(this,e,t):null}createEvent(e,t){(0,R.hu)(null!=e.childName,"Child events should have a childName.");const r=Hg(new el(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new YL(e.type,this,new jg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof _S&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function yE(n,e,t,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const p=t,y=(T,S)=>{aN(n._repo,n,h),p(T,S)};y.userCallback=t.userCallback,y.context=t.context,t=y}const c=new JL(t,o||void 0),h="value"===e?new mS(c):new _S(e,c);return function PG(n,e,t){let r;r=".info"===sn(e._path)?xL(n.infoSyncTree_,e,t):xL(n.serverSyncTree_,e,t),iN(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>aN(n._repo,n,h)}function fN(n,e,t,r){return yE(n,"value",e,t,r)}function n2(n,e,t,r){return yE(n,"child_added",e,t,r)}function r2(n,e,t,r){return yE(n,"child_changed",e,t,r)}function i2(n,e,t,r){return yE(n,"child_moved",e,t,r)}function s2(n,e,t,r){return yE(n,"child_removed",e,t,r)}function o2(n,e,t){let r=null;const i=t?new JL(t):null;"value"===e?r=new mS(i):e&&(r=new _S(e,i)),aN(n._repo,n,r)}class ql{}class a2 extends ql{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Yu("endAt",this._value,e._path,!0);const t=AP(e._queryParams,this._value,this._key);if(gS(t),Bf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Io(e._repo,e._path,t,e._orderByCalled)}}class ZG extends ql{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Yu("endBefore",this._value,e._path,!1);const t=function t6(n,e,t){let r,i;return n.index_===Ku?("string"==typeof e&&(e=tL(e)),i=AP(n,e,t)):(r=null==t?Td:tL(t),i=AP(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(gS(t),Bf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Io(e._repo,e._path,t,e._orderByCalled)}}class l2 extends ql{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Yu("startAt",this._value,e._path,!0);const t=DP(e._queryParams,this._value,this._key);if(gS(t),Bf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Io(e._repo,e._path,t,e._orderByCalled)}}class KG extends ql{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Yu("startAfter",this._value,e._path,!1);const t=function e6(n,e,t){let r;if(n.index_===Ku)"string"==typeof e&&(e=eL(e)),r=DP(n,e,t);else{let i;i=null==t?Wu:eL(t),r=DP(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(gS(t),Bf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Io(e._repo,e._path,t,e._orderByCalled)}}class QG extends ql{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Io(e._repo,e._path,function Jq(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class XG extends ql{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Io(e._repo,e._path,function Xq(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class tZ extends ql{constructor(e){super(),this._path=e}_apply(e){pS(e,"orderByChild");const t=new kn(this._path);if(on(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new CP(t),i=GI(e._queryParams,r);return Bf(i),new Io(e._repo,e._path,i,!0)}}class rZ extends ql{_apply(e){pS(e,"orderByKey");const t=GI(e._queryParams,Ku);return Bf(t),new Io(e._repo,e._path,t,!0)}}class sZ extends ql{_apply(e){pS(e,"orderByPriority");const t=GI(e._queryParams,nr);return Bf(t),new Io(e._repo,e._path,t,!0)}}class aZ extends ql{_apply(e){pS(e,"orderByValue");const t=GI(e._queryParams,TP);return Bf(t),new Io(e._repo,e._path,t,!0)}}class uZ extends ql{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Yu("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new a2(this._value,this._key)._apply(new l2(this._value,this._key)._apply(e))}}function Gl(n,...e){let t=(0,R.m9)(n);for(const r of e)t=r._apply(t);return t}(function $6(n){(0,R.hu)(!tS,"__referenceConstructor has already been defined"),tS=n})(el),function W6(n){(0,R.hu)(!rS,"__referenceConstructor has already been defined"),rS=n}(el);const pN={};function c2(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||zu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ji("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,c=dN(o,i),h=c.repoInfo;"undefined"!=typeof process&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,o=`http://${y}?ns=${h.namespace}`,c=dN(o,i),h=c.repoInfo):p=!c.repoInfo.secure;const T=i&&p?new Jw(Jw.OWNER):new nq(n.name,n.options,e);VL("Invalid Firebase Database URL",c),on(c.path)||zu("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function pZ(n,e,t,r){let i=pN[e.name];i||(i={},pN[e.name]=i);let o=i[n.toURLString()];return o&&zu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new bG(n,false,t,r),i[n.toURLString()]=o,o}(h,n,T,new tq(n.name,t));return new mZ(S,n)}class mZ{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function CG(n,e,t){if(n.stats_=pP(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new ZI(n.repoInfo_,(r,i,o,c)=>{$L(n,r,i,o,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>qL(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,R.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Fg(n.repoInfo_,e,(r,i,o,c)=>{$L(n,r,i,o,c)},r=>{qL(n,r)},r=>{!function TG(n,e){Hi(e,(t,r)=>{sN(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function sq(n,e){const t=n.toString();return fP[t]||(fP[t]=e()),fP[t]}(n.repoInfo_,()=>new a6(n.stats_,n.server_)),n.infoData_=new n6,n.infoSyncTree_=new AL({startListening:(r,i,o,c)=>{let h=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(h=cE(n.infoSyncTree_,r._path,p),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),sN(n,"connected",!1),n.serverSyncTree_=new AL({startListening:(r,i,o,c)=>(n.server_.listen(r,o,i,(h,p)=>{const y=c(h,p);Xa(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new el(this._repo,An())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function fZ(n,e){const t=pN[e];(!t||t[n.key]!==n)&&zu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),ZL(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&zu("Cannot call "+e+" on a deleted database.")}}function d2(){MF.IS_TRANSPORT_INITIALIZED&&Es("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function _Z(){d2(),Nf.forceDisallow()}function yZ(){d2(),Iy.forceDisallow(),Nf.forceAllow()}function bZ(n,e){cF(n,e)}const TZ={".sv":"timestamp"};class DZ{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Fg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Fg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function CZ(n){sF(Or.SDK_VERSION),(0,Or._registerComponent)(new Eo.wA("database",(e,{instanceIdentifier:t})=>c2(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Or.registerVersion)(rF,"0.13.0",n),(0,Or.registerVersion)(rF,"0.13.0","esm2017")}();const PZ=new bo.Yd("@firebase/database-compat"),h2=function(n){PZ.warn("FIREBASE WARNING: "+n)};class RZ{constructor(e){this._delegate=e}cancel(e){(0,R.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,R.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,R.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,R.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,R.Dv)("OnDisconnect.set",1,2,arguments.length),(0,R.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,R.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,R.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,t){if((0,R.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,h2("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,R.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class OZ{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,R.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class jf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,R.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,R.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,R.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,R.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,R.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),mE("DataSnapshot.child","path",e,!1),new jf(this._database,this._delegate.child(e))}hasChild(e){return(0,R.Dv)("DataSnapshot.hasChild",1,1,arguments.length),mE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,R.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,R.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,R.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new jf(this._database,t)))}hasChildren(){return(0,R.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,R.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,R.Dv)("DataSnapshot.ref",0,0,arguments.length),new la(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ns{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var o;(0,R.Dv)("Query.on",2,4,arguments.length),(0,R.Wj)("Query.on","callback",t,!1);const c=ns.getCancelAndContextArgs_("Query.on",r,i),h=(y,T)=>{t.call(c.context,new jf(this.database,y),T)};h.userCallback=t,h.context=c.context;const p=null===(o=c.cancel)||void 0===o?void 0:o.bind(c.context);switch(e){case"value":return fN(this._delegate,h,p),t;case"child_added":return n2(this._delegate,h,p),t;case"child_removed":return s2(this._delegate,h,p),t;case"child_changed":return r2(this._delegate,h,p),t;case"child_moved":return i2(this._delegate,h,p),t;default:throw new Error((0,R.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,R.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,R.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,R.Wj)("Query.off","callback",t,!0),(0,R.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,o2(this._delegate,e,i)}else o2(this._delegate,e)}get(){return qG(this._delegate).then(e=>new jf(this.database,e))}once(e,t,r,i){(0,R.Dv)("Query.once",1,4,arguments.length),(0,R.Wj)("Query.once","callback",t,!0);const o=ns.getCancelAndContextArgs_("Query.once",r,i),c=new R.BH,h=(y,T)=>{const S=new jf(this.database,y);t&&t.call(o.context,S,T),c.resolve(S)};h.userCallback=t,h.context=o.context;const p=y=>{o.cancel&&o.cancel.call(o.context,y),c.reject(y)};switch(e){case"value":fN(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":n2(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":s2(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":r2(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":i2(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,R.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,R.Dv)("Query.limitToFirst",1,1,arguments.length),new ns(this.database,Gl(this._delegate,function JG(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new QG(n)}(e)))}limitToLast(e){return(0,R.Dv)("Query.limitToLast",1,1,arguments.length),new ns(this.database,Gl(this._delegate,function eZ(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new XG(n)}(e)))}orderByChild(e){return(0,R.Dv)("Query.orderByChild",1,1,arguments.length),new ns(this.database,Gl(this._delegate,function nZ(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return mE("orderByChild","path",n,!1),new tZ(n)}(e)))}orderByKey(){return(0,R.Dv)("Query.orderByKey",0,0,arguments.length),new ns(this.database,Gl(this._delegate,function iZ(){return new rZ}()))}orderByPriority(){return(0,R.Dv)("Query.orderByPriority",0,0,arguments.length),new ns(this.database,Gl(this._delegate,function oZ(){return new sZ}()))}orderByValue(){return(0,R.Dv)("Query.orderByValue",0,0,arguments.length),new ns(this.database,Gl(this._delegate,function lZ(){return new aZ}()))}startAt(e=null,t){return(0,R.Dv)("Query.startAt",0,2,arguments.length),new ns(this.database,Gl(this._delegate,function WG(n=null,e){return gE("startAt","key",e,!0),new l2(n,e)}(e,t)))}startAfter(e=null,t){return(0,R.Dv)("Query.startAfter",0,2,arguments.length),new ns(this.database,Gl(this._delegate,function YG(n,e){return gE("startAfter","key",e,!0),new KG(n,e)}(e,t)))}endAt(e=null,t){return(0,R.Dv)("Query.endAt",0,2,arguments.length),new ns(this.database,Gl(this._delegate,function GG(n,e){return gE("endAt","key",e,!0),new a2(n,e)}(e,t)))}endBefore(e=null,t){return(0,R.Dv)("Query.endBefore",0,2,arguments.length),new ns(this.database,Gl(this._delegate,function zG(n,e){return gE("endBefore","key",e,!0),new ZG(n,e)}(e,t)))}equalTo(e,t){return(0,R.Dv)("Query.equalTo",1,2,arguments.length),new ns(this.database,Gl(this._delegate,function cZ(n,e){return gE("equalTo","key",e,!0),new uZ(n,e)}(e,t)))}toString(){return(0,R.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,R.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,R.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ns))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,R.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,R.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,R.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new la(this.database,new el(this._delegate._repo,this._delegate._path))}}class la extends ns{constructor(e,t){super(e,new Io(t._repo,t._path,new qI,!1)),this.database=e,this._delegate=t}getKey(){return(0,R.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,R.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new la(this.database,Hg(this._delegate,e))}getParent(){(0,R.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new la(this.database,e):null}getRoot(){return(0,R.Dv)("Reference.root",0,0,arguments.length),new la(this.database,this._delegate.root)}set(e,t){(0,R.Dv)("Reference.set",1,2,arguments.length),(0,R.Wj)("Reference.set","onComplete",t,!0);const r=hN(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,R.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,h2("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ja("Reference.update",this._delegate._path),(0,R.Wj)("Reference.update","onComplete",t,!0);const r=$G(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,R.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,R.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function HG(n,e,t){if(Ja("setWithPriority",n._path),Yu("setWithPriority",e,n._path,!1),rN("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new R.BH;return oN(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){(0,R.Dv)("Reference.remove",0,1,arguments.length),(0,R.Wj)("Reference.remove","onComplete",e,!0);const t=function BG(n){return Ja("remove",n._path),hN(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,R.Dv)("Reference.transaction",1,3,arguments.length),(0,R.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,R.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,R.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function AZ(n,e,t){var r;if(n=(0,R.m9)(n),Ja("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,o=new R.BH,h=fN(n,()=>{});return function kG(n,e,t,r,i,o){Ry(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:aF(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=lN(n,e,void 0);c.currentInputSnapshot=h;const p=c.update(h.val());if(void 0===p)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{pE("transaction failed: Data returned ",p,c.path),c.status=0;const y=aS(n.transactionQueueTree_,e),T=Bg(y)||[];let S;T.push(c),eN(y,T),"object"==typeof p&&null!==p&&(0,R.r3)(p,".priority")?(S=(0,R.DV)(p,".priority"),(0,R.hu)(fE(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(iS(n.serverSyncTree_,e)||Kt.EMPTY_NODE).getPriority().val();const x=_E(n),O=Mr(p,S),V=QP(O,h,x);c.currentOutputSnapshotRaw=O,c.currentOutputSnapshotResolved=V,c.currentWriteId=dS(n);const J=qP(n.serverSyncTree_,e,V,c.currentWriteId,c.applyLocally);Xa(n.eventQueue_,e,J),hS(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,y,T)=>{let S=null;p?o.reject(p):(S=new jg(T,new el(n._repo,n._path),nr),o.resolve(new DZ(y,S)))},h,i),o.promise}(this._delegate,e,{applyLocally:r}).then(o=>new OZ(o.committed,new jf(this.database,o.snapshot)));return t&&i.then(o=>t(null,o.committed,o.snapshot),o=>t(o,!1,null)),i}setPriority(e,t){(0,R.Dv)("Reference.setPriority",1,2,arguments.length),(0,R.Wj)("Reference.setPriority","onComplete",t,!0);const r=function jG(n,e){n=(0,R.m9)(n),Ja("setPriority",n._path),rN("setPriority",e,!1);const t=new R.BH;return oN(n._repo,yr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,R.Dv)("Reference.push",0,2,arguments.length),(0,R.Wj)("Reference.push","onComplete",t,!0);const r=function VG(n,e){n=(0,R.m9)(n),Ja("push",n._path),Yu("push",e,n._path,!0);const t=HL(n._repo),r=Wq(t),i=Hg(n,r),o=Hg(n,r);let c;return c=null!=e?hN(o,e).then(()=>o):Promise.resolve(o),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new la(this.database,c));t&&i.then(()=>t(null),c=>t(c));const o=new la(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return Ja("Reference.onDisconnect",this._delegate._path),new RZ(new XL(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class vE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:_Z,forceLongPolling:yZ}}useEmulator(e,t,r={}){!function vZ(n,e,t,r={}){(n=(0,R.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&zu("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&zu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Jw(Jw.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,R.Sg)(r.mockUserToken,n.app.options.projectId);o=new Jw(c)}!function hZ(n,e,t,r){n.repoInfo_=new dP(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,o)}(this._delegate,e,t,r)}ref(e){if((0,R.Dv)("database.ref",0,1,arguments.length),e instanceof la){const t=t2(this._delegate,e.toString());return new la(this,t)}{const t=e2(this._delegate,e);return new la(this,t)}}refFromURL(e){(0,R.Dv)("database.refFromURL",1,1,arguments.length);const r=t2(this._delegate,e);return new la(this,r)}goOffline(){return(0,R.Dv)("database.goOffline",0,0,arguments.length),function wZ(n){(n=(0,R.m9)(n))._checkNotDeleted("goOffline"),ZL(n._repo)}(this._delegate)}goOnline(){return(0,R.Dv)("database.goOnline",0,0,arguments.length),function EZ(n){(n=(0,R.m9)(n))._checkNotDeleted("goOnline"),function NG(n){n.persistentConnection_&&n.persistentConnection_.resume(jL)}(n._repo)}(this._delegate)}}vE.ServerValue={TIMESTAMP:function IZ(){return TZ}(),increment:n=>function SZ(n){return{".sv":{increment:n}}}(n)};var LZ=Object.freeze({__proto__:null,initStandalone:function FZ({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:o=!1}){sF(t);const c=new Eo.zt("auth-internal",new Eo.H0("database-standalone"));return c.setComponent(new Eo.wA("auth-internal",()=>r,"PRIVATE")),{instance:new vE(c2(n,c,void 0,e,o),n),namespace:i}}});const UZ=vE.ServerValue;function f2(n){return null==n}function p2(n){return"function"==typeof n.set}function g2(n,e){return p2(e)?e:n.ref(e)}function m2(n,e){if(function BZ(n){return"string"==typeof n}(n))return e.stringCase();if(p2(n))return e.firebaseCase();if(function jZ(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function wE(n,e,t="on",r=xp.z){return new cs.y(i=>{let o=null;return o=n[t](e,(c,h)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=o&&n.off(e,o)}}:{unsubscribe(){}}}).pipe((0,yt.U)(i=>{const{snapshot:o,prevKey:c}=i;let h=null;return o.exists()&&(h=o.key),{type:e,payload:o,prevKey:c,key:h}}),(0,PR.B)())}function _2(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function qZ(n,e){const{payload:t,prevKey:r,key:i}=e,o=_2(n,i),c=function $Z(n,e){if(f2(e))return 0;{const t=_2(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,n=[...n,y],!1})}return n;case"child_added":if(o>-1){const h=n[o-1];(h&&h.key||null)!==r&&(n=n.filter(p=>p.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(o>-1){const h=n.splice(o,1)[0];return(n=n.slice()).splice(c,0,h),n}return n;default:return n}}function y2(n){return(f2(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function v2(n,e,t){return function HZ(n,e,t){return wE(n,"value","once",t).pipe(ni(r=>{const i=[dt(r)];return e.forEach(o=>i.push(wE(n,o,"on",t))),(0,i1.T)(...i).pipe(xc(qZ,[]))}),Hc())}(n,e=y2(e),t)}function w2(n,e,t){const r=(e=y2(e)).map(i=>wE(n,i,"on",t));return(0,i1.T)(...r)}function E2(n,e){return function(r,i){return m2(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function WZ(n){return function(t){return t?m2(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function b2(n,e){return function(){return wE(n,"value","on",e)}}!function VZ(n){n.INTERNAL.registerComponent(new Eo.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new vE(i,r)},"PUBLIC").setServiceProps({Reference:la,Query:ns,Database:vE,DataSnapshot:jf,enableLogging:bZ,INTERNAL:LZ,ServerValue:UZ}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(Iu.Z);const QZ=new u.OlP("angularfire2.realtimeDatabaseURL"),JZ=new u.OlP("angularfire2.database.use-emulator");let XZ=(()=>{class n{constructor(t,r,i,o,c,h,p,y,T,S,x,O,V,J,we){this.schedulers=h;const Ge=p,nt=(0,er.on)(t,c,r);y&&x1(nt,c,T,x,O,V,S,J),this.database=(0,er.cc)(`${nt.name}.database.${i}`,"AngularFireDatabase",nt.name,()=>{const rt=c.runOutsideAngular(()=>nt.database(i||void 0));return Ge&&rt.useEmulator(...Ge),rt},[Ge])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>g2(this.database,t));let o=i;return r&&(o=r(i)),function KZ(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:E2(r,"update"),set:E2(r,"set"),push:i=>r.push(i),remove:WZ(r),snapshotChanges:i=>v2(n,i,t).pipe(rn.iC),stateChanges:i=>w2(n,i,t).pipe(rn.iC),auditTrail:i=>function GZ(n,e,t){return function zZ(n,e,t){return function ZZ(n,e){return wE(n,"value","on",e).pipe((0,yt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function $$(...n){const e=(0,Tn.jO)(n);return(0,Zr.e)((t,r)=>{const i=n.length,o=new Array(i);let c=n.map(()=>!1),h=!1;for(let p=0;p<i;p++)(0,ds.Xf)(n[p]).subscribe((0,On.x)(r,y=>{o[p]=y,!h&&!c[p]&&(c[p]=!0,(h=c.every(hh.y))&&(c=null))},H$.Z));t.subscribe((0,On.x)(r,p=>{if(h){const y=[p,...o];r.next(e?e(...y):y)}}))})}(e),(0,yt.U)(([i,o])=>{const c=i.lastKeyToLoad,h=o.map(p=>p.key);return{actions:o,lastKeyToLoad:c,loadedKeys:h}}),function q$(n){return(0,Zr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,On.x)(t,o=>(r||(r=!n(o,i++)))&&t.next(o)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,yt.U)(i=>i.actions))}(n,w2(n,e).pipe(xc((i,o)=>[...i,o],[])),t)}(n,i,t).pipe(rn.iC),valueChanges:(i,o)=>v2(n,i,t).pipe((0,yt.U)(h=>h.map(p=>o&&o.idField?Object.assign(Object.assign({},p.payload.val()),{[o.idField]:p.key}):p.payload.val())),rn.iC)}}(o,this)}object(t){return function YZ(n,e){return{query:n,snapshotChanges:()=>b2(n,e.schedulers.outsideAngular)().pipe(rn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>b2(n,e.schedulers.outsideAngular)().pipe(rn.iC,(0,yt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>g2(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(er.Dh),u.LFG(er.xv,8),u.LFG(QZ,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(rn.HU),u.LFG(JZ,8),u.LFG($w,8),u.LFG(C1,8),u.LFG(T1,8),u.LFG(I1,8),u.LFG(S1,8),u.LFG(D1,8),u.LFG(A1,8),u.LFG(Hw,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),e4=(()=>{class n{constructor(){dI.Z.registerVersion("angularfire",rn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[XZ]}),n})();const C2="firebasestorage.googleapis.com",T2="storageBucket";class Vr extends R.ZR{constructor(e,t){super(gN(e),`Firebase Storage: ${t} (${gN(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vr.prototype)}_codeEquals(e){return gN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function gN(n){return"storage/"+n}function mN(){return new Vr("unknown","An unknown error occurred, please check the error payload for server response.")}function I2(){return new Vr("canceled","User canceled the upload/download.")}function S2(){return new Vr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Fy(n){return new Vr("invalid-argument",n)}function D2(){return new Vr("app-deleted","The Firebase app was deleted.")}function A2(n){return new Vr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function EE(n,e){return new Vr("invalid-format","String does not match format '"+n+"': "+e)}function bE(n){throw new Vr("internal-error","Internal error: "+n)}class bs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=bs.makeFromUrl(e,t)}catch(i){return new bs(e,"")}if(""===r.path)return r;throw function d4(n){return new Vr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function y(Xe){Xe.path_=decodeURIComponent(Xe.path)}const S=t.replace(/[.]/g,"\\."),rt=[{regex:h,indices:{bucket:1,path:3},postModify:function o(Xe){"/"===Xe.path.charAt(Xe.path.length-1)&&(Xe.path_=Xe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===C2?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Xe=0;Xe<rt.length;Xe++){const xt=rt[Xe],Nt=xt.regex.exec(e);if(Nt){let Kr=Nt[xt.indices.path];Kr||(Kr=""),r=new bs(Nt[xt.indices.bucket],Kr),xt.postModify(r);break}}if(null==r)throw function c4(n){return new Vr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class g4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function yS(n){return"string"==typeof n||n instanceof String}function x2(n){return _N()&&n instanceof Blob}function _N(){return"undefined"!=typeof Blob}function yN(n,e,t,r){if(r<e)throw Fy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Fy(`Invalid value for '${n}'. Expected ${t} or less.`)}function Sd(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function M2(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var Hf=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(Hf||(Hf={})),Hf))();class E4{constructor(e,t,r,i,o,c,h,p,y,T,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=h,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=T,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,O)=>{this.resolve_=x,this.reject_=O,this.start_()})}start_(){const t=(r,i)=>{const o=this.resolve_,c=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());!function y4(n){return void 0!==n}(p)?o():o(p)}catch(p){c(p)}else if(null!==h){const p=mN();p.serverResponse=h.getErrorText(),c(this.errorCallback_?this.errorCallback_(h,p):p)}else c(i.canceled?this.appDelete_?D2():I2():function u4(){return new Vr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new vS(!1,null,!0)):this.backoffId_=function m4(n,e,t){let r=1,i=null,o=null,c=!1,h=0;function p(){return 2===h}let y=!1;function T(...we){y||(y=!0,e.apply(null,we))}function S(we){i=setTimeout(()=>{i=null,n(O,p())},we)}function x(){o&&clearTimeout(o)}function O(we,...Ge){if(y)return void x();if(we)return x(),void T.call(null,we,...Ge);if(p()||c)return x(),void T.call(null,we,...Ge);let rt;r<64&&(r*=2),1===h?(h=2,rt=0):rt=1e3*(r+Math.random()),S(rt)}let V=!1;function J(we){V||(V=!0,x(),!y&&(null!==i?(we||(h=2),clearTimeout(i),S(0)):we||(h=1)))}return S(0),o=setTimeout(()=>{c=!0,J(!0)},t),J}((r,i)=>{if(i)return void r(!1,new vS(!1,null,!0));const o=this.connectionFactory_();this.pendingConnection_=o;const c=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const h=o.getErrorCode()===Hf.NO_ERROR,p=o.getStatus();if(!h||this.isRetryStatusCode_(p)){const T=o.getErrorCode()===Hf.ABORT;return void r(!1,new vS(!1,null,T))}const y=-1!==this.successCodes_.indexOf(p);r(!0,new vS(y,o))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function _4(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),o=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||o}}class vS{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function A4(...n){const e=function D4(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(_N())return new Blob(n);throw new Vr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ua={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class vN{constructor(e,t){this.data=e,this.contentType=t||null}}function wN(n,e){switch(n){case ua.RAW:return new vN(P2(e));case ua.BASE64:case ua.BASE64URL:return new vN(N2(n,e));case ua.DATA_URL:return new vN(function N4(n){const e=new k2(n);return e.base64?N2(ua.BASE64,e.rest):function P4(n){let e;try{e=decodeURIComponent(n)}catch(t){throw EE(ua.DATA_URL,"Malformed data URL.")}return P2(e)}(e.rest)}(e),function k4(n){return new k2(n).contentType}(e))}throw mN()}function P2(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function N2(n,e){switch(n){case ua.BASE64:{const i=-1!==e.indexOf("-"),o=-1!==e.indexOf("_");if(i||o)throw EE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ua.BASE64URL:{const i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw EE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function M4(n){return atob(n)}(e)}catch(i){throw EE(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class k2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw EE(ua.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function R4(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Qu{constructor(e,t){let r=0,i="";x2(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(x2(this.data_)){const i=function x4(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Qu(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Qu(r,!0)}}static getBlob(...e){if(_N()){const t=e.map(r=>r instanceof Qu?r.data_:r);return new Qu(A4.apply(null,t))}{const t=e.map(c=>yS(c)?wN(ua.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(c=>{for(let h=0;h<c.length;h++)i[o++]=c[h]}),new Qu(i,!0)}}uploadData(){return this.data_}}function EN(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function w4(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function R2(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function L4(n,e){return e}class Xs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||L4}}let wS=null;function CE(){if(wS)return wS;const n=[];n.push(new Xs("bucket")),n.push(new Xs("generation")),n.push(new Xs("metageneration")),n.push(new Xs("name","fullPath",!0));const t=new Xs("name");t.xform=function e(o,c){return function U4(n){return!yS(n)||n.length<2?n:R2(n)}(c)},n.push(t);const i=new Xs("size");return i.xform=function r(o,c){return void 0!==c?Number(c):c},n.push(i),n.push(new Xs("timeCreated")),n.push(new Xs("updated")),n.push(new Xs("md5Hash",null,!0)),n.push(new Xs("cacheControl",null,!0)),n.push(new Xs("contentDisposition",null,!0)),n.push(new Xs("contentEncoding",null,!0)),n.push(new Xs("contentLanguage",null,!0)),n.push(new Xs("contentType",null,!0)),n.push(new Xs("metadata","customMetadata",!0)),wS=n,wS}function O2(n,e,t){const r=EN(e);return null===r?null:function B4(n,e,t){const r={type:"file"},i=t.length;for(let o=0;o<i;o++){const c=t[o];r[c.local]=c.xform(r,e[c.server])}return function V4(n,e){Object.defineProperty(n,"ref",{get:function t(){const o=new bs(n.bucket,n.fullPath);return e._makeStorageReference(o)}})}(r,n),r}(n,r,t)}function bN(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}const F2="prefixes";class Ju{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Xu(n){if(!n)throw mN()}function ES(n,e){return function t(r,i){const o=O2(n,i,e);return Xu(null!==o),o}}function Ly(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function a4(){return new Vr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function o4(){return new Vr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function s4(n){return new Vr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function l4(n){return new Vr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function TE(n){const e=Ly(n);return function t(r,i){let o=e(r,i);return 404===r.getStatus()&&(o=function i4(n){return new Vr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),o.serverResponse=i.serverResponse,o}}function U2(n,e,t){const i=Sd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Ju(i,"GET",ES(n,t),c);return h.errorHandler=TE(e),h}function Z4(n,e,t,r,i){const o={};o.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(o.delimiter=t),r&&(o.pageToken=r),i&&(o.maxResults=i);const h=Sd(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,T=new Ju(h,"GET",function q4(n,e){return function t(r,i){const o=function $4(n,e,t){const r=EN(t);return null===r?null:function H4(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[F2])for(const i of t[F2]){const o=i.replace(/\/$/,""),c=n._makeStorageReference(new bs(e,o));r.prefixes.push(c)}if(t.items)for(const i of t.items){const o=n._makeStorageReference(new bs(e,i.name));r.items.push(o)}return r}(n,e,r)}(n,e,i);return Xu(null!==o),o}}(n,e.bucket),y);return T.urlParams=o,T.errorHandler=Ly(e),T}function B2(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function Y4(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class bS{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function CN(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Xu(!1)}return Xu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const ez={STATE_CHANGED:"state_changed"},eo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function TN(n){switch(n){case"running":case"pausing":case"canceling":return eo.RUNNING;case"paused":return eo.PAUSED;case"success":return eo.SUCCESS;case"canceled":return eo.CANCELED;default:return eo.ERROR}}class tz{constructor(e,t,r){if(function v4(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}function Uy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class rz extends class nz{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Hf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Hf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Hf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw bE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw bE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Zl(){return new rz}class q2{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=CE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Q4(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),c=B2(e,r,i),h={name:c.fullPath},p=Sd(o,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},S=bN(c,t),V=new Ju(p,"POST",function O(J){let we;CN(J);try{we=J.getResponseHeader("X-Goog-Upload-URL")}catch(Ge){Xu(!1)}return Xu(yS(we)),we},n.maxUploadRetryTime);return V.urlParams=h,V.headers=T,V.body=S,V.errorHandler=Ly(e),V}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Zl,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function J4(n,e,t,r){const p=new Ju(t,"POST",function o(y){const T=CN(y,["active","final"]);let S=null;try{S=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch(O){Xu(!1)}S||Xu(!1);const x=Number(S);return Xu(!isNaN(x)),new bS(x,r.size(),"final"===T)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=Ly(e),p}(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,Zl,t,r);this._request=o,o.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new bS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let c;try{c=function X4(n,e,t,r,i,o,c,h){const p=new bS(0,0);if(c?(p.current=c.current,p.total=c.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw function f4(){return new Vr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=p.total-p.current;let T=y;i>0&&(T=Math.min(T,i));const S=p.current,V={"X-Goog-Upload-Command":T===y?"upload, finalize":"upload","X-Goog-Upload-Offset":`${p.current}`},J=r.slice(S,S+T);if(null===J)throw S2();const rt=new Ju(t,"POST",function we(Xe,xt){const Nt=CN(Xe,["active","final"]),fn=p.current+T,Kr=r.size();let ca;return ca="final"===Nt?ES(e,o)(Xe,xt):null,new bS(fn,Kr,"final"===Nt,ca)},e.maxUploadRetryTime);return rt.headers=V,rt.body=J.uploadData(),rt.progressCallback=h||null,rt.errorHandler=Ly(n),rt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const h=this._ref.storage._makeRequest(c,Zl,i,o);this._request=h,h.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=U2(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Zl,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function j2(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},p=function h(){let rt="";for(let Xe=0;Xe<2;Xe++)rt+=Math.random().toString().slice(2);return rt}();c["Content-Type"]="multipart/related; boundary="+p;const y=B2(e,r,i),T=bN(y,t),O=Qu.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+p+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===O)throw S2();const V={name:y.fullPath},J=Sd(o,n.host,n._protocol),Ge=n.maxUploadRetryTime,nt=new Ju(J,"POST",ES(n,t),Ge);return nt.urlParams=V,nt.headers=c,nt.body=O.uploadData(),nt.errorHandler=Ly(e),nt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Zl,e,t);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=I2(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=TN(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const o=new tz(t||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(TN(this._state)){case eo.SUCCESS:Uy(this._resolve.bind(null,this.snapshot))();break;case eo.CANCELED:case eo.ERROR:Uy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(TN(this._state)){case eo.RUNNING:case eo.PAUSED:e.next&&Uy(e.next.bind(e,this.snapshot))();break;case eo.SUCCESS:e.complete&&Uy(e.complete.bind(e))();break;default:e.error&&Uy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class $g{constructor(e,t){this._service=e,this._location=t instanceof bs?t:bs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new $g(e,t)}get root(){const e=new bs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return R2(this._location.path)}get storage(){return this._service}get parent(){const e=function O4(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new bs(this._location.bucket,e);return new $g(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw A2(e)}}function Z2(n,e,t){return IN.apply(this,arguments)}function IN(){return IN=(0,be.Z)(function*(n,e,t){const i=yield z2(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Z2(n,e,i.nextPageToken))}),IN.apply(this,arguments)}function z2(n,e){null!=e&&"number"==typeof e.maxResults&&yN("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Z4(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Zl)}function gz(n){n._throwIfRoot("getDownloadURL");const e=function z4(n,e,t){const i=Sd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new Ju(i,"GET",function G4(n,e){return function t(r,i){const o=O2(n,i,e);return Xu(null!==o),function j4(n,e,t,r){const i=EN(e);if(null===i||!yS(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const c=encodeURIComponent;return o.split(",").map(y=>{const S=n.fullPath;return Sd("/b/"+c(n.bucket)+"/o/"+c(S),t,r)+M2({alt:"media",token:y})})[0]}(o,i,n.host,n._protocol)}}(n,t),c);return h.errorHandler=TE(e),h}(n.storage,n._location,CE());return n.storage.makeRequestWithTokens(e,Zl).then(t=>{if(null===t)throw function p4(){return new Vr("no-download-url","The given file does not have any download URLs.")}();return t})}function W2(n,e){const t=function F4(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new bs(n._location.bucket,t);return new $g(n.storage,r)}function K2(n,e){if(n instanceof SN){const t=n;if(null==t._bucket)throw function h4(){return new Vr("no-default-bucket","No default bucket found. Did you set the '"+T2+"' property when initializing the app?")}();const r=new $g(t,t._bucket);return null!=e?K2(r,e):r}return void 0!==e?W2(n,e):n}function vz(n,e){if(e&&function _z(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof SN)return function yz(n,e){return new $g(n,e)}(n,e);throw Fy("To use ref(service, url), the first argument must be a Storage instance.")}return K2(n,e)}function Y2(n,e){const t=null==e?void 0:e[T2];return null==t?null:bs.makeFromBucketSpec(t,n)}class SN{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=C2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?bs.makeFromBucketSpec(i,this._host):Y2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?bs.makeFromBucketSpec(this._url,e):Y2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){yN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){yN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,be.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,be.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $g(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new g4(D2());{const o=function S4(n,e,t,r,i,o){const c=M2(n.urlParams),h=n.url+c,p=Object.assign({},n.headers);return function T4(n,e){e&&(n["X-Firebase-GMPID"]=e)}(p,e),function b4(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(p,t),function C4(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(p,o),function I4(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(p,r),new E4(h,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,be.Z)(function*(){const[i,o]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,o).getPromise()})()}}const Q2="@firebase/storage";function eU(n,e){return vz(n=(0,R.m9)(n),e)}function Mz(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new SN(t,r,i,e,Or.SDK_VERSION)}!function Pz(){(0,Or._registerComponent)(new Eo.wA("storage",Mz,"PUBLIC").setMultipleInstances(!0)),(0,Or.registerVersion)(Q2,"0.9.6",""),(0,Or.registerVersion)(Q2,"0.9.6","esm2017")}();class CS{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class tU{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new CS(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new CS(r,this,this._ref))},t)}on(e,t,r,i){let o;return t&&(o="function"==typeof t?c=>t(new CS(c,this,this._ref)):{next:t.next?c=>t.next(new CS(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class nU{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Dd(e,this._service))}get items(){return this._delegate.items.map(e=>new Dd(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Dd{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function Az(n,e){return W2(n,e)}(this._delegate,e);return new Dd(t,this.storage)}get root(){return new Dd(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Dd(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new tU(function Ez(n,e,t){return function cz(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new q2(n,new Qu(e),t)}(n=(0,R.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ua.RAW,r){this._throwIfRoot("putString");const i=wN(t,e),o=Object.assign({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new tU(new q2(this._delegate,new Qu(i.data,!0),o),this)}listAll(){return function Iz(n){return function hz(n){const e={prefixes:[],items:[]};return Z2(n,e).then(()=>e)}(n=(0,R.m9)(n))}(this._delegate).then(e=>new nU(e,this.storage))}list(e){return function Tz(n,e){return z2(n=(0,R.m9)(n),e)}(this._delegate,e||void 0).then(t=>new nU(t,this.storage))}getMetadata(){return function bz(n){return function fz(n){n._throwIfRoot("getMetadata");const e=U2(n.storage,n._location,CE());return n.storage.makeRequestWithTokens(e,Zl)}(n=(0,R.m9)(n))}(this._delegate)}updateMetadata(e){return function Cz(n,e){return function pz(n,e){n._throwIfRoot("updateMetadata");const t=function W4(n,e,t,r){const o=Sd(e.fullServerUrl(),n.host,n._protocol),h=bN(t,r),y=n.maxOperationRetryTime,T=new Ju(o,"PATCH",ES(n,r),y);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=h,T.errorHandler=TE(e),T}(n.storage,n._location,e,CE());return n.storage.makeRequestWithTokens(t,Zl)}(n=(0,R.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function Sz(n){return gz(n=(0,R.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Dz(n){return function mz(n){n._throwIfRoot("deleteObject");const e=function K4(n,e){const r=Sd(e.fullServerUrl(),n.host,n._protocol),h=new Ju(r,"DELETE",function c(p,y){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=TE(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Zl)}(n=(0,R.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw A2(e)}}class rU{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(iU(e))throw Fy("ref() expected a child path but got a URL, use refFromURL instead.");return new Dd(eU(this._delegate,e),this)}refFromURL(e){if(!iU(e))throw Fy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{bs.makeFromUrl(e,this._delegate.host)}catch(t){throw Fy("refFromUrl() expected a valid full URL but got an invalid one.")}return new Dd(eU(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function xz(n,e,t,r={}){!function wz(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,R.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function iU(n){return/^[A-Za-z]+:\/\//.test(n)}function Oz(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new rU(t,r)}function sU(n){const e=function Lz(n){return new cs.y(e=>{const t=c=>e.next(c);t(n.snapshot);const o=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){o()}}).pipe(function t4(n,e=xp.z){return(0,Zr.e)((t,r)=>{let i=null,o=null,c=null;const h=()=>{if(i){i.unsubscribe(),i=null;const y=o;o=null,r.next(y)}};function p(){const y=c+n,T=e.now();if(T<y)return i=this.schedule(void 0,y-T),void r.add(i);h()}t.subscribe((0,On.x)(r,y=>{o=y,c=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{o=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,yt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function TS(n){return{getDownloadURL:()=>dt(void 0).pipe(rn.fc,ni(()=>n.getDownloadURL()),rn.iC),getMetadata:()=>dt(void 0).pipe(rn.fc,ni(()=>n.getMetadata()),rn.iC),delete:()=>(0,Pn.D)(n.delete()),child:e=>TS(n.child(e)),updateMetadata:e=>(0,Pn.D)(n.updateMetadata(e)),put:(e,t)=>sU(n.put(e,t)),putString:(e,t,r)=>sU(n.putString(e,t,r)),list:e=>(0,Pn.D)(n.list(e)),listAll:()=>(0,Pn.D)(n.listAll())}}!function Fz(n){const e={TaskState:eo,TaskEvent:ez,StringFormat:ua,Storage:rU,Reference:Dd};n.INTERNAL.registerComponent(new Eo.wA("storage-compat",Oz,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(Iu.Z);const Uz=new u.OlP("angularfire2.storageBucket"),Vz=new u.OlP("angularfire2.storage.maxUploadRetryTime"),Bz=new u.OlP("angularfire2.storage.maxOperationRetryTime"),jz=new u.OlP("angularfire2.storage.use-emulator");let Hz=(()=>{class n{constructor(t,r,i,o,c,h,p,y,T,S){const x=(0,er.on)(t,c,r);this.storage=(0,er.cc)(`${x.name}.storage.${i}`,"AngularFireStorage",x.name,()=>{const O=c.runOutsideAngular(()=>x.storage(i||void 0)),V=T;return V&&O.useEmulator(...V),p&&O.setMaxUploadRetryTime(p),y&&O.setMaxOperationRetryTime(y),O},[p,y])}ref(t){return TS(this.storage.ref(t))}refFromURL(t){return TS(this.storage.refFromURL(t))}upload(t,r,i){return TS(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(er.Dh),u.LFG(er.xv,8),u.LFG(Uz,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(rn.HU),u.LFG(Vz,8),u.LFG(Bz,8),u.LFG(jz,8),u.LFG(Hw,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),$z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),qz=(()=>{class n{constructor(){dI.Z.registerVersion("angularfire",rn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Hz],imports:[$z]}),n})();const oU_firebase={apiKey:"AIzaSyDpFq1kPCDJUMu6vS-OL4SkLODde3NRkBQ",authDomain:"sports-center-dee4d.firebaseapp.com",databaseURL:"https://sports-center-dee4d-default-rtdb.firebaseio.com",projectId:"sports-center-dee4d",storageBucket:"sports-center-dee4d.appspot.com",messagingSenderId:"737350144147",appId:"1:737350144147:web:876d7a861ce69a8359bd66",measurementId:"G-ECZ9KWD6GG"};let Gz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[j$]}),n.\u0275inj=u.cJS({providers:[gI,xf],imports:[[va,U$,dh,Oi,jc,er.hO.initializeApp(oU_firebase),Hj,e4,Rj,qz]]}),n})();(0,u.G48)(),qd().bootstrapModule(Gz).catch(n=>console.error(n))},5867:(ot,Te,F)=>{F.d(Te,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=F(9681);(0,u.registerVersion)("firebase","9.8.2","app")},127:(ot,Te,F)=>{F.d(Te,{Z:()=>u.Z});var u=F(3942);u.Z.registerVersion("firebase","9.8.2","app-compat")},5881:(ot,Te,F)=>{F.r(Te);var u=F(5861),j=F(3942),k=F(2587),ae=F(2090),fe=(F(9681),F(1877),F(4859));function ue(){return window}function $(){return($=(0,u.Z)(function*(ce,Y,W){var xe;const{BuildInfo:Qe}=ue();(0,k.aq)(Y.sessionId,"AuthEvent did not contain a session ID");const ft=yield Ae(Y.sessionId),kt={};return(0,k.ar)()?kt.ibi=Qe.packageName:(0,k.as)()?kt.apn=Qe.packageName:(0,k.at)(ce,"operation-not-supported-in-this-environment"),Qe.displayName&&(kt.appDisplayName=Qe.displayName),kt.sessionId=ft,(0,k.au)(ce,W,Y.type,void 0,null!==(xe=Y.eventId)&&void 0!==xe?xe:void 0,kt)})).apply(this,arguments)}function We(){return(We=(0,u.Z)(function*(ce){const{BuildInfo:Y}=ue(),W={};(0,k.ar)()?W.iosBundleId=Y.packageName:(0,k.as)()?W.androidPackageName=Y.packageName:(0,k.at)(ce,"operation-not-supported-in-this-environment"),yield(0,k.av)(ce,W)})).apply(this,arguments)}function qe(){return(qe=(0,u.Z)(function*(ce,Y,W){const{cordova:xe}=ue();let Qe=()=>{};try{yield new Promise((ft,kt)=>{let Yt=null;function $t(){var qt;ft();const jr=null===(qt=xe.plugins.browsertab)||void 0===qt?void 0:qt.close;"function"==typeof jr&&jr(),"function"==typeof(null==W?void 0:W.close)&&W.close()}function Qn(){Yt||(Yt=window.setTimeout(()=>{kt((0,k.aw)(ce,"redirect-cancelled-by-user"))},2e3))}function fi(){"visible"===(null==document?void 0:document.visibilityState)&&Qn()}Y.addPassiveListener($t),document.addEventListener("resume",Qn,!1),(0,k.as)()&&document.addEventListener("visibilitychange",fi,!1),Qe=()=>{Y.removePassiveListener($t),document.removeEventListener("resume",Qn,!1),document.removeEventListener("visibilitychange",fi,!1),Yt&&window.clearTimeout(Yt)}})}finally{Qe()}})).apply(this,arguments)}function Ae(ce){return ze.apply(this,arguments)}function ze(){return(ze=(0,u.Z)(function*(ce){const Y=Ze(ce),W=yield crypto.subtle.digest("SHA-256",Y);return Array.from(new Uint8Array(W)).map(Qe=>Qe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ze(ce){if((0,k.aq)(/[0-9a-zA-Z]+/.test(ce),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(ce);const Y=new ArrayBuffer(ce.length),W=new Uint8Array(Y);for(let xe=0;xe<ce.length;xe++)W[xe]=ce.charCodeAt(xe);return W}class Re extends k.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Y=>{this.resolveInialized=Y})}addPassiveListener(Y){this.passiveListeners.add(Y)}removePassiveListener(Y){this.passiveListeners.delete(Y)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Y){return this.resolveInialized(),this.passiveListeners.forEach(W=>W(Y)),super.onEvent(Y)}initialized(){var Y=this;return(0,u.Z)(function*(){yield Y.initPromise})()}}function re(ce){return pe.apply(this,arguments)}function pe(){return(pe=(0,u.Z)(function*(ce){const Y=yield ie()._get(oe(ce));return Y&&(yield ie()._remove(oe(ce))),Y})).apply(this,arguments)}function Q(){const ce=[],Y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let W=0;W<20;W++){const xe=Math.floor(Math.random()*Y.length);ce.push(Y.charAt(xe))}return ce.join("")}function ie(){return(0,k.ay)(k.b)}function oe(ce){return(0,k.az)("authEvent",ce.config.apiKey,ce.name)}function Ve(ce){if(!(null==ce?void 0:ce.includes("?")))return{};const[Y,...W]=ce.split("?");return(0,ae.zd)(W.join("?"))}function et(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.aw)("no-auth-event")}}function Ht(){var ce;return(null===(ce=null==self?void 0:self.location)||void 0===ce?void 0:ce.protocol)||null}function Nn(ce=(0,ae.z$)()){return!("file:"!==Ht()&&"ionic:"!==Ht()&&"capacitor:"!==Ht()||!ce.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ii(){try{const ce=self.localStorage,Y=k.aI();if(ce)return ce.setItem(Y,"1"),ce.removeItem(Y),!function rs(ce=(0,ae.z$)()){return function Br(){return(0,ae.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Rn(ce=(0,ae.z$)()){return/Edge\/\d+/.test(ce)}(ce)}()||(0,ae.hl)()}catch(ce){return Gi()&&(0,ae.hl)()}return!1}function Gi(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function qn(){return(function nn(){return"http:"===Ht()||"https:"===Ht()}()||(0,ae.ru)()||Nn())&&!function qi(){return(0,ae.b$)()||(0,ae.UG)()}()&&Ii()&&!Gi()}function is(){return Nn()&&"undefined"!=typeof document}function Yr(){return(Yr=(0,u.Z)(function*(){return!!is()&&new Promise(ce=>{const Y=setTimeout(()=>{ce(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Y),ce(!0)})})})).apply(this,arguments)}const ln={LOCAL:"local",NONE:"none",SESSION:"session"},Nr=k.ax,cr="persistence";function Mn(ce){return dr.apply(this,arguments)}function dr(){return(dr=(0,u.Z)(function*(ce){yield ce._initializationPromise;const Y=Gt(),W=k.az(cr,ce.config.apiKey,ce.name);Y&&Y.setItem(W,ce._getPersistence())})).apply(this,arguments)}function Gt(){var ce;try{return(null===(ce=function xn(){return"undefined"!=typeof window?window:null}())||void 0===ce?void 0:ce.sessionStorage)||null}catch(Y){return null}}const pt=k.ax;class lt{constructor(){this.browserResolver=k.ay(k.k),this.cordovaResolver=k.ay(class tn{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(Y){var W=this;return(0,u.Z)(function*(){const xe=Y._key();let Qe=W.eventManagers.get(xe);return Qe||(Qe=new Re(Y),W.eventManagers.set(xe,Qe),W.attachCallbackListeners(Y,Qe)),Qe})()}_openPopup(Y){(0,k.at)(Y,"operation-not-supported-in-this-environment")}_openRedirect(Y,W,xe,Qe){var ft=this;return(0,u.Z)(function*(){!function _e(ce){var Y,W,xe,Qe,ft,kt,Yt,$t,Qn,fi;const qt=ue();(0,k.ax)("function"==typeof(null===(Y=null==qt?void 0:qt.universalLinks)||void 0===Y?void 0:Y.subscribe),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.ax)(void 0!==(null===(W=null==qt?void 0:qt.BuildInfo)||void 0===W?void 0:W.packageName),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.ax)("function"==typeof(null===(ft=null===(Qe=null===(xe=null==qt?void 0:qt.cordova)||void 0===xe?void 0:xe.plugins)||void 0===Qe?void 0:Qe.browsertab)||void 0===ft?void 0:ft.openUrl),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===($t=null===(Yt=null===(kt=null==qt?void 0:qt.cordova)||void 0===kt?void 0:kt.plugins)||void 0===Yt?void 0:Yt.browsertab)||void 0===$t?void 0:$t.isAvailable),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.ax)("function"==typeof(null===(fi=null===(Qn=null==qt?void 0:qt.cordova)||void 0===Qn?void 0:Qn.InAppBrowser)||void 0===fi?void 0:fi.open),ce,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Y);const kt=yield ft._initialize(Y);yield kt.initialized(),kt.resetRedirect(),(0,k.aD)(),yield ft._originValidation(Y);const Yt=function Ie(ce,Y,W=null){return{type:Y,eventId:W,urlResponse:null,sessionId:Q(),postBody:null,tenantId:ce.tenantId,error:(0,k.aw)(ce,"no-auth-event")}}(Y,xe,Qe);yield function Ke(ce,Y){return ie()._set(oe(ce),Y)}(Y,Yt);const $t=yield function Z(ce,Y,W){return $.apply(this,arguments)}(Y,Yt,W),Qn=yield function Ne(ce){const{cordova:Y}=ue();return new Promise(W=>{Y.plugins.browsertab.isAvailable(xe=>{let Qe=null;xe?Y.plugins.browsertab.openUrl(ce):Qe=Y.InAppBrowser.open(ce,(0,k.ap)()?"_blank":"_system","location=yes"),W(Qe)})})}($t);return function Ue(ce,Y,W){return qe.apply(this,arguments)}(Y,kt,Qn)})()}_isIframeWebStorageSupported(Y,W){throw new Error("Method not implemented.")}_originValidation(Y){const W=Y._key();return this.originValidationPromises[W]||(this.originValidationPromises[W]=function se(ce){return We.apply(this,arguments)}(Y)),this.originValidationPromises[W]}attachCallbackListeners(Y,W){const{universalLinks:xe,handleOpenURL:Qe,BuildInfo:ft}=ue(),kt=setTimeout((0,u.Z)(function*(){yield re(Y),W.onEvent(et())}),500),Yt=function(){var fi=(0,u.Z)(function*(qt){clearTimeout(kt);const jr=yield re(Y);let os=null;jr&&(null==qt?void 0:qt.url)&&(os=function Se(ce,Y){var W,xe;const Qe=function he(ce){const Y=Ve(ce),W=Y.link?decodeURIComponent(Y.link):void 0,xe=Ve(W).link,Qe=Y.deep_link_id?decodeURIComponent(Y.deep_link_id):void 0;return Ve(Qe).link||Qe||xe||W||ce}(Y);if(Qe.includes("/__/auth/callback")){const ft=Ve(Qe),kt=ft.firebaseError?function Ee(ce){try{return JSON.parse(ce)}catch(Y){return null}}(decodeURIComponent(ft.firebaseError)):null,Yt=null===(xe=null===(W=null==kt?void 0:kt.code)||void 0===W?void 0:W.split("auth/"))||void 0===xe?void 0:xe[1],$t=Yt?(0,k.aw)(Yt):null;return $t?{type:ce.type,eventId:ce.eventId,tenantId:ce.tenantId,error:$t,urlResponse:null,sessionId:null,postBody:null}:{type:ce.type,eventId:ce.eventId,tenantId:ce.tenantId,sessionId:ce.sessionId,urlResponse:Qe,postBody:null}}return null}(jr,qt.url)),W.onEvent(os||et())});return function(jr){return fi.apply(this,arguments)}}();void 0!==xe&&"function"==typeof xe.subscribe&&xe.subscribe(null,Yt);const $t=Qe,Qn=`${ft.packageName.toLowerCase()}://`;ue().handleOpenURL=function(){var fi=(0,u.Z)(function*(qt){if(qt.toLowerCase().startsWith(Qn)&&Yt({url:qt}),"function"==typeof $t)try{$t(qt)}catch(jr){console.error(jr)}});return function(qt){return fi.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aB,this._overrideRedirectResult=k.aC}_initialize(Y){var W=this;return(0,u.Z)(function*(){return yield W.selectUnderlyingResolver(),W.assertedUnderlyingResolver._initialize(Y)})()}_openPopup(Y,W,xe,Qe){var ft=this;return(0,u.Z)(function*(){return yield ft.selectUnderlyingResolver(),ft.assertedUnderlyingResolver._openPopup(Y,W,xe,Qe)})()}_openRedirect(Y,W,xe,Qe){var ft=this;return(0,u.Z)(function*(){return yield ft.selectUnderlyingResolver(),ft.assertedUnderlyingResolver._openRedirect(Y,W,xe,Qe)})()}_isIframeWebStorageSupported(Y,W){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Y,W)}_originValidation(Y){return this.assertedUnderlyingResolver._originValidation(Y)}get _shouldInitProactively(){return is()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return pt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Y=this;return(0,u.Z)(function*(){if(Y.underlyingResolver)return;const W=yield function wt(){return Yr.apply(this,arguments)}();Y.underlyingResolver=W?Y.cordovaResolver:Y.browserResolver})()}}function Si(ce){return ce.unwrap()}function Zt(ce){return Gn(ce)}function Gn(ce){const{_tokenResponse:Y}=ce instanceof ae.ZR?ce.customData:ce;if(!Y)return null;if(!(ce instanceof ae.ZR)&&"temporaryProof"in Y&&"phoneNumber"in Y)return k.P.credentialFromResult(ce);const W=Y.providerId;if(!W||W===k.o.PASSWORD)return null;let xe;switch(W){case k.o.GOOGLE:xe=k.Q;break;case k.o.FACEBOOK:xe=k.N;break;case k.o.GITHUB:xe=k.T;break;case k.o.TWITTER:xe=k.W;break;default:const{oauthIdToken:Qe,oauthAccessToken:ft,oauthTokenSecret:kt,pendingToken:Yt,nonce:$t}=Y;return ft||kt||Qe||Yt?Yt?W.startsWith("saml.")?k.aL._create(W,Yt):k.J._fromParams({providerId:W,signInMethod:W,pendingToken:Yt,idToken:Qe,accessToken:ft}):new k.U(W).credential({idToken:Qe,accessToken:ft,rawNonce:$t}):null}return ce instanceof ae.ZR?xe.credentialFromError(ce):xe.credentialFromResult(ce)}function vn(ce,Y){return Y.catch(W=>{throw W instanceof ae.ZR&&function ss(ce,Y){var W;const xe=null===(W=Y.customData)||void 0===W?void 0:W._tokenResponse;if("auth/multi-factor-auth-required"===Y.code)Y.resolver=new K(ce,k.an(ce,Y));else if(xe){const Qe=Gn(Y),ft=Y;Qe&&(ft.credential=Qe,ft.tenantId=xe.tenantId||void 0,ft.email=xe.email||void 0,ft.phoneNumber=xe.phoneNumber||void 0)}}(ce,W),W}).then(W=>{const Qe=W.user;return{operationType:W.operationType,credential:Zt(W),additionalUserInfo:k.al(W),user:Ce.getOrCreate(Qe)}})}function H(ce,Y){return z.apply(this,arguments)}function z(){return(z=(0,u.Z)(function*(ce,Y){const W=yield Y;return{verificationId:W.verificationId,confirm:xe=>vn(ce,W.confirm(xe))}})).apply(this,arguments)}class K{constructor(Y,W){this.resolver=W,this.auth=function Di(ce){return ce.wrapped()}(Y)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Y){return vn(Si(this.auth),this.resolver.resolveSignIn(Y))}}class Ce{constructor(Y){this._delegate=Y,this.multiFactor=k.ao(Y)}static getOrCreate(Y){return Ce.USER_MAP.has(Y)||Ce.USER_MAP.set(Y,new Ce(Y)),Ce.USER_MAP.get(Y)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Y){return this._delegate.getIdTokenResult(Y)}getIdToken(Y){return this._delegate.getIdToken(Y)}linkAndRetrieveDataWithCredential(Y){return this.linkWithCredential(Y)}linkWithCredential(Y){var W=this;return(0,u.Z)(function*(){return vn(W.auth,k.Z(W._delegate,Y))})()}linkWithPhoneNumber(Y,W){var xe=this;return(0,u.Z)(function*(){return H(xe.auth,k.l(xe._delegate,Y,W))})()}linkWithPopup(Y){var W=this;return(0,u.Z)(function*(){return vn(W.auth,k.d(W._delegate,Y,lt))})()}linkWithRedirect(Y){var W=this;return(0,u.Z)(function*(){return yield Mn(k.aE(W.auth)),k.g(W._delegate,Y,lt)})()}reauthenticateAndRetrieveDataWithCredential(Y){return this.reauthenticateWithCredential(Y)}reauthenticateWithCredential(Y){var W=this;return(0,u.Z)(function*(){return vn(W.auth,k._(W._delegate,Y))})()}reauthenticateWithPhoneNumber(Y,W){return H(this.auth,k.r(this._delegate,Y,W))}reauthenticateWithPopup(Y){return vn(this.auth,k.e(this._delegate,Y,lt))}reauthenticateWithRedirect(Y){var W=this;return(0,u.Z)(function*(){return yield Mn(k.aE(W.auth)),k.h(W._delegate,Y,lt)})()}sendEmailVerification(Y){return k.ab(this._delegate,Y)}unlink(Y){var W=this;return(0,u.Z)(function*(){return yield k.ak(W._delegate,Y),W})()}updateEmail(Y){return k.ag(this._delegate,Y)}updatePassword(Y){return k.ah(this._delegate,Y)}updatePhoneNumber(Y){return k.u(this._delegate,Y)}updateProfile(Y){return k.af(this._delegate,Y)}verifyBeforeUpdateEmail(Y,W){return k.ac(this._delegate,Y,W)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ce.USER_MAP=new WeakMap;const G=k.ax;let ee=(()=>{class ce{constructor(W,xe){if(this.app=W,xe.isInitialized())return this._delegate=xe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Qe}=W.options;G(Qe,"invalid-api-key",{appName:W.name}),G(Qe,"invalid-api-key",{appName:W.name});const ft="undefined"!=typeof window?lt:void 0;this._delegate=xe.initialize({options:{persistence:it(Qe,W.name),popupRedirectResolver:ft}}),this._delegate._updateErrorMap(k.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ce.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(W){this._delegate.languageCode=W}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(W){this._delegate.tenantId=W}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(W,xe){k.G(this._delegate,W,xe)}applyActionCode(W){return k.a2(this._delegate,W)}checkActionCode(W){return k.a3(this._delegate,W)}confirmPasswordReset(W,xe){return k.a1(this._delegate,W,xe)}createUserWithEmailAndPassword(W,xe){var Qe=this;return(0,u.Z)(function*(){return vn(Qe._delegate,k.a5(Qe._delegate,W,xe))})()}fetchProvidersForEmail(W){return this.fetchSignInMethodsForEmail(W)}fetchSignInMethodsForEmail(W){return k.aa(this._delegate,W)}isSignInWithEmailLink(W){return k.a8(this._delegate,W)}getRedirectResult(){var W=this;return(0,u.Z)(function*(){G(qn(),W._delegate,"operation-not-supported-in-this-environment");const xe=yield k.j(W._delegate,lt);return xe?vn(W._delegate,Promise.resolve(xe)):{credential:null,user:null}})()}addFrameworkForLogging(W){!function _n(ce,Y){(0,k.aE)(ce)._logFramework(Y)}(this._delegate,W)}onAuthStateChanged(W,xe,Qe){const{next:ft,error:kt,complete:Yt}=Fe(W,xe,Qe);return this._delegate.onAuthStateChanged(ft,kt,Yt)}onIdTokenChanged(W,xe,Qe){const{next:ft,error:kt,complete:Yt}=Fe(W,xe,Qe);return this._delegate.onIdTokenChanged(ft,kt,Yt)}sendSignInLinkToEmail(W,xe){return k.a7(this._delegate,W,xe)}sendPasswordResetEmail(W,xe){return k.a0(this._delegate,W,xe||void 0)}setPersistence(W){var xe=this;return(0,u.Z)(function*(){let Qe;switch(function Qr(ce,Y){Nr(Object.values(ln).includes(Y),ce,"invalid-persistence-type"),(0,ae.b$)()?Nr(Y!==ln.SESSION,ce,"unsupported-persistence-type"):(0,ae.UG)()?Nr(Y===ln.NONE,ce,"unsupported-persistence-type"):Gi()?Nr(Y===ln.NONE||Y===ln.LOCAL&&(0,ae.hl)(),ce,"unsupported-persistence-type"):Nr(Y===ln.NONE||Ii(),ce,"unsupported-persistence-type")}(xe._delegate,W),W){case ln.SESSION:Qe=k.a;break;case ln.LOCAL:Qe=(yield k.ay(k.i)._isAvailable())?k.i:k.b;break;case ln.NONE:Qe=k.L;break;default:return k.at("argument-error",{appName:xe._delegate.name})}return xe._delegate.setPersistence(Qe)})()}signInAndRetrieveDataWithCredential(W){return this.signInWithCredential(W)}signInAnonymously(){return vn(this._delegate,k.X(this._delegate))}signInWithCredential(W){return vn(this._delegate,k.Y(this._delegate,W))}signInWithCustomToken(W){return vn(this._delegate,k.$(this._delegate,W))}signInWithEmailAndPassword(W,xe){return vn(this._delegate,k.a6(this._delegate,W,xe))}signInWithEmailLink(W,xe){return vn(this._delegate,k.a9(this._delegate,W,xe))}signInWithPhoneNumber(W,xe){return H(this._delegate,k.s(this._delegate,W,xe))}signInWithPopup(W){var xe=this;return(0,u.Z)(function*(){return G(qn(),xe._delegate,"operation-not-supported-in-this-environment"),vn(xe._delegate,k.c(xe._delegate,W,lt))})()}signInWithRedirect(W){var xe=this;return(0,u.Z)(function*(){return G(qn(),xe._delegate,"operation-not-supported-in-this-environment"),yield Mn(xe._delegate),k.f(xe._delegate,W,lt)})()}updateCurrentUser(W){return this._delegate.updateCurrentUser(W)}verifyPasswordResetCode(W){return k.a4(this._delegate,W)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ce.Persistence=ln,ce})();function Fe(ce,Y,W){let xe=ce;"function"!=typeof ce&&({next:xe,error:Y,complete:W}=ce);const Qe=xe;return{next:kt=>Qe(kt&&Ce.getOrCreate(kt)),error:Y,complete:W}}function it(ce,Y){const W=function Cs(ce,Y){const W=Gt();if(!W)return[];const xe=k.az(cr,ce,Y);switch(W.getItem(xe)){case ln.NONE:return[k.L];case ln.LOCAL:return[k.i,k.a];case ln.SESSION:return[k.a];default:return[]}}(ce,Y);if("undefined"!=typeof self&&!W.includes(k.i)&&W.push(k.i),"undefined"!=typeof window)for(const xe of[k.b,k.a])W.includes(xe)||W.push(xe);return W.includes(k.L)||W.push(k.L),W}class _t{constructor(){this.providerId="phone",this._delegate=new k.P(Si(j.Z.auth()))}static credential(Y,W){return k.P.credential(Y,W)}verifyPhoneNumber(Y,W){return this._delegate.verifyPhoneNumber(Y,W)}unwrap(){return this._delegate}}_t.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,_t.PROVIDER_ID=k.P.PROVIDER_ID;const Lt=k.ax;class pn{constructor(Y,W,xe=j.Z.app()){var Qe;Lt(null===(Qe=xe.options)||void 0===Qe?void 0:Qe.apiKey,"invalid-api-key",{appName:xe.name}),this._delegate=new k.R(Y,W,xe.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ir(ce){ce.INTERNAL.registerComponent(new fe.wA("auth-compat",Y=>{const W=Y.getProvider("app-compat").getImmediate(),xe=Y.getProvider("auth");return new ee(W,xe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.M,FacebookAuthProvider:k.N,GithubAuthProvider:k.T,GoogleAuthProvider:k.Q,OAuthProvider:k.U,SAMLAuthProvider:k.V,PhoneAuthProvider:_t,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:pn,TwitterAuthProvider:k.W,Auth:ee,AuthCredential:k.H,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ce.registerVersion("@firebase/auth-compat","0.2.15")}(j.Z)},8306:(ot,Te,F)=>{F.d(Te,{y:()=>Z});var u=F(930),j=F(727),k=F(8822),ae=F(4671);var fe=F(2416),ue=F(576),ve=F(2806);let Z=(()=>{class Ne{constructor(qe){qe&&(this._subscribe=qe)}lift(qe){const _e=new Ne;return _e.source=this,_e.operator=qe,_e}subscribe(qe,_e,Ae){const ze=function We(Ne){return Ne&&Ne instanceof u.Lv||function se(Ne){return Ne&&(0,ue.m)(Ne.next)&&(0,ue.m)(Ne.error)&&(0,ue.m)(Ne.complete)}(Ne)&&(0,j.Nn)(Ne)}(qe)?qe:new u.Hp(qe,_e,Ae);return(0,ve.x)(()=>{const{operator:Ze,source:ke}=this;ze.add(Ze?Ze.call(ze,ke):ke?this._subscribe(ze):this._trySubscribe(ze))}),ze}_trySubscribe(qe){try{return this._subscribe(qe)}catch(_e){qe.error(_e)}}forEach(qe,_e){return new(_e=$(_e))((Ae,ze)=>{const Ze=new u.Hp({next:ke=>{try{qe(ke)}catch(Re){ze(Re),Ze.unsubscribe()}},error:ze,complete:Ae});this.subscribe(Ze)})}_subscribe(qe){var _e;return null===(_e=this.source)||void 0===_e?void 0:_e.subscribe(qe)}[k.L](){return this}pipe(...qe){return function ye(Ne){return 0===Ne.length?ae.y:1===Ne.length?Ne[0]:function(qe){return Ne.reduce((_e,Ae)=>Ae(_e),qe)}}(qe)(this)}toPromise(qe){return new(qe=$(qe))((_e,Ae)=>{let ze;this.subscribe(Ze=>ze=Ze,Ze=>Ae(Ze),()=>_e(ze))})}}return Ne.create=Ue=>new Ne(Ue),Ne})();function $(Ne){var Ue;return null!==(Ue=null!=Ne?Ne:fe.v.Promise)&&void 0!==Ue?Ue:Promise}},7579:(ot,Te,F)=>{F.d(Te,{x:()=>fe});var u=F(8306),j=F(727);const ae=(0,F(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=F(8737),ye=F(2806);let fe=(()=>{class ve extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const se=new ue(this,this);return se.operator=$,se}_throwIfClosed(){if(this.closed)throw new ae}next($){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const se of this.currentObservers)se.next($)}})}error($){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:se}=this;for(;se.length;)se.shift().error($)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:se,isStopped:We,observers:Ne}=this;return se||We?j.Lc:(this.currentObservers=null,Ne.push($),new j.w0(()=>{this.currentObservers=null,(0,le.P)(Ne,$)}))}_checkFinalizedStatuses($){const{hasError:se,thrownError:We,isStopped:Ne}=this;se?$.error(We):Ne&&$.complete()}asObservable(){const $=new u.y;return $.source=this,$}}return ve.create=(Z,$)=>new ue(Z,$),ve})();class ue extends fe{constructor(Z,$){super(),this.destination=Z,this.source=$}next(Z){var $,se;null===(se=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===se||se.call($,Z)}error(Z){var $,se;null===(se=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===se||se.call($,Z)}complete(){var Z,$;null===($=null===(Z=this.destination)||void 0===Z?void 0:Z.complete)||void 0===$||$.call(Z)}_subscribe(Z){var $,se;return null!==(se=null===($=this.source)||void 0===$?void 0:$.subscribe(Z))&&void 0!==se?se:j.Lc}}},930:(ot,Te,F)=>{F.d(Te,{Hp:()=>qe,Lv:()=>se});var u=F(576),j=F(727),k=F(2416),ae=F(7849),le=F(5032);const ye=ve("C",void 0,void 0);function ve(ke,Re,Ie){return{kind:ke,value:Re,error:Ie}}var Z=F(3410),$=F(2806);class se extends j.w0{constructor(Re){super(),this.isStopped=!1,Re?(this.destination=Re,(0,j.Nn)(Re)&&Re.add(this)):this.destination=Ze}static create(Re,Ie,Ke){return new qe(Re,Ie,Ke)}next(Re){this.isStopped?ze(function ue(ke){return ve("N",ke,void 0)}(Re),this):this._next(Re)}error(Re){this.isStopped?ze(function fe(ke){return ve("E",void 0,ke)}(Re),this):(this.isStopped=!0,this._error(Re))}complete(){this.isStopped?ze(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Re){this.destination.next(Re)}_error(Re){try{this.destination.error(Re)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function Ne(ke,Re){return We.call(ke,Re)}class Ue{constructor(Re){this.partialObserver=Re}next(Re){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(Re)}catch(Ke){_e(Ke)}}error(Re){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(Re)}catch(Ke){_e(Ke)}else _e(Re)}complete(){const{partialObserver:Re}=this;if(Re.complete)try{Re.complete()}catch(Ie){_e(Ie)}}}class qe extends se{constructor(Re,Ie,Ke){let re;if(super(),(0,u.m)(Re)||!Re)re={next:null!=Re?Re:void 0,error:null!=Ie?Ie:void 0,complete:null!=Ke?Ke:void 0};else{let pe;this&&k.v.useDeprecatedNextContext?(pe=Object.create(Re),pe.unsubscribe=()=>this.unsubscribe(),re={next:Re.next&&Ne(Re.next,pe),error:Re.error&&Ne(Re.error,pe),complete:Re.complete&&Ne(Re.complete,pe)}):re=Re}this.destination=new Ue(re)}}function _e(ke){k.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(ke):(0,ae.h)(ke)}function ze(ke,Re){const{onStoppedNotification:Ie}=k.v;Ie&&Z.z.setTimeout(()=>Ie(ke,Re))}const Ze={closed:!0,next:le.Z,error:function Ae(ke){throw ke},complete:le.Z}},727:(ot,Te,F)=>{F.d(Te,{Lc:()=>ye,w0:()=>le,Nn:()=>fe});var u=F(576);const k=(0,F(3888).d)(ve=>function($){ve(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((se,We)=>`${We+1}) ${se.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var ae=F(8737);class le{constructor(Z){this.initialTeardown=Z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Z;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Ne of $)Ne.remove(this);else $.remove(this);const{initialTeardown:se}=this;if((0,u.m)(se))try{se()}catch(Ne){Z=Ne instanceof k?Ne.errors:[Ne]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const Ne of We)try{ue(Ne)}catch(Ue){Z=null!=Z?Z:[],Ue instanceof k?Z=[...Z,...Ue.errors]:Z.push(Ue)}}if(Z)throw new k(Z)}}add(Z){var $;if(Z&&Z!==this)if(this.closed)ue(Z);else{if(Z instanceof le){if(Z.closed||Z._hasParent(this))return;Z._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(Z)}}_hasParent(Z){const{_parentage:$}=this;return $===Z||Array.isArray($)&&$.includes(Z)}_addParent(Z){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(Z),$):$?[$,Z]:Z}_removeParent(Z){const{_parentage:$}=this;$===Z?this._parentage=null:Array.isArray($)&&(0,ae.P)($,Z)}remove(Z){const{_finalizers:$}=this;$&&(0,ae.P)($,Z),Z instanceof le&&Z._removeParent(this)}}le.EMPTY=(()=>{const ve=new le;return ve.closed=!0,ve})();const ye=le.EMPTY;function fe(ve){return ve instanceof le||ve&&"closed"in ve&&(0,u.m)(ve.remove)&&(0,u.m)(ve.add)&&(0,u.m)(ve.unsubscribe)}function ue(ve){(0,u.m)(ve)?ve():ve.unsubscribe()}},2416:(ot,Te,F)=>{F.d(Te,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ot,Te,F)=>{F.d(Te,{E:()=>j});const j=new(F(8306).y)(le=>le.complete())},8996:(ot,Te,F)=>{F.d(Te,{D:()=>Re});var u=F(8421),j=F(5363),k=F(9468),ye=F(8306),ue=F(2202),ve=F(576),Z=F(9672);function se(Ie,Ke){if(!Ie)throw new Error("Iterable cannot be null");return new ye.y(re=>{(0,Z.f)(re,Ke,()=>{const pe=Ie[Symbol.asyncIterator]();(0,Z.f)(re,Ke,()=>{pe.next().then(Se=>{Se.done?re.complete():re.next(Se.value)})},0,!0)})})}var We=F(3670),Ne=F(8239),Ue=F(1144),qe=F(6495),_e=F(2206),Ae=F(4532),ze=F(3260);function Re(Ie,Ke){return Ke?function ke(Ie,Ke){if(null!=Ie){if((0,We.c)(Ie))return function ae(Ie,Ke){return(0,u.Xf)(Ie).pipe((0,k.R)(Ke),(0,j.Q)(Ke))}(Ie,Ke);if((0,Ue.z)(Ie))return function fe(Ie,Ke){return new ye.y(re=>{let pe=0;return Ke.schedule(function(){pe===Ie.length?re.complete():(re.next(Ie[pe++]),re.closed||this.schedule())})})}(Ie,Ke);if((0,Ne.t)(Ie))return function le(Ie,Ke){return(0,u.Xf)(Ie).pipe((0,k.R)(Ke),(0,j.Q)(Ke))}(Ie,Ke);if((0,_e.D)(Ie))return se(Ie,Ke);if((0,qe.T)(Ie))return function $(Ie,Ke){return new ye.y(re=>{let pe;return(0,Z.f)(re,Ke,()=>{pe=Ie[ue.h](),(0,Z.f)(re,Ke,()=>{let Se,Q;try{({value:Se,done:Q}=pe.next())}catch(ie){return void re.error(ie)}Q?re.complete():re.next(Se)},0,!0)}),()=>(0,ve.m)(null==pe?void 0:pe.return)&&pe.return()})}(Ie,Ke);if((0,ze.L)(Ie))return function Ze(Ie,Ke){return se((0,ze.Q)(Ie),Ke)}(Ie,Ke)}throw(0,Ae.z)(Ie)}(Ie,Ke):(0,u.Xf)(Ie)}},8421:(ot,Te,F)=>{F.d(Te,{Xf:()=>We});var u=F(1230),j=F(1144),k=F(8239),ae=F(8306),le=F(3670),ye=F(2206),fe=F(4532),ue=F(6495),ve=F(3260),Z=F(576),$=F(7849),se=F(8822);function We(ke){if(ke instanceof ae.y)return ke;if(null!=ke){if((0,le.c)(ke))return function Ne(ke){return new ae.y(Re=>{const Ie=ke[se.L]();if((0,Z.m)(Ie.subscribe))return Ie.subscribe(Re);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ke);if((0,j.z)(ke))return function Ue(ke){return new ae.y(Re=>{for(let Ie=0;Ie<ke.length&&!Re.closed;Ie++)Re.next(ke[Ie]);Re.complete()})}(ke);if((0,k.t)(ke))return function qe(ke){return new ae.y(Re=>{ke.then(Ie=>{Re.closed||(Re.next(Ie),Re.complete())},Ie=>Re.error(Ie)).then(null,$.h)})}(ke);if((0,ye.D)(ke))return Ae(ke);if((0,ue.T)(ke))return function _e(ke){return new ae.y(Re=>{for(const Ie of ke)if(Re.next(Ie),Re.closed)return;Re.complete()})}(ke);if((0,ve.L)(ke))return function ze(ke){return Ae((0,ve.Q)(ke))}(ke)}throw(0,fe.z)(ke)}function Ae(ke){return new ae.y(Re=>{(function Ze(ke,Re){var Ie,Ke,re,pe;return(0,u.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,u.KL)(ke);!(Ke=yield Ie.next()).done;)if(Re.next(Ke.value),Re.closed)return}catch(Se){re={error:Se}}finally{try{Ke&&!Ke.done&&(pe=Ie.return)&&(yield pe.call(Ie))}finally{if(re)throw re.error}}Re.complete()})})(ke,Re).catch(Ie=>Re.error(Ie))})}},6451:(ot,Te,F)=>{F.d(Te,{T:()=>ye});var u=F(8189),j=F(8421),k=F(515),ae=F(7669),le=F(8996);function ye(...fe){const ue=(0,ae.yG)(fe),ve=(0,ae._6)(fe,1/0),Z=fe;return Z.length?1===Z.length?(0,j.Xf)(Z[0]):(0,u.J)(ve)((0,le.D)(Z,ue)):k.E}},5403:(ot,Te,F)=>{F.d(Te,{x:()=>j});var u=F(930);function j(ae,le,ye,fe,ue){return new k(ae,le,ye,fe,ue)}class k extends u.Lv{constructor(le,ye,fe,ue,ve,Z){super(le),this.onFinalize=ve,this.shouldUnsubscribe=Z,this._next=ye?function($){try{ye($)}catch(se){le.error(se)}}:super._next,this._error=ue?function($){try{ue($)}catch(se){le.error(se)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch($){le.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4004:(ot,Te,F)=>{F.d(Te,{U:()=>k});var u=F(4482),j=F(5403);function k(ae,le){return(0,u.e)((ye,fe)=>{let ue=0;ye.subscribe((0,j.x)(fe,ve=>{fe.next(ae.call(le,ve,ue++))}))})}},8189:(ot,Te,F)=>{F.d(Te,{J:()=>k});var u=F(5577),j=F(4671);function k(ae=1/0){return(0,u.z)(j.y,ae)}},5577:(ot,Te,F)=>{F.d(Te,{z:()=>ue});var u=F(4004),j=F(8421),k=F(4482),ae=F(9672),le=F(5403),fe=F(576);function ue(ve,Z,$=1/0){return(0,fe.m)(Z)?ue((se,We)=>(0,u.U)((Ne,Ue)=>Z(se,Ne,We,Ue))((0,j.Xf)(ve(se,We))),$):("number"==typeof Z&&($=Z),(0,k.e)((se,We)=>function ye(ve,Z,$,se,We,Ne,Ue,qe){const _e=[];let Ae=0,ze=0,Ze=!1;const ke=()=>{Ze&&!_e.length&&!Ae&&Z.complete()},Re=Ke=>Ae<se?Ie(Ke):_e.push(Ke),Ie=Ke=>{Ne&&Z.next(Ke),Ae++;let re=!1;(0,j.Xf)($(Ke,ze++)).subscribe((0,le.x)(Z,pe=>{null==We||We(pe),Ne?Re(pe):Z.next(pe)},()=>{re=!0},void 0,()=>{if(re)try{for(Ae--;_e.length&&Ae<se;){const pe=_e.shift();Ue?(0,ae.f)(Z,Ue,()=>Ie(pe)):Ie(pe)}ke()}catch(pe){Z.error(pe)}}))};return ve.subscribe((0,le.x)(Z,Re,()=>{Ze=!0,ke()})),()=>{null==qe||qe()}}(se,We,ve,$)))}},5363:(ot,Te,F)=>{F.d(Te,{Q:()=>ae});var u=F(9672),j=F(4482),k=F(5403);function ae(le,ye=0){return(0,j.e)((fe,ue)=>{fe.subscribe((0,k.x)(ue,ve=>(0,u.f)(ue,le,()=>ue.next(ve),ye),()=>(0,u.f)(ue,le,()=>ue.complete(),ye),ve=>(0,u.f)(ue,le,()=>ue.error(ve),ye)))})}},3099:(ot,Te,F)=>{F.d(Te,{B:()=>ye});var u=F(8996),j=F(5698),k=F(7579),ae=F(930),le=F(4482);function ye(ue={}){const{connector:ve=(()=>new k.x),resetOnError:Z=!0,resetOnComplete:$=!0,resetOnRefCountZero:se=!0}=ue;return We=>{let Ne=null,Ue=null,qe=null,_e=0,Ae=!1,ze=!1;const Ze=()=>{null==Ue||Ue.unsubscribe(),Ue=null},ke=()=>{Ze(),Ne=qe=null,Ae=ze=!1},Re=()=>{const Ie=Ne;ke(),null==Ie||Ie.unsubscribe()};return(0,le.e)((Ie,Ke)=>{_e++,!ze&&!Ae&&Ze();const re=qe=null!=qe?qe:ve();Ke.add(()=>{_e--,0===_e&&!ze&&!Ae&&(Ue=fe(Re,se))}),re.subscribe(Ke),Ne||(Ne=new ae.Hp({next:pe=>re.next(pe),error:pe=>{ze=!0,Ze(),Ue=fe(ke,Z,pe),re.error(pe)},complete:()=>{Ae=!0,Ze(),Ue=fe(ke,$),re.complete()}}),(0,u.D)(Ie).subscribe(Ne))})(We)}}function fe(ue,ve,...Z){return!0===ve?(ue(),null):!1===ve?null:ve(...Z).pipe((0,j.q)(1)).subscribe(()=>ue())}},9468:(ot,Te,F)=>{F.d(Te,{R:()=>j});var u=F(4482);function j(k,ae=0){return(0,u.e)((le,ye)=>{ye.add(k.schedule(()=>le.subscribe(ye),ae))})}},5698:(ot,Te,F)=>{F.d(Te,{q:()=>ae});var u=F(515),j=F(4482),k=F(5403);function ae(le){return le<=0?()=>u.E:(0,j.e)((ye,fe)=>{let ue=0;ye.subscribe((0,k.x)(fe,ve=>{++ue<=le&&(fe.next(ve),le<=ue&&fe.complete())}))})}},8505:(ot,Te,F)=>{F.d(Te,{b:()=>le});var u=F(576),j=F(4482),k=F(5403),ae=F(4671);function le(ye,fe,ue){const ve=(0,u.m)(ye)||fe||ue?{next:ye,error:fe,complete:ue}:ye;return ve?(0,j.e)((Z,$)=>{var se;null===(se=ve.subscribe)||void 0===se||se.call(ve);let We=!0;Z.subscribe((0,k.x)($,Ne=>{var Ue;null===(Ue=ve.next)||void 0===Ue||Ue.call(ve,Ne),$.next(Ne)},()=>{var Ne;We=!1,null===(Ne=ve.complete)||void 0===Ne||Ne.call(ve),$.complete()},Ne=>{var Ue;We=!1,null===(Ue=ve.error)||void 0===Ue||Ue.call(ve,Ne),$.error(Ne)},()=>{var Ne,Ue;We&&(null===(Ne=ve.unsubscribe)||void 0===Ne||Ne.call(ve)),null===(Ue=ve.finalize)||void 0===Ue||Ue.call(ve)}))}):ae.y}},4408:(ot,Te,F)=>{F.d(Te,{o:()=>le});var u=F(727);class j extends u.w0{constructor(fe,ue){super()}schedule(fe,ue=0){return this}}const k={setInterval(ye,fe,...ue){const{delegate:ve}=k;return(null==ve?void 0:ve.setInterval)?ve.setInterval(ye,fe,...ue):setInterval(ye,fe,...ue)},clearInterval(ye){const{delegate:fe}=k;return((null==fe?void 0:fe.clearInterval)||clearInterval)(ye)},delegate:void 0};var ae=F(8737);class le extends j{constructor(fe,ue){super(fe,ue),this.scheduler=fe,this.work=ue,this.pending=!1}schedule(fe,ue=0){if(this.closed)return this;this.state=fe;const ve=this.id,Z=this.scheduler;return null!=ve&&(this.id=this.recycleAsyncId(Z,ve,ue)),this.pending=!0,this.delay=ue,this.id=this.id||this.requestAsyncId(Z,this.id,ue),this}requestAsyncId(fe,ue,ve=0){return k.setInterval(fe.flush.bind(fe,this),ve)}recycleAsyncId(fe,ue,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return ue;k.clearInterval(ue)}execute(fe,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(fe,ue);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,ue){let Z,ve=!1;try{this.work(fe)}catch($){ve=!0,Z=$||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),Z}unsubscribe(){if(!this.closed){const{id:fe,scheduler:ue}=this,{actions:ve}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ve,this),null!=fe&&(this.id=this.recycleAsyncId(ue,fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(ot,Te,F)=>{F.d(Te,{v:()=>k});var u=F(6063);class j{constructor(le,ye=j.now){this.schedulerActionCtor=le,this.now=ye}schedule(le,ye=0,fe){return new this.schedulerActionCtor(this,le).schedule(fe,ye)}}j.now=u.l.now;class k extends j{constructor(le,ye=j.now){super(le,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(le){const{actions:ye}=this;if(this._active)return void ye.push(le);let fe;this._active=!0;do{if(fe=le.execute(le.state,le.delay))break}while(le=ye.shift());if(this._active=!1,fe){for(;le=ye.shift();)le.unsubscribe();throw fe}}}},4986:(ot,Te,F)=>{F.d(Te,{z:()=>k});var u=F(4408);const k=new(F(7565).v)(u.o)},6063:(ot,Te,F)=>{F.d(Te,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(ot,Te,F)=>{F.d(Te,{z:()=>u});const u={setTimeout(j,k,...ae){const{delegate:le}=u;return(null==le?void 0:le.setTimeout)?le.setTimeout(j,k,...ae):setTimeout(j,k,...ae)},clearTimeout(j){const{delegate:k}=u;return((null==k?void 0:k.clearTimeout)||clearTimeout)(j)},delegate:void 0}},2202:(ot,Te,F)=>{F.d(Te,{h:()=>j});const j=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ot,Te,F)=>{F.d(Te,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ot,Te,F)=>{F.d(Te,{_6:()=>ye,jO:()=>ae,yG:()=>le});var u=F(576);function k(fe){return fe[fe.length-1]}function ae(fe){return(0,u.m)(k(fe))?fe.pop():void 0}function le(fe){return function j(fe){return fe&&(0,u.m)(fe.schedule)}(k(fe))?fe.pop():void 0}function ye(fe,ue){return"number"==typeof k(fe)?fe.pop():ue}},8737:(ot,Te,F)=>{function u(j,k){if(j){const ae=j.indexOf(k);0<=ae&&j.splice(ae,1)}}F.d(Te,{P:()=>u})},3888:(ot,Te,F)=>{function u(j){const ae=j(le=>{Error.call(le),le.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}F.d(Te,{d:()=>u})},2806:(ot,Te,F)=>{F.d(Te,{O:()=>ae,x:()=>k});var u=F(2416);let j=null;function k(le){if(u.v.useDeprecatedSynchronousErrorHandling){const ye=!j;if(ye&&(j={errorThrown:!1,error:null}),le(),ye){const{errorThrown:fe,error:ue}=j;if(j=null,fe)throw ue}}else le()}function ae(le){u.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=le)}},9672:(ot,Te,F)=>{function u(j,k,ae,le=0,ye=!1){const fe=k.schedule(function(){ae(),ye?j.add(this.schedule(null,le)):this.unsubscribe()},le);if(j.add(fe),!ye)return fe}F.d(Te,{f:()=>u})},4671:(ot,Te,F)=>{function u(j){return j}F.d(Te,{y:()=>u})},1144:(ot,Te,F)=>{F.d(Te,{z:()=>u});const u=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(ot,Te,F)=>{F.d(Te,{D:()=>j});var u=F(576);function j(k){return Symbol.asyncIterator&&(0,u.m)(null==k?void 0:k[Symbol.asyncIterator])}},576:(ot,Te,F)=>{function u(j){return"function"==typeof j}F.d(Te,{m:()=>u})},3670:(ot,Te,F)=>{F.d(Te,{c:()=>k});var u=F(8822),j=F(576);function k(ae){return(0,j.m)(ae[u.L])}},6495:(ot,Te,F)=>{F.d(Te,{T:()=>k});var u=F(2202),j=F(576);function k(ae){return(0,j.m)(null==ae?void 0:ae[u.h])}},8239:(ot,Te,F)=>{F.d(Te,{t:()=>j});var u=F(576);function j(k){return(0,u.m)(null==k?void 0:k.then)}},3260:(ot,Te,F)=>{F.d(Te,{L:()=>ae,Q:()=>k});var u=F(1230),j=F(576);function k(le){return(0,u.FC)(this,arguments,function*(){const fe=le.getReader();try{for(;;){const{value:ue,done:ve}=yield(0,u.qq)(fe.read());if(ve)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(ue)}}finally{fe.releaseLock()}})}function ae(le){return(0,j.m)(null==le?void 0:le.getReader)}},4482:(ot,Te,F)=>{F.d(Te,{A:()=>j,e:()=>k});var u=F(576);function j(ae){return(0,u.m)(null==ae?void 0:ae.lift)}function k(ae){return le=>{if(j(le))return le.lift(function(ye){try{return ae(ye,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ot,Te,F)=>{function u(){}F.d(Te,{Z:()=>u})},7849:(ot,Te,F)=>{F.d(Te,{h:()=>k});var u=F(2416),j=F(3410);function k(ae){j.z.setTimeout(()=>{const{onUnhandledError:le}=u.v;if(!le)throw ae;le(ae)})}},4532:(ot,Te,F)=>{function u(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Te,{z:()=>u})},1230:(ot,Te,F)=>{function ae(Q,ie){var oe={};for(var Ee in Q)Object.prototype.hasOwnProperty.call(Q,Ee)&&ie.indexOf(Ee)<0&&(oe[Ee]=Q[Ee]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var he=0;for(Ee=Object.getOwnPropertySymbols(Q);he<Ee.length;he++)ie.indexOf(Ee[he])<0&&Object.prototype.propertyIsEnumerable.call(Q,Ee[he])&&(oe[Ee[he]]=Q[Ee[he]])}return oe}function ue(Q,ie,oe,Ee){return new(oe||(oe=Promise))(function(Ve,mt){function tn(_n){try{et(Ee.next(_n))}catch($n){mt($n)}}function jt(_n){try{et(Ee.throw(_n))}catch($n){mt($n)}}function et(_n){_n.done?Ve(_n.value):function he(Ve){return Ve instanceof oe?Ve:new oe(function(mt){mt(Ve)})}(_n.value).then(tn,jt)}et((Ee=Ee.apply(Q,ie||[])).next())})}function _e(Q){return this instanceof _e?(this.v=Q,this):new _e(Q)}function Ae(Q,ie,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var he,Ee=oe.apply(Q,ie||[]),Ve=[];return he={},mt("next"),mt("throw"),mt("return"),he[Symbol.asyncIterator]=function(){return this},he;function mt(yn){Ee[yn]&&(he[yn]=function(an){return new Promise(function(Ht,nn){Ve.push([yn,an,Ht,nn])>1||tn(yn,an)})})}function tn(yn,an){try{!function jt(yn){yn.value instanceof _e?Promise.resolve(yn.value.v).then(et,_n):$n(Ve[0][2],yn)}(Ee[yn](an))}catch(Ht){$n(Ve[0][3],Ht)}}function et(yn){tn("next",yn)}function _n(yn){tn("throw",yn)}function $n(yn,an){yn(an),Ve.shift(),Ve.length&&tn(Ve[0][0],Ve[0][1])}}function Ze(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,ie=Q[Symbol.asyncIterator];return ie?ie.call(Q):(Q=function se(Q){var ie="function"==typeof Symbol&&Symbol.iterator,oe=ie&&Q[ie],Ee=0;if(oe)return oe.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&Ee>=Q.length&&(Q=void 0),{value:Q&&Q[Ee++],done:!Q}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),oe={},Ee("next"),Ee("throw"),Ee("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function Ee(Ve){oe[Ve]=Q[Ve]&&function(mt){return new Promise(function(tn,jt){!function he(Ve,mt,tn,jt){Promise.resolve(jt).then(function(et){Ve({value:et,done:tn})},mt)}(tn,jt,(mt=Q[Ve](mt)).done,mt.value)})}}}F.d(Te,{FC:()=>Ae,KL:()=>Ze,_T:()=>ae,mG:()=>ue,qq:()=>_e})},5e3:(ot,Te,F)=>{F.d(Te,{$8M:()=>Bo,$Z:()=>nC,AFp:()=>ra,ALo:()=>Z0,AaK:()=>ue,CHM:()=>hl,CRH:()=>sg,CZH:()=>dd,CqO:()=>rC,DdM:()=>tg,EJc:()=>KA,EpF:()=>l_,F4k:()=>a0,FYo:()=>ef,FiY:()=>Ei,G48:()=>pd,G7q:()=>z0,GfV:()=>H0,Gpc:()=>$,JOm:()=>yo,Jf7:()=>wm,LFG:()=>Ye,LSH:()=>mm,Lbi:()=>DT,MAs:()=>Jm,MGl:()=>Fh,NdJ:()=>c_,OlP:()=>Hn,Oqu:()=>y_,PXZ:()=>ux,Q6J:()=>oi,QGY:()=>u_,Qsj:()=>EA,R0b:()=>ia,RDi:()=>tc,Rgc:()=>rg,SBq:()=>Xo,Sil:()=>AT,Suo:()=>nw,TTD:()=>il,TgZ:()=>Du,VKq:()=>R_,VLi:()=>ox,W1O:()=>iw,X6Q:()=>mx,XFs:()=>wt,Xpm:()=>_t,Y36:()=>kp,YKP:()=>eg,YNc:()=>Nh,Yjl:()=>Qe,Yz7:()=>an,ZZ4:()=>Cw,_Bn:()=>Xh,_UZ:()=>s0,_Vd:()=>k_,_c5:()=>ny,_uU:()=>E0,aQg:()=>Ef,c2e:()=>WA,cJS:()=>nn,cg1:()=>S_,dDg:()=>fw,deG:()=>Qd,dqk:()=>Zt,dwT:()=>DC,eFA:()=>PT,ekj:()=>p_,g9A:()=>cw,h0i:()=>rd,hGG:()=>Tw,hij:()=>v_,iGM:()=>tw,ifc:()=>Gt,ip1:()=>uw,kL8:()=>D_,lG2:()=>xe,n5z:()=>Vo,oAB:()=>ce,oxw:()=>d_,q4F:()=>tt,qLn:()=>Zr,qOj:()=>qb,qZA:()=>s_,s9C:()=>Oh,sBO:()=>di,sIi:()=>Mh,s_b:()=>Ul,soG:()=>hg,tBr:()=>Ri,tb:()=>dw,tp0:()=>ti,uIk:()=>xp,vHH:()=>Ue,vpe:()=>$a,wAp:()=>It,xi3:()=>rf,xp6:()=>mv,z2F:()=>me,zSh:()=>Rv,zs3:()=>Fa});var u=F(7579),j=F(727),k=F(8306),ae=F(6451),le=F(3099);function ye(s){for(let a in s)if(s[a]===ye)return a;throw Error("Could not find renamed property on target object.")}function fe(s,a){for(const l in a)a.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=a[l])}function ue(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ue).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function ve(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const Z=ye({__forward_ref__:ye});function $(s){return s.__forward_ref__=$,s.toString=function(){return ue(this())},s}function se(s){return We(s)?s():s}function We(s){return"function"==typeof s&&s.hasOwnProperty(Z)&&s.__forward_ref__===$}class Ue extends Error{constructor(a,l){super(function qe(s,a){return`NG0${Math.abs(s)}${a?": "+a:""}`}(a,l)),this.code=a}}function _e(s){return"string"==typeof s?s:null==s?"":String(s)}function Ae(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():_e(s)}function Re(s,a){const l=a?` in ${a}`:"";throw new Ue(-201,`No provider for ${Ae(s)} found${l}`)}function jt(s,a){null==s&&function et(s,a,l,d){throw new Error(`ASSERTION ERROR: ${s}`+(null==d?"":` [Expected=> ${l} ${d} ${a} <=Actual]`))}(a,s,null,"!=")}function an(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function nn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Nn(s){return qi(s,Ii)||qi(s,qn)}function qi(s,a){return s.hasOwnProperty(a)?s[a]:null}function rs(s){return s&&(s.hasOwnProperty(Gi)||s.hasOwnProperty(is))?s[Gi]:null}const Ii=ye({\u0275prov:ye}),Gi=ye({\u0275inj:ye}),qn=ye({ngInjectableDef:ye}),is=ye({ngInjectorDef:ye});var wt=(()=>((wt=wt||{})[wt.Default=0]="Default",wt[wt.Host=1]="Host",wt[wt.Self=2]="Self",wt[wt.SkipSelf=4]="SkipSelf",wt[wt.Optional=8]="Optional",wt))();let Yr;function ln(s){const a=Yr;return Yr=s,a}function Nr(s,a,l){const d=Nn(s);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&wt.Optional?null:void 0!==a?a:void Re(ue(s),"Injector")}function Qr(s){return{toString:s}.toString()}var Mn=(()=>((Mn=Mn||{})[Mn.OnPush=0]="OnPush",Mn[Mn.Default=1]="Default",Mn))(),Gt=(()=>{return(s=Gt||(Gt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Gt;var s})();const pt="undefined"!=typeof globalThis&&globalThis,lt="undefined"!=typeof window&&window,Si="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Zt=pt||"undefined"!=typeof global&&global||lt||Si,vn={},H=[],z=ye({\u0275cmp:ye}),K=ye({\u0275dir:ye}),Ce=ye({\u0275pipe:ye}),G=ye({\u0275mod:ye}),ee=ye({\u0275fac:ye}),Fe=ye({__NG_ELEMENT_ID__:ye});let it=0;function _t(s){return Qr(()=>{const l={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Mn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||H,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Gt.Emulated,id:"c",styles:s.styles||H,_:null,setInput:null,schemas:s.schemas||null,tView:null},f=s.directives,g=s.features,v=s.pipes;return d.id+=it++,d.inputs=W(s.inputs,l),d.outputs=W(s.outputs),g&&g.forEach(E=>E(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(pn):null,d.pipeDefs=v?()=>("function"==typeof v?v():v).map(St):null,d})}function pn(s){return ft(s)||function kt(s){return s[K]||null}(s)}function St(s){return function Yt(s){return s[Ce]||null}(s)}const ir={};function ce(s){return Qr(()=>{const a={type:s.type,bootstrap:s.bootstrap||H,declarations:s.declarations||H,imports:s.imports||H,exports:s.exports||H,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(ir[s.id]=s.type),a})}function W(s,a){if(null==s)return vn;const l={};for(const d in s)if(s.hasOwnProperty(d)){let f=s[d],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),l[f]=d,a&&(a[f]=g)}return l}const xe=_t;function Qe(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function ft(s){return s[z]||null}function $t(s,a){const l=s[G]||null;if(!l&&!0===a)throw new Error(`Type ${ue(s)} does not have '\u0275mod' property.`);return l}function Zi(s){return Array.isArray(s)&&"object"==typeof s[1]}function Ai(s){return Array.isArray(s)&&!0===s[1]}function Md(s){return 0!=(8&s.flags)}function zl(s){return 2==(2&s.flags)}function ro(s){return 1==(1&s.flags)}function xi(s){return null!==s.template}function Gf(s){return 0!=(512&s[2])}function Mi(s,a){return s.hasOwnProperty(ee)?s[ee]:null}class Mo{constructor(a,l,d){this.previousValue=a,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function il(){return sl}function sl(s){return s.type.prototype.ngOnChanges&&(s.setInput=Xg),zf}function zf(){const s=Fd(this),a=null==s?void 0:s.current;if(a){const l=s.previous;if(l===vn)s.previous=a;else for(let d in a)l[d]=a[d];s.current=null,this.ngOnChanges(a)}}function Xg(s,a,l,d){const f=Fd(s)||function xs(s,a){return s[Po]=a}(s,{previous:vn,current:null}),g=f.current||(f.current={}),v=f.previous,E=this.declaredInputs[l],C=v[E];g[E]=new Mo(C&&C.currentValue,a,v===vn),s[d]=a}il.ngInherit=!0;const Po="__ngSimpleChanges__";function Fd(s){return s[Po]||null}let Ql;function tc(s){Ql=s}function Cn(s){return!!s.listen}const ol={createRenderer:(s,a)=>function Ms(){return void 0!==Ql?Ql:"undefined"!=typeof document?document:void 0}()};function En(s){for(;Array.isArray(s);)s=s[0];return s}function No(s,a){return En(a[s])}function wr(s,a){return En(a[s.index])}function zn(s,a){return s.data[a]}function Ps(s,a){return s[a]}function Er(s,a){const l=a[s];return Zi(l)?l:l[0]}function _a(s){return 4==(4&s[2])}function as(s){return 128==(128&s[2])}function gi(s,a){return null==a?null:s[a]}function so(s){s[18]=0}function oo(s,a){s[5]+=a;let l=s,d=s[3];for(;null!==d&&(1===a&&1===l[5]||-1===a&&0===l[5]);)d[5]+=a,l=d,d=d[3]}const bt={lFrame:Oo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function ic(){return bt.bindingsEnabled}function Me(){return bt.lFrame.lView}function zt(){return bt.lFrame.tView}function hl(s){return bt.lFrame.contextLView=s,s[8]}function jn(){let s=ao();for(;null!==s&&64===s.type;)s=s.parent;return s}function ao(){return bt.lFrame.currentTNode}function Xr(s,a){const l=bt.lFrame;l.currentTNode=s,l.isParent=a}function sc(){return bt.lFrame.isParent}function pl(){return bt.isInCheckNoChangesMode}function ya(s){bt.isInCheckNoChangesMode=s}function fr(){const s=bt.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function ls(){return bt.lFrame.bindingIndex++}function ml(s,a){const l=bt.lFrame;l.bindingIndex=l.bindingRootIndex=s,ko(a)}function ko(s){bt.lFrame.currentDirectiveIndex=s}function _l(){return bt.lFrame.currentQueryIndex}function lc(s){bt.lFrame.currentQueryIndex=s}function em(s){const a=s[1];return 2===a.type?a.declTNode:1===a.type?s[6]:null}function eu(s,a,l){if(l&wt.SkipSelf){let f=a,g=s;for(;!(f=f.parent,null!==f||l&wt.Host||(f=em(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;a=f,s=g}const d=bt.lFrame=uc();return d.currentTNode=a,d.lView=s,!0}function Ro(s){const a=uc(),l=s[1];bt.lFrame=a,a.currentTNode=l.firstChild,a.lView=s,a.tView=l,a.contextLView=s,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function uc(){const s=bt.lFrame,a=null===s?null:s.child;return null===a?Oo(s):a}function Oo(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function Gd(){const s=bt.lFrame;return bt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Kf=Gd;function wa(){const s=Gd();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function br(){return bt.lFrame.selectedIndex}function ks(s){bt.lFrame.selectedIndex=s}function Wn(){const s=bt.lFrame;return zn(s.tView,s.selectedIndex)}function yl(s,a){for(let l=a.directiveStart,d=a.directiveEnd;l<d;l++){const g=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:P}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-l,v),E&&((s.contentHooks||(s.contentHooks=[])).push(l,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,E)),C&&(s.viewHooks||(s.viewHooks=[])).push(-l,C),A&&((s.viewHooks||(s.viewHooks=[])).push(l,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,A)),null!=P&&(s.destroyHooks||(s.destroyHooks=[])).push(l,P)}}function Rs(s,a,l){Cr(s,a,3,l)}function vl(s,a,l,d){(3&s[2])===l&&Cr(s,a,l,d)}function tu(s,a){let l=s[2];(3&l)===a&&(l&=2047,l+=1,s[2]=l)}function Cr(s,a,l,d){const g=null!=d?d:-1,v=a.length-1;let E=0;for(let C=void 0!==d?65535&s[18]:0;C<v;C++)if("number"==typeof a[C+1]){if(E=a[C],null!=d&&E>=d)break}else a[C]<0&&(s[18]+=65536),(E<g||-1==g)&&(Jf(s,l,a,C),s[18]=(4294901760&s[18])+C+2),C++}function Jf(s,a,l,d){const f=l[d]<0,g=l[d+1],E=s[f?-l[d]:l[d]];if(f){if(s[2]>>11<s[18]>>16&&(3&s[2])===a){s[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class Ea{constructor(a,l,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function Tr(s,a,l){const d=Cn(s);let f=0;for(;f<l.length;){const g=l[f];if("number"==typeof g){if(0!==g)break;f++;const v=l[f++],E=l[f++],C=l[f++];d?s.setAttribute(a,E,C,v):a.setAttributeNS(v,E,C)}else{const v=g,E=l[++f];El(v)?d&&s.setProperty(a,v,E):d?s.setAttribute(a,v,E):a.setAttribute(v,E),f++}}return f}function ep(s){return 3===s||4===s||6===s}function El(s){return 64===s.charCodeAt(0)}function nu(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let l=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?l=f:0===l||ru(s,l,f,null,-1===l||2===l?a[++d]:null)}}return s}function ru(s,a,l,d,f){let g=0,v=s.length;if(-1===a)v=-1;else for(;g<s.length;){const E=s[g++];if("number"==typeof E){if(E===a){v=-1;break}if(E>a){v=g-1;break}}}for(;g<s.length;){const E=s[g];if("number"==typeof E)break;if(E===l){if(null===d)return void(null!==f&&(s[g+1]=f));if(d===s[g+1])return void(s[g+2]=f)}g++,null!==d&&g++,null!==f&&g++}-1!==v&&(s.splice(v,0,a),g=v+1),s.splice(g++,0,l),null!==d&&s.splice(g++,0,d),null!==f&&s.splice(g++,0,f)}function ba(s){return-1!==s}function ds(s){return 32767&s}function On(s,a){let l=function Tn(s){return s>>16}(s),d=a;for(;l>0;)d=d[15],l--;return d}let yt=!0;function bl(s){const a=yt;return yt=s,a}let Kd=0;function kr(s,a){const l=Os(s,a);if(-1!==l)return l;const d=a[1];d.firstCreatePass&&(s.injectorIndex=a.length,mi(d.data,s),mi(a,null),mi(d.blueprint,null));const f=lo(s,a),g=s.injectorIndex;if(ba(f)){const v=ds(f),E=On(f,a),C=E[1].data;for(let A=0;A<8;A++)a[g+A]=E[v+A]|C[v+A]}return a[g+8]=f,g}function mi(s,a){s.push(0,0,0,0,0,0,0,0,a)}function Os(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function lo(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,d=null,f=a;for(;null!==f;){const g=f[1],v=g.type;if(d=2===v?g.declTNode:1===v?f[6]:null,null===d)return-1;if(l++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function Pi(s,a,l){!function Yd(s,a,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(Fe)&&(d=l[Fe]),null==d&&(d=l[Fe]=Kd++);const f=255&d;a.data[s+(f>>5)]|=1<<f}(s,a,l)}function ou(s,a,l){if(l&wt.Optional)return s;Re(a,"NodeInjector")}function _i(s,a,l,d){if(l&wt.Optional&&void 0===d&&(d=null),0==(l&(wt.Self|wt.Host))){const f=s[9],g=ln(void 0);try{return f?f.get(a,d,l&wt.Optional):Nr(a,d,l&wt.Optional)}finally{ln(g)}}return ou(d,a,l)}function hs(s,a,l,d=wt.Default,f){if(null!==s){const g=function fc(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(Fe)?s[Fe]:void 0;return"number"==typeof a?a>=0?255&a:Kn:a}(l);if("function"==typeof g){if(!eu(a,s,d))return d&wt.Host?ou(f,l,d):_i(a,l,d,f);try{const v=g(d);if(null!=v||d&wt.Optional)return v;Re(l)}finally{Kf()}}else if("number"==typeof g){let v=null,E=Os(s,a),C=-1,A=d&wt.Host?a[16][6]:null;for((-1===E||d&wt.SkipSelf)&&(C=-1===E?lo(s,a):a[E+8],-1!==C&&Cl(d,!1)?(v=a[1],E=ds(C),a=On(C,a)):E=-1);-1!==E;){const P=a[1];if(pc(g,E,P.data)){const U=fs(E,a,l,v,d,A);if(U!==Ca)return U}C=a[E+8],-1!==C&&Cl(d,a[1].data[E+8]===A)&&pc(g,E,a)?(v=P,E=ds(C),a=On(C,a)):E=-1}}}return _i(a,l,d,f)}const Ca={};function Kn(){return new Uo(jn(),Me())}function fs(s,a,l,d,f,g){const v=a[1],E=v.data[s+8],P=hc(E,v,l,null==d?zl(E)&&yt:d!=v&&0!=(3&E.type),f&wt.Host&&g===E);return null!==P?or(a,v,P,E):Ca}function hc(s,a,l,d,f){const g=s.providerIndexes,v=a.data,E=1048575&g,C=s.directiveStart,P=g>>20,q=f?E+P:s.directiveEnd;for(let te=d?E:E+P;te<q;te++){const De=v[te];if(te<C&&l===De||te>=C&&De.type===l)return te}if(f){const te=v[C];if(te&&xi(te)&&te.type===l)return C}return null}function or(s,a,l,d){let f=s[l];const g=a.data;if(function zd(s){return s instanceof Ea}(f)){const v=f;v.resolving&&function ze(s,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new Ue(-200,`Circular dependency in DI detected for ${s}${l}`)}(Ae(g[l]));const E=bl(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?ln(v.injectImpl):null;eu(s,d,wt.Default);try{f=s[l]=v.factory(void 0,g,s,d),a.firstCreatePass&&l>=d.directiveStart&&function tm(s,a,l){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(d){const v=sl(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,v)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,f),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,g))}(l,g[l],a)}finally{null!==C&&ln(C),bl(E),v.resolving=!1,Kf()}}return f}function pc(s,a,l){return!!(l[a+(s>>5)]&1<<s)}function Cl(s,a){return!(s&wt.Self||s&wt.Host&&a)}class Uo{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,d){return hs(this._tNode,this._lView,a,d,l)}}function Vo(s){return Qr(()=>{const a=s.prototype.constructor,l=a[ee]||au(a),d=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==d;){const g=f[ee]||au(f);if(g&&g!==l)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function au(s){return We(s)?()=>{const a=au(se(s));return a&&a()}:Mi(s)}function Bo(s){return function su(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const l=s.attrs;if(l){const d=l.length;let f=0;for(;f<d;){const g=l[f];if(ep(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<d&&"string"==typeof l[f];)f++;else{if(g===a)return l[f+1];f+=2}}}return null}(jn(),s)}const Ki="__parameters__";function Ho(s,a,l){return Qr(()=>{const d=function gc(s){return function(...l){if(s){const d=s(...l);for(const f in d)this[f]=d[f]}}}(a);function f(...g){if(this instanceof f)return d.apply(this,g),this;const v=new f(...g);return E.annotation=v,E;function E(C,A,P){const U=C.hasOwnProperty(Ki)?C[Ki]:Object.defineProperty(C,Ki,{value:[]})[Ki];for(;U.length<=P;)U.push(null);return(U[P]=U[P]||[]).push(v),C}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}class Hn{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=an({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Qd=new Hn("AnalyzeForEntryComponents");function yi(s,a){void 0===a&&(a=s);for(let l=0;l<s.length;l++){let d=s[l];Array.isArray(d)?(a===s&&(a=s.slice(0,l)),yi(d,a)):a!==s&&a.push(d)}return a}function vi(s,a){s.forEach(l=>Array.isArray(l)?vi(l,a):a(l))}function fo(s,a,l){a>=s.length?s.push(l):s.splice(a,0,l)}function $o(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function wi(s,a,l){let d=lu(s,a);return d>=0?s[1|d]=l:(d=~d,function Go(s,a,l,d){let f=s.length;if(f==a)s.push(l,d);else if(1===f)s.push(d,s[0]),s[0]=l;else{for(f--,s.push(s[f-1],s[f]);f>a;)s[f]=s[f-2],f--;s[a]=l,s[a+1]=d}}(s,d,a,l)),d}function nh(s,a){const l=lu(s,a);if(l>=0)return s[1|l]}function lu(s,a){return function uu(s,a,l){let d=0,f=s.length>>l;for(;f!==d;){const g=d+(f-d>>1),v=s[g<<l];if(a===v)return g<<l;v>a?f=g:d=g+1}return~(f<<l)}(s,a,1)}const ps={},po="__NG_DI_FLAG__",Da="ngTempTokenPath",I=/\n/gm,N="__source",B=ye({provide:String,useValue:ye});let X;function de(s){const a=X;return X=s,a}function Be(s,a=wt.Default){if(void 0===X)throw new Ue(203,"");return null===X?Nr(s,void 0,a):X.get(s,a&wt.Optional?null:void 0,a)}function Ye(s,a=wt.Default){return(function xn(){return Yr}()||Be)(se(s),a)}const Mt=Ye;function Xt(s){const a=[];for(let l=0;l<s.length;l++){const d=se(s[l]);if(Array.isArray(d)){if(0===d.length)throw new Ue(900,"");let f,g=wt.Default;for(let v=0;v<d.length;v++){const E=d[v],C=ei(E);"number"==typeof C?-1===C?f=E.token:g|=C:f=E}a.push(Ye(f,g))}else a.push(Ye(d))}return a}function Tt(s,a){return s[po]=a,s.prototype[po]=a,s}function ei(s){return s[po]}const Ri=Tt(Ho("Inject",s=>({token:s})),-1),Ei=Tt(Ho("Optional"),8),ti=Tt(Ho("SkipSelf"),4);class pu{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ls(s){return s instanceof pu?s.changingThisBreaksApplicationSecurity:s}const Ky=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,w=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var gr=(()=>((gr=gr||{})[gr.NONE=0]="NONE",gr[gr.HTML=1]="HTML",gr[gr.STYLE=2]="STYLE",gr[gr.SCRIPT=3]="SCRIPT",gr[gr.URL=4]="URL",gr[gr.RESOURCE_URL=5]="RESOURCE_URL",gr))();function mm(s){const a=function dh(){const s=Me();return s&&s[12]}();return a?a.sanitize(gr.URL,s)||"":function Ic(s,a){const l=function oh(s){return s instanceof pu&&s.getTypeName()||null}(s);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}(s,"URL")?Ls(s):function m(s){return(s=String(s)).match(Ky)||s.match(w)?s:"unsafe:"+s}(_e(s))}const xS="__ngContext__";function dt(s,a){s[xS]=a}function Us(s){const a=function mo(s){return s[xS]||null}(s);return a?Array.isArray(a)?a:a.lView:null}function ym(s){return s.ngOriginalError}function LE(s,...a){s.error(...a)}class Zr{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a),d=function ph(s){return s&&s.ngErrorLogger||LE}(a);d(this._console,"ERROR",a),l&&d(this._console,"ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&ym(a);for(;l&&ym(l);)l=ym(l);return l||null}}const gh=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Zt))();function wm(s){return s.ownerDocument.defaultView}function Na(s){return s instanceof Function?s():s}var yo=(()=>((yo=yo||{})[yo.Important=1]="Important",yo[yo.DashCase=2]="DashCase",yo))();function Em(s,a){return undefined(s,a)}function fp(s){const a=s[3];return Ai(a)?a[3]:a}function iv(s){return sv(s[13])}function bm(s){return sv(s[4])}function sv(s){for(;null!==s&&!Ai(s);)s=s[4];return s}function _h(s,a,l,d,f){if(null!=d){let g,v=!1;Ai(d)?g=d:Zi(d)&&(v=!0,d=d[0]);const E=En(d);0===s&&null!==l?null==f?YE(a,l,E):Nc(a,l,E,f||null,!0):1===s&&null!==l?Nc(a,l,E,f||null,!0):2===s?function tb(s,a,l){const d=Tm(s,a);d&&function QE(s,a,l,d){Cn(s)?s.removeChild(a,l,d):a.removeChild(l)}(s,d,a,l)}(a,E,v):3===s&&a.destroyNode(E),null!=g&&function gp(s,a,l,d,f){const g=l[7];g!==En(l)&&_h(a,s,d,g,f);for(let E=10;E<l.length;E++){const C=l[E];wh(C[1],C,s,a,d,g)}}(a,s,g,l,f)}}function Qt(s,a,l){if(Cn(s))return s.createElement(a,l);{const d=null!==l?function Yl(s){const a=s.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(l):null;return null===d?s.createElement(a):s.createElementNS(d,a)}}function WE(s,a){const l=s[9],d=l.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,oo(f,-1)),l.splice(d,1)}function vo(s,a){if(s.length<=10)return;const l=10+a,d=s[l];if(d){const f=d[17];null!==f&&f!==s&&WE(f,d),a>0&&(s[l-1][4]=d[4]);const g=$o(s,10+a);!function LS(s,a){wh(s,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const v=g[19];null!==v&&v.detachView(g[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function lv(s,a){if(!(256&a[2])){const l=a[11];Cn(l)&&l.destroyNode&&wh(s,a,l,3,null,null),function av(s){let a=s[13];if(!a)return Cm(s[1],s);for(;a;){let l=null;if(Zi(a))l=a[13];else{const d=a[10];d&&(l=d)}if(!l){for(;a&&!a[4]&&a!==s;)Zi(a)&&Cm(a[1],a),a=a[3];null===a&&(a=s),Zi(a)&&Cm(a[1],a),l=a&&a[4]}a=l}}(a)}}function Cm(s,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function PN(s,a){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let d=0;d<l.length;d+=2){const f=a[l[d]];if(!(f instanceof Ea)){const g=l[d+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const E=f[g[v]],C=g[v+1];try{C.call(E)}finally{}}else try{g.call(f)}finally{}}}}(s,a),function KE(s,a){const l=s.cleanup,d=a[7];let f=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const v=l[g+1],E="function"==typeof v?v(a):En(a[v]),C=d[f=l[g+2]],A=l[g+3];"boolean"==typeof A?E.removeEventListener(l[g],C,A):A>=0?d[f=A]():d[f=-A].unsubscribe(),g+=2}else{const v=d[f=l[g+1]];l[g].call(v)}if(null!==d){for(let g=f+1;g<d.length;g++)d[g]();a[7]=null}}(s,a),1===a[1].type&&Cn(a[11])&&a[11].destroy();const l=a[17];if(null!==l&&Ai(a[3])){l!==a[3]&&WE(l,a);const d=a[19];null!==d&&d.detachView(s)}}}function ri(s,a,l){return function Ko(s,a,l){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return l[0];if(2&d.flags){const f=s.data[d.directiveStart].encapsulation;if(f===Gt.None||f===Gt.Emulated)return null}return wr(d,l)}(s,a.parent,l)}function Nc(s,a,l,d,f){Cn(s)?s.insertBefore(a,l,d,f):a.insertBefore(l,d,f)}function YE(s,a,l){Cn(s)?s.appendChild(a,l):a.appendChild(l)}function uv(s,a,l,d,f){null!==d?Nc(s,a,l,d,f):YE(s,a,l)}function Tm(s,a){return Cn(s)?s.parentNode(a):a.parentNode}let dv=function cv(s,a,l){return 40&s.type?wr(s,l):null};function en(s,a,l,d){const f=ri(s,d,a),g=a[11],E=function XE(s,a,l){return dv(s,a,l)}(d.parent||a[6],d,a);if(null!=f)if(Array.isArray(l))for(let C=0;C<l.length;C++)uv(g,f,l[C],E,!1);else uv(g,f,l,E,!1)}function vu(s,a){if(null!==a){const l=a.type;if(3&l)return wr(a,s);if(4&l)return Sl(-1,s[a.index]);if(8&l){const d=a.child;if(null!==d)return vu(s,d);{const f=s[a.index];return Ai(f)?Sl(-1,f):En(f)}}if(32&l)return Em(a,s)()||En(s[a.index]);{const d=eb(s,a);return null!==d?Array.isArray(d)?d[0]:vu(fp(s[16]),d):vu(s,a.next)}}return null}function eb(s,a){return null!==a?s[16][6].projection[a.projection]:null}function Sl(s,a){const l=10+s+1;if(l<a.length){const d=a[l],f=d[1].firstChild;if(null!==f)return vu(d,f)}return a[7]}function Im(s,a,l,d,f,g,v){for(;null!=l;){const E=d[l.index],C=l.type;if(v&&0===a&&(E&&dt(En(E),d),l.flags|=4),64!=(64&l.flags))if(8&C)Im(s,a,l.child,d,f,g,!1),_h(a,s,f,E,g);else if(32&C){const A=Em(l,d);let P;for(;P=A();)_h(a,s,f,P,g);_h(a,s,f,E,g)}else 16&C?pp(s,a,d,l,f,g):_h(a,s,f,E,g);l=v?l.projectionNext:l.next}}function wh(s,a,l,d,f,g){Im(l,d,s.firstChild,a,f,g,!1)}function pp(s,a,l,d,f,g){const v=l[16],C=v[6].projection[d.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)_h(a,s,f,C[A],g);else Im(s,a,C,v[3],f,g,!0)}function mp(s,a,l){Cn(s)?s.setAttribute(a,"style",l):a.style.cssText=l}function hv(s,a,l){Cn(s)?""===l?s.removeAttribute(a,"class"):s.setAttribute(a,"class",l):a.className=l}function Sm(s,a,l){let d=s.length;for(;;){const f=s.indexOf(a,l);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const g=a.length;if(f+g===d||s.charCodeAt(f+g)<=32)return f}l=f+1}}const pv="ng-template";function rb(s,a,l){let d=0;for(;d<s.length;){let f=s[d++];if(l&&"class"===f){if(f=s[d],-1!==Sm(f.toLowerCase(),a,0))return!0}else if(1===f){for(;d<s.length&&"string"==typeof(f=s[d++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function ib(s){return 4===s.type&&s.value!==pv}function jS(s,a,l){return a===(4!==s.type||l?s.value:pv)}function HS(s,a,l){let d=4;const f=s.attrs||[],g=function GS(s){for(let a=0;a<s.length;a++)if(ep(s[a]))return a;return s.length}(f);let v=!1;for(let E=0;E<a.length;E++){const C=a[E];if("number"!=typeof C){if(!v)if(4&d){if(d=2|1&d,""!==C&&!jS(s,C,l)||""===C&&1===a.length){if(ms(d))return!1;v=!0}}else{const A=8&d?C:a[++E];if(8&d&&null!==s.attrs){if(!rb(s.attrs,A,l)){if(ms(d))return!1;v=!0}continue}const U=$S(8&d?"class":C,f,ib(s),l);if(-1===U){if(ms(d))return!1;v=!0;continue}if(""!==A){let q;q=U>g?"":f[U+1].toLowerCase();const te=8&d?q:null;if(te&&-1!==Sm(te,A,0)||2&d&&A!==q){if(ms(d))return!1;v=!0}}}}else{if(!v&&!ms(d)&&!ms(C))return!1;if(v&&ms(C))continue;v=!1,d=C|1&d}}return ms(d)||v}function ms(s){return 0==(1&s)}function $S(s,a,l,d){if(null===a)return-1;let f=0;if(d||!l){let g=!1;for(;f<a.length;){const v=a[f];if(v===s)return f;if(3===v||6===v)g=!0;else{if(1===v||2===v){let E=a[++f];for(;"string"==typeof E;)E=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=g?1:2}return-1}return function ZS(s,a){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const d=s[l];if("number"==typeof d)return-1;if(d===a)return l;l++}return-1}(a,s)}function sb(s,a,l=!1){for(let d=0;d<a.length;d++)if(HS(s,a[d],l))return!0;return!1}function Dm(s,a){return s?":not("+a.trim()+")":a}function gv(s){let a=s[0],l=1,d=2,f="",g=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&d){const E=s[++l];f+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&d?f+="."+v:4&d&&(f+=" "+v);else""!==f&&!ms(v)&&(a+=Dm(g,f),f=""),d=v,g=g||!ms(d);l++}return""!==f&&(a+=Dm(g,f)),a}const Ut={};function mv(s){ab(zt(),Me(),br()+s,pl())}function ab(s,a,l,d){if(!d)if(3==(3&a[2])){const g=s.preOrderCheckHooks;null!==g&&Rs(a,g,l)}else{const g=s.preOrderHooks;null!==g&&vl(a,g,0,l)}ks(l)}function _p(s,a){return s<<17|a<<2}function Yo(s){return s>>17&32767}function vp(s){return 2|s}function ka(s){return(131068&s)>>2}function wp(s,a){return-131069&s|a<<2}function _v(s){return 1|s}function wv(s,a){const l=s.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const f=l[d],g=l[d+1];if(-1!==g){const v=s.data[g];lc(f),v.contentQueries(2,a[g],g)}}}function Eu(s,a,l,d,f,g,v,E,C,A){const P=a.blueprint.slice();return P[0]=f,P[2]=140|d,so(P),P[3]=P[15]=s,P[8]=l,P[10]=v||s&&s[10],P[11]=E||s&&s[11],P[12]=C||s&&s[12]||null,P[9]=A||s&&s[9]||null,P[6]=g,P[16]=2==a.type?s[16]:P,P}function Ch(s,a,l,d,f){let g=s.data[a];if(null===g)g=function Ev(s,a,l,d,f){const g=ao(),v=sc(),C=s.data[a]=function eD(s,a,l,d,f,g){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,l,a,d,f);return null===s.firstChild&&(s.firstChild=C),null!==g&&(v?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C)),C}(s,a,l,d,f),function gl(){return bt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=d,g.attrs=f;const v=function fl(){const s=bt.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Xr(g,!0),g}function Th(s,a,l,d){if(0===l)return-1;const f=a.length;for(let g=0;g<l;g++)a.push(d),s.blueprint.push(d),s.data.push(null);return f}function Tp(s,a,l){Ro(a);try{const d=s.viewQuery;null!==d&&Mv(1,d,l);const f=s.template;null!==f&&bv(s,a,f,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&wv(s,a),s.staticViewQueries&&Mv(2,s.viewQuery,l);const g=s.components;null!==g&&function Fm(s,a){for(let l=0;l<a.length;l++)fD(s,a[l])}(a,g)}catch(d){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),d}finally{a[2]&=-5,wa()}}function xl(s,a,l,d){const f=a[2];if(256==(256&f))return;Ro(a);const g=pl();try{so(a),function ac(s){return bt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&bv(s,a,l,2,d);const v=3==(3&f);if(!g)if(v){const A=s.preOrderCheckHooks;null!==A&&Rs(a,A,null)}else{const A=s.preOrderHooks;null!==A&&vl(a,A,0,null),tu(a,0)}if(function dD(s){for(let a=iv(s);null!==a;a=bm(a)){if(!a[2])continue;const l=a[9];for(let d=0;d<l.length;d++){const f=l[d],g=f[3];0==(1024&f[2])&&oo(g,1),f[2]|=1024}}}(a),function xb(s){for(let a=iv(s);null!==a;a=bm(a))for(let l=10;l<a.length;l++){const d=a[l],f=d[1];as(d)&&xl(f,d,f.template,d[8])}}(a),null!==s.contentQueries&&wv(s,a),!g)if(v){const A=s.contentCheckHooks;null!==A&&Rs(a,A)}else{const A=s.contentHooks;null!==A&&vl(a,A,1),tu(a,1)}!function wo(s,a){const l=s.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const f=l[d];if(f<0)ks(~f);else{const g=f,v=l[++d],E=l[++d];ml(v,g),E(2,a[g])}}}finally{ks(-1)}}(s,a);const E=s.components;null!==E&&function _b(s,a){for(let l=0;l<a.length;l++)hD(s,a[l])}(a,E);const C=s.viewQuery;if(null!==C&&Mv(2,C,d),!g)if(v){const A=s.viewCheckHooks;null!==A&&Rs(a,A)}else{const A=s.viewHooks;null!==A&&vl(a,A,2),tu(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),g||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,oo(a[3],-1))}finally{wa()}}function yb(s,a,l,d){const f=a[10],g=!pl(),v=_a(a);try{g&&!v&&f.begin&&f.begin(),v&&Tp(s,a,d),xl(s,a,l,d)}finally{g&&!v&&f.end&&f.end()}}function bv(s,a,l,d,f){const g=br(),v=2&d;try{ks(-1),v&&a.length>20&&ab(s,a,20,pl()),l(d,f)}finally{ks(g)}}function Lm(s,a,l){!ic()||(function sD(s,a,l,d){const f=l.directiveStart,g=l.directiveEnd;s.firstCreatePass||kr(l,a),dt(d,a);const v=l.initialInputs;for(let E=f;E<g;E++){const C=s.data[E],A=xi(C);A&&uD(a,l,C);const P=or(a,s,E,l);dt(P,a),null!==v&&$N(0,E-f,P,C,0,v),A&&(Er(l.index,a)[8]=P)}}(s,a,l,wr(l,a)),128==(128&l.flags)&&function oD(s,a,l){const d=l.directiveStart,f=l.directiveEnd,v=l.index,E=function qd(){return bt.lFrame.currentDirectiveIndex}();try{ks(v);for(let C=d;C<f;C++){const A=s.data[C],P=a[C];ko(C),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Cb(A,P)}}finally{ks(-1),ko(E)}}(s,a,l))}function Vc(s,a,l=wr){const d=a.localNames;if(null!==d){let f=a.index+1;for(let g=0;g<d.length;g+=2){const v=d[g+1],E=-1===v?l(a,s):s[v];s[f++]=E}}}function Cv(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=Um(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function Um(s,a,l,d,f,g,v,E,C,A){const P=20+d,U=P+f,q=function XS(s,a){const l=[];for(let d=0;d<a;d++)l.push(d<s?null:Ut);return l}(P,U),te="function"==typeof A?A():A;return q[1]={type:s,blueprint:q,template:l,queries:null,viewQuery:E,declTNode:a,data:q.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:te,incompleteFirstPass:!1}}function Vm(s,a,l,d){const f=Pv(a);null===l?f.push(d):(f.push(l),s.firstCreatePass&&Nb(s).push(d,f.length-1))}function Tv(s,a,l){for(let d in s)if(s.hasOwnProperty(d)){const f=s[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(a,f):l[d]=[a,f]}return l}function Vs(s,a,l,d,f,g,v,E){const C=wr(a,l);let P,A=a.inputs;!E&&null!=A&&(P=A[d])?(Rb(s,l,P,d,f),zl(a)&&function jm(s,a){const l=Er(a,s);16&l[2]||(l[2]|=64)}(l,a.index)):3&a.type&&(d=function tD(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(d),f=null!=v?v(f,a.value||"",d):f,Cn(g)?g.setProperty(C,d,f):El(d)||(C.setProperty?C.setProperty(d,f):C[d]=f))}function Iv(s,a,l,d){let f=!1;if(ic()){const g=function aD(s,a,l){const d=s.directiveRegistry;let f=null;if(d)for(let g=0;g<d.length;g++){const v=d[g];sb(l,v.selectors,!1)&&(f||(f=[]),Pi(kr(l,a),s,v.type),xi(v)?(Tb(s,l),f.unshift(v)):f.push(v))}return f}(s,a,l),v=null===d?null:{"":-1};if(null!==g){f=!0,Sb(l,s.data.length,g.length);for(let P=0;P<g.length;P++){const U=g[P];U.providersResolver&&U.providersResolver(U)}let E=!1,C=!1,A=Th(s,a,g.length,null);for(let P=0;P<g.length;P++){const U=g[P];l.mergedAttrs=nu(l.mergedAttrs,U.hostAttrs),Db(s,l,a,A,U),lD(A,U,v),null!==U.contentQueries&&(l.flags|=8),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(l.flags|=128);const q=U.type.prototype;!E&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),E=!0),!C&&(q.ngOnChanges||q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),C=!0),A++}!function Bm(s,a){const d=a.directiveEnd,f=s.data,g=a.attrs,v=[];let E=null,C=null;for(let A=a.directiveStart;A<d;A++){const P=f[A],U=P.inputs,q=null===g||ib(a)?null:Ab(U,g);v.push(q),E=Tv(U,A,E),C=Tv(P.outputs,A,C)}null!==E&&(E.hasOwnProperty("class")&&(a.flags|=16),E.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=v,a.inputs=E,a.outputs=C}(s,l)}v&&function Ib(s,a,l){if(a){const d=s.localNames=[];for(let f=0;f<a.length;f+=2){const g=l[a[f+1]];if(null==g)throw new Ue(-301,!1);d.push(a[f],g)}}}(l,d,v)}return l.mergedAttrs=nu(l.mergedAttrs,l.attrs),f}function bb(s,a,l,d,f,g){const v=g.hostBindings;if(v){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const C=~a.index;(function iD(s){let a=s.length;for(;a>0;){const l=s[--a];if("number"==typeof l&&l<0)return l}return 0})(E)!=C&&E.push(C),E.push(d,f,v)}}function Cb(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function Tb(s,a){a.flags|=2,(s.components||(s.components=[])).push(a.index)}function lD(s,a,l){if(l){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)l[a.exportAs[d]]=s;xi(a)&&(l[""]=s)}}function Sb(s,a,l){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+l,s.providerIndexes=a}function Db(s,a,l,d,f){s.data[d]=f;const g=f.factory||(f.factory=Mi(f.type)),v=new Ea(g,xi(f),null);s.blueprint[d]=v,l[d]=v,bb(s,a,0,d,Th(s,l,f.hostVars,Ut),f)}function uD(s,a,l){const d=wr(a,s),f=Cv(l),g=s[10],v=Gm(s,Eu(s,f,null,l.onPush?64:16,d,a,g,g.createRenderer(d,l),null,null));s[a.index]=v}function Ra(s,a,l,d,f,g){const v=wr(s,a);!function qm(s,a,l,d,f,g,v){if(null==g)Cn(s)?s.removeAttribute(a,f,l):a.removeAttribute(f);else{const E=null==v?_e(g):v(g,d||"",f);Cn(s)?s.setAttribute(a,f,E,l):l?a.setAttributeNS(l,f,E):a.setAttribute(f,E)}}(a[11],v,g,s.value,l,d,f)}function $N(s,a,l,d,f,g){const v=g[a];if(null!==v){const E=d.setInput;for(let C=0;C<v.length;){const A=v[C++],P=v[C++],U=v[C++];null!==E?d.setInput(l,U,A,P):l[P]=U}}}function Ab(s,a){let l=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;s.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,s[f],a[d+1])),d+=2}else d+=2;else d+=4}return l}function Sv(s,a,l,d){return new Array(s,!0,!1,a,null,0,d,l,null,null)}function hD(s,a){const l=Er(a,s);if(as(l)){const d=l[1];80&l[2]?xl(d,l,d.template,l[8]):l[5]>0&&Dv(l)}}function Dv(s){for(let d=iv(s);null!==d;d=bm(d))for(let f=10;f<d.length;f++){const g=d[f];if(1024&g[2]){const v=g[1];xl(v,g,v.template,g[8])}else g[5]>0&&Dv(g)}const l=s[1].components;if(null!==l)for(let d=0;d<l.length;d++){const f=Er(l[d],s);as(f)&&f[5]>0&&Dv(f)}}function fD(s,a){const l=Er(a,s),d=l[1];(function Mb(s,a){for(let l=a.length;l<s.blueprint.length;l++)a.push(s.blueprint[l])})(d,l),Tp(d,l,l[8])}function Gm(s,a){return s[13]?s[14][4]=a:s[13]=a,s[14]=a,a}function Sp(s){for(;s;){s[2]|=64;const a=fp(s);if(Gf(s)&&!a)return s;s=a}return null}function xv(s,a,l){const d=a[10];d.begin&&d.begin();try{xl(s,a,s.template,l)}catch(f){throw Li(a,f),f}finally{d.end&&d.end()}}function Zm(s){!function Av(s){for(let a=0;a<s.components.length;a++){const l=s.components[a],d=Us(l),f=d[1];yb(f,d,f.template,l)}}(s[8])}function Mv(s,a,l){lc(0),a(s,l)}const mD=(()=>Promise.resolve(null))();function Pv(s){return s[7]||(s[7]=[])}function Nb(s){return s.cleanup||(s.cleanup=[])}function Li(s,a){const l=s[9],d=l?l.get(Zr,null):null;d&&d.handleError(a)}function Rb(s,a,l,d,f){for(let g=0;g<l.length;){const v=l[g++],E=l[g++],C=a[v],A=s.data[v];null!==A.setInput?A.setInput(C,f,d,E):C[E]=f}}function Oa(s,a,l){const d=No(a,s);!function GE(s,a,l){Cn(s)?s.setValue(a,l):a.textContent=l}(s[11],d,l)}function Bs(s,a,l){let d=l?s.styles:null,f=l?s.classes:null,g=0;if(null!==a)for(let v=0;v<a.length;v++){const E=a[v];"number"==typeof E?g=E:1==g?f=ve(f,E):2==g&&(d=ve(d,E+": "+a[++v]+";"))}l?s.styles=d:s.stylesWithoutHost=d,l?s.classes=f:s.classesWithoutHost=f}const Nv=new Hn("INJECTOR",-1);class kv{get(a,l=ps){if(l===ps){const d=new Error(`NullInjectorError: No provider for ${ue(a)}!`);throw d.name="NullInjectorError",d}return l}}const Rv=new Hn("Set Injector scope."),Sh={},Ob={};let Dp;function _D(){return void 0===Dp&&(Dp=new kv),Dp}function bu(s,a=null,l=null,d){const f=Ov(s,a,l,d);return f._resolveInjectorDefTypes(),f}function Ov(s,a=null,l=null,d){return new yD(s,l,a||_D(),d)}class yD{constructor(a,l,d,f=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];l&&vi(l,E=>this.processProvider(E,a,l)),vi([a],E=>this.processInjectorType(E,[],g)),this.records.set(Nv,Dh(void 0,this));const v=this.records.get(Rv);this.scope=null!=v?v.value:null,this.source=f||("object"==typeof a?null:ue(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,l=ps,d=wt.Default){this.assertNotDestroyed();const f=de(this),g=ln(void 0);try{if(!(d&wt.SkipSelf)){let E=this.records.get(a);if(void 0===E){const C=function Ub(s){return"function"==typeof s||"object"==typeof s&&s instanceof Hn}(a)&&Nn(a);E=C&&this.injectableDefInScope(C)?Dh(Fv(a),Sh):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(d&wt.Self?_D():this.parent).get(a,l=d&wt.Optional&&l===ps?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[Da]=v[Da]||[]).unshift(ue(a)),f)throw v;return function pr(s,a,l,d){const f=s[Da];throw a[N]&&f.unshift(a[N]),s.message=function go(s,a,l,d=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let f=ue(a);if(Array.isArray(a))f=a.map(ue).join(" -> ");else if("object"==typeof a){let g=[];for(let v in a)if(a.hasOwnProperty(v)){let E=a[v];g.push(v+":"+("string"==typeof E?JSON.stringify(E):ue(E)))}f=`{${g.join(", ")}}`}return`${l}${d?"("+d+")":""}[${f}]: ${s.replace(I,"\n  ")}`}("\n"+s.message,f,l,d),s.ngTokenPath=f,s[Da]=null,s}(v,a,"R3InjectorError",this.source)}throw v}finally{ln(g),de(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((d,f)=>a.push(ue(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ue(205,!1)}processInjectorType(a,l,d){if(!(a=se(a)))return!1;let f=rs(a);const g=null==f&&a.ngModule||void 0,v=void 0===g?a:g,E=-1!==d.indexOf(v);if(void 0!==g&&(f=rs(g)),null==f)return!1;if(null!=f.imports&&!E){let P;d.push(v);try{vi(f.imports,U=>{this.processInjectorType(U,l,d)&&(void 0===P&&(P=[]),P.push(U))})}finally{}if(void 0!==P)for(let U=0;U<P.length;U++){const{ngModule:q,providers:te}=P[U];vi(te,De=>this.processProvider(De,q,te||H))}}this.injectorDefTypes.add(v);const C=Mi(v)||(()=>new v);this.records.set(v,Dh(C,Sh));const A=f.providers;if(null!=A&&!E){const P=a;vi(A,U=>this.processProvider(U,P,A))}return void 0!==g&&void 0!==a.providers}processProvider(a,l,d){let f=Ah(a=se(a))?a:se(a&&a.provide);const g=function vD(s,a,l){return Lv(s)?Dh(void 0,s.useValue):Dh(Lb(s),Sh)}(a);if(Ah(a)||!0!==a.multi)this.records.get(f);else{let v=this.records.get(f);v||(v=Dh(void 0,Sh,!0),v.factory=()=>Xt(v.multi),this.records.set(f,v)),f=a,v.multi.push(a)}this.records.set(f,g)}hydrate(a,l){return l.value===Sh&&(l.value=Ob,l.value=l.factory()),"object"==typeof l.value&&l.value&&function CD(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=se(a.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function Fv(s){const a=Nn(s),l=null!==a?a.factory:Mi(s);if(null!==l)return l;if(s instanceof Hn)throw new Ue(204,!1);if(s instanceof Function)return function Fb(s){const a=s.length;if(a>0)throw function Yi(s,a){const l=[];for(let d=0;d<s;d++)l.push(a);return l}(a,"?"),new Ue(204,!1);const l=function Br(s){const a=s&&(s[Ii]||s[qn]);if(a){const l=function Rn(s){if(s.hasOwnProperty("name"))return s.name;const a=(""+s).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Ue(204,!1)}function Lb(s,a,l){let d;if(Ah(s)){const f=se(s);return Mi(f)||Fv(f)}if(Lv(s))d=()=>se(s.useValue);else if(function ED(s){return!(!s||!s.useFactory)}(s))d=()=>s.useFactory(...Xt(s.deps||[]));else if(function wD(s){return!(!s||!s.useExisting)}(s))d=()=>Ye(se(s.useExisting));else{const f=se(s&&(s.useClass||s.provide));if(!function bD(s){return!!s.deps}(s))return Mi(f)||Fv(f);d=()=>new f(...Xt(s.deps))}return d}function Dh(s,a,l=!1){return{factory:s,value:a,multi:l?[]:void 0}}function Lv(s){return null!==s&&"object"==typeof s&&B in s}function Ah(s){return"function"==typeof s}let Fa=(()=>{class s{static create(l,d){var f;if(Array.isArray(l))return bu({name:""},d,l,"");{const g=null!==(f=l.name)&&void 0!==f?f:"";return bu({name:g},l.parent,l.providers,g)}}}return s.THROW_IF_NOT_FOUND=ps,s.NULL=new kv,s.\u0275prov=an({token:s,providedIn:"any",factory:()=>Ye(Nv)}),s.__NG_ELEMENT_ID__=-1,s})();function $b(s,a){yl(Us(s)[1],jn())}function qb(s){let a=function RD(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const d=[s];for(;a;){let f;if(xi(s))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ue(903,"");f=a.\u0275dir}if(f){if(l){d.push(f);const v=s;v.inputs=Gb(s.inputs),v.declaredInputs=Gb(s.declaredInputs),v.outputs=Gb(s.outputs);const E=f.hostBindings;E&&YN(s,E);const C=f.viewQuery,A=f.contentQueries;if(C&&WN(s,C),A&&KN(s,A),fe(s.inputs,f.inputs),fe(s.declaredInputs,f.declaredInputs),fe(s.outputs,f.outputs),xi(f)&&f.data.animation){const P=s.data;P.animation=(P.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let v=0;v<g.length;v++){const E=g[v];E&&E.ngInherit&&E(s),E===qb&&(l=!1)}}a=Object.getPrototypeOf(a)}!function zN(s){let a=0,l=null;for(let d=s.length-1;d>=0;d--){const f=s[d];f.hostVars=a+=f.hostVars,f.hostAttrs=nu(f.hostAttrs,l=nu(l,f.hostAttrs))}}(d)}function Gb(s){return s===vn?{}:s===H?[]:s}function WN(s,a){const l=s.viewQuery;s.viewQuery=l?(d,f)=>{a(d,f),l(d,f)}:a}function KN(s,a){const l=s.contentQueries;s.contentQueries=l?(d,f,g)=>{a(d,f,g),l(d,f,g)}:a}function YN(s,a){const l=s.hostBindings;s.hostBindings=l?(d,f)=>{a(d,f),l(d,f)}:a}let Ap=null;function Cu(){if(!Ap){const s=Zt.Symbol;if(s&&s.iterator)Ap=s.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const d=a[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Ap=d)}}}return Ap}function Mh(s){return!!Zv(s)&&(Array.isArray(s)||!(s instanceof Map)&&Cu()in s)}function Zv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Pl(s,a,l){return s[a]=l}function Ui(s,a,l){return!Object.is(s[a],l)&&(s[a]=l,!0)}function xp(s,a,l,d){const f=Me();return Ui(f,ls(),a)&&(zt(),Ra(Wn(),f,s,a,l,d)),xp}function Tu(s,a,l,d){return Ui(s,ls(),l)?a+_e(l)+d:Ut}function Nh(s,a,l,d,f,g,v,E){const C=Me(),A=zt(),P=s+20,U=A.firstCreatePass?function Wv(s,a,l,d,f,g,v,E,C){const A=a.consts,P=Ch(a,s,4,v||null,gi(A,E));Iv(a,l,P,gi(A,C)),yl(a,P);const U=P.tViews=Um(2,P,d,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,A);return null!==a.queries&&(a.queries.template(a,P),U.queries=a.queries.embeddedTView(P)),P}(P,A,C,a,l,d,f,g,v):A.data[P];Xr(U,!1);const q=C[11].createComment("");en(A,C,q,U),dt(q,C),Gm(C,C[P]=Sv(q,C,q,U)),ro(U)&&Lm(A,C,U),null!=v&&Vc(C,U,E)}function Jm(s){return Ps(function Hd(){return bt.lFrame.contextLView}(),20+s)}function kp(s,a=wt.Default){const l=Me();return null===l?Ye(s,a):hs(jn(),l,se(s),a)}function nC(){throw new Error("invalid")}function oi(s,a,l){const d=Me();return Ui(d,ls(),a)&&Vs(zt(),Wn(),d,s,a,d[11],l,!1),oi}function qc(s,a,l,d,f){const v=f?"class":"style";Rb(s,l,a.inputs[v],v,d)}function Du(s,a,l,d){const f=Me(),g=zt(),v=20+s,E=f[11],C=f[v]=Qt(E,a,function Zd(){return bt.lFrame.currentNamespace}()),A=g.firstCreatePass?function ZD(s,a,l,d,f,g,v){const E=a.consts,A=Ch(a,s,2,f,gi(E,g));return Iv(a,l,A,gi(E,v)),null!==A.attrs&&Bs(A,A.attrs,!1),null!==A.mergedAttrs&&Bs(A,A.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,A),A}(v,g,f,0,a,l,d):g.data[v];Xr(A,!0);const P=A.mergedAttrs;null!==P&&Tr(E,C,P);const U=A.classes;null!==U&&hv(E,C,U);const q=A.styles;return null!==q&&mp(E,C,q),64!=(64&A.flags)&&en(g,f,C,A),0===function ul(){return bt.lFrame.elementDepthCount}()&&dt(C,f),function Bd(){bt.lFrame.elementDepthCount++}(),ro(A)&&(Lm(g,f,A),function Ip(s,a,l){if(Md(a)){const f=a.directiveEnd;for(let g=a.directiveStart;g<f;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,l[g],g)}}}(g,A,f)),null!==d&&Vc(f,A),Du}function s_(){let s=jn();sc()?function oc(){bt.lFrame.isParent=!1}():(s=s.parent,Xr(s,!1));const a=s;!function cl(){bt.lFrame.elementDepthCount--}();const l=zt();return l.firstCreatePass&&(yl(l,s),Md(s)&&l.queries.elementEnd(s)),null!=a.classesWithoutHost&&function Xf(s){return 0!=(16&s.flags)}(a)&&qc(l,a,Me(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function nm(s){return 0!=(32&s.flags)}(a)&&qc(l,a,Me(),a.stylesWithoutHost,!1),s_}function s0(s,a,l,d){return Du(s,a,l,d),s_(),s0}function l_(){return Me()}function u_(s){return!!s&&"function"==typeof s.then}function a0(s){return!!s&&"function"==typeof s.subscribe}const rC=a0;function c_(s,a,l,d){const f=Me(),g=zt(),v=jn();return function c0(s,a,l,d,f,g,v,E){const C=ro(d),P=s.firstCreatePass&&Nb(s),U=a[8],q=Pv(a);let te=!0;if(3&d.type||E){const Je=wr(d,a),ut=E?E(Je):Je,Pe=q.length,vt=E?Jt=>E(En(Jt[d.index])):d.index;if(Cn(l)){let Jt=null;if(!E&&C&&(Jt=function u0(s,a,l,d){const f=s.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const v=f[g];if(v===l&&f[g+1]===d){const E=a[7],C=f[g+2];return E.length>C?E[C]:null}"string"==typeof v&&(g+=2)}return null}(s,a,f,d.index)),null!==Jt)(Jt.__ngLastListenerFn__||Jt).__ngNextListenerFn__=g,Jt.__ngLastListenerFn__=g,te=!1;else{g=Fp(d,a,U,g,!1);const bn=l.listen(ut,f,g);q.push(g,bn),P&&P.push(f,vt,Pe,Pe+1)}}else g=Fp(d,a,U,g,!0),ut.addEventListener(f,g,v),q.push(g),P&&P.push(f,vt,Pe,v)}else g=Fp(d,a,U,g,!1);const De=d.outputs;let $e;if(te&&null!==De&&($e=De[f])){const Je=$e.length;if(Je)for(let ut=0;ut<Je;ut+=2){const zs=a[$e[ut]][$e[ut+1]].subscribe(g),Bl=q.length;q.push(g,zs),P&&P.push(f,d.index,Bl,-(Bl+1))}}}(g,f,f[11],v,s,a,!!l,d),c_}function iC(s,a,l,d){try{return!1!==l(d)}catch(f){return Li(s,f),!1}}function Fp(s,a,l,d,f){return function g(v){if(v===Function)return d;const E=2&s.flags?Er(s.index,a):a;0==(32&a[2])&&Sp(E);let C=iC(a,0,d,v),A=g.__ngNextListenerFn__;for(;A;)C=iC(a,0,A,v)&&C,A=A.__ngNextListenerFn__;return f&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function d_(s=1){return function us(s){return(bt.lFrame.contextLView=function Yf(s,a){for(;s>0;)a=a[15],s--;return a}(s,bt.lFrame.contextLView))[8]}(s)}function Oh(s,a,l){return Fh(s,"",a,"",l),Oh}function Fh(s,a,l,d,f){const g=Me(),v=Tu(g,a,l,d);return v!==Ut&&Vs(zt(),Wn(),g,s,v,g[11],f,!1),Fh}function Lp(s,a,l,d,f){const g=s[l+1],v=null===a;let E=d?Yo(g):ka(g),C=!1;for(;0!==E&&(!1===C||v);){const P=s[E+1];f0(s[E],a)&&(C=!0,s[E+1]=d?_v(P):vp(P)),E=d?Yo(P):ka(P)}C&&(s[l+1]=d?vp(g):_v(g))}function f0(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&lu(s,a)>=0}function p_(s,a){return function Xi(s,a,l,d){const f=Me(),g=zt(),v=function Ns(s){const a=bt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,l}(2);g.firstUpdatePass&&function g_(s,a,l,d){const f=s.data;if(null===f[l+1]){const g=f[br()],v=function _0(s,a){return a>=s.expandoStartIndex}(s,l);(function w0(s,a){return 0!=(s.flags&(a?16:32))})(g,d)&&null===a&&!v&&(a=!1),a=function gC(s,a,l,d){const f=function va(s){const a=bt.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}(s);let g=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(l=Gc(l=Hp(null,s,a,l,d),a.attrs,d),g=null);else{const v=a.directiveStylingLast;if(-1===v||s[v]!==f)if(l=Hp(f,s,a,l,d),null===g){let C=function mC(s,a,l){const d=l?a.classBindings:a.styleBindings;if(0!==ka(d))return s[Yo(d)]}(s,a,d);void 0!==C&&Array.isArray(C)&&(C=Hp(null,s,a,C[1],d),C=Gc(C,a.attrs,d),function jp(s,a,l,d){s[Yo(l?a.classBindings:a.styleBindings)]=d}(s,a,d,C))}else g=function y0(s,a,l){let d;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)d=Gc(d,s[g].hostAttrs,l);return Gc(d,a.attrs,l)}(s,a,d)}return void 0!==g&&(d?a.residualClasses=g:a.residualStyles=g),l}(f,g,a,d),function dC(s,a,l,d,f,g){let v=g?a.classBindings:a.styleBindings,E=Yo(v),C=ka(v);s[d]=l;let P,A=!1;if(Array.isArray(l)){const U=l;P=U[1],(null===P||lu(U,P)>0)&&(A=!0)}else P=l;if(f)if(0!==C){const q=Yo(s[E+1]);s[d+1]=_p(q,E),0!==q&&(s[q+1]=wp(s[q+1],d)),s[E+1]=function lb(s,a){return 131071&s|a<<17}(s[E+1],d)}else s[d+1]=_p(E,0),0!==E&&(s[E+1]=wp(s[E+1],d)),E=d;else s[d+1]=_p(C,0),0===E?E=d:s[C+1]=wp(s[C+1],d),C=d;A&&(s[d+1]=vp(s[d+1])),Lp(s,P,d,!0),Lp(s,P,d,!1),function zD(s,a,l,d,f){const g=f?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof a&&lu(g,a)>=0&&(l[d+1]=_v(l[d+1]))}(a,P,s,d,g),v=_p(E,C),g?a.classBindings=v:a.styleBindings=v}(f,g,a,l,v,d)}}(g,s,v,d),a!==Ut&&Ui(f,v,a)&&function yC(s,a,l,d,f,g,v,E){if(!(3&a.type))return;const C=s.data,A=C[E+1];Zc(function Am(s){return 1==(1&s)}(A)?__(C,a,l,f,ka(A),v):void 0)||(Zc(g)||function yp(s){return 2==(2&s)}(A)&&(g=__(C,null,l,f,E,v)),function nb(s,a,l,d,f){const g=Cn(s);if(a)f?g?s.addClass(l,d):l.classList.add(d):g?s.removeClass(l,d):l.classList.remove(d);else{let v=-1===d.indexOf("-")?void 0:yo.DashCase;if(null==f)g?s.removeStyle(l,d,v):l.style.removeProperty(d);else{const E="string"==typeof f&&f.endsWith("!important");E&&(f=f.slice(0,-10),v|=yo.Important),g?s.setStyle(l,d,f,v):l.style.setProperty(d,f,E?"important":"")}}}(d,v,No(br(),l),f,g))}(g,g.data[br()],f,f[11],s,f[v+1]=function v0(s,a){return null==s||("string"==typeof a?s+=a:"object"==typeof s&&(s=ue(Ls(s)))),s}(a,l),d,v)}(s,a,null,!0),p_}function Hp(s,a,l,d,f){let g=null;const v=l.directiveEnd;let E=l.directiveStylingLast;for(-1===E?E=l.directiveStart:E++;E<v&&(g=a[E],d=Gc(d,g.hostAttrs,f),g!==s);)E++;return null!==s&&(l.directiveStylingLast=E),d}function Gc(s,a,l){const d=l?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const v=a[g];"number"==typeof v?f=v:f===d&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),wi(s,v,!!l||a[++g]))}return void 0===s?null:s}function __(s,a,l,d,f,g){const v=null===a;let E;for(;f>0;){const C=s[f],A=Array.isArray(C),P=A?C[1]:C,U=null===P;let q=l[f+1];q===Ut&&(q=U?H:void 0);let te=U?nh(q,d):P===d?q:void 0;if(A&&!Zc(te)&&(te=nh(C,d)),Zc(te)&&(E=te,v))return E;const De=s[f+1];f=v?Yo(De):ka(De)}if(null!==a){let C=g?a.residualClasses:a.residualStyles;null!=C&&(E=nh(C,d))}return E}function Zc(s){return void 0!==s}function E0(s,a=""){const l=Me(),d=zt(),f=s+20,g=d.firstCreatePass?Ch(d,f,1,a,null):d.data[f],v=l[f]=function ov(s,a){return Cn(s)?s.createText(a):s.createTextNode(a)}(l[11],a);en(d,l,v,g),Xr(g,!1)}function y_(s){return v_("",s,""),y_}function v_(s,a,l){const d=Me(),f=Tu(d,s,a,l);return f!==Ut&&Oa(d,br(),f),v_}const Yc=void 0;var SC=["en",[["a","p"],["AM","PM"],Yc],[["AM","PM"],Yc,Yc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Yc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Yc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Yc,"{1} 'at' {0}",Yc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function nA(s){const l=Math.floor(Math.abs(s)),d=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let qh={};function DC(s,a,l){"string"!=typeof a&&(l=a,a=s[It.LocaleId]),a=a.toLowerCase().replace(/_/g,"-"),qh[a]=s,l&&(qh[a][It.ExtraData]=l)}function S_(s){const a=function iA(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=A0(a);if(l)return l;const d=a.split("-")[0];if(l=A0(d),l)return l;if("en"===d)return SC;throw new Error(`Missing locale data for the locale "${s}".`)}function D_(s){return S_(s)[It.PluralCase]}function A0(s){return s in qh||(qh[s]=Zt.ng&&Zt.ng.common&&Zt.ng.common.locales&&Zt.ng.common.locales[s]),qh[s]}var It=(()=>((It=It||{})[It.LocaleId=0]="LocaleId",It[It.DayPeriodsFormat=1]="DayPeriodsFormat",It[It.DayPeriodsStandalone=2]="DayPeriodsStandalone",It[It.DaysFormat=3]="DaysFormat",It[It.DaysStandalone=4]="DaysStandalone",It[It.MonthsFormat=5]="MonthsFormat",It[It.MonthsStandalone=6]="MonthsStandalone",It[It.Eras=7]="Eras",It[It.FirstDayOfWeek=8]="FirstDayOfWeek",It[It.WeekendRange=9]="WeekendRange",It[It.DateFormat=10]="DateFormat",It[It.TimeFormat=11]="TimeFormat",It[It.DateTimeFormat=12]="DateTimeFormat",It[It.NumberSymbols=13]="NumberSymbols",It[It.NumberFormats=14]="NumberFormats",It[It.CurrencyCode=15]="CurrencyCode",It[It.CurrencySymbol=16]="CurrencySymbol",It[It.CurrencyName=17]="CurrencyName",It[It.Currencies=18]="Currencies",It[It.Directionality=19]="Directionality",It[It.PluralCase=20]="PluralCase",It[It.ExtraData=21]="ExtraData",It))();const Qc="en-US";let Zh=Qc;function Vt(s,a,l,d,f){if(s=se(s),Array.isArray(s))for(let g=0;g<s.length;g++)Vt(s[g],a,l,d,f);else{const g=zt(),v=Me();let E=Ah(s)?s:se(s.provide),C=Lb(s);const A=jn(),P=1048575&A.providerIndexes,U=A.directiveStart,q=A.providerIndexes>>20;if(Ah(s)||!s.multi){const te=new Ea(C,f,kp),De=lr(E,a,f?P:P+q,U);-1===De?(Pi(kr(A,v),g,E),ku(g,s,a.length),a.push(E),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),l.push(te),v.push(te)):(l[De]=te,v[De]=te)}else{const te=lr(E,a,P+q,U),De=lr(E,a,P,P+q),$e=te>=0&&l[te],Je=De>=0&&l[De];if(f&&!Je||!f&&!$e){Pi(kr(A,v),g,E);const ut=function rT(s,a,l,d,f){const g=new Ea(s,l,kp);return g.multi=[],g.index=a,g.componentProviders=0,B0(g,f,d&&!l),g}(f?nT:At,l.length,f,d,C);!f&&Je&&(l[De].providerFactory=ut),ku(g,s,a.length,0),a.push(E),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),l.push(ut),v.push(ut)}else ku(g,s,te>-1?te:De,B0(l[f?De:te],C,!f&&d));!f&&d&&Je&&l[De].componentProviders++}}}function ku(s,a,l,d){const f=Ah(a),g=function Uv(s){return!!s.useClass}(a);if(f||g){const C=(g?se(a.useClass):a).prototype.ngOnDestroy;if(C){const A=s.destroyHooks||(s.destroyHooks=[]);if(!f&&a.multi){const P=A.indexOf(l);-1===P?A.push(l,[d,C]):A[P+1].push(d,C)}else A.push(l,C)}}}function B0(s,a,l){return l&&s.componentProviders++,s.multi.push(a)-1}function lr(s,a,l,d){for(let f=l;f<d;f++)if(a[f]===s)return f;return-1}function At(s,a,l,d){return Ol(this.multi,[])}function nT(s,a,l,d){const f=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=or(l,l[1],this.providerFactory.index,d);g=E.slice(0,v),Ol(f,g);for(let C=v;C<E.length;C++)g.push(E[C])}else g=[],Ol(f,g);return g}function Ol(s,a){for(let l=0;l<s.length;l++)a.push((0,s[l])());return a}function Xh(s,a=[]){return l=>{l.providersResolver=(d,f)=>function tT(s,a,l){const d=zt();if(d.firstCreatePass){const f=xi(s);Vt(l,d.data,d.blueprint,f,!0),Vt(a,d.data,d.blueprint,f,!1)}}(d,f?f(s):s,a)}}class iT{}class Wr{resolveComponentFactory(a){throw function zr(s){const a=Error(`No component factory found for ${ue(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let k_=(()=>{class s{}return s.NULL=new Wr,s})();function Ru(){return Ln(jn(),Me())}function Ln(s,a){return new Xo(wr(s,a))}let Xo=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=Ru,s})();function j0(s){return s instanceof Xo?s.nativeElement:s}class ef{}let EA=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Yp(){const s=Me(),l=Er(jn().index,s);return function Fl(s){return s[11]}(Zi(l)?l:s)}(),s})(),Qp=(()=>{class s{}return s.\u0275prov=an({token:s,providedIn:"root",factory:()=>null}),s})();class H0{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const tt=new H0("13.3.4"),Ba={};function td(s,a,l,d,f=!1){for(;null!==l;){const g=a[l.index];if(null!==g&&d.push(En(g)),Ai(g))for(let E=10;E<g.length;E++){const C=g[E],A=C[1].firstChild;null!==A&&td(C[1],C,A,d)}const v=l.type;if(8&v)td(s,a,l.child,d);else if(32&v){const E=Em(l,a);let C;for(;C=E();)d.push(C)}else if(16&v){const E=eb(a,l);if(Array.isArray(E))d.push(...E);else{const C=fp(a[16]);td(C[1],C,E,d,!0)}}l=f?l.projectionNext:l.next}return d}class ea{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return td(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Ai(a)){const l=a[8],d=l?l.indexOf(this):-1;d>-1&&(vo(a,d),$o(l,d))}this._attachedToViewContainer=!1}lv(this._lView[1],this._lView)}onDestroy(a){Vm(this._lView[1],this._lView,null,a)}markForCheck(){Sp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){xv(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Pb(s,a,l){ya(!0);try{xv(s,a,l)}finally{ya(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ue(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zE(s,a){wh(s,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ue(902,"");this._appRef=a}}class ja extends ea{constructor(a){super(a),this._view=a}detectChanges(){Zm(this._view)}checkNoChanges(){!function gD(s){ya(!0);try{Zm(s)}finally{ya(!1)}}(this._view)}get context(){return null}}class tf extends k_{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=ft(a);return new Jp(l,this.ngModule)}}function Ll(s){const a=[];for(let l in s)s.hasOwnProperty(l)&&a.push({propName:s[l],templateName:l});return a}class Jp extends iT{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function Dl(s){return s.map(gv).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return Ll(this.componentDef.inputs)}get outputs(){return Ll(this.componentDef.outputs)}create(a,l,d,f){const g=(f=f||this.ngModule)?function nf(s,a){return{get:(l,d,f)=>{const g=s.get(l,Ba,f);return g!==Ba||d===Ba?g:a.get(l,d,f)}}}(a,f.injector):a,v=g.get(ef,ol),E=g.get(Qp,null),C=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",P=d?function wb(s,a,l){if(Cn(s))return s.selectRootElement(a,l===Gt.ShadowDom);let d="string"==typeof a?s.querySelector(a):a;return d.textContent="",d}(C,d,this.componentDef.encapsulation):Qt(v.createRenderer(null,this.componentDef),A,function sT(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(A)),U=this.componentDef.onPush?576:528,q=function $v(s,a){return{components:[],scheduler:s||gh,clean:mD,playerHandler:a||null,flags:0}}(),te=Um(0,null,null,1,0,null,null,null,null,null),De=Eu(null,te,q,U,null,null,v,C,E,g);let $e,Je;Ro(De);try{const ut=function Wm(s,a,l,d,f,g){const v=l[1];l[20]=s;const C=Ch(v,20,2,"#host",null),A=C.mergedAttrs=a.hostAttrs;null!==A&&(Bs(C,A,!0),null!==s&&(Tr(f,s,A),null!==C.classes&&hv(f,s,C.classes),null!==C.styles&&mp(f,s,C.styles)));const P=d.createRenderer(s,a),U=Eu(l,Cv(a),null,a.onPush?64:16,l[20],C,d,P,g||null,null);return v.firstCreatePass&&(Pi(kr(C,l),v,a.type),Tb(v,C),Sb(C,l.length,1)),Gm(l,U),l[20]=U}(P,this.componentDef,De,v,C);if(P)if(d)Tr(C,P,["ng-version",tt.full]);else{const{attrs:Pe,classes:vt}=function Eh(s){const a=[],l=[];let d=1,f=2;for(;d<s.length;){let g=s[d];if("string"==typeof g)2===f?""!==g&&a.push(g,s[++d]):8===f&&l.push(g);else{if(!ms(f))break;f=g}d++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);Pe&&Tr(C,P,Pe),vt&&vt.length>0&&hv(C,P,vt.join(" "))}if(Je=zn(te,20),void 0!==l){const Pe=Je.projection=[];for(let vt=0;vt<this.ngContentSelectors.length;vt++){const Jt=l[vt];Pe.push(null!=Jt?Array.from(Jt):null)}}$e=function Km(s,a,l,d,f){const g=l[1],v=function rD(s,a,l){const d=jn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),Db(s,d,a,Th(s,a,1,null),l));const f=or(a,s,d.directiveStart,d);dt(f,a);const g=wr(d,a);return g&&dt(g,a),f}(g,l,a);if(d.components.push(v),s[8]=v,f&&f.forEach(C=>C(v,a)),a.contentQueries){const C=jn();a.contentQueries(1,v,C.directiveStart)}const E=jn();return!g.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(ks(E.index),bb(l[1],E,0,E.directiveStart,E.directiveEnd,a),Cb(a,v)),v}(ut,this.componentDef,De,q,[$b]),Tp(te,De,null)}finally{wa()}return new Xp(this.componentType,$e,Ln(Je,De),De,Je)}}class Xp extends class dn{}{constructor(a,l,d,f,g){super(),this.location=d,this._rootLView=f,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new ja(f),this.componentType=a}get injector(){return new Uo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class rd{}class eg{}const Ha=new Map;class q0 extends rd{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new tf(this);const d=$t(a);this._bootstrapComponents=Na(d.bootstrap),this._r3Injector=Ov(a,l,[{provide:rd,useValue:this},{provide:k_,useValue:this.componentFactoryResolver}],ue(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,l=Fa.THROW_IF_NOT_FOUND,d=wt.Default){return a===Fa||a===rd||a===Nv?this:this._r3Injector.get(a,l,d)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Un extends eg{constructor(a){super(),this.moduleType=a,null!==$t(a)&&function CA(s){const a=new Set;!function l(d){const f=$t(d,!0),g=f.id;null!==g&&(function lT(s,a,l){if(a&&a!==l)throw new Error(`Duplicate module registered for ${s} - ${ue(a)} vs ${ue(a.name)}`)}(g,Ha.get(g),d),Ha.set(g,d));const v=Na(f.imports);for(const E of v)a.has(E)||(a.add(E),l(E))}(s)}(a)}create(a){return new q0(this.moduleType,a)}}function tg(s,a,l){const d=fr()+s,f=Me();return f[d]===Ut?Pl(f,d,l?a.call(l):a()):function Ym(s,a){return s[a]}(f,d)}function R_(s,a,l,d){return function ci(s,a,l,d,f,g){const v=a+l;return Ui(s,v,f)?Pl(s,v+1,g?d.call(g,f):d(f)):Ou(s,v+1)}(Me(),fr(),s,a,l,d)}function Ou(s,a){const l=s[a];return l===Ut?void 0:l}function Vn(s,a,l,d,f,g,v){const E=a+l;return function jc(s,a,l,d){const f=Ui(s,a,l);return Ui(s,a+1,d)||f}(s,E,f,g)?Pl(s,E+2,v?d.call(v,f,g):d(f,g)):Ou(s,E+2)}function Z0(s,a){const l=zt();let d;const f=s+20;l.firstCreatePass?(d=function od(s,a){if(a)for(let l=a.length-1;l>=0;l--){const d=a[l];if(s===d.name)return d}}(a,l.pipeRegistry),l.data[f]=d,d.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(f,d.onDestroy)):d=l.data[f];const g=d.factory||(d.factory=Mi(d.type)),v=ln(kp);try{const E=bl(!1),C=g();return bl(E),function UD(s,a,l,d){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),a[l]=d}(l,Me(),f,C),C}finally{ln(v)}}function rf(s,a,l,d){const f=s+20,g=Me(),v=Ps(g,f);return sf(g,f)?Vn(g,fr(),a,v.transform,l,d,v):v.transform(l,d)}function z0(s,a,l){const d=s+20,f=Me(),g=Ps(f,d);return sf(f,d)?function dT(s,a,l,d,f,g){let v=a+l,E=!1;for(let C=0;C<f.length;C++)Ui(s,v++,f[C])&&(E=!0);return E?Pl(s,v,d.apply(g,f)):Ou(s,v)}(f,fr(),a,g.transform,l,g):g.transform.apply(g,l)}function sf(s,a){return s[1].data[a].pure}function W0(s){return a=>{setTimeout(s,void 0,a)}}const $a=class Ti extends u.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,d){var f,g,v;let E=a,C=l||(()=>null),A=d;if(a&&"object"==typeof a){const U=a;E=null===(f=U.next)||void 0===f?void 0:f.bind(U),C=null===(g=U.error)||void 0===g?void 0:g.bind(U),A=null===(v=U.complete)||void 0===v?void 0:v.bind(U)}this.__isAsync&&(C=W0(C),E&&(E=W0(E)),A&&(A=W0(A)));const P=super.subscribe({next:E,error:C,complete:A});return a instanceof j.w0&&a.add(P),P}};function DA(){return this._results[Cu()]()}class U_{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Cu(),d=U_.prototype;d[l]||(d[l]=DA)}get changes(){return this._changes||(this._changes=new $a)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const d=this;d.dirty=!1;const f=yi(a);(this._changesDetected=!function eh(s,a,l){if(s.length!==a.length)return!1;for(let d=0;d<s.length;d++){let f=s[d],g=a[d];if(l&&(f=l(f),g=l(g)),g!==f)return!1}return!0}(d._results,f,l))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let rg=(()=>{class s{}return s.__NG_ELEMENT_ID__=MA,s})();const AA=rg,xA=class extends AA{constructor(a,l,d){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(a){const l=this._declarationTContainer.tViews,d=Eu(this._declarationLView,l,a,16,null,l.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(d[19]=g.createEmbeddedView(l)),Tp(l,d,a),new ea(d)}};function MA(){return na(jn(),Me())}function na(s,a){return 4&s.type?new xA(a,s,Ln(s,a)):null}let Ul=(()=>{class s{}return s.__NG_ELEMENT_ID__=PA,s})();function PA(){return ad(jn(),Me())}const hT=Ul,K0=class extends hT{constructor(a,l,d){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=d}get element(){return Ln(this._hostTNode,this._hostLView)}get injector(){return new Uo(this._hostTNode,this._hostLView)}get parentInjector(){const a=lo(this._hostTNode,this._hostLView);if(ba(a)){const l=On(a,this._hostLView),d=ds(a);return new Uo(l[1].data[d+8],l)}return new Uo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=qa(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,d){const f=a.createEmbeddedView(l||{});return this.insert(f,d),f}createComponent(a,l,d,f,g){const v=a&&!function Ni(s){return"function"==typeof s}(a);let E;if(v)E=l;else{const U=l||{};E=U.index,d=U.injector,f=U.projectableNodes,g=U.ngModuleRef}const C=v?a:new Jp(ft(a)),A=d||this.parentInjector;if(!g&&null==C.ngModule){const q=(v?A:this.parentInjector).get(rd,null);q&&(g=q)}const P=C.create(A,f,void 0,g);return this.insert(P.hostView,E),P}insert(a,l){const d=a._lView,f=d[1];if(function rc(s){return Ai(s[3])}(d)){const P=this.indexOf(a);if(-1!==P)this.detach(P);else{const U=d[3],q=new K0(U,U[6],U[3]);q.detach(q.indexOf(a))}}const g=this._adjustIndex(l),v=this._lContainer;!function US(s,a,l,d){const f=10+d,g=l.length;d>0&&(l[f-1][4]=a),d<g-10?(a[4]=l[f],fo(l,10+d,a)):(l.push(a),a[4]=null),a[3]=l;const v=a[17];null!==v&&l!==v&&function VS(s,a){const l=s[9];a[16]!==a[3][3][16]&&(s[2]=!0),null===l?s[9]=[a]:l.push(a)}(v,a);const E=a[19];null!==E&&E.insertView(s),a[2]|=128}(f,d,v,g);const E=Sl(g,v),C=d[11],A=Tm(C,v[7]);return null!==A&&function yh(s,a,l,d,f,g){d[0]=f,d[6]=a,wh(s,d,l,1,f,g)}(f,v[6],C,d,A,E),a.attachToViewContainerRef(),fo(V_(v),g,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=qa(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),d=vo(this._lContainer,l);d&&($o(V_(this._lContainer),l),lv(d[1],d))}detach(a){const l=this._adjustIndex(a,-1),d=vo(this._lContainer,l);return d&&null!=$o(V_(this._lContainer),l)?new ea(d):null}_adjustIndex(a,l=0){return null==a?this.length+l:a}};function qa(s){return s[8]}function V_(s){return s[8]||(s[8]=[])}function ad(s,a){let l;const d=a[s.index];if(Ai(d))l=d;else{let f;if(8&s.type)f=En(d);else{const g=a[11];f=g.createComment("");const v=wr(s,a);Nc(g,Tm(g,v),f,function JE(s,a){return Cn(s)?s.nextSibling(a):a.nextSibling}(g,v),!1)}a[s.index]=l=Sv(d,a,f,s),Gm(a,l)}return new K0(l,s,a)}class ig{constructor(a){this.queryList=a,this.matches=null}clone(){return new ig(this.queryList)}setDirty(){this.queryList.setDirty()}}class Fu{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const d=null!==a.contentQueries?a.contentQueries[0]:l.length,f=[];for(let g=0;g<d;g++){const v=l.getByIndex(g);f.push(this.queries[v.indexInDeclarationView].clone())}return new Fu(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==Lu(a,l).matches&&this.queries[l].setDirty()}}class qs{constructor(a,l,d=null){this.predicate=a,this.flags=l,this.read=d}}class B_{constructor(a=[]){this.queries=a}elementStart(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let d=0;d<this.length;d++){const f=null!==l?l.length:0,g=this.getByIndex(d).embeddedTView(a,f);g&&(g.indexInDeclarationView=d,null!==l?l.push(g):l=[g])}return null!==l?new B_(l):null}template(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class ld{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new ld(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const g=d[f];this.matchTNodeWithReadOption(a,l,pT(l,g)),this.matchTNodeWithReadOption(a,l,hc(l,a,g,!1,!1))}else d===rg?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,hc(l,a,d,!1,!1))}matchTNodeWithReadOption(a,l,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Xo||f===Ul||f===rg&&4&l.type)this.addMatch(l.index,-2);else{const g=hc(l,a,f,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,d)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function pT(s,a){const l=s.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===a)return l[d+1];return null}function J0(s,a,l,d){return-1===l?function Q0(s,a){return 11&s.type?Ln(s,a):4&s.type?na(s,a):null}(a,s):-2===l?function gT(s,a,l){return l===Xo?Ln(a,s):l===rg?na(a,s):l===Ul?ad(a,s):void 0}(s,a,d):or(s,s[1],l,a)}function X0(s,a,l,d){const f=a[19].queries[d];if(null===f.matches){const g=s.data,v=l.matches,E=[];for(let C=0;C<v.length;C+=2){const A=v[C];E.push(A<0?null:J0(a,g[A],v[C+1],l.metadata.read))}f.matches=E}return f.matches}function ew(s,a,l,d){const f=s.queries.getByIndex(l),g=f.matches;if(null!==g){const v=X0(s,a,f,l);for(let E=0;E<g.length;E+=2){const C=g[E];if(C>0)d.push(v[E/2]);else{const A=g[E+1],P=a[-C];for(let U=10;U<P.length;U++){const q=P[U];q[17]===q[3]&&ew(q[1],q,A,d)}if(null!==P[9]){const U=P[9];for(let q=0;q<U.length;q++){const te=U[q];ew(te[1],te,A,d)}}}}}return d}function tw(s){const a=Me(),l=zt(),d=_l();lc(d+1);const f=Lu(l,d);if(s.dirty&&_a(a)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const g=f.crossesNgTemplate?ew(l,a,d,[]):X0(l,a,f,d);s.reset(g,j0),s.notifyOnChanges()}return!0}return!1}function nw(s,a,l,d){const f=zt();if(f.firstCreatePass){const g=jn();(function rw(s,a,l){null===s.queries&&(s.queries=new B_),s.queries.track(new ld(a,l))})(f,new qs(a,l,d),g.index),function af(s,a){const l=s.contentQueries||(s.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,a)}(f,s),2==(2&l)&&(f.staticContentQueries=!0)}!function _T(s,a,l){const d=new U_(4==(4&l));Vm(s,a,d,d.destroy),null===a[19]&&(a[19]=new Fu),a[19].queries.push(new ig(d))}(f,Me(),l)}function sg(){return function kA(s,a){return s[19].queries[a].queryList}(Me(),_l())}function Lu(s,a){return s.queries.getByIndex(a)}function iw(s,a){return na(s,a)}function xr(...s){}const uw=new Hn("Application Initializer");let dd=(()=>{class s{constructor(l){this.appInits=l,this.resolve=xr,this.reject=xr,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(u_(g))l.push(g);else if(rC(g)){const v=new Promise((E,C)=>{g.subscribe({complete:E,error:C})});l.push(v)}}Promise.all(l).then(()=>{d()}).catch(f=>{this.reject(f)}),0===l.length&&d(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(Ye(uw,8))},s.\u0275prov=an({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const ra=new Hn("AppId",{providedIn:"root",factory:function G_(){return`${hd()}${hd()}${hd()}`}});function hd(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const cw=new Hn("Platform Initializer"),DT=new Hn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),dw=new Hn("appBootstrapListener");let WA=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=an({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const hg=new Hn("LocaleId",{providedIn:"root",factory:()=>Mt(hg,wt.Optional|wt.SkipSelf)||function dg(){return"undefined"!=typeof $localize&&$localize.locale||Qc}()}),KA=new Hn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class XA{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let AT=(()=>{class s{compileModuleSync(l){return new Un(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),g=Na($t(l).declarations).reduce((v,E)=>{const C=ft(E);return C&&v.push(new Jp(C)),v},[]);return new XA(d,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=an({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const ff=(()=>Promise.resolve(0))();function Bu(s){"undefined"==typeof Zone?ff.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ia{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $a(!1),this.onMicrotaskEmpty=new $a(!1),this.onStable=new $a(!1),this.onError=new $a(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&l,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function tx(){let s=Zt.requestAnimationFrame,a=Zt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&a){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function rx(s){const a=()=>{!function ts(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Zt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,z_(s),s.isCheckStableRunning=!0,Z_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),z_(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,f,g,v,E)=>{try{return sa(s),l.invokeTask(f,g,v,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&a(),hw(s)}},onInvoke:(l,d,f,g,v,E,C)=>{try{return sa(s),l.invoke(f,g,v,E,C)}finally{s.shouldCoalesceRunChangeDetection&&a(),hw(s)}},onHasTask:(l,d,f,g)=>{l.hasTask(f,g),d===f&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,z_(s),Z_(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,d,f,g)=>(l.handleError(f,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ia.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ia.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,l,d){return this._inner.run(a,l,d)}runTask(a,l,d,f){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+f,a,nx,xr,xr);try{return g.runTask(v,l,d)}finally{g.cancelTask(v)}}runGuarded(a,l,d){return this._inner.runGuarded(a,l,d)}runOutsideAngular(a){return this._outer.run(a)}}const nx={};function Z_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function z_(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function sa(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function hw(s){s._nesting--,Z_(s)}class W_{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new $a,this.onMicrotaskEmpty=new $a,this.onStable=new $a,this.onError=new $a}run(a,l,d){return a.apply(l,d)}runGuarded(a,l,d){return a.apply(l,d)}runOutsideAngular(a){return a()}runTask(a,l,d,f){return a.apply(l,d)}}let fw=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ia.assertNotInAngularZone(),Bu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Bu(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,f){let g=-1;d&&d>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:f})}whenStable(l,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,d,f){return[]}}return s.\u0275fac=function(l){return new(l||s)(Ye(ia))},s.\u0275prov=an({token:s,factory:s.\u0275fac}),s})(),ix=(()=>{class s{constructor(){this._applications=new Map,pw.addToWindow(this)}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return pw.findTestabilityInTree(this,l,d)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=an({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class sx{addToWindow(a){}findTestabilityInTree(a,l,d){return null}}function ox(s){pw=s}let pw=new sx,fd=null;const xT=new Hn("AllowMultipleToken"),MT=new Hn("PlatformOnDestroy");class ux{constructor(a,l){this.name=a,this.token=l}}function PT(s,a,l=[]){const d=`Platform: ${a}`,f=new Hn(d);return(g=[])=>{let v=gw();if(!v||v.injector.get(xT,!1)){const E=[...l,...g,{provide:f,useValue:!0}];s?s(E):function cx(s){if(fd&&!fd.get(xT,!1))throw new Ue(400,"");fd=s;const a=s.get(mw),l=s.get(cw,null);l&&l.forEach(d=>d())}(function hx(s=[],a){return Fa.create({name:a,providers:[{provide:Rv,useValue:"platform"},{provide:MT,useValue:()=>fd=null},...s]})}(E,d))}return function dx(s){const a=gw();if(!a)throw new Ue(401,"");return a}()}}function gw(){var s;return null!==(s=null==fd?void 0:fd.get(mw))&&void 0!==s?s:null}let mw=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const E=function px(s,a){let l;return l="noop"===s?new W_:("zone.js"===s?void 0:s)||new ia({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),l}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),C=[{provide:ia,useValue:E}];return E.run(()=>{const A=Fa.create({providers:C,parent:this.injector,name:l.moduleType.name}),P=l.create(A),U=P.injector.get(Zr,null);if(!U)throw new Ue(402,"");return E.runOutsideAngular(()=>{const q=E.onError.subscribe({next:te=>{U.handleError(te)}});P.onDestroy(()=>{pf(this._modules,P),q.unsubscribe()})}),function NT(s,a,l){try{const d=l();return u_(d)?d.catch(f=>{throw a.runOutsideAngular(()=>s.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>s.handleError(d)),d}}(U,E,()=>{const q=P.injector.get(dd);return q.runInitializers(),q.donePromise.then(()=>(function aA(s){jt(s,"Expected localeId to be defined"),"string"==typeof s&&(Zh=s.toLowerCase().replace(/_/g,"-"))}(P.injector.get(hg,Qc)||Qc),this._moduleDoBootstrap(P),P))})})}bootstrapModule(l,d=[]){const f=_w({},d);return function ax(s,a,l){const d=new Un(l);return Promise.resolve(d)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(l){const d=l.injector.get(me);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new Ue(403,"");l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ue(404,"");this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const l=this._injector.get(MT,null);null==l||l(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(Ye(Fa))},s.\u0275prov=an({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function _w(s,a){return Array.isArray(a)?a.reduce(_w,s):Object.assign(Object.assign({},s),a)}let me=(()=>{class s{constructor(l,d,f,g){this._zone=l,this._injector=d,this._exceptionHandler=f,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new k.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),E=new k.y(C=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{ia.assertNotInAngularZone(),Bu(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const P=this._zone.onUnstable.subscribe(()=>{ia.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{A.unsubscribe(),P.unsubscribe()}});this.isStable=(0,ae.T)(v,E.pipe((0,le.B)()))}bootstrap(l,d){if(!this._initStatus.done)throw new Ue(405,"");let f;f=l instanceof iT?l:this._injector.get(k_).resolveComponentFactory(l),this.componentTypes.push(f.componentType);const g=function lx(s){return s.isBoundToModule}(f)?void 0:this._injector.get(rd),E=f.create(Fa.NULL,[],d||f.selector,g),C=E.location.nativeElement,A=E.injector.get(fw,null),P=A&&E.injector.get(ix);return A&&P&&P.registerApplication(C,A),E.onDestroy(()=>{this.detachView(E.hostView),pf(this.components,E),P&&P.unregisterApplication(C)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Ue(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;pf(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(dw,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(Ye(ia),Ye(Fa),Ye(Zr),Ye(dd))},s.\u0275prov=an({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function pf(s,a){const l=s.indexOf(a);l>-1&&s.splice(l,1)}let gf=!0,ju=!1;function mx(){return ju=!0,gf}function pd(){if(ju)throw new Error("Cannot enable prod mode after platform setup.");gf=!1}let di=(()=>{class s{}return s.__NG_ELEMENT_ID__=vw,s})();function vw(s){return function ww(s,a,l){if(zl(s)&&!l){const d=Er(s.index,a);return new ea(d,d)}return 47&s.type?new ea(a[16],a):null}(jn(),Me(),16==(16&s))}class OT{constructor(){}supports(a){return Mh(a)}create(a){return new Cx(a)}}const bx=(s,a)=>a;class Cx{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||bx}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,d=this._removalsHead,f=0,g=null;for(;l||d;){const v=!d||l&&l.currentIndex<Ew(d,f,g)?l:d,E=Ew(v,f,g),C=v.currentIndex;if(v===d)f--,d=d._nextRemoved;else if(l=l._next,null==v.previousIndex)f++;else{g||(g=[]);const A=E-f,P=C-f;if(A!=P){for(let q=0;q<A;q++){const te=q<g.length?g[q]:g[q]=0,De=te+q;P<=De&&De<A&&(g[q]=te+1)}g[v.previousIndex]=P-A}}E!==C&&a(v,E,C)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!Mh(a))throw new Ue(900,"");return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,v,l=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let E=0;E<this.length;E++)g=a[E],v=this._trackByFn(E,g),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,g,v,E)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,v,E),d=!0),l=l._next}else f=0,function Gv(s,a){if(Array.isArray(s))for(let l=0;l<s.length;l++)a(s[l]);else{const l=s[Cu()]();let d;for(;!(d=l.next()).done;)a(d.value)}}(a,E=>{v=this._trackByFn(f,E),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,E,v,f)),Object.is(l.item,E)||this._addIdentityChange(l,E)):(l=this._mismatch(l,E,v,f),d=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,d,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,g,f)):a=this._addAfter(new pg(l,d),g,f),a}_verifyReinsertion(a,l,d,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,l,d),this._addToMoves(a,d),a}_moveAfter(a,l,d){return this._unlink(a),this._insertAfter(a,l,d),this._addToMoves(a,d),a}_addAfter(a,l,d){return this._insertAfter(a,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,d){const f=null===l?this._itHead:l._next;return a._next=f,a._prev=l,null===f?this._itTail=a:f._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new $u),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,d=a._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $u),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class pg{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _d{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const l=a._prevDup,d=a._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class $u{constructor(){this.map=new Map}put(a){const l=a.trackById;let d=this.map.get(l);d||(d=new _d,this.map.set(l,d)),d.add(a)}get(a,l){const f=this.map.get(a);return f?f.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ew(s,a,l){const d=s.previousIndex;if(null===d)return d;let f=0;return l&&d<l.length&&(f=l[d]),d+a+f}class FT{constructor(){}supports(a){return a instanceof Map||Zv(a)}create(){return new Tx}}class Tx{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||Zv(a)))throw new Ue(900,"")}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(f,d);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const d=a._prev;return l._next=a,l._prev=d,a._prev=l,d&&(d._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,l);const g=f._prev,v=f._next;return g&&(g._next=v),v&&(v._prev=g),f._next=null,f._prev=null,f}const d=new bw(a);return this._records.set(a,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(d=>l(a[d],d))}}class bw{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function gg(){return new Cw([new OT])}let Cw=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(null!=d){const f=d.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||gg()),deps:[[s,new ti,new Ei]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(null!=d)return d;throw new Ue(901,"")}}return s.\u0275prov=an({token:s,providedIn:"root",factory:gg}),s})();function wf(){return new Ef([new FT])}let Ef=(()=>{class s{constructor(l){this.factories=l}static create(l,d){if(d){const f=d.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:d=>s.create(l,d||wf()),deps:[[s,new ti,new Ei]]}}find(l){const d=this.factories.find(g=>g.supports(l));if(d)return d;throw new Ue(901,"")}}return s.\u0275prov=an({token:s,providedIn:"root",factory:wf}),s})();const ny=PT(null,"core",[]);let Tw=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(Ye(me))},s.\u0275mod=ce({type:s}),s.\u0275inj=nn({}),s})()},3942:(ot,Te,F)=>{F.d(Te,{Z:()=>Ue});var u=F(2090),j=F(4859),k=F(9681),ae=F(1877);class le{constructor(_e,Ae){this._delegate=_e,this.firebase=Ae,(0,k._addComponent)(_e,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(_e,Ae=k._DEFAULT_ENTRY_NAME){var ze;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(_e);return!Ze.isInitialized()&&"EXPLICIT"===(null===(ze=Ze.getComponent())||void 0===ze?void 0:ze.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:Ae})}_removeServiceInstance(_e,Ae=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(Ae)}_addComponent(_e){(0,k._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,k._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Z=function ve(){const qe=function ue(qe){const _e={},Ae={__esModule:!0,initializeApp:function ke(re,pe={}){const Se=k.initializeApp(re,pe);if((0,u.r3)(_e,Se.name))return _e[Se.name];const Q=new qe(Se,Ae);return _e[Se.name]=Q,Q},app:Ze,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ie(re){const pe=re.name,Se=pe.replace("-compat","");if(k._registerComponent(re)&&"PUBLIC"===re.type){const Q=(ie=Ze())=>{if("function"!=typeof ie[Se])throw fe.create("invalid-app-argument",{appName:pe});return ie[Se]()};void 0!==re.serviceProps&&(0,u.ZB)(Q,re.serviceProps),Ae[Se]=Q,qe.prototype[Se]=function(...ie){return this._getService.bind(this,pe).apply(this,re.multipleInstances?ie:[])}}return"PUBLIC"===re.type?Ae[Se]:null},removeApp:function ze(re){delete _e[re]},useAsService:function Ke(re,pe){return"serverAuth"===pe?null:pe},modularAPIs:k}};function Ze(re){if(!(0,u.r3)(_e,re=re||k._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:re});return _e[re]}return Ae.default=Ae,Object.defineProperty(Ae,"apps",{get:function Re(){return Object.keys(_e).map(re=>_e[re])}}),Ze.App=qe,Ae}(le);return qe.INTERNAL=Object.assign(Object.assign({},qe.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function _e(Ae){(0,u.ZB)(qe,Ae)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),qe}(),$=new ae.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const qe=self.firebase.SDK_VERSION;qe&&qe.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ue=Z;!function Ne(qe){(0,k.registerVersion)("@firebase/app-compat","0.1.26",qe)}()},9681:(ot,Te,F)=>{F.r(Te),F.d(Te,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Ii,_DEFAULT_ENTRY_NAME:()=>jt,_addComponent:()=>yn,_addOrOverwriteComponent:()=>an,_apps:()=>_n,_clearComponents:()=>qi,_components:()=>$n,_getProvider:()=>nn,_registerComponent:()=>Ht,_removeServiceInstance:()=>Nn,deleteApp:()=>wt,getApp:()=>qn,getApps:()=>is,initializeApp:()=>Gi,onLog:()=>ln,registerVersion:()=>xn,setLogLevel:()=>Nr});var u=F(5861),j=F(4859),k=F(1877),ae=F(2090),le=F(8766);class ye{constructor(ee){this.container=ee}getPlatformInfoString(){return this.container.getProviders().map(Fe=>{if(function fe(G){const ee=G.getComponent();return"VERSION"===(null==ee?void 0:ee.type)}(Fe)){const it=Fe.getImmediate();return`${it.library}/${it.version}`}return null}).filter(Fe=>Fe).join(" ")}}const ue="@firebase/app",Z=new k.Yd("@firebase/app"),jt="[DEFAULT]",et={[ue]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},_n=new Map,$n=new Map;function yn(G,ee){try{G.container.addComponent(ee)}catch(Fe){Z.debug(`Component ${ee.name} failed to register with FirebaseApp ${G.name}`,Fe)}}function an(G,ee){G.container.addOrOverwriteComponent(ee)}function Ht(G){const ee=G.name;if($n.has(ee))return Z.debug(`There were multiple attempts to register component ${ee}.`),!1;$n.set(ee,G);for(const Fe of _n.values())yn(Fe,G);return!0}function nn(G,ee){const Fe=G.container.getProvider("heartbeat").getImmediate({optional:!0});return Fe&&Fe.triggerHeartbeat(),G.container.getProvider(ee)}function Nn(G,ee,Fe=jt){nn(G,ee).clearInstance(Fe)}function qi(){$n.clear()}const Rn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class rs{constructor(ee,Fe,it){this._isDeleted=!1,this._options=Object.assign({},ee),this._config=Object.assign({},Fe),this._name=Fe.name,this._automaticDataCollectionEnabled=Fe.automaticDataCollectionEnabled,this._container=it,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ee){this._isDeleted=ee}checkDestroyed(){if(this.isDeleted)throw Rn.create("app-deleted",{appName:this._name})}}const Ii="9.8.2";function Gi(G,ee={}){"object"!=typeof ee&&(ee={name:ee});const Fe=Object.assign({name:jt,automaticDataCollectionEnabled:!1},ee),it=Fe.name;if("string"!=typeof it||!it)throw Rn.create("bad-app-name",{appName:String(it)});const _t=_n.get(it);if(_t){if((0,ae.vZ)(G,_t.options)&&(0,ae.vZ)(Fe,_t.config))return _t;throw Rn.create("duplicate-app",{appName:it})}const Lt=new j.H0(it);for(const St of $n.values())Lt.addComponent(St);const pn=new rs(G,Fe,Lt);return _n.set(it,pn),pn}function qn(G=jt){const ee=_n.get(G);if(!ee)throw Rn.create("no-app",{appName:G});return ee}function is(){return Array.from(_n.values())}function wt(G){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,u.Z)(function*(G){const ee=G.name;_n.has(ee)&&(_n.delete(ee),yield Promise.all(G.container.getProviders().map(Fe=>Fe.delete())),G.isDeleted=!0)})).apply(this,arguments)}function xn(G,ee,Fe){var it;let _t=null!==(it=et[G])&&void 0!==it?it:G;Fe&&(_t+=`-${Fe}`);const Lt=_t.match(/\s|\//),pn=ee.match(/\s|\//);if(Lt||pn){const St=[`Unable to register library "${_t}" with version "${ee}":`];return Lt&&St.push(`library name "${_t}" contains illegal characters (whitespace or "/")`),Lt&&pn&&St.push("and"),pn&&St.push(`version name "${ee}" contains illegal characters (whitespace or "/")`),void Z.warn(St.join(" "))}Ht(new j.wA(`${_t}-version`,()=>({library:_t,version:ee}),"VERSION"))}function ln(G,ee){if(null!==G&&"function"!=typeof G)throw Rn.create("invalid-log-argument");(0,k.Am)(G,ee)}function Nr(G){(0,k.Ub)(G)}const Mn="firebase-heartbeat-store";let dr=null;function Cs(){return dr||(dr=(0,le.X3)("firebase-heartbeat-database",1,{upgrade:(G,ee)=>{0===ee&&G.createObjectStore(Mn)}}).catch(G=>{throw Rn.create("storage-open",{originalErrorMessage:G.message})})),dr}function pt(){return(pt=(0,u.Z)(function*(G){try{return(yield Cs()).transaction(Mn).objectStore(Mn).get(Di(G))}catch(ee){throw Rn.create("storage-get",{originalErrorMessage:ee.message})}})).apply(this,arguments)}function lt(G,ee){return Si.apply(this,arguments)}function Si(){return(Si=(0,u.Z)(function*(G,ee){try{const it=(yield Cs()).transaction(Mn,"readwrite");return yield it.objectStore(Mn).put(ee,Di(G)),it.done}catch(Fe){throw Rn.create("storage-set",{originalErrorMessage:Fe.message})}})).apply(this,arguments)}function Di(G){return`${G.name}!${G.options.appId}`}class Gn{constructor(ee){this.container=ee,this._heartbeatsCache=null;const Fe=this.container.getProvider("app").getImmediate();this._storage=new z(Fe),this._heartbeatsCachePromise=this._storage.read().then(it=>(this._heartbeatsCache=it,it))}triggerHeartbeat(){var ee=this;return(0,u.Z)(function*(){const it=ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),_t=vn();if(null===ee._heartbeatsCache&&(ee._heartbeatsCache=yield ee._heartbeatsCachePromise),ee._heartbeatsCache.lastSentHeartbeatDate!==_t&&!ee._heartbeatsCache.heartbeats.some(Lt=>Lt.date===_t))return ee._heartbeatsCache.heartbeats.push({date:_t,agent:it}),ee._heartbeatsCache.heartbeats=ee._heartbeatsCache.heartbeats.filter(Lt=>{const pn=new Date(Lt.date).valueOf();return Date.now()-pn<=2592e6}),ee._storage.overwrite(ee._heartbeatsCache)})()}getHeartbeatsHeader(){var ee=this;return(0,u.Z)(function*(){if(null===ee._heartbeatsCache&&(yield ee._heartbeatsCachePromise),null===ee._heartbeatsCache||0===ee._heartbeatsCache.heartbeats.length)return"";const Fe=vn(),{heartbeatsToSend:it,unsentEntries:_t}=function H(G,ee=1024){const Fe=[];let it=G.slice();for(const _t of G){const Lt=Fe.find(pn=>pn.agent===_t.agent);if(Lt){if(Lt.dates.push(_t.date),K(Fe)>ee){Lt.dates.pop();break}}else if(Fe.push({agent:_t.agent,dates:[_t.date]}),K(Fe)>ee){Fe.pop();break}it=it.slice(1)}return{heartbeatsToSend:Fe,unsentEntries:it}}(ee._heartbeatsCache.heartbeats),Lt=(0,ae.L)(JSON.stringify({version:2,heartbeats:it}));return ee._heartbeatsCache.lastSentHeartbeatDate=Fe,_t.length>0?(ee._heartbeatsCache.heartbeats=_t,yield ee._storage.overwrite(ee._heartbeatsCache)):(ee._heartbeatsCache.heartbeats=[],ee._storage.overwrite(ee._heartbeatsCache)),Lt})()}}function vn(){return(new Date).toISOString().substring(0,10)}class z{constructor(ee){this.app=ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ee=this;return(0,u.Z)(function*(){return(yield ee._canUseIndexedDBPromise)&&(yield function Gt(G){return pt.apply(this,arguments)}(ee.app))||{heartbeats:[]}})()}overwrite(ee){var Fe=this;return(0,u.Z)(function*(){var it;if(yield Fe._canUseIndexedDBPromise){const Lt=yield Fe.read();return lt(Fe.app,{lastSentHeartbeatDate:null!==(it=ee.lastSentHeartbeatDate)&&void 0!==it?it:Lt.lastSentHeartbeatDate,heartbeats:ee.heartbeats})}})()}add(ee){var Fe=this;return(0,u.Z)(function*(){var it;if(yield Fe._canUseIndexedDBPromise){const Lt=yield Fe.read();return lt(Fe.app,{lastSentHeartbeatDate:null!==(it=ee.lastSentHeartbeatDate)&&void 0!==it?it:Lt.lastSentHeartbeatDate,heartbeats:[...Lt.heartbeats,...ee.heartbeats]})}})()}}function K(G){return(0,ae.L)(JSON.stringify({version:2,heartbeats:G})).length}!function Ce(G){Ht(new j.wA("platform-logger",ee=>new ye(ee),"PRIVATE")),Ht(new j.wA("heartbeat",ee=>new Gn(ee),"PRIVATE")),xn(ue,"0.7.25",G),xn(ue,"0.7.25","esm2017"),xn("fire-js","")}("")},4859:(ot,Te,F)=>{F.d(Te,{H0:()=>ue,wA:()=>k,zt:()=>le});var u=F(5861),j=F(2090);class k{constructor(Z,$,se){this.name=Z,this.instanceFactory=$,this.type=se,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Z){return this.instantiationMode=Z,this}setMultipleInstances(Z){return this.multipleInstances=Z,this}setServiceProps(Z){return this.serviceProps=Z,this}setInstanceCreatedCallback(Z){return this.onInstanceCreated=Z,this}}const ae="[DEFAULT]";class le{constructor(Z,$){this.name=Z,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Z){const $=this.normalizeInstanceIdentifier(Z);if(!this.instancesDeferred.has($)){const se=new j.BH;if(this.instancesDeferred.set($,se),this.isInitialized($)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:$});We&&se.resolve(We)}catch(We){}}return this.instancesDeferred.get($).promise}getImmediate(Z){var $;const se=this.normalizeInstanceIdentifier(null==Z?void 0:Z.identifier),We=null!==($=null==Z?void 0:Z.optional)&&void 0!==$&&$;if(!this.isInitialized(se)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:se})}catch(Ne){if(We)return null;throw Ne}}getComponent(){return this.component}setComponent(Z){if(Z.name!==this.name)throw Error(`Mismatching Component ${Z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Z,this.shouldAutoInitialize()){if(function fe(ve){return"EAGER"===ve.instantiationMode}(Z))try{this.getOrInitializeService({instanceIdentifier:ae})}catch($){}for(const[$,se]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier($);try{const Ne=this.getOrInitializeService({instanceIdentifier:We});se.resolve(Ne)}catch(Ne){}}}}clearInstance(Z=ae){this.instancesDeferred.delete(Z),this.instancesOptions.delete(Z),this.instances.delete(Z)}delete(){var Z=this;return(0,u.Z)(function*(){const $=Array.from(Z.instances.values());yield Promise.all([...$.filter(se=>"INTERNAL"in se).map(se=>se.INTERNAL.delete()),...$.filter(se=>"_delete"in se).map(se=>se._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Z=ae){return this.instances.has(Z)}getOptions(Z=ae){return this.instancesOptions.get(Z)||{}}initialize(Z={}){const{options:$={}}=Z,se=this.normalizeInstanceIdentifier(Z.instanceIdentifier);if(this.isInitialized(se))throw Error(`${this.name}(${se}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:se,options:$});for(const[Ne,Ue]of this.instancesDeferred.entries())se===this.normalizeInstanceIdentifier(Ne)&&Ue.resolve(We);return We}onInit(Z,$){var se;const We=this.normalizeInstanceIdentifier($),Ne=null!==(se=this.onInitCallbacks.get(We))&&void 0!==se?se:new Set;Ne.add(Z),this.onInitCallbacks.set(We,Ne);const Ue=this.instances.get(We);return Ue&&Z(Ue,We),()=>{Ne.delete(Z)}}invokeOnInitCallbacks(Z,$){const se=this.onInitCallbacks.get($);if(se)for(const We of se)try{We(Z,$)}catch(Ne){}}getOrInitializeService({instanceIdentifier:Z,options:$={}}){let se=this.instances.get(Z);if(!se&&this.component&&(se=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=Z,ve===ae?void 0:ve),options:$}),this.instances.set(Z,se),this.instancesOptions.set(Z,$),this.invokeOnInitCallbacks(se,Z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Z,se)}catch(We){}var ve;return se||null}normalizeInstanceIdentifier(Z=ae){return this.component?this.component.multipleInstances?Z:ae:Z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(Z){this.name=Z,this.providers=new Map}addComponent(Z){const $=this.getProvider(Z.name);if($.isComponentSet())throw new Error(`Component ${Z.name} has already been registered with ${this.name}`);$.setComponent(Z)}addOrOverwriteComponent(Z){this.getProvider(Z.name).isComponentSet()&&this.providers.delete(Z.name),this.addComponent(Z)}getProvider(Z){if(this.providers.has(Z))return this.providers.get(Z);const $=new le(Z,this);return this.providers.set(Z,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(ot,Te,F)=>{F.d(Te,{Am:()=>ve,Ub:()=>ue,Yd:()=>fe,in:()=>j});const u=[];var j=(()=>{return(Z=j||(j={}))[Z.DEBUG=0]="DEBUG",Z[Z.VERBOSE=1]="VERBOSE",Z[Z.INFO=2]="INFO",Z[Z.WARN=3]="WARN",Z[Z.ERROR=4]="ERROR",Z[Z.SILENT=5]="SILENT",j;var Z})();const k={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},ae=j.INFO,le={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},ye=(Z,$,...se)=>{if($<Z.logLevel)return;const We=(new Date).toISOString(),Ne=le[$];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Ne](`[${We}]  ${Z.name}:`,...se)};class fe{constructor($){this.name=$,this._logLevel=ae,this._logHandler=ye,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in j))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?k[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...$),this._logHandler(this,j.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...$),this._logHandler(this,j.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,j.INFO,...$),this._logHandler(this,j.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,j.WARN,...$),this._logHandler(this,j.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...$),this._logHandler(this,j.ERROR,...$)}}function ue(Z){u.forEach($=>{$.setLogLevel(Z)})}function ve(Z,$){for(const se of u){let We=null;$&&$.level&&(We=k[$.level]),se.userLogHandler=null===Z?null:(Ne,Ue,...qe)=>{const _e=qe.map(Ae=>{if(null==Ae)return null;if("string"==typeof Ae)return Ae;if("number"==typeof Ae||"boolean"==typeof Ae)return Ae.toString();if(Ae instanceof Error)return Ae.message;try{return JSON.stringify(Ae)}catch(ze){return null}}).filter(Ae=>Ae).join(" ");Ue>=(null!=We?We:Ne.logLevel)&&Z({level:j[Ue].toLowerCase(),message:_e,args:qe,type:Ne.name})}}}},8766:(ot,Te,F)=>{F.d(Te,{Lj:()=>ke,X3:()=>Ze});var u=F(5861);let k,ae;const fe=new WeakMap,ue=new WeakMap,ve=new WeakMap,Z=new WeakMap,$=new WeakMap;let Ne={get(pe,Se,Q){if(pe instanceof IDBTransaction){if("done"===Se)return ue.get(pe);if("objectStoreNames"===Se)return pe.objectStoreNames||ve.get(pe);if("store"===Se)return Q.objectStoreNames[1]?void 0:Q.objectStore(Q.objectStoreNames[0])}return Ae(pe[Se])},set:(pe,Se,Q)=>(pe[Se]=Q,!0),has:(pe,Se)=>pe instanceof IDBTransaction&&("done"===Se||"store"===Se)||Se in pe};function _e(pe){return"function"==typeof pe?function qe(pe){return pe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(pe)?function(...Se){return pe.apply(ze(this),Se),Ae(fe.get(this))}:function(...Se){return Ae(pe.apply(ze(this),Se))}:function(Se,...Q){const ie=pe.call(ze(this),Se,...Q);return ve.set(ie,Se.sort?Se.sort():[Se]),Ae(ie)}}(pe):(pe instanceof IDBTransaction&&function We(pe){if(ue.has(pe))return;const Se=new Promise((Q,ie)=>{const oe=()=>{pe.removeEventListener("complete",Ee),pe.removeEventListener("error",he),pe.removeEventListener("abort",he)},Ee=()=>{Q(),oe()},he=()=>{ie(pe.error||new DOMException("AbortError","AbortError")),oe()};pe.addEventListener("complete",Ee),pe.addEventListener("error",he),pe.addEventListener("abort",he)});ue.set(pe,Se)}(pe),((pe,Se)=>Se.some(Q=>pe instanceof Q))(pe,function le(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(pe,Ne):pe)}function Ae(pe){if(pe instanceof IDBRequest)return function se(pe){const Se=new Promise((Q,ie)=>{const oe=()=>{pe.removeEventListener("success",Ee),pe.removeEventListener("error",he)},Ee=()=>{Q(Ae(pe.result)),oe()},he=()=>{ie(pe.error),oe()};pe.addEventListener("success",Ee),pe.addEventListener("error",he)});return Se.then(Q=>{Q instanceof IDBCursor&&fe.set(Q,pe)}).catch(()=>{}),$.set(Se,pe),Se}(pe);if(Z.has(pe))return Z.get(pe);const Se=_e(pe);return Se!==pe&&(Z.set(pe,Se),$.set(Se,pe)),Se}const ze=pe=>$.get(pe);function Ze(pe,Se,{blocked:Q,upgrade:ie,blocking:oe,terminated:Ee}={}){const he=indexedDB.open(pe,Se),Ve=Ae(he);return ie&&he.addEventListener("upgradeneeded",mt=>{ie(Ae(he.result),mt.oldVersion,mt.newVersion,Ae(he.transaction))}),Q&&he.addEventListener("blocked",()=>Q()),Ve.then(mt=>{Ee&&mt.addEventListener("close",()=>Ee()),oe&&mt.addEventListener("versionchange",()=>oe())}).catch(()=>{}),Ve}function ke(pe,{blocked:Se}={}){const Q=indexedDB.deleteDatabase(pe);return Se&&Q.addEventListener("blocked",()=>Se()),Ae(Q).then(()=>{})}const Re=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Ke=new Map;function re(pe,Se){if(!(pe instanceof IDBDatabase)||Se in pe||"string"!=typeof Se)return;if(Ke.get(Se))return Ke.get(Se);const Q=Se.replace(/FromIndex$/,""),ie=Se!==Q,oe=Ie.includes(Q);if(!(Q in(ie?IDBIndex:IDBObjectStore).prototype)||!oe&&!Re.includes(Q))return;const Ee=function(){var he=(0,u.Z)(function*(Ve,...mt){const tn=this.transaction(Ve,oe?"readwrite":"readonly");let jt=tn.store;return ie&&(jt=jt.index(mt.shift())),(yield Promise.all([jt[Q](...mt),oe&&tn.done]))[0]});return function(mt){return he.apply(this,arguments)}}();return Ke.set(Se,Ee),Ee}!function Ue(pe){Ne=pe(Ne)}(pe=>pU(fU({},pe),{get:(Se,Q,ie)=>re(Se,Q)||pe.get(Se,Q,ie),has:(Se,Q)=>!!re(Se,Q)||pe.has(Se,Q)}))},5861:(ot,Te,F)=>{function u(k,ae,le,ye,fe,ue,ve){try{var Z=k[ue](ve),$=Z.value}catch(se){return void le(se)}Z.done?ae($):Promise.resolve($).then(ye,fe)}function j(k){return function(){var ae=this,le=arguments;return new Promise(function(ye,fe){var ue=k.apply(ae,le);function ve($){u(ue,ye,fe,ve,Z,"next",$)}function Z($){u(ue,ye,fe,ve,Z,"throw",$)}ve(void 0)})}}F.d(Te,{Z:()=>j})}},ot=>{ot(ot.s=655)}]);